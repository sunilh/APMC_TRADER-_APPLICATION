var nD=Object.defineProperty;var rw=e=>{throw TypeError(e)};var rD=(e,t,n)=>t in e?nD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var xe=(e,t,n)=>rD(e,typeof t!="symbol"?t+"":t,n),Nv=(e,t,n)=>t.has(e)||rw("Cannot "+n);var fe=(e,t,n)=>(Nv(e,t,"read from private field"),n?n.call(e):t.get(e)),Ct=(e,t,n)=>t.has(e)?rw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),mt=(e,t,n,r)=>(Nv(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ht=(e,t,n)=>(Nv(e,t,"access private method"),n);var Rp=(e,t,n,r)=>({set _(i){mt(e,t,i,n)},get _(){return fe(e,t,r)}});function sD(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var FQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eC(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tC={exports:{}},zx={},nC={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m=Symbol.for("react.element"),iD=Symbol.for("react.portal"),aD=Symbol.for("react.fragment"),oD=Symbol.for("react.strict_mode"),lD=Symbol.for("react.profiler"),cD=Symbol.for("react.provider"),dD=Symbol.for("react.context"),uD=Symbol.for("react.forward_ref"),fD=Symbol.for("react.suspense"),hD=Symbol.for("react.memo"),mD=Symbol.for("react.lazy"),sw=Symbol.iterator;function pD(e){return e===null||typeof e!="object"?null:(e=sw&&e[sw]||e["@@iterator"],typeof e=="function"?e:null)}var rC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sC=Object.assign,iC={};function Ju(e,t,n){this.props=e,this.context=t,this.refs=iC,this.updater=n||rC}Ju.prototype.isReactComponent={};Ju.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ju.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aC(){}aC.prototype=Ju.prototype;function S2(e,t,n){this.props=e,this.context=t,this.refs=iC,this.updater=n||rC}var _2=S2.prototype=new aC;_2.constructor=S2;sC(_2,Ju.prototype);_2.isPureReactComponent=!0;var iw=Array.isArray,oC=Object.prototype.hasOwnProperty,C2={current:null},lC={key:!0,ref:!0,__self:!0,__source:!0};function cC(e,t,n){var r,i={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)oC.call(t,r)&&!lC.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:_m,type:e,key:a,ref:o,props:i,_owner:C2.current}}function gD(e,t){return{$$typeof:_m,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function A2(e){return typeof e=="object"&&e!==null&&e.$$typeof===_m}function xD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var aw=/\/+/g;function jv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?xD(""+e.key):t.toString(36)}function pg(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _m:case iD:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+jv(o,0):r,iw(i)?(n="",e!=null&&(n=e.replace(aw,"$&/")+"/"),pg(i,t,n,"",function(d){return d})):i!=null&&(A2(i)&&(i=gD(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(aw,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",iw(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+jv(a,l);o+=pg(a,t,n,c,i)}else if(c=pD(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+jv(a,l++),o+=pg(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Op(e,t,n){if(e==null)return e;var r=[],i=0;return pg(e,r,"","",function(a){return t.call(n,a,i++)}),r}function vD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ps={current:null},gg={transition:null},yD={ReactCurrentDispatcher:Ps,ReactCurrentBatchConfig:gg,ReactCurrentOwner:C2};function dC(){throw Error("act(...) is not supported in production builds of React.")}Kt.Children={map:Op,forEach:function(e,t,n){Op(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Op(e,function(){t++}),t},toArray:function(e){return Op(e,function(t){return t})||[]},only:function(e){if(!A2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Kt.Component=Ju;Kt.Fragment=aD;Kt.Profiler=lD;Kt.PureComponent=S2;Kt.StrictMode=oD;Kt.Suspense=fD;Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yD;Kt.act=dC;Kt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sC({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=C2.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)oC.call(t,c)&&!lC.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:_m,type:e.type,key:i,ref:a,props:r,_owner:o}};Kt.createContext=function(e){return e={$$typeof:dD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cD,_context:e},e.Consumer=e};Kt.createElement=cC;Kt.createFactory=function(e){var t=cC.bind(null,e);return t.type=e,t};Kt.createRef=function(){return{current:null}};Kt.forwardRef=function(e){return{$$typeof:uD,render:e}};Kt.isValidElement=A2;Kt.lazy=function(e){return{$$typeof:mD,_payload:{_status:-1,_result:e},_init:vD}};Kt.memo=function(e,t){return{$$typeof:hD,type:e,compare:t===void 0?null:t}};Kt.startTransition=function(e){var t=gg.transition;gg.transition={};try{e()}finally{gg.transition=t}};Kt.unstable_act=dC;Kt.useCallback=function(e,t){return Ps.current.useCallback(e,t)};Kt.useContext=function(e){return Ps.current.useContext(e)};Kt.useDebugValue=function(){};Kt.useDeferredValue=function(e){return Ps.current.useDeferredValue(e)};Kt.useEffect=function(e,t){return Ps.current.useEffect(e,t)};Kt.useId=function(){return Ps.current.useId()};Kt.useImperativeHandle=function(e,t,n){return Ps.current.useImperativeHandle(e,t,n)};Kt.useInsertionEffect=function(e,t){return Ps.current.useInsertionEffect(e,t)};Kt.useLayoutEffect=function(e,t){return Ps.current.useLayoutEffect(e,t)};Kt.useMemo=function(e,t){return Ps.current.useMemo(e,t)};Kt.useReducer=function(e,t,n){return Ps.current.useReducer(e,t,n)};Kt.useRef=function(e){return Ps.current.useRef(e)};Kt.useState=function(e){return Ps.current.useState(e)};Kt.useSyncExternalStore=function(e,t,n){return Ps.current.useSyncExternalStore(e,t,n)};Kt.useTransition=function(){return Ps.current.useTransition()};Kt.version="18.3.1";nC.exports=Kt;var N=nC.exports;const qt=eC(N),uC=sD({__proto__:null,default:qt},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bD=N,wD=Symbol.for("react.element"),ND=Symbol.for("react.fragment"),jD=Object.prototype.hasOwnProperty,SD=bD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_D={key:!0,ref:!0,__self:!0,__source:!0};function fC(e,t,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)jD.call(t,r)&&!_D.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:wD,type:e,key:a,ref:o,props:i,_owner:SD.current}}zx.Fragment=ND;zx.jsx=fC;zx.jsxs=fC;tC.exports=zx;var s=tC.exports,hC={exports:{}},pi={},mC={exports:{}},pC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,X){var le=H.length;H.push(X);e:for(;0<le;){var Ce=le-1>>>1,F=H[Ce];if(0<i(F,X))H[Ce]=X,H[le]=F,le=Ce;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var X=H[0],le=H.pop();if(le!==X){H[0]=le;e:for(var Ce=0,F=H.length,J=F>>>1;Ce<J;){var re=2*(Ce+1)-1,Q=H[re],ie=re+1,B=H[ie];if(0>i(Q,le))ie<F&&0>i(B,Q)?(H[Ce]=B,H[ie]=le,Ce=ie):(H[Ce]=Q,H[re]=le,Ce=re);else if(ie<F&&0>i(B,le))H[Ce]=B,H[ie]=le,Ce=ie;else break e}}return X}function i(H,X){var le=H.sortIndex-X.sortIndex;return le!==0?le:H.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,h=null,g=3,m=!1,S=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=H)r(d),X.sortIndex=X.expirationTime,t(c,X);else break;X=n(d)}}function k(H){if(y=!1,_(H),!S)if(n(c)!==null)S=!0,z(M);else{var X=n(d);X!==null&&q(k,X.startTime-H)}}function M(H,X){S=!1,y&&(y=!1,v(T),T=-1),m=!0;var le=g;try{for(_(X),h=n(c);h!==null&&(!(h.expirationTime>X)||H&&!C());){var Ce=h.callback;if(typeof Ce=="function"){h.callback=null,g=h.priorityLevel;var F=Ce(h.expirationTime<=X);X=e.unstable_now(),typeof F=="function"?h.callback=F:h===n(c)&&r(c),_(X)}else r(c);h=n(c)}if(h!==null)var J=!0;else{var re=n(d);re!==null&&q(k,re.startTime-X),J=!1}return J}finally{h=null,g=le,m=!1}}var L=!1,O=null,T=-1,E=5,Z=-1;function C(){return!(e.unstable_now()-Z<E)}function P(){if(O!==null){var H=e.unstable_now();Z=H;var X=!0;try{X=O(!0,H)}finally{X?G():(L=!1,O=null)}}else L=!1}var G;if(typeof x=="function")G=function(){x(P)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,V=I.port2;I.port1.onmessage=P,G=function(){V.postMessage(null)}}else G=function(){j(P,0)};function z(H){O=H,L||(L=!0,G())}function q(H,X){T=j(function(){H(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){S||m||(S=!0,z(M))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(H){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var le=g;g=X;try{return H()}finally{g=le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,X){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var le=g;g=H;try{return X()}finally{g=le}},e.unstable_scheduleCallback=function(H,X,le){var Ce=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Ce+le:Ce):le=Ce,H){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=le+F,H={id:f++,callback:X,priorityLevel:H,startTime:le,expirationTime:F,sortIndex:-1},le>Ce?(H.sortIndex=le,t(d,H),n(c)===null&&H===n(d)&&(y?(v(T),T=-1):y=!0,q(k,le-Ce))):(H.sortIndex=F,t(c,H),S||m||(S=!0,z(M))),H},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(H){var X=g;return function(){var le=g;g=X;try{return H.apply(this,arguments)}finally{g=le}}}})(pC);mC.exports=pC;var CD=mC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AD=N,hi=CD;function Qe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gC=new Set,Fh={};function id(e,t){Ou(e,t),Ou(e+"Capture",t)}function Ou(e,t){for(Fh[e]=t,e=0;e<t.length;e++)gC.add(t[e])}var To=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C1=Object.prototype.hasOwnProperty,kD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ow={},lw={};function PD(e){return C1.call(lw,e)?!0:C1.call(ow,e)?!1:kD.test(e)?lw[e]=!0:(ow[e]=!0,!1)}function TD(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function LD(e,t,n,r){if(t===null||typeof t>"u"||TD(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ts(e,t,n,r,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Gr[e]=new Ts(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Gr[t]=new Ts(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Gr[e]=new Ts(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Gr[e]=new Ts(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Gr[e]=new Ts(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Gr[e]=new Ts(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Gr[e]=new Ts(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Gr[e]=new Ts(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Gr[e]=new Ts(e,5,!1,e.toLowerCase(),null,!1,!1)});var k2=/[\-:]([a-z])/g;function P2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(k2,P2);Gr[t]=new Ts(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(k2,P2);Gr[t]=new Ts(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(k2,P2);Gr[t]=new Ts(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Gr[e]=new Ts(e,1,!1,e.toLowerCase(),null,!1,!1)});Gr.xlinkHref=new Ts("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Gr[e]=new Ts(e,1,!1,e.toLowerCase(),null,!0,!0)});function T2(e,t,n,r){var i=Gr.hasOwnProperty(t)?Gr[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(LD(t,n,i,r)&&(n=null),r||i===null?PD(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ro=AD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bp=Symbol.for("react.element"),Zd=Symbol.for("react.portal"),Xd=Symbol.for("react.fragment"),L2=Symbol.for("react.strict_mode"),A1=Symbol.for("react.profiler"),xC=Symbol.for("react.provider"),vC=Symbol.for("react.context"),E2=Symbol.for("react.forward_ref"),k1=Symbol.for("react.suspense"),P1=Symbol.for("react.suspense_list"),I2=Symbol.for("react.memo"),dl=Symbol.for("react.lazy"),yC=Symbol.for("react.offscreen"),cw=Symbol.iterator;function Uf(e){return e===null||typeof e!="object"?null:(e=cw&&e[cw]||e["@@iterator"],typeof e=="function"?e:null)}var Gn=Object.assign,Sv;function ih(e){if(Sv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Sv=t&&t[1]||""}return`
`+Sv+e}var _v=!1;function Cv(e,t){if(!e||_v)return"";_v=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{_v=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ih(e):""}function ED(e){switch(e.tag){case 5:return ih(e.type);case 16:return ih("Lazy");case 13:return ih("Suspense");case 19:return ih("SuspenseList");case 0:case 2:case 15:return e=Cv(e.type,!1),e;case 11:return e=Cv(e.type.render,!1),e;case 1:return e=Cv(e.type,!0),e;default:return""}}function T1(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xd:return"Fragment";case Zd:return"Portal";case A1:return"Profiler";case L2:return"StrictMode";case k1:return"Suspense";case P1:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vC:return(e.displayName||"Context")+".Consumer";case xC:return(e._context.displayName||"Context")+".Provider";case E2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I2:return t=e.displayName||null,t!==null?t:T1(e.type)||"Memo";case dl:t=e._payload,e=e._init;try{return T1(e(t))}catch{}}return null}function ID(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T1(t);case 8:return t===L2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function DD(e){var t=bC(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zp(e){e._valueTracker||(e._valueTracker=DD(e))}function wC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=bC(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Og(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function L1(e,t){var n=t.checked;return Gn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function dw(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Rl(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function NC(e,t){t=t.checked,t!=null&&T2(e,"checked",t,!1)}function E1(e,t){NC(e,t);var n=Rl(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?I1(e,t.type,n):t.hasOwnProperty("defaultValue")&&I1(e,t.type,Rl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uw(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function I1(e,t,n){(t!=="number"||Og(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ah=Array.isArray;function uu(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Rl(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function D1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Qe(91));return Gn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fw(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Qe(92));if(ah(n)){if(1<n.length)throw Error(Qe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Rl(n)}}function jC(e,t){var n=Rl(t.value),r=Rl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function hw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function SC(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?SC(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $p,_C=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($p=$p||document.createElement("div"),$p.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$p.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FD=["Webkit","ms","Moz","O"];Object.keys(ph).forEach(function(e){FD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ph[t]=ph[e]})});function CC(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ph.hasOwnProperty(e)&&ph[e]?(""+t).trim():t+"px"}function AC(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=CC(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var MD=Gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function M1(e,t){if(t){if(MD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Qe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Qe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Qe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Qe(62))}}function R1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var O1=null;function D2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var B1=null,fu=null,hu=null;function mw(e){if(e=km(e)){if(typeof B1!="function")throw Error(Qe(280));var t=e.stateNode;t&&(t=Wx(t),B1(e.stateNode,e.type,t))}}function kC(e){fu?hu?hu.push(e):hu=[e]:fu=e}function PC(){if(fu){var e=fu,t=hu;if(hu=fu=null,mw(e),t)for(e=0;e<t.length;e++)mw(t[e])}}function TC(e,t){return e(t)}function LC(){}var Av=!1;function EC(e,t,n){if(Av)return e(t,n);Av=!0;try{return TC(e,t,n)}finally{Av=!1,(fu!==null||hu!==null)&&(LC(),PC())}}function Rh(e,t){var n=e.stateNode;if(n===null)return null;var r=Wx(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Qe(231,t,typeof n));return n}var z1=!1;if(To)try{var Vf={};Object.defineProperty(Vf,"passive",{get:function(){z1=!0}}),window.addEventListener("test",Vf,Vf),window.removeEventListener("test",Vf,Vf)}catch{z1=!1}function RD(e,t,n,r,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(f){this.onError(f)}}var gh=!1,Bg=null,zg=!1,$1=null,OD={onError:function(e){gh=!0,Bg=e}};function BD(e,t,n,r,i,a,o,l,c){gh=!1,Bg=null,RD.apply(OD,arguments)}function zD(e,t,n,r,i,a,o,l,c){if(BD.apply(this,arguments),gh){if(gh){var d=Bg;gh=!1,Bg=null}else throw Error(Qe(198));zg||(zg=!0,$1=d)}}function ad(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function IC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pw(e){if(ad(e)!==e)throw Error(Qe(188))}function $D(e){var t=e.alternate;if(!t){if(t=ad(e),t===null)throw Error(Qe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return pw(i),e;if(a===r)return pw(i),t;a=a.sibling}throw Error(Qe(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(Qe(189))}}if(n.alternate!==r)throw Error(Qe(190))}if(n.tag!==3)throw Error(Qe(188));return n.stateNode.current===n?e:t}function DC(e){return e=$D(e),e!==null?FC(e):null}function FC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=FC(e);if(t!==null)return t;e=e.sibling}return null}var MC=hi.unstable_scheduleCallback,gw=hi.unstable_cancelCallback,qD=hi.unstable_shouldYield,UD=hi.unstable_requestPaint,dr=hi.unstable_now,VD=hi.unstable_getCurrentPriorityLevel,F2=hi.unstable_ImmediatePriority,RC=hi.unstable_UserBlockingPriority,$g=hi.unstable_NormalPriority,WD=hi.unstable_LowPriority,OC=hi.unstable_IdlePriority,$x=null,qa=null;function HD(e){if(qa&&typeof qa.onCommitFiberRoot=="function")try{qa.onCommitFiberRoot($x,e,void 0,(e.current.flags&128)===128)}catch{}}var da=Math.clz32?Math.clz32:QD,GD=Math.log,KD=Math.LN2;function QD(e){return e>>>=0,e===0?32:31-(GD(e)/KD|0)|0}var qp=64,Up=4194304;function oh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qg(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=oh(l):(a&=o,a!==0&&(r=oh(a)))}else o=n&~i,o!==0?r=oh(o):a!==0&&(r=oh(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-da(t),i=1<<n,r|=e[n],t&=~i;return r}function YD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZD(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-da(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=YD(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function q1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function BC(){var e=qp;return qp<<=1,!(qp&4194240)&&(qp=64),e}function kv(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Cm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-da(t),e[t]=n}function XD(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-da(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function M2(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-da(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yn=0;function zC(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $C,R2,qC,UC,VC,U1=!1,Vp=[],kl=null,Pl=null,Tl=null,Oh=new Map,Bh=new Map,fl=[],JD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xw(e,t){switch(e){case"focusin":case"focusout":kl=null;break;case"dragenter":case"dragleave":Pl=null;break;case"mouseover":case"mouseout":Tl=null;break;case"pointerover":case"pointerout":Oh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bh.delete(t.pointerId)}}function Wf(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=km(t),t!==null&&R2(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function eF(e,t,n,r,i){switch(t){case"focusin":return kl=Wf(kl,e,t,n,r,i),!0;case"dragenter":return Pl=Wf(Pl,e,t,n,r,i),!0;case"mouseover":return Tl=Wf(Tl,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Oh.set(a,Wf(Oh.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Bh.set(a,Wf(Bh.get(a)||null,e,t,n,r,i)),!0}return!1}function WC(e){var t=jc(e.target);if(t!==null){var n=ad(t);if(n!==null){if(t=n.tag,t===13){if(t=IC(n),t!==null){e.blockedOn=t,VC(e.priority,function(){qC(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=V1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);O1=r,n.target.dispatchEvent(r),O1=null}else return t=km(n),t!==null&&R2(t),e.blockedOn=n,!1;t.shift()}return!0}function vw(e,t,n){xg(e)&&n.delete(t)}function tF(){U1=!1,kl!==null&&xg(kl)&&(kl=null),Pl!==null&&xg(Pl)&&(Pl=null),Tl!==null&&xg(Tl)&&(Tl=null),Oh.forEach(vw),Bh.forEach(vw)}function Hf(e,t){e.blockedOn===t&&(e.blockedOn=null,U1||(U1=!0,hi.unstable_scheduleCallback(hi.unstable_NormalPriority,tF)))}function zh(e){function t(i){return Hf(i,e)}if(0<Vp.length){Hf(Vp[0],e);for(var n=1;n<Vp.length;n++){var r=Vp[n];r.blockedOn===e&&(r.blockedOn=null)}}for(kl!==null&&Hf(kl,e),Pl!==null&&Hf(Pl,e),Tl!==null&&Hf(Tl,e),Oh.forEach(t),Bh.forEach(t),n=0;n<fl.length;n++)r=fl[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<fl.length&&(n=fl[0],n.blockedOn===null);)WC(n),n.blockedOn===null&&fl.shift()}var mu=Ro.ReactCurrentBatchConfig,Ug=!0;function nF(e,t,n,r){var i=yn,a=mu.transition;mu.transition=null;try{yn=1,O2(e,t,n,r)}finally{yn=i,mu.transition=a}}function rF(e,t,n,r){var i=yn,a=mu.transition;mu.transition=null;try{yn=4,O2(e,t,n,r)}finally{yn=i,mu.transition=a}}function O2(e,t,n,r){if(Ug){var i=V1(e,t,n,r);if(i===null)Ov(e,t,r,Vg,n),xw(e,r);else if(eF(i,e,t,n,r))r.stopPropagation();else if(xw(e,r),t&4&&-1<JD.indexOf(e)){for(;i!==null;){var a=km(i);if(a!==null&&$C(a),a=V1(e,t,n,r),a===null&&Ov(e,t,r,Vg,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Ov(e,t,r,null,n)}}var Vg=null;function V1(e,t,n,r){if(Vg=null,e=D2(r),e=jc(e),e!==null)if(t=ad(e),t===null)e=null;else if(n=t.tag,n===13){if(e=IC(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vg=e,null}function HC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VD()){case F2:return 1;case RC:return 4;case $g:case WD:return 16;case OC:return 536870912;default:return 16}default:return 16}}var _l=null,B2=null,vg=null;function GC(){if(vg)return vg;var e,t=B2,n=t.length,r,i="value"in _l?_l.value:_l.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[a-r];r++);return vg=i.slice(e,1<r?1-r:void 0)}function yg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wp(){return!0}function yw(){return!1}function gi(e){function t(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Wp:yw,this.isPropagationStopped=yw,this}return Gn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Wp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Wp)},persist:function(){},isPersistent:Wp}),t}var ef={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z2=gi(ef),Am=Gn({},ef,{view:0,detail:0}),sF=gi(Am),Pv,Tv,Gf,qx=Gn({},Am,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gf&&(Gf&&e.type==="mousemove"?(Pv=e.screenX-Gf.screenX,Tv=e.screenY-Gf.screenY):Tv=Pv=0,Gf=e),Pv)},movementY:function(e){return"movementY"in e?e.movementY:Tv}}),bw=gi(qx),iF=Gn({},qx,{dataTransfer:0}),aF=gi(iF),oF=Gn({},Am,{relatedTarget:0}),Lv=gi(oF),lF=Gn({},ef,{animationName:0,elapsedTime:0,pseudoElement:0}),cF=gi(lF),dF=Gn({},ef,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uF=gi(dF),fF=Gn({},ef,{data:0}),ww=gi(fF),hF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pF[e])?!!t[e]:!1}function $2(){return gF}var xF=Gn({},Am,{key:function(e){if(e.key){var t=hF[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mF[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$2,charCode:function(e){return e.type==="keypress"?yg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vF=gi(xF),yF=Gn({},qx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nw=gi(yF),bF=Gn({},Am,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$2}),wF=gi(bF),NF=Gn({},ef,{propertyName:0,elapsedTime:0,pseudoElement:0}),jF=gi(NF),SF=Gn({},qx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_F=gi(SF),CF=[9,13,27,32],q2=To&&"CompositionEvent"in window,xh=null;To&&"documentMode"in document&&(xh=document.documentMode);var AF=To&&"TextEvent"in window&&!xh,KC=To&&(!q2||xh&&8<xh&&11>=xh),jw=" ",Sw=!1;function QC(e,t){switch(e){case"keyup":return CF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jd=!1;function kF(e,t){switch(e){case"compositionend":return YC(t);case"keypress":return t.which!==32?null:(Sw=!0,jw);case"textInput":return e=t.data,e===jw&&Sw?null:e;default:return null}}function PF(e,t){if(Jd)return e==="compositionend"||!q2&&QC(e,t)?(e=GC(),vg=B2=_l=null,Jd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return KC&&t.locale!=="ko"?null:t.data;default:return null}}var TF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _w(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!TF[e.type]:t==="textarea"}function ZC(e,t,n,r){kC(r),t=Wg(t,"onChange"),0<t.length&&(n=new z2("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var vh=null,$h=null;function LF(e){l6(e,0)}function Ux(e){var t=nu(e);if(wC(t))return e}function EF(e,t){if(e==="change")return t}var XC=!1;if(To){var Ev;if(To){var Iv="oninput"in document;if(!Iv){var Cw=document.createElement("div");Cw.setAttribute("oninput","return;"),Iv=typeof Cw.oninput=="function"}Ev=Iv}else Ev=!1;XC=Ev&&(!document.documentMode||9<document.documentMode)}function Aw(){vh&&(vh.detachEvent("onpropertychange",JC),$h=vh=null)}function JC(e){if(e.propertyName==="value"&&Ux($h)){var t=[];ZC(t,$h,e,D2(e)),EC(LF,t)}}function IF(e,t,n){e==="focusin"?(Aw(),vh=t,$h=n,vh.attachEvent("onpropertychange",JC)):e==="focusout"&&Aw()}function DF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ux($h)}function FF(e,t){if(e==="click")return Ux(t)}function MF(e,t){if(e==="input"||e==="change")return Ux(t)}function RF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ha=typeof Object.is=="function"?Object.is:RF;function qh(e,t){if(ha(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!C1.call(t,i)||!ha(e[i],t[i]))return!1}return!0}function kw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pw(e,t){var n=kw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kw(n)}}function e6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?e6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function t6(){for(var e=window,t=Og();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Og(e.document)}return t}function U2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function OF(e){var t=t6(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&e6(n.ownerDocument.documentElement,n)){if(r!==null&&U2(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=Pw(n,a);var o=Pw(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BF=To&&"documentMode"in document&&11>=document.documentMode,eu=null,W1=null,yh=null,H1=!1;function Tw(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;H1||eu==null||eu!==Og(r)||(r=eu,"selectionStart"in r&&U2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yh&&qh(yh,r)||(yh=r,r=Wg(W1,"onSelect"),0<r.length&&(t=new z2("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=eu)))}function Hp(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var tu={animationend:Hp("Animation","AnimationEnd"),animationiteration:Hp("Animation","AnimationIteration"),animationstart:Hp("Animation","AnimationStart"),transitionend:Hp("Transition","TransitionEnd")},Dv={},n6={};To&&(n6=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function Vx(e){if(Dv[e])return Dv[e];if(!tu[e])return e;var t=tu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in n6)return Dv[e]=t[n];return e}var r6=Vx("animationend"),s6=Vx("animationiteration"),i6=Vx("animationstart"),a6=Vx("transitionend"),o6=new Map,Lw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xl(e,t){o6.set(e,t),id(t,[e])}for(var Fv=0;Fv<Lw.length;Fv++){var Mv=Lw[Fv],zF=Mv.toLowerCase(),$F=Mv[0].toUpperCase()+Mv.slice(1);Xl(zF,"on"+$F)}Xl(r6,"onAnimationEnd");Xl(s6,"onAnimationIteration");Xl(i6,"onAnimationStart");Xl("dblclick","onDoubleClick");Xl("focusin","onFocus");Xl("focusout","onBlur");Xl(a6,"onTransitionEnd");Ou("onMouseEnter",["mouseout","mouseover"]);Ou("onMouseLeave",["mouseout","mouseover"]);Ou("onPointerEnter",["pointerout","pointerover"]);Ou("onPointerLeave",["pointerout","pointerover"]);id("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));id("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));id("onBeforeInput",["compositionend","keypress","textInput","paste"]);id("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));id("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));id("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qF=new Set("cancel close invalid load scroll toggle".split(" ").concat(lh));function Ew(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,zD(r,t,void 0,e),e.currentTarget=null}function l6(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;Ew(i,l,d),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;Ew(i,l,d),a=c}}}if(zg)throw e=$1,zg=!1,$1=null,e}function En(e,t){var n=t[Z1];n===void 0&&(n=t[Z1]=new Set);var r=e+"__bubble";n.has(r)||(c6(t,e,2,!1),n.add(r))}function Rv(e,t,n){var r=0;t&&(r|=4),c6(n,e,r,t)}var Gp="_reactListening"+Math.random().toString(36).slice(2);function Uh(e){if(!e[Gp]){e[Gp]=!0,gC.forEach(function(n){n!=="selectionchange"&&(qF.has(n)||Rv(n,!1,e),Rv(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gp]||(t[Gp]=!0,Rv("selectionchange",!1,t))}}function c6(e,t,n,r){switch(HC(t)){case 1:var i=nF;break;case 4:i=rF;break;default:i=O2}n=i.bind(null,t,n,e),i=void 0,!z1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ov(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=jc(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}EC(function(){var d=a,f=D2(n),h=[];e:{var g=o6.get(e);if(g!==void 0){var m=z2,S=e;switch(e){case"keypress":if(yg(n)===0)break e;case"keydown":case"keyup":m=vF;break;case"focusin":S="focus",m=Lv;break;case"focusout":S="blur",m=Lv;break;case"beforeblur":case"afterblur":m=Lv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=bw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=aF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=wF;break;case r6:case s6:case i6:m=cF;break;case a6:m=jF;break;case"scroll":m=sF;break;case"wheel":m=_F;break;case"copy":case"cut":case"paste":m=uF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Nw}var y=(t&4)!==0,j=!y&&e==="scroll",v=y?g!==null?g+"Capture":null:g;y=[];for(var x=d,_;x!==null;){_=x;var k=_.stateNode;if(_.tag===5&&k!==null&&(_=k,v!==null&&(k=Rh(x,v),k!=null&&y.push(Vh(x,k,_)))),j)break;x=x.return}0<y.length&&(g=new m(g,S,null,n,f),h.push({event:g,listeners:y}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",g&&n!==O1&&(S=n.relatedTarget||n.fromElement)&&(jc(S)||S[Lo]))break e;if((m||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,m?(S=n.relatedTarget||n.toElement,m=d,S=S?jc(S):null,S!==null&&(j=ad(S),S!==j||S.tag!==5&&S.tag!==6)&&(S=null)):(m=null,S=d),m!==S)){if(y=bw,k="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=Nw,k="onPointerLeave",v="onPointerEnter",x="pointer"),j=m==null?g:nu(m),_=S==null?g:nu(S),g=new y(k,x+"leave",m,n,f),g.target=j,g.relatedTarget=_,k=null,jc(f)===d&&(y=new y(v,x+"enter",S,n,f),y.target=_,y.relatedTarget=j,k=y),j=k,m&&S)t:{for(y=m,v=S,x=0,_=y;_;_=zd(_))x++;for(_=0,k=v;k;k=zd(k))_++;for(;0<x-_;)y=zd(y),x--;for(;0<_-x;)v=zd(v),_--;for(;x--;){if(y===v||v!==null&&y===v.alternate)break t;y=zd(y),v=zd(v)}y=null}else y=null;m!==null&&Iw(h,g,m,y,!1),S!==null&&j!==null&&Iw(h,j,S,y,!0)}}e:{if(g=d?nu(d):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var M=EF;else if(_w(g))if(XC)M=MF;else{M=DF;var L=IF}else(m=g.nodeName)&&m.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=FF);if(M&&(M=M(e,d))){ZC(h,M,n,f);break e}L&&L(e,g,d),e==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&I1(g,"number",g.value)}switch(L=d?nu(d):window,e){case"focusin":(_w(L)||L.contentEditable==="true")&&(eu=L,W1=d,yh=null);break;case"focusout":yh=W1=eu=null;break;case"mousedown":H1=!0;break;case"contextmenu":case"mouseup":case"dragend":H1=!1,Tw(h,n,f);break;case"selectionchange":if(BF)break;case"keydown":case"keyup":Tw(h,n,f)}var O;if(q2)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Jd?QC(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(KC&&n.locale!=="ko"&&(Jd||T!=="onCompositionStart"?T==="onCompositionEnd"&&Jd&&(O=GC()):(_l=f,B2="value"in _l?_l.value:_l.textContent,Jd=!0)),L=Wg(d,T),0<L.length&&(T=new ww(T,e,null,n,f),h.push({event:T,listeners:L}),O?T.data=O:(O=YC(n),O!==null&&(T.data=O)))),(O=AF?kF(e,n):PF(e,n))&&(d=Wg(d,"onBeforeInput"),0<d.length&&(f=new ww("onBeforeInput","beforeinput",null,n,f),h.push({event:f,listeners:d}),f.data=O))}l6(h,t)})}function Vh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wg(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Rh(e,n),a!=null&&r.unshift(Vh(e,a,i)),a=Rh(e,t),a!=null&&r.push(Vh(e,a,i))),e=e.return}return r}function zd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Iw(e,t,n,r,i){for(var a=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=Rh(n,a),c!=null&&o.unshift(Vh(n,c,l))):i||(c=Rh(n,a),c!=null&&o.push(Vh(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var UF=/\r\n?/g,VF=/\u0000|\uFFFD/g;function Dw(e){return(typeof e=="string"?e:""+e).replace(UF,`
`).replace(VF,"")}function Kp(e,t,n){if(t=Dw(t),Dw(e)!==t&&n)throw Error(Qe(425))}function Hg(){}var G1=null,K1=null;function Q1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Y1=typeof setTimeout=="function"?setTimeout:void 0,WF=typeof clearTimeout=="function"?clearTimeout:void 0,Fw=typeof Promise=="function"?Promise:void 0,HF=typeof queueMicrotask=="function"?queueMicrotask:typeof Fw<"u"?function(e){return Fw.resolve(null).then(e).catch(GF)}:Y1;function GF(e){setTimeout(function(){throw e})}function Bv(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),zh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);zh(t)}function Ll(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Mw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var tf=Math.random().toString(36).slice(2),Oa="__reactFiber$"+tf,Wh="__reactProps$"+tf,Lo="__reactContainer$"+tf,Z1="__reactEvents$"+tf,KF="__reactListeners$"+tf,QF="__reactHandles$"+tf;function jc(e){var t=e[Oa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Lo]||n[Oa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Mw(e);e!==null;){if(n=e[Oa])return n;e=Mw(e)}return t}e=n,n=e.parentNode}return null}function km(e){return e=e[Oa]||e[Lo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Qe(33))}function Wx(e){return e[Wh]||null}var X1=[],ru=-1;function Jl(e){return{current:e}}function Dn(e){0>ru||(e.current=X1[ru],X1[ru]=null,ru--)}function Pn(e,t){ru++,X1[ru]=e.current,e.current=t}var Ol={},us=Jl(Ol),Gs=Jl(!1),Vc=Ol;function Bu(e,t){var n=e.type.contextTypes;if(!n)return Ol;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ks(e){return e=e.childContextTypes,e!=null}function Gg(){Dn(Gs),Dn(us)}function Rw(e,t,n){if(us.current!==Ol)throw Error(Qe(168));Pn(us,t),Pn(Gs,n)}function d6(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Qe(108,ID(e)||"Unknown",i));return Gn({},n,r)}function Kg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ol,Vc=us.current,Pn(us,e),Pn(Gs,Gs.current),!0}function Ow(e,t,n){var r=e.stateNode;if(!r)throw Error(Qe(169));n?(e=d6(e,t,Vc),r.__reactInternalMemoizedMergedChildContext=e,Dn(Gs),Dn(us),Pn(us,e)):Dn(Gs),Pn(Gs,n)}var wo=null,Hx=!1,zv=!1;function u6(e){wo===null?wo=[e]:wo.push(e)}function YF(e){Hx=!0,u6(e)}function ec(){if(!zv&&wo!==null){zv=!0;var e=0,t=yn;try{var n=wo;for(yn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wo=null,Hx=!1}catch(i){throw wo!==null&&(wo=wo.slice(e+1)),MC(F2,ec),i}finally{yn=t,zv=!1}}return null}var su=[],iu=0,Qg=null,Yg=0,Ti=[],Li=0,Wc=null,So=1,_o="";function vc(e,t){su[iu++]=Yg,su[iu++]=Qg,Qg=e,Yg=t}function f6(e,t,n){Ti[Li++]=So,Ti[Li++]=_o,Ti[Li++]=Wc,Wc=e;var r=So;e=_o;var i=32-da(r)-1;r&=~(1<<i),n+=1;var a=32-da(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,So=1<<32-da(t)+i|n<<i|r,_o=a+e}else So=1<<a|n<<i|r,_o=e}function V2(e){e.return!==null&&(vc(e,1),f6(e,1,0))}function W2(e){for(;e===Qg;)Qg=su[--iu],su[iu]=null,Yg=su[--iu],su[iu]=null;for(;e===Wc;)Wc=Ti[--Li],Ti[Li]=null,_o=Ti[--Li],Ti[Li]=null,So=Ti[--Li],Ti[Li]=null}var di=null,li=null,Rn=!1,ia=null;function h6(e,t){var n=Ii(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,di=e,li=Ll(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,di=e,li=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Wc!==null?{id:So,overflow:_o}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ii(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,di=e,li=null,!0):!1;default:return!1}}function J1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ey(e){if(Rn){var t=li;if(t){var n=t;if(!Bw(e,t)){if(J1(e))throw Error(Qe(418));t=Ll(n.nextSibling);var r=di;t&&Bw(e,t)?h6(r,n):(e.flags=e.flags&-4097|2,Rn=!1,di=e)}}else{if(J1(e))throw Error(Qe(418));e.flags=e.flags&-4097|2,Rn=!1,di=e}}}function zw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;di=e}function Qp(e){if(e!==di)return!1;if(!Rn)return zw(e),Rn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Q1(e.type,e.memoizedProps)),t&&(t=li)){if(J1(e))throw m6(),Error(Qe(418));for(;t;)h6(e,t),t=Ll(t.nextSibling)}if(zw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Qe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){li=Ll(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}li=null}}else li=di?Ll(e.stateNode.nextSibling):null;return!0}function m6(){for(var e=li;e;)e=Ll(e.nextSibling)}function zu(){li=di=null,Rn=!1}function H2(e){ia===null?ia=[e]:ia.push(e)}var ZF=Ro.ReactCurrentBatchConfig;function Kf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Qe(309));var r=n.stateNode}if(!r)throw Error(Qe(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Qe(284));if(!n._owner)throw Error(Qe(290,e))}return e}function Yp(e,t){throw e=Object.prototype.toString.call(t),Error(Qe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $w(e){var t=e._init;return t(e._payload)}function p6(e){function t(v,x){if(e){var _=v.deletions;_===null?(v.deletions=[x],v.flags|=16):_.push(x)}}function n(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=Fl(v,x),v.index=0,v.sibling=null,v}function a(v,x,_){return v.index=_,e?(_=v.alternate,_!==null?(_=_.index,_<x?(v.flags|=2,x):_):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,x,_,k){return x===null||x.tag!==6?(x=Gv(_,v.mode,k),x.return=v,x):(x=i(x,_),x.return=v,x)}function c(v,x,_,k){var M=_.type;return M===Xd?f(v,x,_.props.children,k,_.key):x!==null&&(x.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===dl&&$w(M)===x.type)?(k=i(x,_.props),k.ref=Kf(v,x,_),k.return=v,k):(k=Cg(_.type,_.key,_.props,null,v.mode,k),k.ref=Kf(v,x,_),k.return=v,k)}function d(v,x,_,k){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=Kv(_,v.mode,k),x.return=v,x):(x=i(x,_.children||[]),x.return=v,x)}function f(v,x,_,k,M){return x===null||x.tag!==7?(x=Mc(_,v.mode,k,M),x.return=v,x):(x=i(x,_),x.return=v,x)}function h(v,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Gv(""+x,v.mode,_),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Bp:return _=Cg(x.type,x.key,x.props,null,v.mode,_),_.ref=Kf(v,null,x),_.return=v,_;case Zd:return x=Kv(x,v.mode,_),x.return=v,x;case dl:var k=x._init;return h(v,k(x._payload),_)}if(ah(x)||Uf(x))return x=Mc(x,v.mode,_,null),x.return=v,x;Yp(v,x)}return null}function g(v,x,_,k){var M=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return M!==null?null:l(v,x,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Bp:return _.key===M?c(v,x,_,k):null;case Zd:return _.key===M?d(v,x,_,k):null;case dl:return M=_._init,g(v,x,M(_._payload),k)}if(ah(_)||Uf(_))return M!==null?null:f(v,x,_,k,null);Yp(v,_)}return null}function m(v,x,_,k,M){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(_)||null,l(x,v,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Bp:return v=v.get(k.key===null?_:k.key)||null,c(x,v,k,M);case Zd:return v=v.get(k.key===null?_:k.key)||null,d(x,v,k,M);case dl:var L=k._init;return m(v,x,_,L(k._payload),M)}if(ah(k)||Uf(k))return v=v.get(_)||null,f(x,v,k,M,null);Yp(x,k)}return null}function S(v,x,_,k){for(var M=null,L=null,O=x,T=x=0,E=null;O!==null&&T<_.length;T++){O.index>T?(E=O,O=null):E=O.sibling;var Z=g(v,O,_[T],k);if(Z===null){O===null&&(O=E);break}e&&O&&Z.alternate===null&&t(v,O),x=a(Z,x,T),L===null?M=Z:L.sibling=Z,L=Z,O=E}if(T===_.length)return n(v,O),Rn&&vc(v,T),M;if(O===null){for(;T<_.length;T++)O=h(v,_[T],k),O!==null&&(x=a(O,x,T),L===null?M=O:L.sibling=O,L=O);return Rn&&vc(v,T),M}for(O=r(v,O);T<_.length;T++)E=m(O,v,T,_[T],k),E!==null&&(e&&E.alternate!==null&&O.delete(E.key===null?T:E.key),x=a(E,x,T),L===null?M=E:L.sibling=E,L=E);return e&&O.forEach(function(C){return t(v,C)}),Rn&&vc(v,T),M}function y(v,x,_,k){var M=Uf(_);if(typeof M!="function")throw Error(Qe(150));if(_=M.call(_),_==null)throw Error(Qe(151));for(var L=M=null,O=x,T=x=0,E=null,Z=_.next();O!==null&&!Z.done;T++,Z=_.next()){O.index>T?(E=O,O=null):E=O.sibling;var C=g(v,O,Z.value,k);if(C===null){O===null&&(O=E);break}e&&O&&C.alternate===null&&t(v,O),x=a(C,x,T),L===null?M=C:L.sibling=C,L=C,O=E}if(Z.done)return n(v,O),Rn&&vc(v,T),M;if(O===null){for(;!Z.done;T++,Z=_.next())Z=h(v,Z.value,k),Z!==null&&(x=a(Z,x,T),L===null?M=Z:L.sibling=Z,L=Z);return Rn&&vc(v,T),M}for(O=r(v,O);!Z.done;T++,Z=_.next())Z=m(O,v,T,Z.value,k),Z!==null&&(e&&Z.alternate!==null&&O.delete(Z.key===null?T:Z.key),x=a(Z,x,T),L===null?M=Z:L.sibling=Z,L=Z);return e&&O.forEach(function(P){return t(v,P)}),Rn&&vc(v,T),M}function j(v,x,_,k){if(typeof _=="object"&&_!==null&&_.type===Xd&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Bp:e:{for(var M=_.key,L=x;L!==null;){if(L.key===M){if(M=_.type,M===Xd){if(L.tag===7){n(v,L.sibling),x=i(L,_.props.children),x.return=v,v=x;break e}}else if(L.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===dl&&$w(M)===L.type){n(v,L.sibling),x=i(L,_.props),x.ref=Kf(v,L,_),x.return=v,v=x;break e}n(v,L);break}else t(v,L);L=L.sibling}_.type===Xd?(x=Mc(_.props.children,v.mode,k,_.key),x.return=v,v=x):(k=Cg(_.type,_.key,_.props,null,v.mode,k),k.ref=Kf(v,x,_),k.return=v,v=k)}return o(v);case Zd:e:{for(L=_.key;x!==null;){if(x.key===L)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){n(v,x.sibling),x=i(x,_.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else t(v,x);x=x.sibling}x=Kv(_,v.mode,k),x.return=v,v=x}return o(v);case dl:return L=_._init,j(v,x,L(_._payload),k)}if(ah(_))return S(v,x,_,k);if(Uf(_))return y(v,x,_,k);Yp(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(n(v,x.sibling),x=i(x,_),x.return=v,v=x):(n(v,x),x=Gv(_,v.mode,k),x.return=v,v=x),o(v)):n(v,x)}return j}var $u=p6(!0),g6=p6(!1),Zg=Jl(null),Xg=null,au=null,G2=null;function K2(){G2=au=Xg=null}function Q2(e){var t=Zg.current;Dn(Zg),e._currentValue=t}function ty(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function pu(e,t){Xg=e,G2=au=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Hs=!0),e.firstContext=null)}function Ri(e){var t=e._currentValue;if(G2!==e)if(e={context:e,memoizedValue:t,next:null},au===null){if(Xg===null)throw Error(Qe(308));au=e,Xg.dependencies={lanes:0,firstContext:e}}else au=au.next=e;return t}var Sc=null;function Y2(e){Sc===null?Sc=[e]:Sc.push(e)}function x6(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Y2(t)):(n.next=i.next,i.next=n),t.interleaved=n,Eo(e,r)}function Eo(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ul=!1;function Z2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function v6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Co(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function El(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,sn&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Eo(e,n)}return i=r.interleaved,i===null?(t.next=t,Y2(r)):(t.next=i.next,i.next=t),r.interleaved=t,Eo(e,n)}function bg(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,M2(e,n)}}function qw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Jg(e,t,n,r){var i=e.updateQueue;ul=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,f=d=c=null,l=a;do{var g=l.lane,m=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var S=e,y=l;switch(g=t,m=n,y.tag){case 1:if(S=y.payload,typeof S=="function"){h=S.call(m,h,g);break e}h=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=y.payload,g=typeof S=="function"?S.call(m,h,g):S,g==null)break e;h=Gn({},h,g);break e;case 2:ul=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else m={eventTime:m,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=m,c=h):f=f.next=m,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(f===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Gc|=o,e.lanes=o,e.memoizedState=h}}function Uw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Qe(191,i));i.call(r)}}}var Pm={},Ua=Jl(Pm),Hh=Jl(Pm),Gh=Jl(Pm);function _c(e){if(e===Pm)throw Error(Qe(174));return e}function X2(e,t){switch(Pn(Gh,t),Pn(Hh,e),Pn(Ua,Pm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:F1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=F1(t,e)}Dn(Ua),Pn(Ua,t)}function qu(){Dn(Ua),Dn(Hh),Dn(Gh)}function y6(e){_c(Gh.current);var t=_c(Ua.current),n=F1(t,e.type);t!==n&&(Pn(Hh,e),Pn(Ua,n))}function J2(e){Hh.current===e&&(Dn(Ua),Dn(Hh))}var Un=Jl(0);function ex(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $v=[];function eb(){for(var e=0;e<$v.length;e++)$v[e]._workInProgressVersionPrimary=null;$v.length=0}var wg=Ro.ReactCurrentDispatcher,qv=Ro.ReactCurrentBatchConfig,Hc=0,Vn=null,_r=null,Dr=null,tx=!1,bh=!1,Kh=0,XF=0;function Xr(){throw Error(Qe(321))}function tb(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ha(e[n],t[n]))return!1;return!0}function nb(e,t,n,r,i,a){if(Hc=a,Vn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wg.current=e===null||e.memoizedState===null?nM:rM,e=n(r,i),bh){a=0;do{if(bh=!1,Kh=0,25<=a)throw Error(Qe(301));a+=1,Dr=_r=null,t.updateQueue=null,wg.current=sM,e=n(r,i)}while(bh)}if(wg.current=nx,t=_r!==null&&_r.next!==null,Hc=0,Dr=_r=Vn=null,tx=!1,t)throw Error(Qe(300));return e}function rb(){var e=Kh!==0;return Kh=0,e}function Ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dr===null?Vn.memoizedState=Dr=e:Dr=Dr.next=e,Dr}function Oi(){if(_r===null){var e=Vn.alternate;e=e!==null?e.memoizedState:null}else e=_r.next;var t=Dr===null?Vn.memoizedState:Dr.next;if(t!==null)Dr=t,_r=e;else{if(e===null)throw Error(Qe(310));_r=e,e={memoizedState:_r.memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},Dr===null?Vn.memoizedState=Dr=e:Dr=Dr.next=e}return Dr}function Qh(e,t){return typeof t=="function"?t(e):t}function Uv(e){var t=Oi(),n=t.queue;if(n===null)throw Error(Qe(311));n.lastRenderedReducer=e;var r=_r,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,c=null,d=a;do{var f=d.lane;if((Hc&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,Vn.lanes|=f,Gc|=f}d=d.next}while(d!==null&&d!==a);c===null?o=r:c.next=l,ha(r,t.memoizedState)||(Hs=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,Vn.lanes|=a,Gc|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Vv(e){var t=Oi(),n=t.queue;if(n===null)throw Error(Qe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);ha(a,t.memoizedState)||(Hs=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function b6(){}function w6(e,t){var n=Vn,r=Oi(),i=t(),a=!ha(r.memoizedState,i);if(a&&(r.memoizedState=i,Hs=!0),r=r.queue,sb(S6.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Dr!==null&&Dr.memoizedState.tag&1){if(n.flags|=2048,Yh(9,j6.bind(null,n,r,i,t),void 0,null),Fr===null)throw Error(Qe(349));Hc&30||N6(n,t,i)}return i}function N6(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Vn.updateQueue,t===null?(t={lastEffect:null,stores:null},Vn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function j6(e,t,n,r){t.value=n,t.getSnapshot=r,_6(t)&&C6(e)}function S6(e,t,n){return n(function(){_6(t)&&C6(e)})}function _6(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ha(e,n)}catch{return!0}}function C6(e){var t=Eo(e,1);t!==null&&ua(t,e,1,-1)}function Vw(e){var t=Ia();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qh,lastRenderedState:e},t.queue=e,e=e.dispatch=tM.bind(null,Vn,e),[t.memoizedState,e]}function Yh(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Vn.updateQueue,t===null?(t={lastEffect:null,stores:null},Vn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function A6(){return Oi().memoizedState}function Ng(e,t,n,r){var i=Ia();Vn.flags|=e,i.memoizedState=Yh(1|t,n,void 0,r===void 0?null:r)}function Gx(e,t,n,r){var i=Oi();r=r===void 0?null:r;var a=void 0;if(_r!==null){var o=_r.memoizedState;if(a=o.destroy,r!==null&&tb(r,o.deps)){i.memoizedState=Yh(t,n,a,r);return}}Vn.flags|=e,i.memoizedState=Yh(1|t,n,a,r)}function Ww(e,t){return Ng(8390656,8,e,t)}function sb(e,t){return Gx(2048,8,e,t)}function k6(e,t){return Gx(4,2,e,t)}function P6(e,t){return Gx(4,4,e,t)}function T6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function L6(e,t,n){return n=n!=null?n.concat([e]):null,Gx(4,4,T6.bind(null,t,e),n)}function ib(){}function E6(e,t){var n=Oi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tb(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function I6(e,t){var n=Oi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tb(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function D6(e,t,n){return Hc&21?(ha(n,t)||(n=BC(),Vn.lanes|=n,Gc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Hs=!0),e.memoizedState=n)}function JF(e,t){var n=yn;yn=n!==0&&4>n?n:4,e(!0);var r=qv.transition;qv.transition={};try{e(!1),t()}finally{yn=n,qv.transition=r}}function F6(){return Oi().memoizedState}function eM(e,t,n){var r=Dl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},M6(e))R6(t,n);else if(n=x6(e,t,n,r),n!==null){var i=As();ua(n,e,r,i),O6(n,t,r)}}function tM(e,t,n){var r=Dl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(M6(e))R6(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,ha(l,o)){var c=t.interleaved;c===null?(i.next=i,Y2(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=x6(e,t,i,r),n!==null&&(i=As(),ua(n,e,r,i),O6(n,t,r))}}function M6(e){var t=e.alternate;return e===Vn||t!==null&&t===Vn}function R6(e,t){bh=tx=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function O6(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,M2(e,n)}}var nx={readContext:Ri,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useInsertionEffect:Xr,useLayoutEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useDeferredValue:Xr,useTransition:Xr,useMutableSource:Xr,useSyncExternalStore:Xr,useId:Xr,unstable_isNewReconciler:!1},nM={readContext:Ri,useCallback:function(e,t){return Ia().memoizedState=[e,t===void 0?null:t],e},useContext:Ri,useEffect:Ww,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ng(4194308,4,T6.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ng(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ng(4,2,e,t)},useMemo:function(e,t){var n=Ia();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ia();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=eM.bind(null,Vn,e),[r.memoizedState,e]},useRef:function(e){var t=Ia();return e={current:e},t.memoizedState=e},useState:Vw,useDebugValue:ib,useDeferredValue:function(e){return Ia().memoizedState=e},useTransition:function(){var e=Vw(!1),t=e[0];return e=JF.bind(null,e[1]),Ia().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Vn,i=Ia();if(Rn){if(n===void 0)throw Error(Qe(407));n=n()}else{if(n=t(),Fr===null)throw Error(Qe(349));Hc&30||N6(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ww(S6.bind(null,r,a,e),[e]),r.flags|=2048,Yh(9,j6.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ia(),t=Fr.identifierPrefix;if(Rn){var n=_o,r=So;n=(r&~(1<<32-da(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Kh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=XF++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rM={readContext:Ri,useCallback:E6,useContext:Ri,useEffect:sb,useImperativeHandle:L6,useInsertionEffect:k6,useLayoutEffect:P6,useMemo:I6,useReducer:Uv,useRef:A6,useState:function(){return Uv(Qh)},useDebugValue:ib,useDeferredValue:function(e){var t=Oi();return D6(t,_r.memoizedState,e)},useTransition:function(){var e=Uv(Qh)[0],t=Oi().memoizedState;return[e,t]},useMutableSource:b6,useSyncExternalStore:w6,useId:F6,unstable_isNewReconciler:!1},sM={readContext:Ri,useCallback:E6,useContext:Ri,useEffect:sb,useImperativeHandle:L6,useInsertionEffect:k6,useLayoutEffect:P6,useMemo:I6,useReducer:Vv,useRef:A6,useState:function(){return Vv(Qh)},useDebugValue:ib,useDeferredValue:function(e){var t=Oi();return _r===null?t.memoizedState=e:D6(t,_r.memoizedState,e)},useTransition:function(){var e=Vv(Qh)[0],t=Oi().memoizedState;return[e,t]},useMutableSource:b6,useSyncExternalStore:w6,useId:F6,unstable_isNewReconciler:!1};function ta(e,t){if(e&&e.defaultProps){t=Gn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ny(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Gn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Kx={isMounted:function(e){return(e=e._reactInternals)?ad(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=As(),i=Dl(e),a=Co(r,i);a.payload=t,n!=null&&(a.callback=n),t=El(e,a,i),t!==null&&(ua(t,e,i,r),bg(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=As(),i=Dl(e),a=Co(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=El(e,a,i),t!==null&&(ua(t,e,i,r),bg(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=As(),r=Dl(e),i=Co(n,r);i.tag=2,t!=null&&(i.callback=t),t=El(e,i,r),t!==null&&(ua(t,e,r,n),bg(t,e,r))}};function Hw(e,t,n,r,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!qh(n,r)||!qh(i,a):!0}function B6(e,t,n){var r=!1,i=Ol,a=t.contextType;return typeof a=="object"&&a!==null?a=Ri(a):(i=Ks(t)?Vc:us.current,r=t.contextTypes,a=(r=r!=null)?Bu(e,i):Ol),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Kx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Gw(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Kx.enqueueReplaceState(t,t.state,null)}function ry(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Z2(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Ri(a):(a=Ks(t)?Vc:us.current,i.context=Bu(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(ny(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Kx.enqueueReplaceState(i,i.state,null),Jg(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Uu(e,t){try{var n="",r=t;do n+=ED(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function Wv(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function sy(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var iM=typeof WeakMap=="function"?WeakMap:Map;function z6(e,t,n){n=Co(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){sx||(sx=!0,my=r),sy(e,t)},n}function $6(e,t,n){n=Co(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){sy(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){sy(e,t),typeof r!="function"&&(Il===null?Il=new Set([this]):Il.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Kw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new iM;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=yM.bind(null,e,t,n),t.then(e,e))}function Qw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yw(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Co(-1,1),t.tag=2,El(n,t,1))),n.lanes|=1),e)}var aM=Ro.ReactCurrentOwner,Hs=!1;function js(e,t,n,r){t.child=e===null?g6(t,null,n,r):$u(t,e.child,n,r)}function Zw(e,t,n,r,i){n=n.render;var a=t.ref;return pu(t,i),r=nb(e,t,n,r,a,i),n=rb(),e!==null&&!Hs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Io(e,t,i)):(Rn&&n&&V2(t),t.flags|=1,js(e,t,r,i),t.child)}function Xw(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!hb(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,q6(e,t,a,r,i)):(e=Cg(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:qh,n(o,r)&&e.ref===t.ref)return Io(e,t,i)}return t.flags|=1,e=Fl(a,r),e.ref=t.ref,e.return=t,t.child=e}function q6(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(qh(a,r)&&e.ref===t.ref)if(Hs=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Hs=!0);else return t.lanes=e.lanes,Io(e,t,i)}return iy(e,t,n,r,i)}function U6(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pn(lu,ri),ri|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Pn(lu,ri),ri|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Pn(lu,ri),ri|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Pn(lu,ri),ri|=r;return js(e,t,i,n),t.child}function V6(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function iy(e,t,n,r,i){var a=Ks(n)?Vc:us.current;return a=Bu(t,a),pu(t,i),n=nb(e,t,n,r,a,i),r=rb(),e!==null&&!Hs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Io(e,t,i)):(Rn&&r&&V2(t),t.flags|=1,js(e,t,n,i),t.child)}function Jw(e,t,n,r,i){if(Ks(n)){var a=!0;Kg(t)}else a=!1;if(pu(t,i),t.stateNode===null)jg(e,t),B6(t,n,r),ry(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ri(d):(d=Ks(n)?Vc:us.current,d=Bu(t,d));var f=n.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Gw(t,o,r,d),ul=!1;var g=t.memoizedState;o.state=g,Jg(t,r,o,i),c=t.memoizedState,l!==r||g!==c||Gs.current||ul?(typeof f=="function"&&(ny(t,n,f,r),c=t.memoizedState),(l=ul||Hw(t,n,l,r,g,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,v6(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ta(t.type,l),o.props=d,h=t.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ri(c):(c=Ks(n)?Vc:us.current,c=Bu(t,c));var m=n.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||g!==c)&&Gw(t,o,r,c),ul=!1,g=t.memoizedState,o.state=g,Jg(t,r,o,i);var S=t.memoizedState;l!==h||g!==S||Gs.current||ul?(typeof m=="function"&&(ny(t,n,m,r),S=t.memoizedState),(d=ul||Hw(t,n,d,r,g,S,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=S),o.props=r,o.state=S,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return ay(e,t,n,r,a,i)}function ay(e,t,n,r,i,a){V6(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Ow(t,n,!1),Io(e,t,a);r=t.stateNode,aM.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=$u(t,e.child,null,a),t.child=$u(t,null,l,a)):js(e,t,l,a),t.memoizedState=r.state,i&&Ow(t,n,!0),t.child}function W6(e){var t=e.stateNode;t.pendingContext?Rw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Rw(e,t.context,!1),X2(e,t.containerInfo)}function eN(e,t,n,r,i){return zu(),H2(i),t.flags|=256,js(e,t,n,r),t.child}var oy={dehydrated:null,treeContext:null,retryLane:0};function ly(e){return{baseLanes:e,cachePool:null,transitions:null}}function H6(e,t,n){var r=t.pendingProps,i=Un.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Pn(Un,i&1),e===null)return ey(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Zx(o,r,0,null),e=Mc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ly(n),t.memoizedState=oy,e):ab(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return oM(e,t,o,r,l,i,n);if(a){a=r.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Fl(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Fl(l,a):(a=Mc(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?ly(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=oy,r}return a=e.child,e=a.sibling,r=Fl(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ab(e,t){return t=Zx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zp(e,t,n,r){return r!==null&&H2(r),$u(t,e.child,null,n),e=ab(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function oM(e,t,n,r,i,a,o){if(n)return t.flags&256?(t.flags&=-257,r=Wv(Error(Qe(422))),Zp(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Zx({mode:"visible",children:r.children},i,0,null),a=Mc(a,i,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&$u(t,e.child,null,o),t.child.memoizedState=ly(o),t.memoizedState=oy,a);if(!(t.mode&1))return Zp(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(Qe(419)),r=Wv(a,r,void 0),Zp(e,t,o,r)}if(l=(o&e.childLanes)!==0,Hs||l){if(r=Fr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Eo(e,i),ua(r,e,i,-1))}return fb(),r=Wv(Error(Qe(421))),Zp(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=bM.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,li=Ll(i.nextSibling),di=t,Rn=!0,ia=null,e!==null&&(Ti[Li++]=So,Ti[Li++]=_o,Ti[Li++]=Wc,So=e.id,_o=e.overflow,Wc=t),t=ab(t,r.children),t.flags|=4096,t)}function tN(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ty(e.return,t,n)}function Hv(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function G6(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(js(e,t,r.children,n),r=Un.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&tN(e,n,t);else if(e.tag===19)tN(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pn(Un,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ex(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Hv(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ex(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Hv(t,!0,n,null,a);break;case"together":Hv(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Io(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Qe(153));if(t.child!==null){for(e=t.child,n=Fl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Fl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lM(e,t,n){switch(t.tag){case 3:W6(t),zu();break;case 5:y6(t);break;case 1:Ks(t.type)&&Kg(t);break;case 4:X2(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Pn(Zg,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Pn(Un,Un.current&1),t.flags|=128,null):n&t.child.childLanes?H6(e,t,n):(Pn(Un,Un.current&1),e=Io(e,t,n),e!==null?e.sibling:null);Pn(Un,Un.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return G6(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pn(Un,Un.current),r)break;return null;case 22:case 23:return t.lanes=0,U6(e,t,n)}return Io(e,t,n)}var K6,cy,Q6,Y6;K6=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cy=function(){};Q6=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,_c(Ua.current);var a=null;switch(n){case"input":i=L1(e,i),r=L1(e,r),a=[];break;case"select":i=Gn({},i,{value:void 0}),r=Gn({},r,{value:void 0}),a=[];break;case"textarea":i=D1(e,i),r=D1(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Hg)}M1(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Fh.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Fh.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&En("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Y6=function(e,t,n,r){n!==r&&(t.flags|=4)};function Qf(e,t){if(!Rn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cM(e,t,n){var r=t.pendingProps;switch(W2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(t),null;case 1:return Ks(t.type)&&Gg(),Jr(t),null;case 3:return r=t.stateNode,qu(),Dn(Gs),Dn(us),eb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Qp(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ia!==null&&(xy(ia),ia=null))),cy(e,t),Jr(t),null;case 5:J2(t);var i=_c(Gh.current);if(n=t.type,e!==null&&t.stateNode!=null)Q6(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Qe(166));return Jr(t),null}if(e=_c(Ua.current),Qp(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Oa]=t,r[Wh]=a,e=(t.mode&1)!==0,n){case"dialog":En("cancel",r),En("close",r);break;case"iframe":case"object":case"embed":En("load",r);break;case"video":case"audio":for(i=0;i<lh.length;i++)En(lh[i],r);break;case"source":En("error",r);break;case"img":case"image":case"link":En("error",r),En("load",r);break;case"details":En("toggle",r);break;case"input":dw(r,a),En("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},En("invalid",r);break;case"textarea":fw(r,a),En("invalid",r)}M1(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Kp(r.textContent,l,e),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Kp(r.textContent,l,e),i=["children",""+l]):Fh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&En("scroll",r)}switch(n){case"input":zp(r),uw(r,a,!0);break;case"textarea":zp(r),hw(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Hg)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=SC(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Oa]=t,e[Wh]=r,K6(e,t,!1,!1),t.stateNode=e;e:{switch(o=R1(n,r),n){case"dialog":En("cancel",e),En("close",e),i=r;break;case"iframe":case"object":case"embed":En("load",e),i=r;break;case"video":case"audio":for(i=0;i<lh.length;i++)En(lh[i],e);i=r;break;case"source":En("error",e),i=r;break;case"img":case"image":case"link":En("error",e),En("load",e),i=r;break;case"details":En("toggle",e),i=r;break;case"input":dw(e,r),i=L1(e,r),En("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Gn({},r,{value:void 0}),En("invalid",e);break;case"textarea":fw(e,r),i=D1(e,r),En("invalid",e);break;default:i=r}M1(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?AC(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_C(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Mh(e,c):typeof c=="number"&&Mh(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Fh.hasOwnProperty(a)?c!=null&&a==="onScroll"&&En("scroll",e):c!=null&&T2(e,a,c,o))}switch(n){case"input":zp(e),uw(e,r,!1);break;case"textarea":zp(e),hw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Rl(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?uu(e,!!r.multiple,a,!1):r.defaultValue!=null&&uu(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Hg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jr(t),null;case 6:if(e&&t.stateNode!=null)Y6(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Qe(166));if(n=_c(Gh.current),_c(Ua.current),Qp(t)){if(r=t.stateNode,n=t.memoizedProps,r[Oa]=t,(a=r.nodeValue!==n)&&(e=di,e!==null))switch(e.tag){case 3:Kp(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Kp(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Oa]=t,t.stateNode=r}return Jr(t),null;case 13:if(Dn(Un),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rn&&li!==null&&t.mode&1&&!(t.flags&128))m6(),zu(),t.flags|=98560,a=!1;else if(a=Qp(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(Qe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Qe(317));a[Oa]=t}else zu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jr(t),a=!1}else ia!==null&&(xy(ia),ia=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Un.current&1?kr===0&&(kr=3):fb())),t.updateQueue!==null&&(t.flags|=4),Jr(t),null);case 4:return qu(),cy(e,t),e===null&&Uh(t.stateNode.containerInfo),Jr(t),null;case 10:return Q2(t.type._context),Jr(t),null;case 17:return Ks(t.type)&&Gg(),Jr(t),null;case 19:if(Dn(Un),a=t.memoizedState,a===null)return Jr(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)Qf(a,!1);else{if(kr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ex(e),o!==null){for(t.flags|=128,Qf(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Pn(Un,Un.current&1|2),t.child}e=e.sibling}a.tail!==null&&dr()>Vu&&(t.flags|=128,r=!0,Qf(a,!1),t.lanes=4194304)}else{if(!r)if(e=ex(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Qf(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Rn)return Jr(t),null}else 2*dr()-a.renderingStartTime>Vu&&n!==1073741824&&(t.flags|=128,r=!0,Qf(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=dr(),t.sibling=null,n=Un.current,Pn(Un,r?n&1|2:n&1),t):(Jr(t),null);case 22:case 23:return ub(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ri&1073741824&&(Jr(t),t.subtreeFlags&6&&(t.flags|=8192)):Jr(t),null;case 24:return null;case 25:return null}throw Error(Qe(156,t.tag))}function dM(e,t){switch(W2(t),t.tag){case 1:return Ks(t.type)&&Gg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qu(),Dn(Gs),Dn(us),eb(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return J2(t),null;case 13:if(Dn(Un),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Qe(340));zu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Dn(Un),null;case 4:return qu(),null;case 10:return Q2(t.type._context),null;case 22:case 23:return ub(),null;case 24:return null;default:return null}}var Xp=!1,as=!1,uM=typeof WeakSet=="function"?WeakSet:Set,gt=null;function ou(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){er(e,t,r)}else n.current=null}function dy(e,t,n){try{n()}catch(r){er(e,t,r)}}var nN=!1;function fM(e,t){if(G1=Ug,e=t6(),U2(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,h=e,g=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)g=h,h=m;for(;;){if(h===e)break t;if(g===n&&++d===i&&(l=o),g===a&&++f===r&&(c=o),(m=h.nextSibling)!==null)break;h=g,g=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(K1={focusedElem:e,selectionRange:n},Ug=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){t=gt;try{var S=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var y=S.memoizedProps,j=S.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:ta(t.type,y),j);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Qe(163))}}catch(k){er(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}return S=nN,nN=!1,S}function wh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&dy(t,n,a)}i=i.next}while(i!==r)}}function Qx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function uy(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Z6(e){var t=e.alternate;t!==null&&(e.alternate=null,Z6(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Oa],delete t[Wh],delete t[Z1],delete t[KF],delete t[QF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function X6(e){return e.tag===5||e.tag===3||e.tag===4}function rN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||X6(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Hg));else if(r!==4&&(e=e.child,e!==null))for(fy(e,t,n),e=e.sibling;e!==null;)fy(e,t,n),e=e.sibling}function hy(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(hy(e,t,n),e=e.sibling;e!==null;)hy(e,t,n),e=e.sibling}var $r=null,sa=!1;function nl(e,t,n){for(n=n.child;n!==null;)J6(e,t,n),n=n.sibling}function J6(e,t,n){if(qa&&typeof qa.onCommitFiberUnmount=="function")try{qa.onCommitFiberUnmount($x,n)}catch{}switch(n.tag){case 5:as||ou(n,t);case 6:var r=$r,i=sa;$r=null,nl(e,t,n),$r=r,sa=i,$r!==null&&(sa?(e=$r,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$r.removeChild(n.stateNode));break;case 18:$r!==null&&(sa?(e=$r,n=n.stateNode,e.nodeType===8?Bv(e.parentNode,n):e.nodeType===1&&Bv(e,n),zh(e)):Bv($r,n.stateNode));break;case 4:r=$r,i=sa,$r=n.stateNode.containerInfo,sa=!0,nl(e,t,n),$r=r,sa=i;break;case 0:case 11:case 14:case 15:if(!as&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&dy(n,t,o),i=i.next}while(i!==r)}nl(e,t,n);break;case 1:if(!as&&(ou(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){er(n,t,l)}nl(e,t,n);break;case 21:nl(e,t,n);break;case 22:n.mode&1?(as=(r=as)||n.memoizedState!==null,nl(e,t,n),as=r):nl(e,t,n);break;default:nl(e,t,n)}}function sN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new uM),t.forEach(function(r){var i=wM.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:$r=l.stateNode,sa=!1;break e;case 3:$r=l.stateNode.containerInfo,sa=!0;break e;case 4:$r=l.stateNode.containerInfo,sa=!0;break e}l=l.return}if($r===null)throw Error(Qe(160));J6(a,o,i),$r=null,sa=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){er(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eA(t,e),t=t.sibling}function eA(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yi(t,e),La(e),r&4){try{wh(3,e,e.return),Qx(3,e)}catch(y){er(e,e.return,y)}try{wh(5,e,e.return)}catch(y){er(e,e.return,y)}}break;case 1:Yi(t,e),La(e),r&512&&n!==null&&ou(n,n.return);break;case 5:if(Yi(t,e),La(e),r&512&&n!==null&&ou(n,n.return),e.flags&32){var i=e.stateNode;try{Mh(i,"")}catch(y){er(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&NC(i,a),R1(l,o);var d=R1(l,a);for(o=0;o<c.length;o+=2){var f=c[o],h=c[o+1];f==="style"?AC(i,h):f==="dangerouslySetInnerHTML"?_C(i,h):f==="children"?Mh(i,h):T2(i,f,h,d)}switch(l){case"input":E1(i,a);break;case"textarea":jC(i,a);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?uu(i,!!a.multiple,m,!1):g!==!!a.multiple&&(a.defaultValue!=null?uu(i,!!a.multiple,a.defaultValue,!0):uu(i,!!a.multiple,a.multiple?[]:"",!1))}i[Wh]=a}catch(y){er(e,e.return,y)}}break;case 6:if(Yi(t,e),La(e),r&4){if(e.stateNode===null)throw Error(Qe(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(y){er(e,e.return,y)}}break;case 3:if(Yi(t,e),La(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{zh(t.containerInfo)}catch(y){er(e,e.return,y)}break;case 4:Yi(t,e),La(e);break;case 13:Yi(t,e),La(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(cb=dr())),r&4&&sN(e);break;case 22:if(f=n!==null&&n.memoizedState!==null,e.mode&1?(as=(d=as)||f,Yi(t,e),as=d):Yi(t,e),La(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(gt=e,f=e.child;f!==null;){for(h=gt=f;gt!==null;){switch(g=gt,m=g.child,g.tag){case 0:case 11:case 14:case 15:wh(4,g,g.return);break;case 1:ou(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,S.props=t.memoizedProps,S.state=t.memoizedState,S.componentWillUnmount()}catch(y){er(r,n,y)}}break;case 5:ou(g,g.return);break;case 22:if(g.memoizedState!==null){aN(h);continue}}m!==null?(m.return=g,gt=m):aN(h)}f=f.sibling}e:for(f=null,h=e;;){if(h.tag===5){if(f===null){f=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=CC("display",o))}catch(y){er(e,e.return,y)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){er(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Yi(t,e),La(e),r&4&&sN(e);break;case 21:break;default:Yi(t,e),La(e)}}function La(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(X6(n)){var r=n;break e}n=n.return}throw Error(Qe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Mh(i,""),r.flags&=-33);var a=rN(e);hy(e,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=rN(e);fy(e,l,o);break;default:throw Error(Qe(161))}}catch(c){er(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hM(e,t,n){gt=e,tA(e)}function tA(e,t,n){for(var r=(e.mode&1)!==0;gt!==null;){var i=gt,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Xp;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||as;l=Xp;var d=as;if(Xp=o,(as=c)&&!d)for(gt=i;gt!==null;)o=gt,c=o.child,o.tag===22&&o.memoizedState!==null?oN(i):c!==null?(c.return=o,gt=c):oN(i);for(;a!==null;)gt=a,tA(a),a=a.sibling;gt=i,Xp=l,as=d}iN(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,gt=a):iN(e)}}function iN(e){for(;gt!==null;){var t=gt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:as||Qx(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!as)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ta(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Uw(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Uw(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&zh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Qe(163))}as||t.flags&512&&uy(t)}catch(g){er(t,t.return,g)}}if(t===e){gt=null;break}if(n=t.sibling,n!==null){n.return=t.return,gt=n;break}gt=t.return}}function aN(e){for(;gt!==null;){var t=gt;if(t===e){gt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,gt=n;break}gt=t.return}}function oN(e){for(;gt!==null;){var t=gt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Qx(4,t)}catch(c){er(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){er(t,i,c)}}var a=t.return;try{uy(t)}catch(c){er(t,a,c)}break;case 5:var o=t.return;try{uy(t)}catch(c){er(t,o,c)}}}catch(c){er(t,t.return,c)}if(t===e){gt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,gt=l;break}gt=t.return}}var mM=Math.ceil,rx=Ro.ReactCurrentDispatcher,ob=Ro.ReactCurrentOwner,Di=Ro.ReactCurrentBatchConfig,sn=0,Fr=null,wr=null,Ur=0,ri=0,lu=Jl(0),kr=0,Zh=null,Gc=0,Yx=0,lb=0,Nh=null,Ws=null,cb=0,Vu=1/0,bo=null,sx=!1,my=null,Il=null,Jp=!1,Cl=null,ix=0,jh=0,py=null,Sg=-1,_g=0;function As(){return sn&6?dr():Sg!==-1?Sg:Sg=dr()}function Dl(e){return e.mode&1?sn&2&&Ur!==0?Ur&-Ur:ZF.transition!==null?(_g===0&&(_g=BC()),_g):(e=yn,e!==0||(e=window.event,e=e===void 0?16:HC(e.type)),e):1}function ua(e,t,n,r){if(50<jh)throw jh=0,py=null,Error(Qe(185));Cm(e,n,r),(!(sn&2)||e!==Fr)&&(e===Fr&&(!(sn&2)&&(Yx|=n),kr===4&&hl(e,Ur)),Qs(e,r),n===1&&sn===0&&!(t.mode&1)&&(Vu=dr()+500,Hx&&ec()))}function Qs(e,t){var n=e.callbackNode;ZD(e,t);var r=qg(e,e===Fr?Ur:0);if(r===0)n!==null&&gw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&gw(n),t===1)e.tag===0?YF(lN.bind(null,e)):u6(lN.bind(null,e)),HF(function(){!(sn&6)&&ec()}),n=null;else{switch(zC(r)){case 1:n=F2;break;case 4:n=RC;break;case 16:n=$g;break;case 536870912:n=OC;break;default:n=$g}n=cA(n,nA.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nA(e,t){if(Sg=-1,_g=0,sn&6)throw Error(Qe(327));var n=e.callbackNode;if(gu()&&e.callbackNode!==n)return null;var r=qg(e,e===Fr?Ur:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ax(e,r);else{t=r;var i=sn;sn|=2;var a=sA();(Fr!==e||Ur!==t)&&(bo=null,Vu=dr()+500,Fc(e,t));do try{xM();break}catch(l){rA(e,l)}while(!0);K2(),rx.current=a,sn=i,wr!==null?t=0:(Fr=null,Ur=0,t=kr)}if(t!==0){if(t===2&&(i=q1(e),i!==0&&(r=i,t=gy(e,i))),t===1)throw n=Zh,Fc(e,0),hl(e,r),Qs(e,dr()),n;if(t===6)hl(e,r);else{if(i=e.current.alternate,!(r&30)&&!pM(i)&&(t=ax(e,r),t===2&&(a=q1(e),a!==0&&(r=a,t=gy(e,a))),t===1))throw n=Zh,Fc(e,0),hl(e,r),Qs(e,dr()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Qe(345));case 2:yc(e,Ws,bo);break;case 3:if(hl(e,r),(r&130023424)===r&&(t=cb+500-dr(),10<t)){if(qg(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){As(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Y1(yc.bind(null,e,Ws,bo),t);break}yc(e,Ws,bo);break;case 4:if(hl(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-da(r);a=1<<o,o=t[o],o>i&&(i=o),r&=~a}if(r=i,r=dr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mM(r/1960))-r,10<r){e.timeoutHandle=Y1(yc.bind(null,e,Ws,bo),r);break}yc(e,Ws,bo);break;case 5:yc(e,Ws,bo);break;default:throw Error(Qe(329))}}}return Qs(e,dr()),e.callbackNode===n?nA.bind(null,e):null}function gy(e,t){var n=Nh;return e.current.memoizedState.isDehydrated&&(Fc(e,t).flags|=256),e=ax(e,t),e!==2&&(t=Ws,Ws=n,t!==null&&xy(t)),e}function xy(e){Ws===null?Ws=e:Ws.push.apply(Ws,e)}function pM(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ha(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function hl(e,t){for(t&=~lb,t&=~Yx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-da(t),r=1<<n;e[n]=-1,t&=~r}}function lN(e){if(sn&6)throw Error(Qe(327));gu();var t=qg(e,0);if(!(t&1))return Qs(e,dr()),null;var n=ax(e,t);if(e.tag!==0&&n===2){var r=q1(e);r!==0&&(t=r,n=gy(e,r))}if(n===1)throw n=Zh,Fc(e,0),hl(e,t),Qs(e,dr()),n;if(n===6)throw Error(Qe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yc(e,Ws,bo),Qs(e,dr()),null}function db(e,t){var n=sn;sn|=1;try{return e(t)}finally{sn=n,sn===0&&(Vu=dr()+500,Hx&&ec())}}function Kc(e){Cl!==null&&Cl.tag===0&&!(sn&6)&&gu();var t=sn;sn|=1;var n=Di.transition,r=yn;try{if(Di.transition=null,yn=1,e)return e()}finally{yn=r,Di.transition=n,sn=t,!(sn&6)&&ec()}}function ub(){ri=lu.current,Dn(lu)}function Fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,WF(n)),wr!==null)for(n=wr.return;n!==null;){var r=n;switch(W2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gg();break;case 3:qu(),Dn(Gs),Dn(us),eb();break;case 5:J2(r);break;case 4:qu();break;case 13:Dn(Un);break;case 19:Dn(Un);break;case 10:Q2(r.type._context);break;case 22:case 23:ub()}n=n.return}if(Fr=e,wr=e=Fl(e.current,null),Ur=ri=t,kr=0,Zh=null,lb=Yx=Gc=0,Ws=Nh=null,Sc!==null){for(t=0;t<Sc.length;t++)if(n=Sc[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Sc=null}return e}function rA(e,t){do{var n=wr;try{if(K2(),wg.current=nx,tx){for(var r=Vn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}tx=!1}if(Hc=0,Dr=_r=Vn=null,bh=!1,Kh=0,ob.current=null,n===null||n.return===null){kr=1,Zh=t,wr=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ur,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=Qw(o);if(m!==null){m.flags&=-257,Yw(m,o,l,a,t),m.mode&1&&Kw(a,d,t),t=m,c=d;var S=t.updateQueue;if(S===null){var y=new Set;y.add(c),t.updateQueue=y}else S.add(c);break e}else{if(!(t&1)){Kw(a,d,t),fb();break e}c=Error(Qe(426))}}else if(Rn&&l.mode&1){var j=Qw(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),Yw(j,o,l,a,t),H2(Uu(c,l));break e}}a=c=Uu(c,l),kr!==4&&(kr=2),Nh===null?Nh=[a]:Nh.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=z6(a,c,t);qw(a,v);break e;case 1:l=c;var x=a.type,_=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Il===null||!Il.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t;var k=$6(a,l,t);qw(a,k);break e}}a=a.return}while(a!==null)}aA(n)}catch(M){t=M,wr===n&&n!==null&&(wr=n=n.return);continue}break}while(!0)}function sA(){var e=rx.current;return rx.current=nx,e===null?nx:e}function fb(){(kr===0||kr===3||kr===2)&&(kr=4),Fr===null||!(Gc&268435455)&&!(Yx&268435455)||hl(Fr,Ur)}function ax(e,t){var n=sn;sn|=2;var r=sA();(Fr!==e||Ur!==t)&&(bo=null,Fc(e,t));do try{gM();break}catch(i){rA(e,i)}while(!0);if(K2(),sn=n,rx.current=r,wr!==null)throw Error(Qe(261));return Fr=null,Ur=0,kr}function gM(){for(;wr!==null;)iA(wr)}function xM(){for(;wr!==null&&!qD();)iA(wr)}function iA(e){var t=lA(e.alternate,e,ri);e.memoizedProps=e.pendingProps,t===null?aA(e):wr=t,ob.current=null}function aA(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=dM(n,t),n!==null){n.flags&=32767,wr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{kr=6,wr=null;return}}else if(n=cM(n,t,ri),n!==null){wr=n;return}if(t=t.sibling,t!==null){wr=t;return}wr=t=e}while(t!==null);kr===0&&(kr=5)}function yc(e,t,n){var r=yn,i=Di.transition;try{Di.transition=null,yn=1,vM(e,t,n,r)}finally{Di.transition=i,yn=r}return null}function vM(e,t,n,r){do gu();while(Cl!==null);if(sn&6)throw Error(Qe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Qe(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(XD(e,a),e===Fr&&(wr=Fr=null,Ur=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Jp||(Jp=!0,cA($g,function(){return gu(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Di.transition,Di.transition=null;var o=yn;yn=1;var l=sn;sn|=4,ob.current=null,fM(e,n),eA(n,e),OF(K1),Ug=!!G1,K1=G1=null,e.current=n,hM(n),UD(),sn=l,yn=o,Di.transition=a}else e.current=n;if(Jp&&(Jp=!1,Cl=e,ix=i),a=e.pendingLanes,a===0&&(Il=null),HD(n.stateNode),Qs(e,dr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(sx)throw sx=!1,e=my,my=null,e;return ix&1&&e.tag!==0&&gu(),a=e.pendingLanes,a&1?e===py?jh++:(jh=0,py=e):jh=0,ec(),null}function gu(){if(Cl!==null){var e=zC(ix),t=Di.transition,n=yn;try{if(Di.transition=null,yn=16>e?16:e,Cl===null)var r=!1;else{if(e=Cl,Cl=null,ix=0,sn&6)throw Error(Qe(331));var i=sn;for(sn|=4,gt=e.current;gt!==null;){var a=gt,o=a.child;if(gt.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(gt=d;gt!==null;){var f=gt;switch(f.tag){case 0:case 11:case 15:wh(8,f,a)}var h=f.child;if(h!==null)h.return=f,gt=h;else for(;gt!==null;){f=gt;var g=f.sibling,m=f.return;if(Z6(f),f===d){gt=null;break}if(g!==null){g.return=m,gt=g;break}gt=m}}}var S=a.alternate;if(S!==null){var y=S.child;if(y!==null){S.child=null;do{var j=y.sibling;y.sibling=null,y=j}while(y!==null)}}gt=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,gt=o;else e:for(;gt!==null;){if(a=gt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:wh(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,gt=v;break e}gt=a.return}}var x=e.current;for(gt=x;gt!==null;){o=gt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,gt=_;else e:for(o=x;gt!==null;){if(l=gt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Qx(9,l)}}catch(M){er(l,l.return,M)}if(l===o){gt=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,gt=k;break e}gt=l.return}}if(sn=i,ec(),qa&&typeof qa.onPostCommitFiberRoot=="function")try{qa.onPostCommitFiberRoot($x,e)}catch{}r=!0}return r}finally{yn=n,Di.transition=t}}return!1}function cN(e,t,n){t=Uu(n,t),t=z6(e,t,1),e=El(e,t,1),t=As(),e!==null&&(Cm(e,1,t),Qs(e,t))}function er(e,t,n){if(e.tag===3)cN(e,e,n);else for(;t!==null;){if(t.tag===3){cN(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Il===null||!Il.has(r))){e=Uu(n,e),e=$6(t,e,1),t=El(t,e,1),e=As(),t!==null&&(Cm(t,1,e),Qs(t,e));break}}t=t.return}}function yM(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=As(),e.pingedLanes|=e.suspendedLanes&n,Fr===e&&(Ur&n)===n&&(kr===4||kr===3&&(Ur&130023424)===Ur&&500>dr()-cb?Fc(e,0):lb|=n),Qs(e,t)}function oA(e,t){t===0&&(e.mode&1?(t=Up,Up<<=1,!(Up&130023424)&&(Up=4194304)):t=1);var n=As();e=Eo(e,t),e!==null&&(Cm(e,t,n),Qs(e,n))}function bM(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),oA(e,n)}function wM(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Qe(314))}r!==null&&r.delete(t),oA(e,n)}var lA;lA=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gs.current)Hs=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Hs=!1,lM(e,t,n);Hs=!!(e.flags&131072)}else Hs=!1,Rn&&t.flags&1048576&&f6(t,Yg,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;jg(e,t),e=t.pendingProps;var i=Bu(t,us.current);pu(t,n),i=nb(null,t,r,e,i,n);var a=rb();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ks(r)?(a=!0,Kg(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Z2(t),i.updater=Kx,t.stateNode=i,i._reactInternals=t,ry(t,r,e,n),t=ay(null,t,r,!0,a,n)):(t.tag=0,Rn&&a&&V2(t),js(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(jg(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=jM(r),e=ta(r,e),i){case 0:t=iy(null,t,r,e,n);break e;case 1:t=Jw(null,t,r,e,n);break e;case 11:t=Zw(null,t,r,e,n);break e;case 14:t=Xw(null,t,r,ta(r.type,e),n);break e}throw Error(Qe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ta(r,i),iy(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ta(r,i),Jw(e,t,r,i,n);case 3:e:{if(W6(t),e===null)throw Error(Qe(387));r=t.pendingProps,a=t.memoizedState,i=a.element,v6(e,t),Jg(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Uu(Error(Qe(423)),t),t=eN(e,t,r,n,i);break e}else if(r!==i){i=Uu(Error(Qe(424)),t),t=eN(e,t,r,n,i);break e}else for(li=Ll(t.stateNode.containerInfo.firstChild),di=t,Rn=!0,ia=null,n=g6(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zu(),r===i){t=Io(e,t,n);break e}js(e,t,r,n)}t=t.child}return t;case 5:return y6(t),e===null&&ey(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,Q1(r,i)?o=null:a!==null&&Q1(r,a)&&(t.flags|=32),V6(e,t),js(e,t,o,n),t.child;case 6:return e===null&&ey(t),null;case 13:return H6(e,t,n);case 4:return X2(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=$u(t,null,r,n):js(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ta(r,i),Zw(e,t,r,i,n);case 7:return js(e,t,t.pendingProps,n),t.child;case 8:return js(e,t,t.pendingProps.children,n),t.child;case 12:return js(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Pn(Zg,r._currentValue),r._currentValue=o,a!==null)if(ha(a.value,o)){if(a.children===i.children&&!Gs.current){t=Io(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Co(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),ty(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Qe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ty(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}js(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,pu(t,n),i=Ri(i),r=r(i),t.flags|=1,js(e,t,r,n),t.child;case 14:return r=t.type,i=ta(r,t.pendingProps),i=ta(r.type,i),Xw(e,t,r,i,n);case 15:return q6(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ta(r,i),jg(e,t),t.tag=1,Ks(r)?(e=!0,Kg(t)):e=!1,pu(t,n),B6(t,r,i),ry(t,r,i,n),ay(null,t,r,!0,e,n);case 19:return G6(e,t,n);case 22:return U6(e,t,n)}throw Error(Qe(156,t.tag))};function cA(e,t){return MC(e,t)}function NM(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(e,t,n,r){return new NM(e,t,n,r)}function hb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jM(e){if(typeof e=="function")return hb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===E2)return 11;if(e===I2)return 14}return 2}function Fl(e,t){var n=e.alternate;return n===null?(n=Ii(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Cg(e,t,n,r,i,a){var o=2;if(r=e,typeof e=="function")hb(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Xd:return Mc(n.children,i,a,t);case L2:o=8,i|=8;break;case A1:return e=Ii(12,n,t,i|2),e.elementType=A1,e.lanes=a,e;case k1:return e=Ii(13,n,t,i),e.elementType=k1,e.lanes=a,e;case P1:return e=Ii(19,n,t,i),e.elementType=P1,e.lanes=a,e;case yC:return Zx(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xC:o=10;break e;case vC:o=9;break e;case E2:o=11;break e;case I2:o=14;break e;case dl:o=16,r=null;break e}throw Error(Qe(130,e==null?e:typeof e,""))}return t=Ii(o,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Mc(e,t,n,r){return e=Ii(7,e,r,t),e.lanes=n,e}function Zx(e,t,n,r){return e=Ii(22,e,r,t),e.elementType=yC,e.lanes=n,e.stateNode={isHidden:!1},e}function Gv(e,t,n){return e=Ii(6,e,null,t),e.lanes=n,e}function Kv(e,t,n){return t=Ii(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function SM(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kv(0),this.expirationTimes=kv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kv(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function mb(e,t,n,r,i,a,o,l,c){return e=new SM(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ii(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z2(a),e}function _M(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dA(e){if(!e)return Ol;e=e._reactInternals;e:{if(ad(e)!==e||e.tag!==1)throw Error(Qe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ks(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Qe(171))}if(e.tag===1){var n=e.type;if(Ks(n))return d6(e,n,t)}return t}function uA(e,t,n,r,i,a,o,l,c){return e=mb(n,r,!0,e,i,a,o,l,c),e.context=dA(null),n=e.current,r=As(),i=Dl(n),a=Co(r,i),a.callback=t??null,El(n,a,i),e.current.lanes=i,Cm(e,i,r),Qs(e,r),e}function Xx(e,t,n,r){var i=t.current,a=As(),o=Dl(i);return n=dA(n),t.context===null?t.context=n:t.pendingContext=n,t=Co(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=El(i,t,o),e!==null&&(ua(e,i,o,a),bg(e,i,o)),o}function ox(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function pb(e,t){dN(e,t),(e=e.alternate)&&dN(e,t)}function CM(){return null}var fA=typeof reportError=="function"?reportError:function(e){console.error(e)};function gb(e){this._internalRoot=e}Jx.prototype.render=gb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Qe(409));Xx(e,t,null,null)};Jx.prototype.unmount=gb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Kc(function(){Xx(null,e,null,null)}),t[Lo]=null}};function Jx(e){this._internalRoot=e}Jx.prototype.unstable_scheduleHydration=function(e){if(e){var t=UC();e={blockedOn:null,target:e,priority:t};for(var n=0;n<fl.length&&t!==0&&t<fl[n].priority;n++);fl.splice(n,0,e),n===0&&WC(e)}};function xb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function e0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function uN(){}function AM(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var d=ox(o);a.call(d)}}var o=uA(t,r,e,0,null,!1,!1,"",uN);return e._reactRootContainer=o,e[Lo]=o.current,Uh(e.nodeType===8?e.parentNode:e),Kc(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=ox(c);l.call(d)}}var c=mb(e,0,!1,null,null,!1,!1,"",uN);return e._reactRootContainer=c,e[Lo]=c.current,Uh(e.nodeType===8?e.parentNode:e),Kc(function(){Xx(t,c,n,r)}),c}function t0(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=ox(o);l.call(c)}}Xx(t,o,e,i)}else o=AM(n,t,e,i,r);return ox(o)}$C=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=oh(t.pendingLanes);n!==0&&(M2(t,n|1),Qs(t,dr()),!(sn&6)&&(Vu=dr()+500,ec()))}break;case 13:Kc(function(){var r=Eo(e,1);if(r!==null){var i=As();ua(r,e,1,i)}}),pb(e,1)}};R2=function(e){if(e.tag===13){var t=Eo(e,134217728);if(t!==null){var n=As();ua(t,e,134217728,n)}pb(e,134217728)}};qC=function(e){if(e.tag===13){var t=Dl(e),n=Eo(e,t);if(n!==null){var r=As();ua(n,e,t,r)}pb(e,t)}};UC=function(){return yn};VC=function(e,t){var n=yn;try{return yn=e,t()}finally{yn=n}};B1=function(e,t,n){switch(t){case"input":if(E1(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Wx(r);if(!i)throw Error(Qe(90));wC(r),E1(r,i)}}}break;case"textarea":jC(e,n);break;case"select":t=n.value,t!=null&&uu(e,!!n.multiple,t,!1)}};TC=db;LC=Kc;var kM={usingClientEntryPoint:!1,Events:[km,nu,Wx,kC,PC,db]},Yf={findFiberByHostInstance:jc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PM={bundleType:Yf.bundleType,version:Yf.version,rendererPackageName:Yf.rendererPackageName,rendererConfig:Yf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ro.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=DC(e),e===null?null:e.stateNode},findFiberByHostInstance:Yf.findFiberByHostInstance||CM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eg.isDisabled&&eg.supportsFiber)try{$x=eg.inject(PM),qa=eg}catch{}}pi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kM;pi.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xb(t))throw Error(Qe(200));return _M(e,t,null,n)};pi.createRoot=function(e,t){if(!xb(e))throw Error(Qe(299));var n=!1,r="",i=fA;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=mb(e,1,!1,null,null,n,!1,r,i),e[Lo]=t.current,Uh(e.nodeType===8?e.parentNode:e),new gb(t)};pi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Qe(188)):(e=Object.keys(e).join(","),Error(Qe(268,e)));return e=DC(t),e=e===null?null:e.stateNode,e};pi.flushSync=function(e){return Kc(e)};pi.hydrate=function(e,t,n){if(!e0(t))throw Error(Qe(200));return t0(null,e,t,!0,n)};pi.hydrateRoot=function(e,t,n){if(!xb(e))throw Error(Qe(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=fA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=uA(t,null,e,1,n??null,i,!1,a,o),e[Lo]=t.current,Uh(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jx(t)};pi.render=function(e,t,n){if(!e0(t))throw Error(Qe(200));return t0(null,e,t,!1,n)};pi.unmountComponentAtNode=function(e){if(!e0(e))throw Error(Qe(40));return e._reactRootContainer?(Kc(function(){t0(null,null,e,!1,function(){e._reactRootContainer=null,e[Lo]=null})}),!0):!1};pi.unstable_batchedUpdates=db;pi.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!e0(n))throw Error(Qe(200));if(e==null||e._reactInternals===void 0)throw Error(Qe(38));return t0(e,t,n,!1,r)};pi.version="18.3.1-next-f1338f8080-20240426";function hA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hA)}catch(e){console.error(e)}}hA(),hC.exports=pi;var od=hC.exports;const TM=eC(od);var mA,fN=od;mA=fN.createRoot,fN.hydrateRoot;function LM(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,i,a,o=[],l="",c=e.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(o.push(n),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~r?r:~a?a:i.length)),l+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~r?"?":"")+"\\"+i.substring(a))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var pA={exports:{}},gA={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wu=N;function EM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var IM=typeof Object.is=="function"?Object.is:EM,DM=Wu.useState,FM=Wu.useEffect,MM=Wu.useLayoutEffect,RM=Wu.useDebugValue;function OM(e,t){var n=t(),r=DM({inst:{value:n,getSnapshot:t}}),i=r[0].inst,a=r[1];return MM(function(){i.value=n,i.getSnapshot=t,Qv(i)&&a({inst:i})},[e,n,t]),FM(function(){return Qv(i)&&a({inst:i}),e(function(){Qv(i)&&a({inst:i})})},[e]),RM(n),n}function Qv(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!IM(e,n)}catch{return!0}}function BM(e,t){return t()}var zM=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?BM:OM;gA.useSyncExternalStore=Wu.useSyncExternalStore!==void 0?Wu.useSyncExternalStore:zM;pA.exports=gA;var $M=pA.exports;const qM=uC.useInsertionEffect,UM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xA=UM?N.useLayoutEffect:N.useEffect,VM=qM||xA,vb=e=>{const t=N.useRef([e,(...n)=>t[0](...n)]).current;return VM(()=>{t[0]=e}),t[1]},WM="popstate",yb="pushState",bb="replaceState",HM="hashchange",hN=[WM,yb,bb,HM],GM=e=>{for(const t of hN)addEventListener(t,e);return()=>{for(const t of hN)removeEventListener(t,e)}},vA=(e,t)=>$M.useSyncExternalStore(GM,e,t),KM=()=>location.search,QM=({ssrSearch:e=""}={})=>vA(KM,()=>e),mN=()=>location.pathname,YM=({ssrPath:e}={})=>vA(mN,e?()=>e:mN),ZM=(e,{replace:t=!1,state:n=null}={})=>history[t?bb:yb](n,"",e),XM=(e={})=>[YM(e),ZM],pN=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[pN]>"u"){for(const e of[yb,bb]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,pN,{value:!0})}const JM=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",yA=(e="")=>e==="/"?"":e,eR=(e,t)=>e[0]==="~"?e.slice(1):yA(t)+e,tR=(e="",t)=>JM(gN(yA(e)),gN(t)),gN=e=>{try{return decodeURI(e)}catch{return e}},bA={hook:XM,searchHook:QM,parser:LM,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},wA=N.createContext(bA),Tm=()=>N.useContext(wA),NA={},jA=N.createContext(NA),SA=()=>N.useContext(jA),n0=e=>{const[t,n]=e.hook(e);return[tR(e.base,t),vb((r,i)=>n(eR(r,e.base),i))]},Lm=()=>n0(Tm()),_A=(e,t,n,r)=>{const{pattern:i,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),o=i.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=a!==!1?Object.fromEntries(a.map((h,g)=>[h,c[g]])):o.groups;let f={...c};return d&&Object.assign(f,d),f})(),...r?[l]:[]]:[!1,null]},nR=({children:e,...t})=>{var f,h;const n=Tm(),r=t.hook?bA:n;let i=r;const[a,o]=((f=t.ssrPath)==null?void 0:f.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=a),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=N.useRef({}),c=l.current,d=c;for(let g in r){const m=g==="base"?r[g]+(t[g]||""):t[g]||r[g];c===d&&m!==d[g]&&(l.current=d={...d}),d[g]=m,m!==r[g]&&(i=d)}return N.createElement(wA.Provider,{value:i,children:e})},xN=({children:e,component:t},n)=>t?N.createElement(t,{params:n}):typeof e=="function"?e(n):e,rR=e=>{let t=N.useRef(NA),n=t.current;for(const r in e)e[r]!==n[r]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},vy=({path:e,nest:t,match:n,...r})=>{const i=Tm(),[a]=n0(i),[o,l,c]=n??_A(i.parser,e,a,t),d=rR({...SA(),...l});if(!o)return null;const f=c?N.createElement(nR,{base:c},xN(r,d)):xN(r,d);return N.createElement(jA.Provider,{value:d,children:f})},_s=N.forwardRef((e,t)=>{const n=Tm(),[r,i]=n0(n),{to:a="",href:o=a,onClick:l,asChild:c,children:d,className:f,replace:h,state:g,...m}=e,S=vb(j=>{j.ctrlKey||j.metaKey||j.altKey||j.shiftKey||j.button!==0||(l==null||l(j),j.defaultPrevented||(j.preventDefault(),i(o,e)))}),y=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&N.isValidElement(d)?N.cloneElement(d,{onClick:S,href:y}):N.createElement("a",{...m,onClick:S,href:y,className:f!=null&&f.call?f(r===o):f,children:d,ref:t})}),CA=e=>Array.isArray(e)?e.flatMap(t=>CA(t&&t.type===N.Fragment?t.props.children:t)):[e],sR=({children:e,location:t})=>{const n=Tm(),[r]=n0(n);for(const i of CA(e)){let a=0;if(N.isValidElement(i)&&(a=_A(n.parser,i.props.path,t||r,i.props.nest))[0])return N.cloneElement(i,{match:a})}return null},iR=e=>{const{to:t,href:n=t}=e,[,r]=Lm(),i=vb(()=>r(t||n,e));return xA(()=>{i()},[]),null};var nf=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Qc=typeof window>"u"||"Deno"in globalThis;function ki(){}function aR(e,t){return typeof e=="function"?e(t):e}function yy(e){return typeof e=="number"&&e>=0&&e!==1/0}function AA(e,t){return Math.max(e+(t||0)-Date.now(),0)}function xu(e,t){return typeof e=="function"?e(t):e}function aa(e,t){return typeof e=="function"?e(t):e}function vN(e,t){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==wb(o,t.options))return!1}else if(!Xh(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function yN(e,t){const{exact:n,status:r,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Yc(t.options.mutationKey)!==Yc(a))return!1}else if(!Xh(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||i&&!i(t))}function wb(e,t){return((t==null?void 0:t.queryKeyHashFn)||Yc)(e)}function Yc(e){return JSON.stringify(e,(t,n)=>by(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Xh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!Xh(e[n],t[n])):!1}function kA(e,t){if(e===t)return e;const n=bN(e)&&bN(t);if(n||by(e)&&by(t)){const r=n?e:Object.keys(e),i=r.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const f=n?d:a[d];(!n&&r.includes(f)||n)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,c++):(l[f]=kA(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&c++)}return i===o&&c===i?e:l}return t}function lx(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function bN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function by(e){if(!wN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!wN(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function wN(e){return Object.prototype.toString.call(e)==="[object Object]"}function oR(e){return new Promise(t=>{setTimeout(t,e)})}function wy(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?kA(e,t):t}function lR(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function cR(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Nb=Symbol();function PA(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Nb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var kc,gl,_u,s4,dR=(s4=class extends nf{constructor(){super();Ct(this,kc);Ct(this,gl);Ct(this,_u);mt(this,_u,t=>{if(!Qc&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){fe(this,gl)||this.setEventListener(fe(this,_u))}onUnsubscribe(){var t;this.hasListeners()||((t=fe(this,gl))==null||t.call(this),mt(this,gl,void 0))}setEventListener(t){var n;mt(this,_u,t),(n=fe(this,gl))==null||n.call(this),mt(this,gl,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){fe(this,kc)!==t&&(mt(this,kc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof fe(this,kc)=="boolean"?fe(this,kc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},kc=new WeakMap,gl=new WeakMap,_u=new WeakMap,s4),jb=new dR,Cu,xl,Au,i4,uR=(i4=class extends nf{constructor(){super();Ct(this,Cu,!0);Ct(this,xl);Ct(this,Au);mt(this,Au,t=>{if(!Qc&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){fe(this,xl)||this.setEventListener(fe(this,Au))}onUnsubscribe(){var t;this.hasListeners()||((t=fe(this,xl))==null||t.call(this),mt(this,xl,void 0))}setEventListener(t){var n;mt(this,Au,t),(n=fe(this,xl))==null||n.call(this),mt(this,xl,t(this.setOnline.bind(this)))}setOnline(t){fe(this,Cu)!==t&&(mt(this,Cu,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return fe(this,Cu)}},Cu=new WeakMap,xl=new WeakMap,Au=new WeakMap,i4),cx=new uR;function Ny(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),e(i)},n.reject=i=>{r({status:"rejected",reason:i}),t(i)},n}function fR(e){return Math.min(1e3*2**e,3e4)}function TA(e){return(e??"online")==="online"?cx.isOnline():!0}var LA=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Yv(e){return e instanceof LA}function EA(e){let t=!1,n=0,r=!1,i;const a=Ny(),o=y=>{var j;r||(g(new LA(y)),(j=e.abort)==null||j.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>jb.isFocused()&&(e.networkMode==="always"||cx.isOnline())&&e.canRun(),f=()=>TA(e.networkMode)&&e.canRun(),h=y=>{var j;r||(r=!0,(j=e.onSuccess)==null||j.call(e,y),i==null||i(),a.resolve(y))},g=y=>{var j;r||(r=!0,(j=e.onError)==null||j.call(e,y),i==null||i(),a.reject(y))},m=()=>new Promise(y=>{var j;i=v=>{(r||d())&&y(v)},(j=e.onPause)==null||j.call(e)}).then(()=>{var y;i=void 0,r||(y=e.onContinue)==null||y.call(e)}),S=()=>{if(r)return;let y;const j=n===0?e.initialPromise:void 0;try{y=j??e.fn()}catch(v){y=Promise.reject(v)}Promise.resolve(y).then(h).catch(v=>{var L;if(r)return;const x=e.retry??(Qc?0:3),_=e.retryDelay??fR,k=typeof _=="function"?_(n,v):_,M=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,v);if(t||!M){g(v);return}n++,(L=e.onFail)==null||L.call(e,n,v),oR(k).then(()=>d()?void 0:m()).then(()=>{t?g(v):S()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?S():m().then(S),a)}}function hR(){let e=[],t=0,n=l=>{l()},r=l=>{l()},i=l=>setTimeout(l,0);const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{i=l}}}var Ar=hR(),Pc,a4,IA=(a4=class{constructor(){Ct(this,Pc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),yy(this.gcTime)&&mt(this,Pc,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qc?1/0:5*60*1e3))}clearGcTimeout(){fe(this,Pc)&&(clearTimeout(fe(this,Pc)),mt(this,Pc,void 0))}},Pc=new WeakMap,a4),ku,Pu,Ai,ss,wm,Tc,ra,vo,o4,mR=(o4=class extends IA{constructor(t){super();Ct(this,ra);Ct(this,ku);Ct(this,Pu);Ct(this,Ai);Ct(this,ss);Ct(this,wm);Ct(this,Tc);mt(this,Tc,!1),mt(this,wm,t.defaultOptions),this.setOptions(t.options),this.observers=[],mt(this,Ai,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,mt(this,ku,pR(this.options)),this.state=t.state??fe(this,ku),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=fe(this,ss))==null?void 0:t.promise}setOptions(t){this.options={...fe(this,wm),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&fe(this,Ai).remove(this)}setData(t,n){const r=wy(this.state.data,t,this.options);return Ht(this,ra,vo).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){Ht(this,ra,vo).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,i;const n=(r=fe(this,ss))==null?void 0:r.promise;return(i=fe(this,ss))==null||i.cancel(t),n?n.then(ki).catch(ki):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(fe(this,ku))}isActive(){return this.observers.some(t=>aa(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Nb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!AA(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=fe(this,ss))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=fe(this,ss))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),fe(this,Ai).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(fe(this,ss)&&(fe(this,Tc)?fe(this,ss).cancel({revert:!0}):fe(this,ss).cancelRetry()),this.scheduleGc()),fe(this,Ai).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ht(this,ra,vo).call(this,{type:"invalidate"})}fetch(t,n){var c,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(fe(this,ss))return fe(this,ss).continueRetry(),fe(this,ss).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(g=>g.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(mt(this,Tc,!0),r.signal)})},a=()=>{const h=PA(this.options,n),g={queryKey:this.queryKey,meta:this.meta};return i(g),mt(this,Tc,!1),this.options.persister?this.options.persister(h,g,this):h(g)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(o),(c=this.options.behavior)==null||c.onFetch(o,this),mt(this,Pu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Ht(this,ra,vo).call(this,{type:"fetch",meta:(f=o.fetchOptions)==null?void 0:f.meta});const l=h=>{var g,m,S,y;Yv(h)&&h.silent||Ht(this,ra,vo).call(this,{type:"error",error:h}),Yv(h)||((m=(g=fe(this,Ai).config).onError)==null||m.call(g,h,this),(y=(S=fe(this,Ai).config).onSettled)==null||y.call(S,this.state.data,h,this)),this.scheduleGc()};return mt(this,ss,EA({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var g,m,S,y;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(j){l(j);return}(m=(g=fe(this,Ai).config).onSuccess)==null||m.call(g,h,this),(y=(S=fe(this,Ai).config).onSettled)==null||y.call(S,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,g)=>{Ht(this,ra,vo).call(this,{type:"failed",failureCount:h,error:g})},onPause:()=>{Ht(this,ra,vo).call(this,{type:"pause"})},onContinue:()=>{Ht(this,ra,vo).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),fe(this,ss).start()}},ku=new WeakMap,Pu=new WeakMap,Ai=new WeakMap,ss=new WeakMap,wm=new WeakMap,Tc=new WeakMap,ra=new WeakSet,vo=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...DA(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Yv(i)&&i.revert&&fe(this,Pu)?{...fe(this,Pu),fetchStatus:"idle"}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Ar.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),fe(this,Ai).notify({query:this,type:"updated",action:t})})},o4);function DA(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:TA(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function pR(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Da,l4,gR=(l4=class extends nf{constructor(t={}){super();Ct(this,Da);this.config=t,mt(this,Da,new Map)}build(t,n,r){const i=n.queryKey,a=n.queryHash??wb(i,n);let o=this.get(a);return o||(o=new mR({cache:this,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){fe(this,Da).has(t.queryHash)||(fe(this,Da).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=fe(this,Da).get(t.queryHash);n&&(t.destroy(),n===t&&fe(this,Da).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ar.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return fe(this,Da).get(t)}getAll(){return[...fe(this,Da).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>vN(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>vN(t,r)):n}notify(t){Ar.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Ar.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ar.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Da=new WeakMap,l4),Fa,bs,Lc,Ma,ll,c4,xR=(c4=class extends IA{constructor(t){super();Ct(this,Ma);Ct(this,Fa);Ct(this,bs);Ct(this,Lc);this.mutationId=t.mutationId,mt(this,bs,t.mutationCache),mt(this,Fa,[]),this.state=t.state||FA(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){fe(this,Fa).includes(t)||(fe(this,Fa).push(t),this.clearGcTimeout(),fe(this,bs).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){mt(this,Fa,fe(this,Fa).filter(n=>n!==t)),this.scheduleGc(),fe(this,bs).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){fe(this,Fa).length||(this.state.status==="pending"?this.scheduleGc():fe(this,bs).remove(this))}continue(){var t;return((t=fe(this,Lc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,o,l,c,d,f,h,g,m,S,y,j,v,x,_,k,M,L,O;mt(this,Lc,EA({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(T,E)=>{Ht(this,Ma,ll).call(this,{type:"failed",failureCount:T,error:E})},onPause:()=>{Ht(this,Ma,ll).call(this,{type:"pause"})},onContinue:()=>{Ht(this,Ma,ll).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>fe(this,bs).canRun(this)}));const n=this.state.status==="pending",r=!fe(this,Lc).canStart();try{if(!n){Ht(this,Ma,ll).call(this,{type:"pending",variables:t,isPaused:r}),await((a=(i=fe(this,bs).config).onMutate)==null?void 0:a.call(i,t,this));const E=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));E!==this.state.context&&Ht(this,Ma,ll).call(this,{type:"pending",context:E,variables:t,isPaused:r})}const T=await fe(this,Lc).start();return await((d=(c=fe(this,bs).config).onSuccess)==null?void 0:d.call(c,T,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,T,t,this.state.context)),await((m=(g=fe(this,bs).config).onSettled)==null?void 0:m.call(g,T,null,this.state.variables,this.state.context,this)),await((y=(S=this.options).onSettled)==null?void 0:y.call(S,T,null,t,this.state.context)),Ht(this,Ma,ll).call(this,{type:"success",data:T}),T}catch(T){try{throw await((v=(j=fe(this,bs).config).onError)==null?void 0:v.call(j,T,t,this.state.context,this)),await((_=(x=this.options).onError)==null?void 0:_.call(x,T,t,this.state.context)),await((M=(k=fe(this,bs).config).onSettled)==null?void 0:M.call(k,void 0,T,this.state.variables,this.state.context,this)),await((O=(L=this.options).onSettled)==null?void 0:O.call(L,void 0,T,t,this.state.context)),T}finally{Ht(this,Ma,ll).call(this,{type:"error",error:T})}}finally{fe(this,bs).runNext(this)}}},Fa=new WeakMap,bs=new WeakMap,Lc=new WeakMap,Ma=new WeakSet,ll=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Ar.batch(()=>{fe(this,Fa).forEach(r=>{r.onMutationUpdate(t)}),fe(this,bs).notify({mutation:this,type:"updated",action:t})})},c4);function FA(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ni,Nm,d4,vR=(d4=class extends nf{constructor(t={}){super();Ct(this,ni);Ct(this,Nm);this.config=t,mt(this,ni,new Map),mt(this,Nm,Date.now())}build(t,n,r){const i=new xR({mutationCache:this,mutationId:++Rp(this,Nm)._,options:t.defaultMutationOptions(n),state:r});return this.add(i),i}add(t){const n=tg(t),r=fe(this,ni).get(n)??[];r.push(t),fe(this,ni).set(n,r),this.notify({type:"added",mutation:t})}remove(t){var r;const n=tg(t);if(fe(this,ni).has(n)){const i=(r=fe(this,ni).get(n))==null?void 0:r.filter(a=>a!==t);i&&(i.length===0?fe(this,ni).delete(n):fe(this,ni).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const n=(r=fe(this,ni).get(tg(t)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var r;const n=(r=fe(this,ni).get(tg(t)))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){Ar.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...fe(this,ni).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(r=>yN(n,r))}findAll(t={}){return this.getAll().filter(n=>yN(t,n))}notify(t){Ar.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Ar.batch(()=>Promise.all(t.map(n=>n.continue().catch(ki))))}},ni=new WeakMap,Nm=new WeakMap,d4);function tg(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function NN(e){return{onFetch:(t,n)=>{var f,h,g,m,S;const r=t.options,i=(g=(h=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:h.fetchMore)==null?void 0:g.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],o=((S=t.state.data)==null?void 0:S.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let y=!1;const j=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},v=PA(t.options,t.fetchOptions),x=async(_,k,M)=>{if(y)return Promise.reject();if(k==null&&_.pages.length)return Promise.resolve(_);const L={queryKey:t.queryKey,pageParam:k,direction:M?"backward":"forward",meta:t.options.meta};j(L);const O=await v(L),{maxPages:T}=t.options,E=M?cR:lR;return{pages:E(_.pages,O,T),pageParams:E(_.pageParams,k,T)}};if(i&&a.length){const _=i==="backward",k=_?yR:jN,M={pages:a,pageParams:o},L=k(r,M);l=await x(M,L,_)}else{const _=e??a.length;do{const k=c===0?o[0]??r.initialPageParam:jN(r,l);if(c>0&&k==null)break;l=await x(l,k),c++}while(c<_)}return l};t.options.persister?t.fetchFn=()=>{var y,j;return(j=(y=t.options).persister)==null?void 0:j.call(y,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function jN(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function yR(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var Xn,vl,yl,Tu,Lu,bl,Eu,Iu,u4,bR=(u4=class{constructor(e={}){Ct(this,Xn);Ct(this,vl);Ct(this,yl);Ct(this,Tu);Ct(this,Lu);Ct(this,bl);Ct(this,Eu);Ct(this,Iu);mt(this,Xn,e.queryCache||new gR),mt(this,vl,e.mutationCache||new vR),mt(this,yl,e.defaultOptions||{}),mt(this,Tu,new Map),mt(this,Lu,new Map),mt(this,bl,0)}mount(){Rp(this,bl)._++,fe(this,bl)===1&&(mt(this,Eu,jb.subscribe(async e=>{e&&(await this.resumePausedMutations(),fe(this,Xn).onFocus())})),mt(this,Iu,cx.subscribe(async e=>{e&&(await this.resumePausedMutations(),fe(this,Xn).onOnline())})))}unmount(){var e,t;Rp(this,bl)._--,fe(this,bl)===0&&((e=fe(this,Eu))==null||e.call(this),mt(this,Eu,void 0),(t=fe(this,Iu))==null||t.call(this),mt(this,Iu,void 0))}isFetching(e){return fe(this,Xn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return fe(this,vl).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=fe(this,Xn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=fe(this,Xn).build(this,n);return e.revalidateIfStale&&r.isStaleByTime(xu(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return fe(this,Xn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),i=fe(this,Xn).get(r.queryHash),a=i==null?void 0:i.state.data,o=aR(t,a);if(o!==void 0)return fe(this,Xn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Ar.batch(()=>fe(this,Xn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=fe(this,Xn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=fe(this,Xn);Ar.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=fe(this,Xn),r={type:"active",...e};return Ar.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Ar.batch(()=>fe(this,Xn).findAll(e).map(i=>i.cancel(n)));return Promise.all(r).then(ki).catch(ki)}invalidateQueries(e={},t={}){return Ar.batch(()=>{if(fe(this,Xn).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=Ar.batch(()=>fe(this,Xn).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(ki)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(ki)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=fe(this,Xn).build(this,t);return n.isStaleByTime(xu(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ki).catch(ki)}fetchInfiniteQuery(e){return e.behavior=NN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ki).catch(ki)}ensureInfiniteQueryData(e){return e.behavior=NN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return cx.isOnline()?fe(this,vl).resumePausedMutations():Promise.resolve()}getQueryCache(){return fe(this,Xn)}getMutationCache(){return fe(this,vl)}getDefaultOptions(){return fe(this,yl)}setDefaultOptions(e){mt(this,yl,e)}setQueryDefaults(e,t){fe(this,Tu).set(Yc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...fe(this,Tu).values()];let n={};return t.forEach(r=>{Xh(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){fe(this,Lu).set(Yc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...fe(this,Lu).values()];let n={};return t.forEach(r=>{Xh(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...fe(this,yl).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=wb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Nb&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...fe(this,yl).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){fe(this,Xn).clear(),fe(this,vl).clear()}},Xn=new WeakMap,vl=new WeakMap,yl=new WeakMap,Tu=new WeakMap,Lu=new WeakMap,bl=new WeakMap,Eu=new WeakMap,Iu=new WeakMap,u4),Bs,Zt,jm,ws,Ec,Du,wl,Ra,Sm,Fu,Mu,Ic,Dc,Nl,Ru,hn,ch,jy,Sy,_y,Cy,Ay,ky,Py,MA,f4,wR=(f4=class extends nf{constructor(t,n){super();Ct(this,hn);Ct(this,Bs);Ct(this,Zt);Ct(this,jm);Ct(this,ws);Ct(this,Ec);Ct(this,Du);Ct(this,wl);Ct(this,Ra);Ct(this,Sm);Ct(this,Fu);Ct(this,Mu);Ct(this,Ic);Ct(this,Dc);Ct(this,Nl);Ct(this,Ru,new Set);this.options=n,mt(this,Bs,t),mt(this,Ra,null),mt(this,wl,Ny()),this.options.experimental_prefetchInRender||fe(this,wl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(fe(this,Zt).addObserver(this),SN(fe(this,Zt),this.options)?Ht(this,hn,ch).call(this):this.updateResult(),Ht(this,hn,Cy).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ty(fe(this,Zt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ty(fe(this,Zt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ht(this,hn,Ay).call(this),Ht(this,hn,ky).call(this),fe(this,Zt).removeObserver(this)}setOptions(t,n){const r=this.options,i=fe(this,Zt);if(this.options=fe(this,Bs).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof aa(this.options.enabled,fe(this,Zt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ht(this,hn,Py).call(this),fe(this,Zt).setOptions(this.options),r._defaulted&&!lx(this.options,r)&&fe(this,Bs).getQueryCache().notify({type:"observerOptionsUpdated",query:fe(this,Zt),observer:this});const a=this.hasListeners();a&&_N(fe(this,Zt),i,this.options,r)&&Ht(this,hn,ch).call(this),this.updateResult(n),a&&(fe(this,Zt)!==i||aa(this.options.enabled,fe(this,Zt))!==aa(r.enabled,fe(this,Zt))||xu(this.options.staleTime,fe(this,Zt))!==xu(r.staleTime,fe(this,Zt)))&&Ht(this,hn,jy).call(this);const o=Ht(this,hn,Sy).call(this);a&&(fe(this,Zt)!==i||aa(this.options.enabled,fe(this,Zt))!==aa(r.enabled,fe(this,Zt))||o!==fe(this,Nl))&&Ht(this,hn,_y).call(this,o)}getOptimisticResult(t){const n=fe(this,Bs).getQueryCache().build(fe(this,Bs),t),r=this.createResult(n,t);return jR(this,r)&&(mt(this,ws,r),mt(this,Du,this.options),mt(this,Ec,fe(this,Zt).state)),r}getCurrentResult(){return fe(this,ws)}trackResult(t,n){const r={};return Object.keys(t).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),r}trackProp(t){fe(this,Ru).add(t)}getCurrentQuery(){return fe(this,Zt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=fe(this,Bs).defaultQueryOptions(t),r=fe(this,Bs).getQueryCache().build(fe(this,Bs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return Ht(this,hn,ch).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),fe(this,ws)))}createResult(t,n){var T;const r=fe(this,Zt),i=this.options,a=fe(this,ws),o=fe(this,Ec),l=fe(this,Du),d=t!==r?t.state:fe(this,jm),{state:f}=t;let h={...f},g=!1,m;if(n._optimisticResults){const E=this.hasListeners(),Z=!E&&SN(t,n),C=E&&_N(t,r,n,i);(Z||C)&&(h={...h,...DA(f.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:S,errorUpdatedAt:y,status:j}=h;if(n.select&&h.data!==void 0)if(a&&h.data===(o==null?void 0:o.data)&&n.select===fe(this,Sm))m=fe(this,Fu);else try{mt(this,Sm,n.select),m=n.select(h.data),m=wy(a==null?void 0:a.data,m,n),mt(this,Fu,m),mt(this,Ra,null)}catch(E){mt(this,Ra,E)}else m=h.data;if(n.placeholderData!==void 0&&m===void 0&&j==="pending"){let E;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))E=a.data;else if(E=typeof n.placeholderData=="function"?n.placeholderData((T=fe(this,Mu))==null?void 0:T.state.data,fe(this,Mu)):n.placeholderData,n.select&&E!==void 0)try{E=n.select(E),mt(this,Ra,null)}catch(Z){mt(this,Ra,Z)}E!==void 0&&(j="success",m=wy(a==null?void 0:a.data,E,n),g=!0)}fe(this,Ra)&&(S=fe(this,Ra),m=fe(this,Fu),y=Date.now(),j="error");const v=h.fetchStatus==="fetching",x=j==="pending",_=j==="error",k=x&&v,M=m!==void 0,O={status:j,fetchStatus:h.fetchStatus,isPending:x,isSuccess:j==="success",isError:_,isInitialLoading:k,isLoading:k,data:m,dataUpdatedAt:h.dataUpdatedAt,error:S,errorUpdatedAt:y,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:v,isRefetching:v&&!x,isLoadingError:_&&!M,isPaused:h.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:_&&M,isStale:Sb(t,n),refetch:this.refetch,promise:fe(this,wl)};if(this.options.experimental_prefetchInRender){const E=P=>{O.status==="error"?P.reject(O.error):O.data!==void 0&&P.resolve(O.data)},Z=()=>{const P=mt(this,wl,O.promise=Ny());E(P)},C=fe(this,wl);switch(C.status){case"pending":t.queryHash===r.queryHash&&E(C);break;case"fulfilled":(O.status==="error"||O.data!==C.value)&&Z();break;case"rejected":(O.status!=="error"||O.error!==C.reason)&&Z();break}}return O}updateResult(t){const n=fe(this,ws),r=this.createResult(fe(this,Zt),this.options);if(mt(this,Ec,fe(this,Zt).state),mt(this,Du,this.options),fe(this,Ec).data!==void 0&&mt(this,Mu,fe(this,Zt)),lx(r,n))return;mt(this,ws,r);const i={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!fe(this,Ru).size)return!0;const c=new Set(l??fe(this,Ru));return this.options.throwOnError&&c.add("error"),Object.keys(fe(this,ws)).some(d=>{const f=d;return fe(this,ws)[f]!==n[f]&&c.has(f)})};(t==null?void 0:t.listeners)!==!1&&a()&&(i.listeners=!0),Ht(this,hn,MA).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ht(this,hn,Cy).call(this)}},Bs=new WeakMap,Zt=new WeakMap,jm=new WeakMap,ws=new WeakMap,Ec=new WeakMap,Du=new WeakMap,wl=new WeakMap,Ra=new WeakMap,Sm=new WeakMap,Fu=new WeakMap,Mu=new WeakMap,Ic=new WeakMap,Dc=new WeakMap,Nl=new WeakMap,Ru=new WeakMap,hn=new WeakSet,ch=function(t){Ht(this,hn,Py).call(this);let n=fe(this,Zt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(ki)),n},jy=function(){Ht(this,hn,Ay).call(this);const t=xu(this.options.staleTime,fe(this,Zt));if(Qc||fe(this,ws).isStale||!yy(t))return;const r=AA(fe(this,ws).dataUpdatedAt,t)+1;mt(this,Ic,setTimeout(()=>{fe(this,ws).isStale||this.updateResult()},r))},Sy=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(fe(this,Zt)):this.options.refetchInterval)??!1},_y=function(t){Ht(this,hn,ky).call(this),mt(this,Nl,t),!(Qc||aa(this.options.enabled,fe(this,Zt))===!1||!yy(fe(this,Nl))||fe(this,Nl)===0)&&mt(this,Dc,setInterval(()=>{(this.options.refetchIntervalInBackground||jb.isFocused())&&Ht(this,hn,ch).call(this)},fe(this,Nl)))},Cy=function(){Ht(this,hn,jy).call(this),Ht(this,hn,_y).call(this,Ht(this,hn,Sy).call(this))},Ay=function(){fe(this,Ic)&&(clearTimeout(fe(this,Ic)),mt(this,Ic,void 0))},ky=function(){fe(this,Dc)&&(clearInterval(fe(this,Dc)),mt(this,Dc,void 0))},Py=function(){const t=fe(this,Bs).getQueryCache().build(fe(this,Bs),this.options);if(t===fe(this,Zt))return;const n=fe(this,Zt);mt(this,Zt,t),mt(this,jm,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},MA=function(t){Ar.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(fe(this,ws))}),fe(this,Bs).getQueryCache().notify({query:fe(this,Zt),type:"observerResultsUpdated"})})},f4);function NR(e,t){return aa(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function SN(e,t){return NR(e,t)||e.state.data!==void 0&&Ty(e,t,t.refetchOnMount)}function Ty(e,t,n){if(aa(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Sb(e,t)}return!1}function _N(e,t,n,r){return(e!==t||aa(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Sb(e,n)}function Sb(e,t){return aa(t.enabled,e)!==!1&&e.isStaleByTime(xu(t.staleTime,e))}function jR(e,t){return!lx(e.getCurrentResult(),t)}var jl,Sl,zs,jo,Po,Ag,Ly,h4,SR=(h4=class extends nf{constructor(n,r){super();Ct(this,Po);Ct(this,jl);Ct(this,Sl);Ct(this,zs);Ct(this,jo);mt(this,jl,n),this.setOptions(r),this.bindMethods(),Ht(this,Po,Ag).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=fe(this,jl).defaultMutationOptions(n),lx(this.options,r)||fe(this,jl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:fe(this,zs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Yc(r.mutationKey)!==Yc(this.options.mutationKey)?this.reset():((i=fe(this,zs))==null?void 0:i.state.status)==="pending"&&fe(this,zs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=fe(this,zs))==null||n.removeObserver(this)}onMutationUpdate(n){Ht(this,Po,Ag).call(this),Ht(this,Po,Ly).call(this,n)}getCurrentResult(){return fe(this,Sl)}reset(){var n;(n=fe(this,zs))==null||n.removeObserver(this),mt(this,zs,void 0),Ht(this,Po,Ag).call(this),Ht(this,Po,Ly).call(this)}mutate(n,r){var i;return mt(this,jo,r),(i=fe(this,zs))==null||i.removeObserver(this),mt(this,zs,fe(this,jl).getMutationCache().build(fe(this,jl),this.options)),fe(this,zs).addObserver(this),fe(this,zs).execute(n)}},jl=new WeakMap,Sl=new WeakMap,zs=new WeakMap,jo=new WeakMap,Po=new WeakSet,Ag=function(){var r;const n=((r=fe(this,zs))==null?void 0:r.state)??FA();mt(this,Sl,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Ly=function(n){Ar.batch(()=>{var r,i,a,o,l,c,d,f;if(fe(this,jo)&&this.hasListeners()){const h=fe(this,Sl).variables,g=fe(this,Sl).context;(n==null?void 0:n.type)==="success"?((i=(r=fe(this,jo)).onSuccess)==null||i.call(r,n.data,h,g),(o=(a=fe(this,jo)).onSettled)==null||o.call(a,n.data,null,h,g)):(n==null?void 0:n.type)==="error"&&((c=(l=fe(this,jo)).onError)==null||c.call(l,n.error,h,g),(f=(d=fe(this,jo)).onSettled)==null||f.call(d,void 0,n.error,h,g))}this.listeners.forEach(h=>{h(fe(this,Sl))})})},h4),RA=N.createContext(void 0),tc=e=>{const t=N.useContext(RA);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},_R=({client:e,children:t})=>(N.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(RA.Provider,{value:e,children:t})),OA=N.createContext(!1),CR=()=>N.useContext(OA);OA.Provider;function AR(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var kR=N.createContext(AR()),PR=()=>N.useContext(kR);function BA(e,t){return typeof e=="function"?e(...t):!!e}function Ey(){}var TR=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},LR=e=>{N.useEffect(()=>{e.clearReset()},[e])},ER=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&BA(n,[e.error,r]),IR=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},DR=(e,t)=>e.isLoading&&e.isFetching&&!t,FR=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,CN=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function MR(e,t,n){var f,h,g,m,S;const r=tc(),i=CR(),a=PR(),o=r.defaultQueryOptions(e);(h=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,o),o._optimisticResults=i?"isRestoring":"optimistic",IR(o),TR(o,a),LR(a);const l=!r.getQueryCache().get(o.queryHash),[c]=N.useState(()=>new t(r,o)),d=c.getOptimisticResult(o);if(N.useSyncExternalStore(N.useCallback(y=>{const j=i?Ey:c.subscribe(Ar.batchCalls(y));return c.updateResult(),j},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),N.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),FR(o,d))throw CN(o,c,a);if(ER({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw d.error;if((m=(g=r.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||m.call(g,o,d),o.experimental_prefetchInRender&&!Qc&&DR(d,i)){const y=l?CN(o,c,a):(S=r.getQueryCache().get(o.queryHash))==null?void 0:S.promise;y==null||y.catch(Ey).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function kt(e,t){return MR(e,wR)}function fn(e,t){const n=tc(),[r]=N.useState(()=>new SR(n,e));N.useEffect(()=>{r.setOptions(e)},[r,e]);const i=N.useSyncExternalStore(N.useCallback(o=>r.subscribe(Ar.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=N.useCallback((o,l)=>{r.mutate(o,l).catch(Ey)},[r]);if(i.error&&BA(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}async function zA(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function an(e,t,n){const r=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await zA(r),r}const $A=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t[0],{credentials:"include"});return e==="returnNull"&&n.status===401?null:(await zA(n),await n.json())},Tn=new bR({defaultOptions:{queries:{queryFn:$A({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),RR=1,OR=1e6;let Zv=0;function BR(){return Zv=(Zv+1)%Number.MAX_SAFE_INTEGER,Zv.toString()}const Xv=new Map,AN=e=>{if(Xv.has(e))return;const t=setTimeout(()=>{Xv.delete(e),Sh({type:"REMOVE_TOAST",toastId:e})},OR);Xv.set(e,t)},zR=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,RR)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?AN(n):e.toasts.forEach(r=>{AN(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},kg=[];let Pg={toasts:[]};function Sh(e){Pg=zR(Pg,e),kg.forEach(t=>{t(Pg)})}function Tg({...e}){const t=BR(),n=i=>Sh({type:"UPDATE_TOAST",toast:{...i,id:t}}),r=()=>Sh({type:"DISMISS_TOAST",toastId:t});return Sh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||r()}}}),{id:t,dismiss:r,update:n}}function Qr(){const[e,t]=N.useState(Pg);return N.useEffect(()=>(kg.push(t),()=>{const n=kg.indexOf(t);n>-1&&kg.splice(n,1)}),[e]),{...e,toast:Tg,dismiss:n=>Sh({type:"DISMISS_TOAST",toastId:n})}}function at(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function kN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function r0(...e){return t=>{let n=!1;const r=e.map(i=>{const a=kN(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():kN(e[i],null)}}}}function en(...e){return N.useCallback(r0(...e),e)}function $R(e,t){const n=N.createContext(t),r=a=>{const{children:o,...l}=a,c=N.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function i(a){const o=N.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,i]}function xi(e,t=[]){let n=[];function r(a,o){const l=N.createContext(o),c=n.length;n=[...n,o];const d=h=>{var v;const{scope:g,children:m,...S}=h,y=((v=g==null?void 0:g[e])==null?void 0:v[c])||l,j=N.useMemo(()=>S,Object.values(S));return s.jsx(y.Provider,{value:j,children:m})};d.displayName=a+"Provider";function f(h,g){var y;const m=((y=g==null?void 0:g[e])==null?void 0:y[c])||l,S=N.useContext(m);if(S)return S;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[d,f]}const i=()=>{const a=n.map(o=>N.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return N.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[r,qR(i,...t)]}function qR(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Zc(e){const t=UR(e),n=N.forwardRef((r,i)=>{const{children:a,...o}=r,l=N.Children.toArray(a),c=l.find(VR);if(c){const d=c.props.children,f=l.map(h=>h===c?N.Children.count(d)>1?N.Children.only(null):N.isValidElement(d)?d.props.children:null:h);return s.jsx(t,{...o,ref:i,children:N.isValidElement(d)?N.cloneElement(d,void 0,f):null})}return s.jsx(t,{...o,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}var qA=Zc("Slot");function UR(e){const t=N.forwardRef((n,r)=>{const{children:i,...a}=n;if(N.isValidElement(i)){const o=HR(i),l=WR(a,i.props);return i.type!==N.Fragment&&(l.ref=r?r0(r,o):o),N.cloneElement(i,l)}return N.Children.count(i)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var UA=Symbol("radix.slottable");function VA(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=UA,t}function VR(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===UA}function WR(e,t){const n={...t};for(const r in t){const i=e[r],a=t[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...l)=>{a(...l),i(...l)}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function HR(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function s0(e){const t=e+"CollectionProvider",[n,r]=xi(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=y=>{const{scope:j,children:v}=y,x=qt.useRef(null),_=qt.useRef(new Map).current;return s.jsx(i,{scope:j,itemMap:_,collectionRef:x,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=Zc(l),d=qt.forwardRef((y,j)=>{const{scope:v,children:x}=y,_=a(l,v),k=en(j,_.collectionRef);return s.jsx(c,{ref:k,children:x})});d.displayName=l;const f=e+"CollectionItemSlot",h="data-radix-collection-item",g=Zc(f),m=qt.forwardRef((y,j)=>{const{scope:v,children:x,..._}=y,k=qt.useRef(null),M=en(j,k),L=a(f,v);return qt.useEffect(()=>(L.itemMap.set(k,{ref:k,..._}),()=>void L.itemMap.delete(k))),s.jsx(g,{[h]:"",ref:M,children:x})});m.displayName=f;function S(y){const j=a(e+"CollectionConsumer",y);return qt.useCallback(()=>{const x=j.collectionRef.current;if(!x)return[];const _=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(j.itemMap.values()).sort((L,O)=>_.indexOf(L.ref.current)-_.indexOf(O.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},S,r]}var GR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Lt=GR.reduce((e,t)=>{const n=Zc(`Primitive.${t}`),r=N.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function _b(e,t){e&&od.flushSync(()=>e.dispatchEvent(t))}function Kr(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function KR(e,t=globalThis==null?void 0:globalThis.document){const n=Kr(e);N.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var QR="DismissableLayer",Iy="dismissableLayer.update",YR="dismissableLayer.pointerDownOutside",ZR="dismissableLayer.focusOutside",PN,WA=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rf=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=N.useContext(WA),[f,h]=N.useState(null),g=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=N.useState({}),S=en(t,O=>h(O)),y=Array.from(d.layers),[j]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(j),x=f?y.indexOf(f):-1,_=d.layersWithOutsidePointerEventsDisabled.size>0,k=x>=v,M=JR(O=>{const T=O.target,E=[...d.branches].some(Z=>Z.contains(T));!k||E||(i==null||i(O),o==null||o(O),O.defaultPrevented||l==null||l())},g),L=eO(O=>{const T=O.target;[...d.branches].some(Z=>Z.contains(T))||(a==null||a(O),o==null||o(O),O.defaultPrevented||l==null||l())},g);return KR(O=>{x===d.layers.size-1&&(r==null||r(O),!O.defaultPrevented&&l&&(O.preventDefault(),l()))},g),N.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(PN=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),TN(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=PN)}},[f,g,n,d]),N.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),TN())},[f,d]),N.useEffect(()=>{const O=()=>m({});return document.addEventListener(Iy,O),()=>document.removeEventListener(Iy,O)},[]),s.jsx(Lt.div,{...c,ref:S,style:{pointerEvents:_?k?"auto":"none":void 0,...e.style},onFocusCapture:at(e.onFocusCapture,L.onFocusCapture),onBlurCapture:at(e.onBlurCapture,L.onBlurCapture),onPointerDownCapture:at(e.onPointerDownCapture,M.onPointerDownCapture)})});rf.displayName=QR;var XR="DismissableLayerBranch",HA=N.forwardRef((e,t)=>{const n=N.useContext(WA),r=N.useRef(null),i=en(t,r);return N.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),s.jsx(Lt.div,{...e,ref:i})});HA.displayName=XR;function JR(e,t=globalThis==null?void 0:globalThis.document){const n=Kr(e),r=N.useRef(!1),i=N.useRef(()=>{});return N.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){GA(YR,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function eO(e,t=globalThis==null?void 0:globalThis.document){const n=Kr(e),r=N.useRef(!1);return N.useEffect(()=>{const i=a=>{a.target&&!r.current&&GA(ZR,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function TN(){const e=new CustomEvent(Iy);document.dispatchEvent(e)}function GA(e,t,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?_b(i,a):i.dispatchEvent(a)}var tO=rf,nO=HA,Pr=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},rO="Portal",Em=N.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[i,a]=N.useState(!1);Pr(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?TM.createPortal(s.jsx(Lt.div,{...r,ref:t}),o):null});Em.displayName=rO;function sO(e,t){return N.useReducer((n,r)=>t[n][r]??n,e)}var xa=e=>{const{present:t,children:n}=e,r=iO(t),i=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),a=en(r.ref,aO(i));return typeof n=="function"||r.isPresent?N.cloneElement(i,{ref:a}):null};xa.displayName="Presence";function iO(e){const[t,n]=N.useState(),r=N.useRef({}),i=N.useRef(e),a=N.useRef("none"),o=e?"mounted":"unmounted",[l,c]=sO(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const d=ng(r.current);a.current=l==="mounted"?d:"none"},[l]),Pr(()=>{const d=r.current,f=i.current;if(f!==e){const g=a.current,m=ng(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(f&&g!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),Pr(()=>{if(t){let d;const f=t.ownerDocument.defaultView??window,h=m=>{const y=ng(r.current).includes(m.animationName);if(m.target===t&&y&&(c("ANIMATION_END"),!i.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",d=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},g=m=>{m.target===t&&(a.current=ng(r.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{f.clearTimeout(d),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:N.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function ng(e){return(e==null?void 0:e.animationName)||"none"}function aO(e){var r,i;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Bl({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=oO({defaultProp:t,onChange:n}),a=e!==void 0,o=a?e:r,l=Kr(n),c=N.useCallback(d=>{if(a){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else i(d)},[a,e,i,l]);return[o,c]}function oO({defaultProp:e,onChange:t}){const n=N.useState(e),[r]=n,i=N.useRef(r),a=Kr(t);return N.useEffect(()=>{i.current!==r&&(a(r),i.current=r)},[r,i,a]),n}var lO="VisuallyHidden",Im=N.forwardRef((e,t)=>s.jsx(Lt.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Im.displayName=lO;var cO=Im,Cb="ToastProvider",[Ab,dO,uO]=s0("Toast"),[KA,RQ]=xi("Toast",[uO]),[fO,i0]=KA(Cb),QA=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=N.useState(null),[d,f]=N.useState(0),h=N.useRef(!1),g=N.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cb}\`. Expected non-empty \`string\`.`),s.jsx(Ab.Provider,{scope:t,children:s.jsx(fO,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:N.useCallback(()=>f(m=>m+1),[]),onToastRemove:N.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:g,children:o})})};QA.displayName=Cb;var YA="ToastViewport",hO=["F8"],Dy="toast.viewportPause",Fy="toast.viewportResume",ZA=N.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=hO,label:i="Notifications ({hotkey})",...a}=e,o=i0(YA,n),l=dO(n),c=N.useRef(null),d=N.useRef(null),f=N.useRef(null),h=N.useRef(null),g=en(t,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=o.toastCount>0;N.useEffect(()=>{const j=v=>{var _;r.length!==0&&r.every(k=>v[k]||v.code===k)&&((_=h.current)==null||_.focus())};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[r]),N.useEffect(()=>{const j=c.current,v=h.current;if(S&&j&&v){const x=()=>{if(!o.isClosePausedRef.current){const L=new CustomEvent(Dy);v.dispatchEvent(L),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const L=new CustomEvent(Fy);v.dispatchEvent(L),o.isClosePausedRef.current=!1}},k=L=>{!j.contains(L.relatedTarget)&&_()},M=()=>{j.contains(document.activeElement)||_()};return j.addEventListener("focusin",x),j.addEventListener("focusout",k),j.addEventListener("pointermove",x),j.addEventListener("pointerleave",M),window.addEventListener("blur",x),window.addEventListener("focus",_),()=>{j.removeEventListener("focusin",x),j.removeEventListener("focusout",k),j.removeEventListener("pointermove",x),j.removeEventListener("pointerleave",M),window.removeEventListener("blur",x),window.removeEventListener("focus",_)}}},[S,o.isClosePausedRef]);const y=N.useCallback(({tabbingDirection:j})=>{const x=l().map(_=>{const k=_.ref.current,M=[k,...CO(k)];return j==="forwards"?M:M.reverse()});return(j==="forwards"?x.reverse():x).flat()},[l]);return N.useEffect(()=>{const j=h.current;if(j){const v=x=>{var M,L,O;const _=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!_){const T=document.activeElement,E=x.shiftKey;if(x.target===j&&E){(M=d.current)==null||M.focus();return}const P=y({tabbingDirection:E?"backwards":"forwards"}),G=P.findIndex(I=>I===T);Jv(P.slice(G+1))?x.preventDefault():E?(L=d.current)==null||L.focus():(O=f.current)==null||O.focus()}};return j.addEventListener("keydown",v),()=>j.removeEventListener("keydown",v)}},[l,y]),s.jsxs(nO,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&s.jsx(My,{ref:d,onFocusFromOutsideViewport:()=>{const j=y({tabbingDirection:"forwards"});Jv(j)}}),s.jsx(Ab.Slot,{scope:n,children:s.jsx(Lt.ol,{tabIndex:-1,...a,ref:g})}),S&&s.jsx(My,{ref:f,onFocusFromOutsideViewport:()=>{const j=y({tabbingDirection:"backwards"});Jv(j)}})]})});ZA.displayName=YA;var XA="ToastFocusProxy",My=N.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,a=i0(XA,n);return s.jsx(Im,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&r()}})});My.displayName=XA;var a0="Toast",mO="toast.swipeStart",pO="toast.swipeMove",gO="toast.swipeCancel",xO="toast.swipeEnd",JA=N.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:a,...o}=e,[l=!0,c]=Bl({prop:r,defaultProp:i,onChange:a});return s.jsx(xa,{present:n||l,children:s.jsx(bO,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Kr(e.onPause),onResume:Kr(e.onResume),onSwipeStart:at(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:at(e.onSwipeMove,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:at(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:at(e.onSwipeEnd,d=>{const{x:f,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});JA.displayName=a0;var[vO,yO]=KA(a0,{onClose(){}}),bO=N.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:g,onSwipeEnd:m,...S}=e,y=i0(a0,n),[j,v]=N.useState(null),x=en(t,I=>v(I)),_=N.useRef(null),k=N.useRef(null),M=i||y.duration,L=N.useRef(0),O=N.useRef(M),T=N.useRef(0),{onToastAdd:E,onToastRemove:Z}=y,C=Kr(()=>{var V;(j==null?void 0:j.contains(document.activeElement))&&((V=y.viewport)==null||V.focus()),o()}),P=N.useCallback(I=>{!I||I===1/0||(window.clearTimeout(T.current),L.current=new Date().getTime(),T.current=window.setTimeout(C,I))},[C]);N.useEffect(()=>{const I=y.viewport;if(I){const V=()=>{P(O.current),d==null||d()},z=()=>{const q=new Date().getTime()-L.current;O.current=O.current-q,window.clearTimeout(T.current),c==null||c()};return I.addEventListener(Dy,z),I.addEventListener(Fy,V),()=>{I.removeEventListener(Dy,z),I.removeEventListener(Fy,V)}}},[y.viewport,M,c,d,P]),N.useEffect(()=>{a&&!y.isClosePausedRef.current&&P(M)},[a,M,y.isClosePausedRef,P]),N.useEffect(()=>(E(),()=>Z()),[E,Z]);const G=N.useMemo(()=>j?ak(j):null,[j]);return y.viewport?s.jsxs(s.Fragment,{children:[G&&s.jsx(wO,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:G}),s.jsx(vO,{scope:n,onClose:C,children:od.createPortal(s.jsx(Ab.ItemSlot,{scope:n,children:s.jsx(tO,{asChild:!0,onEscapeKeyDown:at(l,()=>{y.isFocusedToastEscapeKeyDownRef.current||C(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Lt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":y.swipeDirection,...S,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:at(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:at(e.onPointerDown,I=>{I.button===0&&(_.current={x:I.clientX,y:I.clientY})}),onPointerMove:at(e.onPointerMove,I=>{if(!_.current)return;const V=I.clientX-_.current.x,z=I.clientY-_.current.y,q=!!k.current,H=["left","right"].includes(y.swipeDirection),X=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,le=H?X(0,V):0,Ce=H?0:X(0,z),F=I.pointerType==="touch"?10:2,J={x:le,y:Ce},re={originalEvent:I,delta:J};q?(k.current=J,rg(pO,h,re,{discrete:!1})):LN(J,y.swipeDirection,F)?(k.current=J,rg(mO,f,re,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(V)>F||Math.abs(z)>F)&&(_.current=null)}),onPointerUp:at(e.onPointerUp,I=>{const V=k.current,z=I.target;if(z.hasPointerCapture(I.pointerId)&&z.releasePointerCapture(I.pointerId),k.current=null,_.current=null,V){const q=I.currentTarget,H={originalEvent:I,delta:V};LN(V,y.swipeDirection,y.swipeThreshold)?rg(xO,m,H,{discrete:!0}):rg(gO,g,H,{discrete:!0}),q.addEventListener("click",X=>X.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),wO=e=>{const{__scopeToast:t,children:n,...r}=e,i=i0(a0,t),[a,o]=N.useState(!1),[l,c]=N.useState(!1);return SO(()=>o(!0)),N.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:s.jsx(Em,{asChild:!0,children:s.jsx(Im,{...r,children:a&&s.jsxs(s.Fragment,{children:[i.label," ",n]})})})},NO="ToastTitle",ek=N.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Lt.div,{...r,ref:t})});ek.displayName=NO;var jO="ToastDescription",tk=N.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Lt.div,{...r,ref:t})});tk.displayName=jO;var nk="ToastAction",rk=N.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(ik,{altText:n,asChild:!0,children:s.jsx(kb,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${nk}\`. Expected non-empty \`string\`.`),null)});rk.displayName=nk;var sk="ToastClose",kb=N.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=yO(sk,n);return s.jsx(ik,{asChild:!0,children:s.jsx(Lt.button,{type:"button",...r,ref:t,onClick:at(e.onClick,i.onClose)})})});kb.displayName=sk;var ik=N.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return s.jsx(Lt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function ak(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),_O(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...ak(r))}}),t}function rg(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?_b(i,a):i.dispatchEvent(a)}var LN=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),a=r>i;return t==="left"||t==="right"?a&&r>n:!a&&i>n};function SO(e=()=>{}){const t=Kr(e);Pr(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function _O(e){return e.nodeType===e.ELEMENT_NODE}function CO(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Jv(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var AO=QA,ok=ZA,lk=JA,ck=ek,dk=tk,uk=rk,fk=kb;function hk(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=hk(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function mk(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=hk(e))&&(r&&(r+=" "),r+=t);return r}const EN=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,IN=mk,sf=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return IN(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(d=>{const f=n==null?void 0:n[d],h=a==null?void 0:a[d];if(f===null)return null;const g=EN(f)||EN(h);return i[d][g]}),l=n&&Object.entries(n).reduce((d,f)=>{let[h,g]=f;return g===void 0||(d[h]=g),d},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((d,f)=>{let{class:h,className:g,...m}=f;return Object.entries(m).every(S=>{let[y,j]=S;return Array.isArray(j)?j.includes({...a,...l}[y]):{...a,...l}[y]===j})?[...d,h,g]:d},[]);return IN(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pk=(...e)=>e.filter((t,n,r)=>!!t&&r.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...PO,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:pk("lucide",i),...l},[...o.map(([d,f])=>N.createElement(d,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=(e,t)=>{const n=N.forwardRef(({className:r,...i},a)=>N.createElement(TO,{ref:a,iconNode:t,className:pk(`lucide-${kO(e)}`,r),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gk=vt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=vt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=vt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=vt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=vt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=vt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=vt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=vt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xk=vt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=vt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=vt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=vt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=vt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=vt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=vt("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=vt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=vt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=vt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=vt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=vt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=vt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=vt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=vt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=vt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=vt("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=vt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=vt("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=vt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bk=vt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=vt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=vt("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=vt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=vt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=vt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=vt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=vt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=vt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=vt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=vt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=vt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=vt("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=vt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=vt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=vt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=vt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=vt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=vt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=vt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=vt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=vt("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=vt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oc=vt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=vt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=vt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=vt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=vt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=vt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=vt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=vt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=vt("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o0=vt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=vt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=vt("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Lb="-",JO=e=>{const t=t9(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(Lb);return l[0]===""&&l.length!==1&&l.shift(),Sk(l,t)||e9(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},Sk=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),i=r?Sk(e.slice(1),r):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(Lb);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},RN=/^\[(.+)\]$/,e9=e=>{if(RN.test(e)){const t=RN.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},t9=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return r9(Object.entries(e.classGroups),n).forEach(([a,o])=>{qy(o,r,a,t)}),r},qy=(e,t,n,r)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:ON(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(n9(i)){qy(i(r),t,n,r);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{qy(o,ON(t,a),n,r)})})},ON=(e,t)=>{let n=e;return t.split(Lb).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},n9=e=>e.isThemeGetter,r9=(e,t)=>t?e.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,i]}):e,s9=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},_k="!",i9=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,i=t[0],a=t.length,o=l=>{const c=[];let d=0,f=0,h;for(let j=0;j<l.length;j++){let v=l[j];if(d===0){if(v===i&&(r||l.slice(j,j+a)===t)){c.push(l.slice(f,j)),f=j+a;continue}if(v==="/"){h=j;continue}}v==="["?d++:v==="]"&&d--}const g=c.length===0?l:l.substring(f),m=g.startsWith(_k),S=m?g.substring(1):g,y=h&&h>f?h-f:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:S,maybePostfixModifierPosition:y}};return n?l=>n({className:l,parseClassName:o}):o},a9=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},o9=e=>({cache:s9(e.cacheSize),parseClassName:i9(e),...JO(e)}),l9=/\s+/,c9=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(l9);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:f,hasImportantModifier:h,baseClassName:g,maybePostfixModifierPosition:m}=n(d);let S=!!m,y=r(S?g.substring(0,m):g);if(!y){if(!S){l=d+(l.length>0?" "+l:l);continue}if(y=r(g),!y){l=d+(l.length>0?" "+l:l);continue}S=!1}const j=a9(f).join(":"),v=h?j+_k:j,x=v+y;if(a.includes(x))continue;a.push(x);const _=i(y,S);for(let k=0;k<_.length;++k){const M=_[k];a.push(v+M)}l=d+(l.length>0?" "+l:l)}return l};function d9(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=Ck(t))&&(r&&(r+=" "),r+=n);return r}const Ck=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Ck(e[r]))&&(n&&(n+=" "),n+=t);return n};function u9(e,...t){let n,r,i,a=o;function o(c){const d=t.reduce((f,h)=>h(f),e());return n=o9(d),r=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const d=r(c);if(d)return d;const f=c9(c,n);return i(c,f),f}return function(){return a(d9.apply(null,arguments))}}const Ln=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},Ak=/^\[(?:([a-z-]+):)?(.+)\]$/i,f9=/^\d+\/\d+$/,h9=new Set(["px","full","screen"]),m9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,p9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,g9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,x9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,v9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,po=e=>vu(e)||h9.has(e)||f9.test(e),rl=e=>af(e,"length",C9),vu=e=>!!e&&!Number.isNaN(Number(e)),e1=e=>af(e,"number",vu),Zf=e=>!!e&&Number.isInteger(Number(e)),y9=e=>e.endsWith("%")&&vu(e.slice(0,-1)),Wt=e=>Ak.test(e),sl=e=>m9.test(e),b9=new Set(["length","size","percentage"]),w9=e=>af(e,b9,kk),N9=e=>af(e,"position",kk),j9=new Set(["image","url"]),S9=e=>af(e,j9,k9),_9=e=>af(e,"",A9),Xf=()=>!0,af=(e,t,n)=>{const r=Ak.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},C9=e=>p9.test(e)&&!g9.test(e),kk=()=>!1,A9=e=>x9.test(e),k9=e=>v9.test(e),P9=()=>{const e=Ln("colors"),t=Ln("spacing"),n=Ln("blur"),r=Ln("brightness"),i=Ln("borderColor"),a=Ln("borderRadius"),o=Ln("borderSpacing"),l=Ln("borderWidth"),c=Ln("contrast"),d=Ln("grayscale"),f=Ln("hueRotate"),h=Ln("invert"),g=Ln("gap"),m=Ln("gradientColorStops"),S=Ln("gradientColorStopPositions"),y=Ln("inset"),j=Ln("margin"),v=Ln("opacity"),x=Ln("padding"),_=Ln("saturate"),k=Ln("scale"),M=Ln("sepia"),L=Ln("skew"),O=Ln("space"),T=Ln("translate"),E=()=>["auto","contain","none"],Z=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",Wt,t],P=()=>[Wt,t],G=()=>["",po,rl],I=()=>["auto",vu,Wt],V=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],X=()=>["","0",Wt],le=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ce=()=>[vu,Wt];return{cacheSize:500,separator:":",theme:{colors:[Xf],spacing:[po,rl],blur:["none","",sl,Wt],brightness:Ce(),borderColor:[e],borderRadius:["none","","full",sl,Wt],borderSpacing:P(),borderWidth:G(),contrast:Ce(),grayscale:X(),hueRotate:Ce(),invert:X(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[y9,rl],inset:C(),margin:C(),opacity:Ce(),padding:P(),saturate:Ce(),scale:Ce(),sepia:X(),skew:Ce(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",Wt]}],container:["container"],columns:[{columns:[sl]}],"break-after":[{"break-after":le()}],"break-before":[{"break-before":le()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...V(),Wt]}],overflow:[{overflow:Z()}],"overflow-x":[{"overflow-x":Z()}],"overflow-y":[{"overflow-y":Z()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Zf,Wt]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Wt]}],grow:[{grow:X()}],shrink:[{shrink:X()}],order:[{order:["first","last","none",Zf,Wt]}],"grid-cols":[{"grid-cols":[Xf]}],"col-start-end":[{col:["auto",{span:["full",Zf,Wt]},Wt]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Xf]}],"row-start-end":[{row:["auto",{span:[Zf,Wt]},Wt]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Wt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Wt]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Wt,t]}],"min-w":[{"min-w":[Wt,t,"min","max","fit"]}],"max-w":[{"max-w":[Wt,t,"none","full","min","max","fit","prose",{screen:[sl]},sl]}],h:[{h:[Wt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Wt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Wt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Wt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",sl,rl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",e1]}],"font-family":[{font:[Xf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Wt]}],"line-clamp":[{"line-clamp":["none",vu,e1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",po,Wt]}],"list-image":[{"list-image":["none",Wt]}],"list-style-type":[{list:["none","disc","decimal",Wt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",po,rl]}],"underline-offset":[{"underline-offset":["auto",po,Wt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...V(),N9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",w9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},S9]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:z()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[po,Wt]}],"outline-w":[{outline:[po,rl]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[po,rl]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",sl,_9]}],"shadow-color":[{shadow:[Xf]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",sl,Wt]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Wt]}],duration:[{duration:Ce()}],ease:[{ease:["linear","in","out","in-out",Wt]}],delay:[{delay:Ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",Wt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Zf,Wt]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[L]}],"skew-y":[{"skew-y":[L]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Wt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[po,rl,e1]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},T9=u9(P9);function rt(...e){return T9(mk(e))}const L9=AO,Pk=N.forwardRef(({className:e,...t},n)=>s.jsx(ok,{ref:n,className:rt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Pk.displayName=ok.displayName;const E9=sf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Tk=N.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(lk,{ref:r,className:rt(E9({variant:t}),e),...n}));Tk.displayName=lk.displayName;const I9=N.forwardRef(({className:e,...t},n)=>s.jsx(uk,{ref:n,className:rt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));I9.displayName=uk.displayName;const Lk=N.forwardRef(({className:e,...t},n)=>s.jsx(fk,{ref:n,className:rt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(o0,{className:"h-4 w-4"})}));Lk.displayName=fk.displayName;const Ek=N.forwardRef(({className:e,...t},n)=>s.jsx(ck,{ref:n,className:rt("text-sm font-semibold",e),...t}));Ek.displayName=ck.displayName;const Ik=N.forwardRef(({className:e,...t},n)=>s.jsx(dk,{ref:n,className:rt("text-sm opacity-90",e),...t}));Ik.displayName=dk.displayName;function D9(){const{toasts:e}=Qr();return s.jsxs(L9,{children:[e.map(function({id:t,title:n,description:r,action:i,...a}){return s.jsxs(Tk,{...a,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(Ek,{children:n}),r&&s.jsx(Ik,{children:r})]}),i,s.jsx(Lk,{})]},t)}),s.jsx(Pk,{})]})}var F9=uC[" useId ".trim().toString()]||(()=>{}),M9=0;function Va(e){const[t,n]=N.useState(F9());return Pr(()=>{n(r=>r??String(M9++))},[e]),t?`radix-${t}`:""}const R9=["top","right","bottom","left"],$l=Math.min,ai=Math.max,hx=Math.round,sg=Math.floor,Wa=e=>({x:e,y:e}),O9={left:"right",right:"left",bottom:"top",top:"bottom"},B9={start:"end",end:"start"};function Uy(e,t,n){return ai(e,$l(t,n))}function Do(e,t){return typeof e=="function"?e(t):e}function Fo(e){return e.split("-")[0]}function of(e){return e.split("-")[1]}function Eb(e){return e==="x"?"y":"x"}function Ib(e){return e==="y"?"height":"width"}function ql(e){return["top","bottom"].includes(Fo(e))?"y":"x"}function Db(e){return Eb(ql(e))}function z9(e,t,n){n===void 0&&(n=!1);const r=of(e),i=Db(e),a=Ib(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=mx(o)),[o,mx(o)]}function $9(e){const t=mx(e);return[Vy(e),t,Vy(t)]}function Vy(e){return e.replace(/start|end/g,t=>B9[t])}function q9(e,t,n){const r=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?a:o;default:return[]}}function U9(e,t,n,r){const i=of(e);let a=q9(Fo(e),n==="start",r);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(Vy)))),a}function mx(e){return e.replace(/left|right|bottom|top/g,t=>O9[t])}function V9(e){return{top:0,right:0,bottom:0,left:0,...e}}function Dk(e){return typeof e!="number"?V9(e):{top:e,right:e,bottom:e,left:e}}function px(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function BN(e,t,n){let{reference:r,floating:i}=e;const a=ql(t),o=Db(t),l=Ib(o),c=Fo(t),d=a==="y",f=r.x+r.width/2-i.width/2,h=r.y+r.height/2-i.height/2,g=r[l]/2-i[l]/2;let m;switch(c){case"top":m={x:f,y:r.y-i.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-i.width,y:h};break;default:m={x:r.x,y:r.y}}switch(of(t)){case"start":m[o]-=g*(n&&d?-1:1);break;case"end":m[o]+=g*(n&&d?-1:1);break}return m}const W9=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:f,y:h}=BN(d,r,c),g=r,m={},S=0;for(let y=0;y<l.length;y++){const{name:j,fn:v}=l[y],{x,y:_,data:k,reset:M}=await v({x:f,y:h,initialPlacement:r,placement:g,strategy:i,middlewareData:m,rects:d,platform:o,elements:{reference:e,floating:t}});f=x??f,h=_??h,m={...m,[j]:{...m[j],...k}},M&&S<=50&&(S++,typeof M=="object"&&(M.placement&&(g=M.placement),M.rects&&(d=M.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):M.rects),{x:f,y:h}=BN(d,g,c)),y=-1)}return{x:f,y:h,placement:g,strategy:i,middlewareData:m}};async function tm(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:g=!1,padding:m=0}=Do(t,e),S=Dk(m),j=l[g?h==="floating"?"reference":"floating":h],v=px(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(j)))==null||n?j:j.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:f,strategy:c})),x=h==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),k=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},M=px(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:_,strategy:c}):x);return{top:(v.top-M.top+S.top)/k.y,bottom:(M.bottom-v.bottom+S.bottom)/k.y,left:(v.left-M.left+S.left)/k.x,right:(M.right-v.right+S.right)/k.x}}const H9=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:f=0}=Do(e,t)||{};if(d==null)return{};const h=Dk(f),g={x:n,y:r},m=Db(i),S=Ib(m),y=await o.getDimensions(d),j=m==="y",v=j?"top":"left",x=j?"bottom":"right",_=j?"clientHeight":"clientWidth",k=a.reference[S]+a.reference[m]-g[m]-a.floating[S],M=g[m]-a.reference[m],L=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let O=L?L[_]:0;(!O||!await(o.isElement==null?void 0:o.isElement(L)))&&(O=l.floating[_]||a.floating[S]);const T=k/2-M/2,E=O/2-y[S]/2-1,Z=$l(h[v],E),C=$l(h[x],E),P=Z,G=O-y[S]-C,I=O/2-y[S]/2+T,V=Uy(P,I,G),z=!c.arrow&&of(i)!=null&&I!==V&&a.reference[S]/2-(I<P?Z:C)-y[S]/2<0,q=z?I<P?I-P:I-G:0;return{[m]:g[m]+q,data:{[m]:V,centerOffset:I-V-q,...z&&{alignmentOffset:q}},reset:z}}}),G9=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:y=!0,...j}=Do(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const v=Fo(i),x=ql(l),_=Fo(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),M=g||(_||!y?[mx(l)]:$9(l)),L=S!=="none";!g&&L&&M.push(...U9(l,y,S,k));const O=[l,...M],T=await tm(t,j),E=[];let Z=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&E.push(T[v]),h){const I=z9(i,o,k);E.push(T[I[0]],T[I[1]])}if(Z=[...Z,{placement:i,overflows:E}],!E.every(I=>I<=0)){var C,P;const I=(((C=a.flip)==null?void 0:C.index)||0)+1,V=O[I];if(V)return{data:{index:I,overflows:Z},reset:{placement:V}};let z=(P=Z.filter(q=>q.overflows[0]<=0).sort((q,H)=>q.overflows[1]-H.overflows[1])[0])==null?void 0:P.placement;if(!z)switch(m){case"bestFit":{var G;const q=(G=Z.filter(H=>{if(L){const X=ql(H.placement);return X===x||X==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(X=>X>0).reduce((X,le)=>X+le,0)]).sort((H,X)=>H[1]-X[1])[0])==null?void 0:G[0];q&&(z=q);break}case"initialPlacement":z=l;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function zN(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function $N(e){return R9.some(t=>e[t]>=0)}const K9=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Do(e,t);switch(r){case"referenceHidden":{const a=await tm(t,{...i,elementContext:"reference"}),o=zN(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:$N(o)}}}case"escaped":{const a=await tm(t,{...i,altBoundary:!0}),o=zN(a,n.floating);return{data:{escapedOffsets:o,escaped:$N(o)}}}default:return{}}}}};async function Q9(e,t){const{placement:n,platform:r,elements:i}=e,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Fo(n),l=of(n),c=ql(n)==="y",d=["left","top"].includes(o)?-1:1,f=a&&c?-1:1,h=Do(t,e);let{mainAxis:g,crossAxis:m,alignmentAxis:S}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof S=="number"&&(m=l==="end"?S*-1:S),c?{x:m*f,y:g*d}:{x:g*d,y:m*f}}const Y9=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await Q9(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},Z9=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:j=>{let{x:v,y:x}=j;return{x:v,y:x}}},...c}=Do(e,t),d={x:n,y:r},f=await tm(t,c),h=ql(Fo(i)),g=Eb(h);let m=d[g],S=d[h];if(a){const j=g==="y"?"top":"left",v=g==="y"?"bottom":"right",x=m+f[j],_=m-f[v];m=Uy(x,m,_)}if(o){const j=h==="y"?"top":"left",v=h==="y"?"bottom":"right",x=S+f[j],_=S-f[v];S=Uy(x,S,_)}const y=l.fn({...t,[g]:m,[h]:S});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[g]:a,[h]:o}}}}}},X9=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Do(e,t),f={x:n,y:r},h=ql(i),g=Eb(h);let m=f[g],S=f[h];const y=Do(l,t),j=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=g==="y"?"height":"width",k=a.reference[g]-a.floating[_]+j.mainAxis,M=a.reference[g]+a.reference[_]-j.mainAxis;m<k?m=k:m>M&&(m=M)}if(d){var v,x;const _=g==="y"?"width":"height",k=["top","left"].includes(Fo(i)),M=a.reference[h]-a.floating[_]+(k&&((v=o.offset)==null?void 0:v[h])||0)+(k?0:j.crossAxis),L=a.reference[h]+a.reference[_]+(k?0:((x=o.offset)==null?void 0:x[h])||0)-(k?j.crossAxis:0);S<M?S=M:S>L&&(S=L)}return{[g]:m,[h]:S}}}},J9=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Do(e,t),f=await tm(t,d),h=Fo(i),g=of(i),m=ql(i)==="y",{width:S,height:y}=a.floating;let j,v;h==="top"||h==="bottom"?(j=h,v=g===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,j=g==="end"?"top":"bottom");const x=y-f.top-f.bottom,_=S-f.left-f.right,k=$l(y-f[j],x),M=$l(S-f[v],_),L=!t.middlewareData.shift;let O=k,T=M;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(T=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(O=x),L&&!g){const Z=ai(f.left,0),C=ai(f.right,0),P=ai(f.top,0),G=ai(f.bottom,0);m?T=S-2*(Z!==0||C!==0?Z+C:ai(f.left,f.right)):O=y-2*(P!==0||G!==0?P+G:ai(f.top,f.bottom))}await c({...t,availableWidth:T,availableHeight:O});const E=await o.getDimensions(l.floating);return S!==E.width||y!==E.height?{reset:{rects:!0}}:{}}}};function l0(){return typeof window<"u"}function lf(e){return Fk(e)?(e.nodeName||"").toLowerCase():"#document"}function ui(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ja(e){var t;return(t=(Fk(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Fk(e){return l0()?e instanceof Node||e instanceof ui(e).Node:!1}function ma(e){return l0()?e instanceof Element||e instanceof ui(e).Element:!1}function Qa(e){return l0()?e instanceof HTMLElement||e instanceof ui(e).HTMLElement:!1}function qN(e){return!l0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ui(e).ShadowRoot}function Fm(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=pa(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function eB(e){return["table","td","th"].includes(lf(e))}function c0(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Fb(e){const t=Mb(),n=ma(e)?pa(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function tB(e){let t=Ul(e);for(;Qa(t)&&!Gu(t);){if(Fb(t))return t;if(c0(t))return null;t=Ul(t)}return null}function Mb(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Gu(e){return["html","body","#document"].includes(lf(e))}function pa(e){return ui(e).getComputedStyle(e)}function d0(e){return ma(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ul(e){if(lf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||qN(e)&&e.host||Ja(e);return qN(t)?t.host:t}function Mk(e){const t=Ul(e);return Gu(t)?e.ownerDocument?e.ownerDocument.body:e.body:Qa(t)&&Fm(t)?t:Mk(t)}function nm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Mk(e),a=i===((r=e.ownerDocument)==null?void 0:r.body),o=ui(i);if(a){const l=Wy(o);return t.concat(o,o.visualViewport||[],Fm(i)?i:[],l&&n?nm(l):[])}return t.concat(i,nm(i,[],n))}function Wy(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Rk(e){const t=pa(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Qa(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:r,l=hx(n)!==a||hx(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function Rb(e){return ma(e)?e:e.contextElement}function yu(e){const t=Rb(e);if(!Qa(t))return Wa(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:a}=Rk(t);let o=(a?hx(n.width):n.width)/r,l=(a?hx(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const nB=Wa(0);function Ok(e){const t=ui(e);return!Mb()||!t.visualViewport?nB:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rB(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ui(e)?!1:t}function Xc(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=Rb(e);let o=Wa(1);t&&(r?ma(r)&&(o=yu(r)):o=yu(e));const l=rB(a,n,r)?Ok(a):Wa(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,f=i.width/o.x,h=i.height/o.y;if(a){const g=ui(a),m=r&&ma(r)?ui(r):r;let S=g,y=Wy(S);for(;y&&r&&m!==S;){const j=yu(y),v=y.getBoundingClientRect(),x=pa(y),_=v.left+(y.clientLeft+parseFloat(x.paddingLeft))*j.x,k=v.top+(y.clientTop+parseFloat(x.paddingTop))*j.y;c*=j.x,d*=j.y,f*=j.x,h*=j.y,c+=_,d+=k,S=ui(y),y=Wy(S)}}return px({width:f,height:h,x:c,y:d})}function Ob(e,t){const n=d0(e).scrollLeft;return t?t.left+n:Xc(Ja(e)).left+n}function Bk(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:Ob(e,r)),a=r.top+t.scrollTop;return{x:i,y:a}}function sB(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const a=i==="fixed",o=Ja(r),l=t?c0(t.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},d=Wa(1);const f=Wa(0),h=Qa(r);if((h||!h&&!a)&&((lf(r)!=="body"||Fm(o))&&(c=d0(r)),Qa(r))){const m=Xc(r);d=yu(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const g=o&&!h&&!a?Bk(o,c,!0):Wa(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+f.x+g.x,y:n.y*d.y-c.scrollTop*d.y+f.y+g.y}}function iB(e){return Array.from(e.getClientRects())}function aB(e){const t=Ja(e),n=d0(e),r=e.ownerDocument.body,i=ai(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=ai(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Ob(e);const l=-n.scrollTop;return pa(r).direction==="rtl"&&(o+=ai(t.clientWidth,r.clientWidth)-i),{width:i,height:a,x:o,y:l}}function oB(e,t){const n=ui(e),r=Ja(e),i=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=Mb();(!d||d&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function lB(e,t){const n=Xc(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,a=Qa(e)?yu(e):Wa(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,d=r*a.y;return{width:o,height:l,x:c,y:d}}function UN(e,t,n){let r;if(t==="viewport")r=oB(e,n);else if(t==="document")r=aB(Ja(e));else if(ma(t))r=lB(t,n);else{const i=Ok(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return px(r)}function zk(e,t){const n=Ul(e);return n===t||!ma(n)||Gu(n)?!1:pa(n).position==="fixed"||zk(n,t)}function cB(e,t){const n=t.get(e);if(n)return n;let r=nm(e,[],!1).filter(l=>ma(l)&&lf(l)!=="body"),i=null;const a=pa(e).position==="fixed";let o=a?Ul(e):e;for(;ma(o)&&!Gu(o);){const l=pa(o),c=Fb(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Fm(o)&&!c&&zk(e,o))?r=r.filter(f=>f!==o):i=l,o=Ul(o)}return t.set(e,r),r}function dB(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?c0(t)?[]:cB(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((d,f)=>{const h=UN(t,f,i);return d.top=ai(h.top,d.top),d.right=$l(h.right,d.right),d.bottom=$l(h.bottom,d.bottom),d.left=ai(h.left,d.left),d},UN(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function uB(e){const{width:t,height:n}=Rk(e);return{width:t,height:n}}function fB(e,t,n){const r=Qa(t),i=Ja(t),a=n==="fixed",o=Xc(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Wa(0);if(r||!r&&!a)if((lf(t)!=="body"||Fm(i))&&(l=d0(t)),r){const g=Xc(t,!0,a,t);c.x=g.x+t.clientLeft,c.y=g.y+t.clientTop}else i&&(c.x=Ob(i));const d=i&&!r&&!a?Bk(i,l):Wa(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function t1(e){return pa(e).position==="static"}function VN(e,t){if(!Qa(e)||pa(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ja(e)===n&&(n=n.ownerDocument.body),n}function $k(e,t){const n=ui(e);if(c0(e))return n;if(!Qa(e)){let i=Ul(e);for(;i&&!Gu(i);){if(ma(i)&&!t1(i))return i;i=Ul(i)}return n}let r=VN(e,t);for(;r&&eB(r)&&t1(r);)r=VN(r,t);return r&&Gu(r)&&t1(r)&&!Fb(r)?n:r||tB(e)||n}const hB=async function(e){const t=this.getOffsetParent||$k,n=this.getDimensions,r=await n(e.floating);return{reference:fB(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function mB(e){return pa(e).direction==="rtl"}const pB={convertOffsetParentRelativeRectToViewportRelativeRect:sB,getDocumentElement:Ja,getClippingRect:dB,getOffsetParent:$k,getElementRects:hB,getClientRects:iB,getDimensions:uB,getScale:yu,isElement:ma,isRTL:mB};function qk(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function gB(e,t){let n=null,r;const i=Ja(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:f,top:h,width:g,height:m}=d;if(l||t(),!g||!m)return;const S=sg(h),y=sg(i.clientWidth-(f+g)),j=sg(i.clientHeight-(h+m)),v=sg(f),_={rootMargin:-S+"px "+-y+"px "+-j+"px "+-v+"px",threshold:ai(0,$l(1,c))||1};let k=!0;function M(L){const O=L[0].intersectionRatio;if(O!==c){if(!k)return o();O?o(!1,O):r=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!qk(d,e.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(M,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(M,_)}n.observe(e)}return o(!0),a}function xB(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=Rb(e),f=i||a?[...d?nm(d):[],...nm(t)]:[];f.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),a&&v.addEventListener("resize",n)});const h=d&&l?gB(d,n):null;let g=-1,m=null;o&&(m=new ResizeObserver(v=>{let[x]=v;x&&x.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var _;(_=m)==null||_.observe(t)})),n()}),d&&!c&&m.observe(d),m.observe(t));let S,y=c?Xc(e):null;c&&j();function j(){const v=Xc(e);y&&!qk(y,v)&&n(),y=v,S=requestAnimationFrame(j)}return n(),()=>{var v;f.forEach(x=>{i&&x.removeEventListener("scroll",n),a&&x.removeEventListener("resize",n)}),h==null||h(),(v=m)==null||v.disconnect(),m=null,c&&cancelAnimationFrame(S)}}const vB=Y9,yB=Z9,bB=G9,wB=J9,NB=K9,WN=H9,jB=X9,SB=(e,t,n)=>{const r=new Map,i={platform:pB,...n},a={...i.platform,_c:r};return W9(e,t,{...i,platform:a})};var Eg=typeof document<"u"?N.useLayoutEffect:N.useEffect;function gx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!gx(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&e.$$typeof)&&!gx(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Uk(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function HN(e,t){const n=Uk(e);return Math.round(t*n)/n}function n1(e){const t=N.useRef(e);return Eg(()=>{t.current=e}),t}function _B(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[f,h]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[g,m]=N.useState(r);gx(g,r)||m(r);const[S,y]=N.useState(null),[j,v]=N.useState(null),x=N.useCallback(H=>{H!==L.current&&(L.current=H,y(H))},[]),_=N.useCallback(H=>{H!==O.current&&(O.current=H,v(H))},[]),k=a||S,M=o||j,L=N.useRef(null),O=N.useRef(null),T=N.useRef(f),E=c!=null,Z=n1(c),C=n1(i),P=n1(d),G=N.useCallback(()=>{if(!L.current||!O.current)return;const H={placement:t,strategy:n,middleware:g};C.current&&(H.platform=C.current),SB(L.current,O.current,H).then(X=>{const le={...X,isPositioned:P.current!==!1};I.current&&!gx(T.current,le)&&(T.current=le,od.flushSync(()=>{h(le)}))})},[g,t,n,C,P]);Eg(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(H=>({...H,isPositioned:!1})))},[d]);const I=N.useRef(!1);Eg(()=>(I.current=!0,()=>{I.current=!1}),[]),Eg(()=>{if(k&&(L.current=k),M&&(O.current=M),k&&M){if(Z.current)return Z.current(k,M,G);G()}},[k,M,G,Z,E]);const V=N.useMemo(()=>({reference:L,floating:O,setReference:x,setFloating:_}),[x,_]),z=N.useMemo(()=>({reference:k,floating:M}),[k,M]),q=N.useMemo(()=>{const H={position:n,left:0,top:0};if(!z.floating)return H;const X=HN(z.floating,f.x),le=HN(z.floating,f.y);return l?{...H,transform:"translate("+X+"px, "+le+"px)",...Uk(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:X,top:le}},[n,l,z.floating,f.x,f.y]);return N.useMemo(()=>({...f,update:G,refs:V,elements:z,floatingStyles:q}),[f,G,V,z,q])}const CB=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?WN({element:r.current,padding:i}).fn(n):{}:r?WN({element:r,padding:i}).fn(n):{}}}},AB=(e,t)=>({...vB(e),options:[e,t]}),kB=(e,t)=>({...yB(e),options:[e,t]}),PB=(e,t)=>({...jB(e),options:[e,t]}),TB=(e,t)=>({...bB(e),options:[e,t]}),LB=(e,t)=>({...wB(e),options:[e,t]}),EB=(e,t)=>({...NB(e),options:[e,t]}),IB=(e,t)=>({...CB(e),options:[e,t]});var DB="Arrow",Vk=N.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...a}=e;return s.jsx(Lt.svg,{...a,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});Vk.displayName=DB;var FB=Vk;function Wk(e){const[t,n]=N.useState(void 0);return Pr(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var Bb="Popper",[Hk,cf]=xi(Bb),[MB,Gk]=Hk(Bb),Kk=e=>{const{__scopePopper:t,children:n}=e,[r,i]=N.useState(null);return s.jsx(MB,{scope:t,anchor:r,onAnchorChange:i,children:n})};Kk.displayName=Bb;var Qk="PopperAnchor",Yk=N.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,a=Gk(Qk,n),o=N.useRef(null),l=en(t,o);return N.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(Lt.div,{...i,ref:l})});Yk.displayName=Qk;var zb="PopperContent",[RB,OB]=Hk(zb),Zk=N.forwardRef((e,t)=>{var B,te,oe,_e,we,Ne;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:g=!1,updatePositionStrategy:m="optimized",onPlaced:S,...y}=e,j=Gk(zb,n),[v,x]=N.useState(null),_=en(t,ke=>x(ke)),[k,M]=N.useState(null),L=Wk(k),O=(L==null?void 0:L.width)??0,T=(L==null?void 0:L.height)??0,E=r+(a!=="center"?"-"+a:""),Z=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},C=Array.isArray(d)?d:[d],P=C.length>0,G={padding:Z,boundary:C.filter(zB),altBoundary:P},{refs:I,floatingStyles:V,placement:z,isPositioned:q,middlewareData:H}=_B({strategy:"fixed",placement:E,whileElementsMounted:(...ke)=>xB(...ke,{animationFrame:m==="always"}),elements:{reference:j.anchor},middleware:[AB({mainAxis:i+T,alignmentAxis:o}),c&&kB({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?PB():void 0,...G}),c&&TB({...G}),LB({...G,apply:({elements:ke,rects:Ue,availableWidth:be,availableHeight:se})=>{const{width:ut,height:Je}=Ue.reference,Y=ke.floating.style;Y.setProperty("--radix-popper-available-width",`${be}px`),Y.setProperty("--radix-popper-available-height",`${se}px`),Y.setProperty("--radix-popper-anchor-width",`${ut}px`),Y.setProperty("--radix-popper-anchor-height",`${Je}px`)}}),k&&IB({element:k,padding:l}),$B({arrowWidth:O,arrowHeight:T}),g&&EB({strategy:"referenceHidden",...G})]}),[X,le]=eP(z),Ce=Kr(S);Pr(()=>{q&&(Ce==null||Ce())},[q,Ce]);const F=(B=H.arrow)==null?void 0:B.x,J=(te=H.arrow)==null?void 0:te.y,re=((oe=H.arrow)==null?void 0:oe.centerOffset)!==0,[Q,ie]=N.useState();return Pr(()=>{v&&ie(window.getComputedStyle(v).zIndex)},[v]),s.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:q?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(_e=H.transformOrigin)==null?void 0:_e.x,(we=H.transformOrigin)==null?void 0:we.y].join(" "),...((Ne=H.hide)==null?void 0:Ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(RB,{scope:n,placedSide:X,onArrowChange:M,arrowX:F,arrowY:J,shouldHideArrow:re,children:s.jsx(Lt.div,{"data-side":X,"data-align":le,...y,ref:_,style:{...y.style,animation:q?void 0:"none"}})})})});Zk.displayName=zb;var Xk="PopperArrow",BB={top:"bottom",right:"left",bottom:"top",left:"right"},Jk=N.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,a=OB(Xk,r),o=BB[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(FB,{...i,ref:n,style:{...i.style,display:"block"}})})});Jk.displayName=Xk;function zB(e){return e!==null}var $B=e=>({name:"transformOrigin",options:e,fn(t){var j,v,x;const{placement:n,rects:r,middlewareData:i}=t,o=((j=i.arrow)==null?void 0:j.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,f]=eP(n),h={start:"0%",center:"50%",end:"100%"}[f],g=(((v=i.arrow)==null?void 0:v.x)??0)+l/2,m=(((x=i.arrow)==null?void 0:x.y)??0)+c/2;let S="",y="";return d==="bottom"?(S=o?h:`${g}px`,y=`${-c}px`):d==="top"?(S=o?h:`${g}px`,y=`${r.floating.height+c}px`):d==="right"?(S=`${-c}px`,y=o?h:`${m}px`):d==="left"&&(S=`${r.floating.width+c}px`,y=o?h:`${m}px`),{data:{x:S,y}}}});function eP(e){const[t,n="center"]=e.split("-");return[t,n]}var tP=Kk,$b=Yk,qb=Zk,Ub=Jk,[u0,OQ]=xi("Tooltip",[cf]),Vb=cf(),nP="TooltipProvider",qB=700,GN="tooltip.open",[UB,rP]=u0(nP),sP=e=>{const{__scopeTooltip:t,delayDuration:n=qB,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:a}=e,o=N.useRef(!0),l=N.useRef(!1),c=N.useRef(0);return N.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),s.jsx(UB,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:N.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:a})};sP.displayName=nP;var iP="Tooltip",[BQ,f0]=u0(iP),Hy="TooltipTrigger",VB=N.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=f0(Hy,n),a=rP(Hy,n),o=Vb(n),l=N.useRef(null),c=en(t,l,i.onTriggerChange),d=N.useRef(!1),f=N.useRef(!1),h=N.useCallback(()=>d.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx($b,{asChild:!0,...o,children:s.jsx(Lt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:c,onPointerMove:at(e.onPointerMove,g=>{g.pointerType!=="touch"&&!f.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),f.current=!0)}),onPointerLeave:at(e.onPointerLeave,()=>{i.onTriggerLeave(),f.current=!1}),onPointerDown:at(e.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:at(e.onFocus,()=>{d.current||i.onOpen()}),onBlur:at(e.onBlur,i.onClose),onClick:at(e.onClick,i.onClose)})})});VB.displayName=Hy;var WB="TooltipPortal",[zQ,HB]=u0(WB,{forceMount:void 0}),Ku="TooltipContent",aP=N.forwardRef((e,t)=>{const n=HB(Ku,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...a}=e,o=f0(Ku,e.__scopeTooltip);return s.jsx(xa,{present:r||o.open,children:o.disableHoverableContent?s.jsx(oP,{side:i,...a,ref:t}):s.jsx(GB,{side:i,...a,ref:t})})}),GB=N.forwardRef((e,t)=>{const n=f0(Ku,e.__scopeTooltip),r=rP(Ku,e.__scopeTooltip),i=N.useRef(null),a=en(t,i),[o,l]=N.useState(null),{trigger:c,onClose:d}=n,f=i.current,{onPointerInTransitChange:h}=r,g=N.useCallback(()=>{l(null),h(!1)},[h]),m=N.useCallback((S,y)=>{const j=S.currentTarget,v={x:S.clientX,y:S.clientY},x=XB(v,j.getBoundingClientRect()),_=JB(v,x),k=ez(y.getBoundingClientRect()),M=nz([..._,...k]);l(M),h(!0)},[h]);return N.useEffect(()=>()=>g(),[g]),N.useEffect(()=>{if(c&&f){const S=j=>m(j,f),y=j=>m(j,c);return c.addEventListener("pointerleave",S),f.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",S),f.removeEventListener("pointerleave",y)}}},[c,f,m,g]),N.useEffect(()=>{if(o){const S=y=>{const j=y.target,v={x:y.clientX,y:y.clientY},x=(c==null?void 0:c.contains(j))||(f==null?void 0:f.contains(j)),_=!tz(v,o);x?g():_&&(g(),d())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[c,f,o,d,g]),s.jsx(oP,{...e,ref:a})}),[KB,QB]=u0(iP,{isInside:!1}),YB=VA("TooltipContent"),oP=N.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=f0(Ku,n),d=Vb(n),{onClose:f}=c;return N.useEffect(()=>(document.addEventListener(GN,f),()=>document.removeEventListener(GN,f)),[f]),N.useEffect(()=>{if(c.trigger){const h=g=>{const m=g.target;m!=null&&m.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),s.jsx(rf,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:s.jsxs(qb,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(YB,{children:r}),s.jsx(KB,{scope:n,isInside:!0,children:s.jsx(cO,{id:c.contentId,role:"tooltip",children:i||r})})]})})});aP.displayName=Ku;var lP="TooltipArrow",ZB=N.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Vb(n);return QB(lP,n).isInside?null:s.jsx(Ub,{...i,...r,ref:t})});ZB.displayName=lP;function XB(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,i,a)){case a:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function JB(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function ez(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}function tz(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,f=t[o].y;c>r!=f>r&&n<(d-l)*(r-c)/(f-c)+l&&(i=!i)}return i}function nz(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),rz(t)}function rz(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const i=e[r];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const i=e[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var sz=sP,cP=aP;const iz=sz,az=N.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(cP,{ref:r,sideOffset:t,className:rt("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));az.displayName=cP.displayName;const dP=N.createContext(null);function oz({children:e}){const{toast:t}=Qr(),{data:n,error:r,isLoading:i}=kt({queryKey:["/api/user"],queryFn:$A({on401:"returnNull"}),retry:!1,refetchOnWindowFocus:!1,staleTime:5e3}),a=fn({mutationFn:async c=>await(await an("POST","/api/login",c)).json(),onSuccess:c=>{Tn.setQueryData(["/api/user"],c)},onError:c=>{t({title:"Login failed",description:c.message,variant:"destructive"})}}),o=fn({mutationFn:async c=>await(await an("POST","/api/register",c)).json(),onSuccess:c=>{Tn.setQueryData(["/api/user"],c)},onError:c=>{t({title:"Registration failed",description:c.message,variant:"destructive"})}}),l=fn({mutationFn:async()=>{await an("POST","/api/logout")},onSuccess:()=>{Tn.setQueryData(["/api/user"],null)},onError:c=>{t({title:"Logout failed",description:c.message,variant:"destructive"})}});return s.jsx(dP.Provider,{value:{user:n??null,isLoading:i,error:r,loginMutation:a,logoutMutation:l,registerMutation:o},children:e})}function Oo(){const e=N.useContext(dP);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}const lz={nav:{dashboard:"Dashboard",farmers:"Farmers",lots:"Lots",settings:"Settings"},auth:{login:"Login",logout:"Logout",register:"Register",username:"Username",password:"Password",signIn:"Sign In",createAccount:"Create Account"},farmer:{name:"Farmer Name",mobile:"Mobile Number",place:"Place",nameAsInBank:"Name as in Bank",bankName:"Bank Name",bankAccount:"Bank Account Number",ifscCode:"IFSC Code",accountHolderName:"Account Holder Name",namePlaceholder:"Enter full name of the farmer",mobilePlaceholder:"Enter 10-digit mobile number",mobileNote:"Maximum 10 digits",placePlaceholder:"Enter village or town name",nameAsInBankPlaceholder:"Name exactly as printed on bank records",bankNamePlaceholder:"Enter full bank name (e.g., State Bank of India)",bankAccountPlaceholder:"Enter complete bank account number",ifscCodePlaceholder:"Enter 11-character IFSC code (e.g., SBIN0001234)",accountHolderNamePlaceholder:"Name as per bank account records",create:"Create Farmer",update:"Update Farmer",saving:"Saving...",created:"Farmer created successfully",updated:"Farmer updated successfully"},lot:{farmer:"Farmer",numberOfBags:"Number of Bags",vehicleRent:"Vehicle Rent",advance:"Advance Amount",varietyGrade:"Variety/Grade",unloadHamali:"Unload Hamali",searchFarmer:"Search farmers...",selectFarmer:"Select farmer",farmerRequired:"Please select a farmer",numberOfBagsPlaceholder:"Enter number of bags",selectVariety:"Select variety",unloadHamaliNote:"Will be calculated automatically from settings",summary:"Lot Summary",bags:"Bags",hamali:"Hamali",create:"Create Lot",created:"Lot created successfully"},common:{cancel:"Cancel",save:"Save",saving:"Saving...",creating:"Creating...",loading:"Loading...",search:"Search",actions:"Actions",edit:"Edit",delete:"Delete",print:"Print"},messages:{success:"Success",error:"Error",warning:"Warning",info:"Information"},billing:{title:"Tax Invoice",seller:"Seller",buyer:"Buyer",lotNumber:"Lot No",farmerName:"Farmer Name",variety:"Variety",grade:"Grade",bags:"Bags",weight:"Weight",rate:"Rate/Quintal",hsnCode:"HSN Code",basicAmount:"Basic Amount",packing:"Packing",weighingCharges:"Weighing Charges",commission:"Commission",sgst:"SGST @ 2.5%",cgst:"CGST @ 2.5%",cess:"CESS @ 0.6%",totalAmount:"Total Amount",totalPayable:"Total Payable",grandTotal:"Grand Total",inWords:"In Words",bankDetails:"Bank Details",signature:"Signature",print:"Print",download:"Download",generateBills:"Generate Bills",buyerBilling:"Buyer Billing",dailyBills:"Daily Bills"}},cz={nav:{dashboard:"डैशबोर्ड",farmers:"किसान",lots:"लॉट",settings:"सेटिंग्स"},auth:{login:"लॉगिन",logout:"लॉगआउट",register:"पंजीकरण",username:"उपयोगकर्ता नाम",password:"पासवर्ड",signIn:"साइन इन",createAccount:"खाता बनाएं"},farmer:{name:"किसान का नाम",mobile:"मोबाइल नंबर",place:"स्थान",nameAsInBank:"बैंक में नाम",bankName:"बैंक का नाम",bankAccount:"बैंक खाता संख्या",ifscCode:"IFSC कोड",accountHolderName:"खाता धारक का नाम",namePlaceholder:"किसान का पूरा नाम दर्ज करें",mobilePlaceholder:"10 अंकों का मोबाइल नंबर दर्ज करें",mobileNote:"अधिकतम 10 अंक",placePlaceholder:"गांव या शहर का नाम दर्ज करें",nameAsInBankPlaceholder:"बैंक रिकॉर्ड में छपे अनुसार बिल्कुल वैसा ही नाम",bankNamePlaceholder:"पूरा बैंक नाम दर्ज करें (जैसे: भारतीय स्टेट बैंक)",bankAccountPlaceholder:"पूरा बैंक खाता नंबर दर्ज करें",ifscCodePlaceholder:"11 अक्षर का IFSC कोड दर्ज करें (जैसे: SBIN0001234)",accountHolderNamePlaceholder:"बैंक खाता रिकॉर्ड के अनुसार नाम",create:"किसान बनाएं",update:"किसान अपडेट करें",saving:"सेव हो रहा है...",created:"किसान सफलतापूर्वक बनाया गया",updated:"किसान सफलतापूर्वक अपडेट किया गया"},lot:{farmer:"किसान",numberOfBags:"बोरों की संख्या",vehicleRent:"वाहन किराया",advance:"अग्रिम राशि",varietyGrade:"किस्म/ग्रेड",unloadHamali:"अनलोड हमाली",searchFarmer:"किसान खोजें...",selectFarmer:"किसान चुनें",farmerRequired:"कृपया किसान चुनें",numberOfBagsPlaceholder:"बोरों की संख्या दर्ज करें",selectVariety:"किस्म चुनें",unloadHamaliNote:"सेटिंग्स से स्वचालित रूप से गणना की जाएगी",summary:"लॉट सारांश",bags:"बोरे",hamali:"हमाली",create:"लॉट बनाएं",created:"लॉट सफलतापूर्वक बनाया गया"},common:{cancel:"रद्द करें",save:"सेव करें",saving:"सेव हो रहा है...",creating:"बनाया जा रहा है...",loading:"लोड हो रहा है...",search:"खोजें",actions:"कार्य",edit:"संपादित करें",delete:"मिटाएं",print:"प्रिंट"},messages:{success:"सफलता",error:"त्रुटि",warning:"चेतावनी",info:"जानकारी"}},dz={nav:{dashboard:"ಡ್ಯಾಶ್‌ಬೋರ್ಡ್",farmers:"ರೈತರು",lots:"ಲಾಟ್‌ಗಳು",settings:"ಸೆಟ್ಟಿಂಗ್‌ಗಳು"},auth:{login:"ಲಾಗಿನ್",logout:"ಲಾಗ್ಔಟ್",register:"ನೋಂದಣಿ",username:"ಬಳಕೆದಾರ ಹೆಸರು",password:"ಪಾಸ್‌ವರ್ಡ್",signIn:"ಸೈನ್ ಇನ್",createAccount:"ಖಾತೆ ರಚಿಸಿ"},farmer:{name:"ರೈತನ ಹೆಸರು",mobile:"ಮೊಬೈಲ್ ಸಂಖ್ಯೆ",place:"ಸ್ಥಳ",nameAsInBank:"ಬ್ಯಾಂಕ್‌ನಲ್ಲಿರುವ ಹೆಸರು",bankName:"ಬ್ಯಾಂಕ್ ಹೆಸರು",bankAccount:"ಬ್ಯಾಂಕ್ ಖಾತೆ ಸಂಖ್ಯೆ",ifscCode:"IFSC ಕೋಡ್",accountHolderName:"ಖಾತೆದಾರನ ಹೆಸರು",namePlaceholder:"ರೈತನ ಪೂರ್ಣ ಹೆಸರು ನಮೂದಿಸಿ",mobilePlaceholder:"10 ಅಂಕೆಗಳ ಮೊಬೈಲ್ ಸಂಖ್ಯೆ ನಮೂದಿಸಿ",mobileNote:"ಗರಿಷ್ಠ 10 ಅಂಕೆಗಳು",placePlaceholder:"ಗ್ರಾಮ ಅಥವಾ ಪಟ್ಟಣದ ಹೆಸರು ನಮೂದಿಸಿ",nameAsInBankPlaceholder:"ಬ್ಯಾಂಕ್ ದಾಖಲೆಗಳಲ್ಲಿ ಮುದ್ರಿಸಿದಂತೆ ನಿಖರವಾಗಿ ಹೆಸರು",bankNamePlaceholder:"ಪೂರ್ಣ ಬ್ಯಾಂಕ್ ಹೆಸರು ನಮೂದಿಸಿ (ಉದಾ: ಸ್ಟೇಟ್ ಬ್ಯಾಂಕ್ ಆಫ್ ಇಂಡಿಯಾ)",bankAccountPlaceholder:"ಪೂರ್ಣ ಬ್ಯಾಂಕ್ ಖಾತೆ ಸಂಖ್ಯೆ ನಮೂದಿಸಿ",ifscCodePlaceholder:"11 ಅಕ್ಷರಗಳ IFSC ಕೋಡ್ ನಮೂದಿಸಿ (ಉದಾ: SBIN0001234)",accountHolderNamePlaceholder:"ಬ್ಯಾಂಕ್ ಖಾತೆ ದಾಖಲೆಗಳ ಪ್ರಕಾರ ಹೆಸರು",create:"ರೈತ ರಚಿಸಿ",update:"ರೈತ ನವೀಕರಿಸಿ",saving:"ಸೇವ್ ಆಗುತ್ತಿದೆ...",created:"ರೈತ ಯಶಸ್ವಿಯಾಗಿ ರಚಿಸಲಾಗಿದೆ",updated:"ರೈತ ಯಶಸ್ವಿಯಾಗಿ ನವೀಕರಿಸಲಾಗಿದೆ"},lot:{farmer:"ರೈತ",numberOfBags:"ಚೀಲಗಳ ಸಂಖ್ಯೆ",vehicleRent:"ವಾಹನ ಬಾಡಿಗೆ",advance:"ಮುಂಗಡ ಮೊತ್ತ",varietyGrade:"ವಿಧ/ಗ್ರೇಡ್",unloadHamali:"ಅನ್‌ಲೋಡ್ ಹಮಾಲಿ",searchFarmer:"ರೈತರನ್ನು ಹುಡುಕಿ...",selectFarmer:"ರೈತ ಆಯ್ಕೆಮಾಡಿ",farmerRequired:"ದಯವಿಟ್ಟು ರೈತನನ್ನು ಆಯ್ಕೆಮಾಡಿ",numberOfBagsPlaceholder:"ಚೀಲಗಳ ಸಂಖ್ಯೆ ನಮೂದಿಸಿ",selectVariety:"ವಿಧ ಆಯ್ಕೆಮಾಡಿ",unloadHamaliNote:"ಸೆಟ್ಟಿಂಗ್‌ಗಳಿಂದ ಸ್ವಯಂಚಾಲಿತವಾಗಿ ಲೆಕ್ಕಾಚಾರ ಮಾಡಲಾಗುತ್ತದೆ",summary:"ಲಾಟ್ ಸಾರಾಂಶ",bags:"ಚೀಲಗಳು",hamali:"ಹಮಾಲಿ",create:"ಲಾಟ್ ರಚಿಸಿ",created:"ಲಾಟ್ ಯಶಸ್ವಿಯಾಗಿ ರಚಿಸಲಾಗಿದೆ"},common:{cancel:"ರದ್ದುಮಾಡಿ",save:"ಉಳಿಸಿ",saving:"ಉಳಿಸಲಾಗುತ್ತಿದೆ...",creating:"ರಚಿಸಲಾಗುತ್ತಿದೆ...",loading:"ಲೋಡ್ ಆಗುತ್ತಿದೆ...",search:"ಹುಡುಕಿ",actions:"ಕ್ರಿಯೆಗಳು",edit:"ಸಂಪಾದಿಸಿ",delete:"ಅಳಿಸಿ",print:"ಮುದ್ರಿಸಿ"},messages:{success:"ಯಶಸ್ಸು",error:"ದೋಷ",warning:"ಎಚ್ಚರಿಕೆ",info:"ಮಾಹಿತಿ"},billing:{title:"ತೆರಿಗೆ ಬಿಲ್",seller:"ಮಾರಾಟಗಾರ",buyer:"ಖರೀದಾರ",lotNumber:"ಲಾಟ್ ಸಂಖ್ಯೆ",farmerName:"ರೈತ ಹೆಸರು",variety:"ವಿಧ",grade:"ಗ್ರೇಡ್",bags:"ಚೀಲಗಳು",weight:"ತೂಕ",rate:"ದರ/ಕ್ವಿಂಟಲ್",hsnCode:"HSN ಕೋಡ್",basicAmount:"ಮೂಲ ಮೊತ್ತ",packing:"ಪೇಕಿಂಗ್",weighingCharges:"ತೂಕ ಶುಲ್ಕ",commission:"ಕಮಿಷನ್",sgst:"SGST @ 2.5%",cgst:"CGST @ 2.5%",cess:"CESS @ 0.6%",totalAmount:"ಒಟ್ಟು ಮೊತ್ತ",totalPayable:"ಒಟ್ಟು ಪಾವತಿ",grandTotal:"ಮಹಾ ಮೊತ್ತ",inWords:"ಶಬ್ದಗಳಲ್ಲಿ",bankDetails:"ಬ್ಯಾಂಕ್ ವಿವರಗಳು",signature:"ಸಹಿ",print:"ಮುದ್ರಿಸಿ",download:"ಡೌನ್‌ಲೋಡ್",generateBills:"ಬಿಲ್‌ಗಳನ್ನು ತಯಾರಿಸಿ",buyerBilling:"ಖರೀದಾರ ಬಿಲ್ಲಿಂಗ್",dailyBills:"ದೈನಂದಿನ ಬಿಲ್‌ಗಳು"}},ig={en:lz,hi:cz,kn:dz},uP=N.createContext(void 0);function uz(e,t){return t.split(".").reduce((n,r)=>n&&n[r]?n[r]:t,e)}function fz({children:e}){const[t,n]=N.useState("en");N.useEffect(()=>{const a=localStorage.getItem("apmc-language");a&&ig[a]&&n(a)},[]);const r=a=>{ig[a]&&(n(a),localStorage.setItem("apmc-language",a))},i=a=>{const o=ig[t]||ig.en;return uz(o,a)};return s.jsx(uP.Provider,{value:{language:t,setLanguage:r,t:i},children:e})}function Mm(){const e=N.useContext(uP);if(!e)throw new Error("useI18n must be used within an I18nProvider");return e}function yr({path:e,component:t}){const{user:n,isLoading:r}=Oo();return s.jsx(vy,{path:e,children:()=>r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx(cu,{className:"h-8 w-8 animate-spin text-border"})}):n?s.jsx(t,{}):s.jsx(iR,{to:"/auth"})})}const Re=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:rt("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Re.displayName="Card";const it=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:rt("flex flex-col space-y-1.5 p-6",e),...t}));it.displayName="CardHeader";const ct=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:rt("text-2xl font-semibold leading-none tracking-tight",e),...t}));ct.displayName="CardTitle";const Cn=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:rt("text-sm text-muted-foreground",e),...t}));Cn.displayName="CardDescription";const qe=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:rt("p-6 pt-0",e),...t}));qe.displayName="CardContent";const hz=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:rt("flex items-center p-6 pt-0",e),...t}));hz.displayName="CardFooter";function mz(){return s.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:s.jsx(Re,{className:"w-full max-w-md mx-4",children:s.jsxs(qe,{className:"pt-6",children:[s.jsxs("div",{className:"flex mb-4 gap-2",children:[s.jsx(Ei,{className:"h-8 w-8 text-red-500"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),s.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const Wb=sf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Le=N.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},a)=>{const o=r?qA:"button";return s.jsx(o,{className:rt(Wb({variant:t,size:n,className:e})),ref:a,...i})});Le.displayName="Button";const Ze=N.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:rt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Ze.displayName="Input";var Hb="Avatar",[pz,$Q]=xi(Hb),[gz,fP]=pz(Hb),hP=N.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[i,a]=N.useState("idle");return s.jsx(gz,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(Lt.span,{...r,ref:t})})});hP.displayName=Hb;var mP="AvatarImage",pP=N.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:i=()=>{},...a}=e,o=fP(mP,n),l=xz(r,a),c=Kr(d=>{i(d),o.onImageLoadingStatusChange(d)});return Pr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Lt.img,{...a,ref:t,src:r}):null});pP.displayName=mP;var gP="AvatarFallback",xP=N.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...i}=e,a=fP(gP,n),[o,l]=N.useState(r===void 0);return N.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(Lt.span,{...i,ref:t}):null});xP.displayName=gP;function KN(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function xz(e,{referrerPolicy:t,crossOrigin:n}){const r=yz(),i=N.useRef(null),a=r?(i.current||(i.current=new window.Image),i.current):null,[o,l]=N.useState(()=>KN(a,e));return Pr(()=>{l(KN(a,e))},[a,e]),Pr(()=>{const c=h=>()=>{l(h)};if(!a)return;const d=c("loaded"),f=c("error");return a.addEventListener("load",d),a.addEventListener("error",f),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",f)}},[a,n,t]),o}function vz(){return()=>{}}function yz(){return N.useSyncExternalStore(vz,()=>!0,()=>!1)}var vP=hP,yP=pP,bP=xP;const Gy=N.forwardRef(({className:e,...t},n)=>s.jsx(vP,{ref:n,className:rt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Gy.displayName=vP.displayName;const bz=N.forwardRef(({className:e,...t},n)=>s.jsx(yP,{ref:n,className:rt("aspect-square h-full w-full",e),...t}));bz.displayName=yP.displayName;const Ky=N.forwardRef(({className:e,...t},n)=>s.jsx(bP,{ref:n,className:rt("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Ky.displayName=bP.displayName;var wz=N.createContext(void 0);function h0(e){const t=N.useContext(wz);return e||t||"ltr"}var r1=0;function Gb(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??QN()),document.body.insertAdjacentElement("beforeend",e[1]??QN()),r1++,()=>{r1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),r1--}},[])}function QN(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var s1="focusScope.autoFocusOnMount",i1="focusScope.autoFocusOnUnmount",YN={bubbles:!1,cancelable:!0},Nz="FocusScope",m0=N.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=N.useState(null),d=Kr(i),f=Kr(a),h=N.useRef(null),g=en(t,y=>c(y)),m=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let y=function(_){if(m.paused||!l)return;const k=_.target;l.contains(k)?h.current=k:cl(h.current,{select:!0})},j=function(_){if(m.paused||!l)return;const k=_.relatedTarget;k!==null&&(l.contains(k)||cl(h.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const M of _)M.removedNodes.length>0&&cl(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",j);const x=new MutationObserver(v);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",j),x.disconnect()}}},[r,l,m.paused]),N.useEffect(()=>{if(l){XN.add(m);const y=document.activeElement;if(!l.contains(y)){const v=new CustomEvent(s1,YN);l.addEventListener(s1,d),l.dispatchEvent(v),v.defaultPrevented||(jz(kz(wP(l)),{select:!0}),document.activeElement===y&&cl(l))}return()=>{l.removeEventListener(s1,d),setTimeout(()=>{const v=new CustomEvent(i1,YN);l.addEventListener(i1,f),l.dispatchEvent(v),v.defaultPrevented||cl(y??document.body,{select:!0}),l.removeEventListener(i1,f),XN.remove(m)},0)}}},[l,d,f,m]);const S=N.useCallback(y=>{if(!n&&!r||m.paused)return;const j=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(j&&v){const x=y.currentTarget,[_,k]=Sz(x);_&&k?!y.shiftKey&&v===k?(y.preventDefault(),n&&cl(_,{select:!0})):y.shiftKey&&v===_&&(y.preventDefault(),n&&cl(k,{select:!0})):v===x&&y.preventDefault()}},[n,r,m.paused]);return s.jsx(Lt.div,{tabIndex:-1,...o,ref:g,onKeyDown:S})});m0.displayName=Nz;function jz(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(cl(r,{select:t}),document.activeElement!==n)return}function Sz(e){const t=wP(e),n=ZN(t,e),r=ZN(t.reverse(),e);return[n,r]}function wP(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function ZN(e,t){for(const n of e)if(!_z(n,{upTo:t}))return n}function _z(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Cz(e){return e instanceof HTMLInputElement&&"select"in e}function cl(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Cz(e)&&t&&e.select()}}var XN=Az();function Az(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=JN(e,t),e.unshift(t)},remove(t){var n;e=JN(e,t),(n=e[0])==null||n.resume()}}}function JN(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function kz(e){return e.filter(t=>t.tagName!=="A")}var a1="rovingFocusGroup.onEntryFocus",Pz={bubbles:!1,cancelable:!0},p0="RovingFocusGroup",[Qy,NP,Tz]=s0(p0),[Lz,g0]=xi(p0,[Tz]),[Ez,Iz]=Lz(p0),jP=N.forwardRef((e,t)=>s.jsx(Qy.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Qy.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Dz,{...e,ref:t})})}));jP.displayName=p0;var Dz=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:f=!1,...h}=e,g=N.useRef(null),m=en(t,g),S=h0(a),[y=null,j]=Bl({prop:o,defaultProp:l,onChange:c}),[v,x]=N.useState(!1),_=Kr(d),k=NP(n),M=N.useRef(!1),[L,O]=N.useState(0);return N.useEffect(()=>{const T=g.current;if(T)return T.addEventListener(a1,_),()=>T.removeEventListener(a1,_)},[_]),s.jsx(Ez,{scope:n,orientation:r,dir:S,loop:i,currentTabStopId:y,onItemFocus:N.useCallback(T=>j(T),[j]),onItemShiftTab:N.useCallback(()=>x(!0),[]),onFocusableItemAdd:N.useCallback(()=>O(T=>T+1),[]),onFocusableItemRemove:N.useCallback(()=>O(T=>T-1),[]),children:s.jsx(Lt.div,{tabIndex:v||L===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:at(e.onMouseDown,()=>{M.current=!0}),onFocus:at(e.onFocus,T=>{const E=!M.current;if(T.target===T.currentTarget&&E&&!v){const Z=new CustomEvent(a1,Pz);if(T.currentTarget.dispatchEvent(Z),!Z.defaultPrevented){const C=k().filter(z=>z.focusable),P=C.find(z=>z.active),G=C.find(z=>z.id===y),V=[P,G,...C].filter(Boolean).map(z=>z.ref.current);CP(V,f)}}M.current=!1}),onBlur:at(e.onBlur,()=>x(!1))})})}),SP="RovingFocusGroupItem",_P=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,...o}=e,l=Va(),c=a||l,d=Iz(SP,n),f=d.currentTabStopId===c,h=NP(n),{onFocusableItemAdd:g,onFocusableItemRemove:m}=d;return N.useEffect(()=>{if(r)return g(),()=>m()},[r,g,m]),s.jsx(Qy.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:s.jsx(Lt.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:at(e.onMouseDown,S=>{r?d.onItemFocus(c):S.preventDefault()}),onFocus:at(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:at(e.onKeyDown,S=>{if(S.key==="Tab"&&S.shiftKey){d.onItemShiftTab();return}if(S.target!==S.currentTarget)return;const y=Rz(S,d.orientation,d.dir);if(y!==void 0){if(S.metaKey||S.ctrlKey||S.altKey||S.shiftKey)return;S.preventDefault();let v=h().filter(x=>x.focusable).map(x=>x.ref.current);if(y==="last")v.reverse();else if(y==="prev"||y==="next"){y==="prev"&&v.reverse();const x=v.indexOf(S.currentTarget);v=d.loop?Oz(v,x+1):v.slice(x+1)}setTimeout(()=>CP(v))}})})})});_P.displayName=SP;var Fz={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Mz(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Rz(e,t,n){const r=Mz(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Fz[r]}function CP(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Oz(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var AP=jP,kP=_P,Bz=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},$d=new WeakMap,ag=new WeakMap,og={},o1=0,PP=function(e){return e&&(e.host||PP(e.parentNode))},zz=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=PP(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},$z=function(e,t,n,r){var i=zz(t,Array.isArray(e)?e:[e]);og[n]||(og[n]=new WeakMap);var a=og[n],o=[],l=new Set,c=new Set(i),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};i.forEach(d);var f=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(g){if(l.has(g))f(g);else try{var m=g.getAttribute(r),S=m!==null&&m!=="false",y=($d.get(g)||0)+1,j=(a.get(g)||0)+1;$d.set(g,y),a.set(g,j),o.push(g),y===1&&S&&ag.set(g,!0),j===1&&g.setAttribute(n,"true"),S||g.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",g,v)}})};return f(t),l.clear(),o1++,function(){o.forEach(function(h){var g=$d.get(h)-1,m=a.get(h)-1;$d.set(h,g),a.set(h,m),g||(ag.has(h)||h.removeAttribute(r),ag.delete(h)),m||h.removeAttribute(n)}),o1--,o1||($d=new WeakMap,$d=new WeakMap,ag=new WeakMap,og={})}},Kb=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=Bz(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),$z(r,i,n,"aria-hidden")):function(){return null}},Ba=function(){return Ba=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Ba.apply(this,arguments)};function TP(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function qz(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var Ig="right-scroll-bar-position",Dg="width-before-scroll-bar",Uz="with-scroll-bars-hidden",Vz="--removed-body-scroll-bar-size";function l1(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Wz(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var Hz=typeof window<"u"?N.useLayoutEffect:N.useEffect,ej=new WeakMap;function Gz(e,t){var n=Wz(null,function(r){return e.forEach(function(i){return l1(i,r)})});return Hz(function(){var r=ej.get(n);if(r){var i=new Set(r),a=new Set(e),o=n.current;i.forEach(function(l){a.has(l)||l1(l,null)}),a.forEach(function(l){i.has(l)||l1(l,o)})}ej.set(n,e)},[e]),n}function Kz(e){return e}function Qz(e,t){t===void 0&&(t=Kz);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var f=o;o=[],f.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(f){o.push(f),d()},filter:function(f){return o=o.filter(f),n}}}};return i}function Yz(e){e===void 0&&(e={});var t=Qz(null);return t.options=Ba({async:!0,ssr:!1},e),t}var LP=function(e){var t=e.sideCar,n=TP(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Ba({},n))};LP.isSideCarExport=!0;function Zz(e,t){return e.useMedium(t),LP}var EP=Yz(),c1=function(){},x0=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:c1,onWheelCapture:c1,onTouchMoveCapture:c1}),i=r[0],a=r[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,f=e.enabled,h=e.shards,g=e.sideCar,m=e.noIsolation,S=e.inert,y=e.allowPinchZoom,j=e.as,v=j===void 0?"div":j,x=e.gapMode,_=TP(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=g,M=Gz([n,t]),L=Ba(Ba({},_),i);return N.createElement(N.Fragment,null,f&&N.createElement(k,{sideCar:EP,removeScrollBar:d,shards:h,noIsolation:m,inert:S,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:x}),o?N.cloneElement(N.Children.only(l),Ba(Ba({},L),{ref:M})):N.createElement(v,Ba({},L,{className:c,ref:M}),l))});x0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};x0.classNames={fullWidth:Dg,zeroRight:Ig};var Xz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Jz(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Xz();return t&&e.setAttribute("nonce",t),e}function e$(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function t$(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var n$=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Jz())&&(e$(t,n),t$(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},r$=function(){var e=n$();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},IP=function(){var e=r$(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},s$={left:0,top:0,right:0,gap:0},d1=function(e){return parseInt(e||"",10)||0},i$=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[d1(n),d1(r),d1(i)]},a$=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return s$;var t=i$(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},o$=IP(),bu="data-scroll-locked",l$=function(e,t,n,r){var i=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Uz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(bu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ig,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Dg,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ig," .").concat(Ig,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Dg," .").concat(Dg,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(bu,`] {
    `).concat(Vz,": ").concat(l,`px;
  }
`)},tj=function(){var e=parseInt(document.body.getAttribute(bu)||"0",10);return isFinite(e)?e:0},c$=function(){N.useEffect(function(){return document.body.setAttribute(bu,(tj()+1).toString()),function(){var e=tj()-1;e<=0?document.body.removeAttribute(bu):document.body.setAttribute(bu,e.toString())}},[])},d$=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;c$();var a=N.useMemo(function(){return a$(i)},[i]);return N.createElement(o$,{styles:l$(a,!t,i,n?"":"!important")})},Yy=!1;if(typeof window<"u")try{var lg=Object.defineProperty({},"passive",{get:function(){return Yy=!0,!0}});window.addEventListener("test",lg,lg),window.removeEventListener("test",lg,lg)}catch{Yy=!1}var qd=Yy?{passive:!1}:!1,u$=function(e){return e.tagName==="TEXTAREA"},DP=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!u$(e)&&n[t]==="visible")},f$=function(e){return DP(e,"overflowY")},h$=function(e){return DP(e,"overflowX")},nj=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=FP(e,r);if(i){var a=MP(e,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},m$=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},p$=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},FP=function(e,t){return e==="v"?f$(t):h$(t)},MP=function(e,t){return e==="v"?m$(t):p$(t)},g$=function(e,t){return e==="h"&&t==="rtl"?-1:1},x$=function(e,t,n,r,i){var a=g$(e,window.getComputedStyle(t).direction),o=a*r,l=n.target,c=t.contains(l),d=!1,f=o>0,h=0,g=0;do{var m=MP(e,l),S=m[0],y=m[1],j=m[2],v=y-j-a*S;(S||v)&&FP(e,l)&&(h+=v,g+=S),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&(Math.abs(h)<1||!i)||!f&&(Math.abs(g)<1||!i))&&(d=!0),d},cg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},rj=function(e){return[e.deltaX,e.deltaY]},sj=function(e){return e&&"current"in e?e.current:e},v$=function(e,t){return e[0]===t[0]&&e[1]===t[1]},y$=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},b$=0,Ud=[];function w$(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(b$++)[0],a=N.useState(IP)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var y=qz([e.lockRef.current],(e.shards||[]).map(sj),!0).filter(Boolean);return y.forEach(function(j){return j.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=N.useCallback(function(y,j){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!o.current.allowPinchZoom;var v=cg(y),x=n.current,_="deltaX"in y?y.deltaX:x[0]-v[0],k="deltaY"in y?y.deltaY:x[1]-v[1],M,L=y.target,O=Math.abs(_)>Math.abs(k)?"h":"v";if("touches"in y&&O==="h"&&L.type==="range")return!1;var T=nj(O,L);if(!T)return!0;if(T?M=O:(M=O==="v"?"h":"v",T=nj(O,L)),!T)return!1;if(!r.current&&"changedTouches"in y&&(_||k)&&(r.current=M),!M)return!0;var E=r.current||M;return x$(E,j,y,E==="h"?_:k,!0)},[]),c=N.useCallback(function(y){var j=y;if(!(!Ud.length||Ud[Ud.length-1]!==a)){var v="deltaY"in j?rj(j):cg(j),x=t.current.filter(function(M){return M.name===j.type&&(M.target===j.target||j.target===M.shadowParent)&&v$(M.delta,v)})[0];if(x&&x.should){j.cancelable&&j.preventDefault();return}if(!x){var _=(o.current.shards||[]).map(sj).filter(Boolean).filter(function(M){return M.contains(j.target)}),k=_.length>0?l(j,_[0]):!o.current.noIsolation;k&&j.cancelable&&j.preventDefault()}}},[]),d=N.useCallback(function(y,j,v,x){var _={name:y,delta:j,target:v,should:x,shadowParent:N$(v)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(k){return k!==_})},1)},[]),f=N.useCallback(function(y){n.current=cg(y),r.current=void 0},[]),h=N.useCallback(function(y){d(y.type,rj(y),y.target,l(y,e.lockRef.current))},[]),g=N.useCallback(function(y){d(y.type,cg(y),y.target,l(y,e.lockRef.current))},[]);N.useEffect(function(){return Ud.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",c,qd),document.addEventListener("touchmove",c,qd),document.addEventListener("touchstart",f,qd),function(){Ud=Ud.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,qd),document.removeEventListener("touchmove",c,qd),document.removeEventListener("touchstart",f,qd)}},[]);var m=e.removeScrollBar,S=e.inert;return N.createElement(N.Fragment,null,S?N.createElement(a,{styles:y$(i)}):null,m?N.createElement(d$,{gapMode:e.gapMode}):null)}function N$(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const j$=Zz(EP,w$);var v0=N.forwardRef(function(e,t){return N.createElement(x0,Ba({},e,{ref:t,sideCar:j$}))});v0.classNames=x0.classNames;var Zy=["Enter"," "],S$=["ArrowDown","PageUp","Home"],RP=["ArrowUp","PageDown","End"],_$=[...S$,...RP],C$={ltr:[...Zy,"ArrowRight"],rtl:[...Zy,"ArrowLeft"]},A$={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Rm="Menu",[rm,k$,P$]=s0(Rm),[ld,OP]=xi(Rm,[P$,cf,g0]),y0=cf(),BP=g0(),[T$,cd]=ld(Rm),[L$,Om]=ld(Rm),zP=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:a,modal:o=!0}=e,l=y0(t),[c,d]=N.useState(null),f=N.useRef(!1),h=Kr(a),g=h0(i);return N.useEffect(()=>{const m=()=>{f.current=!0,document.addEventListener("pointerdown",S,{capture:!0,once:!0}),document.addEventListener("pointermove",S,{capture:!0,once:!0})},S=()=>f.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",S,{capture:!0}),document.removeEventListener("pointermove",S,{capture:!0})}},[]),s.jsx(tP,{...l,children:s.jsx(T$,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:s.jsx(L$,{scope:t,onClose:N.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:g,modal:o,children:r})})})};zP.displayName=Rm;var E$="MenuAnchor",Qb=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=y0(n);return s.jsx($b,{...i,...r,ref:t})});Qb.displayName=E$;var Yb="MenuPortal",[I$,$P]=ld(Yb,{forceMount:void 0}),qP=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,a=cd(Yb,t);return s.jsx(I$,{scope:t,forceMount:n,children:s.jsx(xa,{present:n||a.open,children:s.jsx(Em,{asChild:!0,container:i,children:r})})})};qP.displayName=Yb;var Mi="MenuContent",[D$,Zb]=ld(Mi),UP=N.forwardRef((e,t)=>{const n=$P(Mi,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=cd(Mi,e.__scopeMenu),o=Om(Mi,e.__scopeMenu);return s.jsx(rm.Provider,{scope:e.__scopeMenu,children:s.jsx(xa,{present:r||a.open,children:s.jsx(rm.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(F$,{...i,ref:t}):s.jsx(M$,{...i,ref:t})})})})}),F$=N.forwardRef((e,t)=>{const n=cd(Mi,e.__scopeMenu),r=N.useRef(null),i=en(t,r);return N.useEffect(()=>{const a=r.current;if(a)return Kb(a)},[]),s.jsx(Xb,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:at(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),M$=N.forwardRef((e,t)=>{const n=cd(Mi,e.__scopeMenu);return s.jsx(Xb,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),R$=Zc("MenuContent.ScrollLock"),Xb=N.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:g,onDismiss:m,disableOutsideScroll:S,...y}=e,j=cd(Mi,n),v=Om(Mi,n),x=y0(n),_=BP(n),k=k$(n),[M,L]=N.useState(null),O=N.useRef(null),T=en(t,O,j.onContentChange),E=N.useRef(0),Z=N.useRef(""),C=N.useRef(0),P=N.useRef(null),G=N.useRef("right"),I=N.useRef(0),V=S?v0:N.Fragment,z=S?{as:R$,allowPinchZoom:!0}:void 0,q=X=>{var B,te;const le=Z.current+X,Ce=k().filter(oe=>!oe.disabled),F=document.activeElement,J=(B=Ce.find(oe=>oe.ref.current===F))==null?void 0:B.textValue,re=Ce.map(oe=>oe.textValue),Q=Q$(re,le,J),ie=(te=Ce.find(oe=>oe.textValue===Q))==null?void 0:te.ref.current;(function oe(_e){Z.current=_e,window.clearTimeout(E.current),_e!==""&&(E.current=window.setTimeout(()=>oe(""),1e3))})(le),ie&&setTimeout(()=>ie.focus())};N.useEffect(()=>()=>window.clearTimeout(E.current),[]),Gb();const H=N.useCallback(X=>{var Ce,F;return G.current===((Ce=P.current)==null?void 0:Ce.side)&&Z$(X,(F=P.current)==null?void 0:F.area)},[]);return s.jsx(D$,{scope:n,searchRef:Z,onItemEnter:N.useCallback(X=>{H(X)&&X.preventDefault()},[H]),onItemLeave:N.useCallback(X=>{var le;H(X)||((le=O.current)==null||le.focus(),L(null))},[H]),onTriggerLeave:N.useCallback(X=>{H(X)&&X.preventDefault()},[H]),pointerGraceTimerRef:C,onPointerGraceIntentChange:N.useCallback(X=>{P.current=X},[]),children:s.jsx(V,{...z,children:s.jsx(m0,{asChild:!0,trapped:i,onMountAutoFocus:at(a,X=>{var le;X.preventDefault(),(le=O.current)==null||le.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(rf,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:g,onDismiss:m,children:s.jsx(AP,{asChild:!0,..._,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:M,onCurrentTabStopIdChange:L,onEntryFocus:at(c,X=>{v.isUsingKeyboardRef.current||X.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(qb,{role:"menu","aria-orientation":"vertical","data-state":iT(j.open),"data-radix-menu-content":"",dir:v.dir,...x,...y,ref:T,style:{outline:"none",...y.style},onKeyDown:at(y.onKeyDown,X=>{const Ce=X.target.closest("[data-radix-menu-content]")===X.currentTarget,F=X.ctrlKey||X.altKey||X.metaKey,J=X.key.length===1;Ce&&(X.key==="Tab"&&X.preventDefault(),!F&&J&&q(X.key));const re=O.current;if(X.target!==re||!_$.includes(X.key))return;X.preventDefault();const ie=k().filter(B=>!B.disabled).map(B=>B.ref.current);RP.includes(X.key)&&ie.reverse(),G$(ie)}),onBlur:at(e.onBlur,X=>{X.currentTarget.contains(X.target)||(window.clearTimeout(E.current),Z.current="")}),onPointerMove:at(e.onPointerMove,sm(X=>{const le=X.target,Ce=I.current!==X.clientX;if(X.currentTarget.contains(le)&&Ce){const F=X.clientX>I.current?"right":"left";G.current=F,I.current=X.clientX}}))})})})})})})});UP.displayName=Mi;var O$="MenuGroup",Jb=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Lt.div,{role:"group",...r,ref:t})});Jb.displayName=O$;var B$="MenuLabel",VP=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Lt.div,{...r,ref:t})});VP.displayName=B$;var xx="MenuItem",ij="menu.itemSelect",b0=N.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,a=N.useRef(null),o=Om(xx,e.__scopeMenu),l=Zb(xx,e.__scopeMenu),c=en(t,a),d=N.useRef(!1),f=()=>{const h=a.current;if(!n&&h){const g=new CustomEvent(ij,{bubbles:!0,cancelable:!0});h.addEventListener(ij,m=>r==null?void 0:r(m),{once:!0}),_b(h,g),g.defaultPrevented?d.current=!1:o.onClose()}};return s.jsx(WP,{...i,ref:c,disabled:n,onClick:at(e.onClick,f),onPointerDown:h=>{var g;(g=e.onPointerDown)==null||g.call(e,h),d.current=!0},onPointerUp:at(e.onPointerUp,h=>{var g;d.current||(g=h.currentTarget)==null||g.click()}),onKeyDown:at(e.onKeyDown,h=>{const g=l.searchRef.current!=="";n||g&&h.key===" "||Zy.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});b0.displayName=xx;var WP=N.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...a}=e,o=Zb(xx,n),l=BP(n),c=N.useRef(null),d=en(t,c),[f,h]=N.useState(!1),[g,m]=N.useState("");return N.useEffect(()=>{const S=c.current;S&&m((S.textContent??"").trim())},[a.children]),s.jsx(rm.ItemSlot,{scope:n,disabled:r,textValue:i??g,children:s.jsx(kP,{asChild:!0,...l,focusable:!r,children:s.jsx(Lt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:at(e.onPointerMove,sm(S=>{r?o.onItemLeave(S):(o.onItemEnter(S),S.defaultPrevented||S.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:at(e.onPointerLeave,sm(S=>o.onItemLeave(S))),onFocus:at(e.onFocus,()=>h(!0)),onBlur:at(e.onBlur,()=>h(!1))})})})}),z$="MenuCheckboxItem",HP=N.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return s.jsx(ZP,{scope:e.__scopeMenu,checked:n,children:s.jsx(b0,{role:"menuitemcheckbox","aria-checked":vx(n)?"mixed":n,...i,ref:t,"data-state":t5(n),onSelect:at(i.onSelect,()=>r==null?void 0:r(vx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});HP.displayName=z$;var GP="MenuRadioGroup",[$$,q$]=ld(GP,{value:void 0,onValueChange:()=>{}}),KP=N.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,a=Kr(r);return s.jsx($$,{scope:e.__scopeMenu,value:n,onValueChange:a,children:s.jsx(Jb,{...i,ref:t})})});KP.displayName=GP;var QP="MenuRadioItem",YP=N.forwardRef((e,t)=>{const{value:n,...r}=e,i=q$(QP,e.__scopeMenu),a=n===i.value;return s.jsx(ZP,{scope:e.__scopeMenu,checked:a,children:s.jsx(b0,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":t5(a),onSelect:at(r.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});YP.displayName=QP;var e5="MenuItemIndicator",[ZP,U$]=ld(e5,{checked:!1}),XP=N.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,a=U$(e5,n);return s.jsx(xa,{present:r||vx(a.checked)||a.checked===!0,children:s.jsx(Lt.span,{...i,ref:t,"data-state":t5(a.checked)})})});XP.displayName=e5;var V$="MenuSeparator",JP=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Lt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});JP.displayName=V$;var W$="MenuArrow",eT=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=y0(n);return s.jsx(Ub,{...i,...r,ref:t})});eT.displayName=W$;var H$="MenuSub",[qQ,tT]=ld(H$),uh="MenuSubTrigger",nT=N.forwardRef((e,t)=>{const n=cd(uh,e.__scopeMenu),r=Om(uh,e.__scopeMenu),i=tT(uh,e.__scopeMenu),a=Zb(uh,e.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},f=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>f,[f]),N.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(Qb,{asChild:!0,...d,children:s.jsx(WP,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":iT(n.open),...e,ref:r0(t,i.onTriggerChange),onClick:h=>{var g;(g=e.onClick)==null||g.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:at(e.onPointerMove,sm(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:at(e.onPointerLeave,sm(h=>{var m,S;f();const g=(m=n.content)==null?void 0:m.getBoundingClientRect();if(g){const y=(S=n.content)==null?void 0:S.dataset.side,j=y==="right",v=j?-5:5,x=g[j?"left":"right"],_=g[j?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+v,y:h.clientY},{x,y:g.top},{x:_,y:g.top},{x:_,y:g.bottom},{x,y:g.bottom}],side:y}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:at(e.onKeyDown,h=>{var m;const g=a.searchRef.current!=="";e.disabled||g&&h.key===" "||C$[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});nT.displayName=uh;var rT="MenuSubContent",sT=N.forwardRef((e,t)=>{const n=$P(Mi,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,a=cd(Mi,e.__scopeMenu),o=Om(Mi,e.__scopeMenu),l=tT(rT,e.__scopeMenu),c=N.useRef(null),d=en(t,c);return s.jsx(rm.Provider,{scope:e.__scopeMenu,children:s.jsx(xa,{present:r||a.open,children:s.jsx(rm.Slot,{scope:e.__scopeMenu,children:s.jsx(Xb,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:at(e.onFocusOutside,f=>{f.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:at(e.onEscapeKeyDown,f=>{o.onClose(),f.preventDefault()}),onKeyDown:at(e.onKeyDown,f=>{var m;const h=f.currentTarget.contains(f.target),g=A$[o.dir].includes(f.key);h&&g&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),f.preventDefault())})})})})})});sT.displayName=rT;function iT(e){return e?"open":"closed"}function vx(e){return e==="indeterminate"}function t5(e){return vx(e)?"indeterminate":e?"checked":"unchecked"}function G$(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function K$(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Q$(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=K$(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function Y$(e,t){const{x:n,y:r}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,f=t[o].y;c>r!=f>r&&n<(d-l)*(r-c)/(f-c)+l&&(i=!i)}return i}function Z$(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Y$(n,t)}function sm(e){return t=>t.pointerType==="mouse"?e(t):void 0}var X$=zP,J$=Qb,eq=qP,tq=UP,nq=Jb,rq=VP,sq=b0,iq=HP,aq=KP,oq=YP,lq=XP,cq=JP,dq=eT,uq=nT,fq=sT,n5="DropdownMenu",[hq,UQ]=xi(n5,[OP]),Ls=OP(),[mq,aT]=hq(n5),oT=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=Ls(t),d=N.useRef(null),[f=!1,h]=Bl({prop:i,defaultProp:a,onChange:o});return s.jsx(mq,{scope:t,triggerId:Va(),triggerRef:d,contentId:Va(),open:f,onOpenChange:h,onOpenToggle:N.useCallback(()=>h(g=>!g),[h]),modal:l,children:s.jsx(X$,{...c,open:f,onOpenChange:h,dir:r,modal:l,children:n})})};oT.displayName=n5;var lT="DropdownMenuTrigger",cT=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,a=aT(lT,n),o=Ls(n);return s.jsx(J$,{asChild:!0,...o,children:s.jsx(Lt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:r0(t,a.triggerRef),onPointerDown:at(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:at(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});cT.displayName=lT;var pq="DropdownMenuPortal",dT=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Ls(t);return s.jsx(eq,{...r,...n})};dT.displayName=pq;var uT="DropdownMenuContent",fT=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=aT(uT,n),a=Ls(n),o=N.useRef(!1);return s.jsx(tq,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...r,ref:t,onCloseAutoFocus:at(e.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:at(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,f=c.button===2||d;(!i.modal||f)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fT.displayName=uT;var gq="DropdownMenuGroup",xq=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(nq,{...i,...r,ref:t})});xq.displayName=gq;var vq="DropdownMenuLabel",hT=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(rq,{...i,...r,ref:t})});hT.displayName=vq;var yq="DropdownMenuItem",mT=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(sq,{...i,...r,ref:t})});mT.displayName=yq;var bq="DropdownMenuCheckboxItem",pT=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(iq,{...i,...r,ref:t})});pT.displayName=bq;var wq="DropdownMenuRadioGroup",Nq=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(aq,{...i,...r,ref:t})});Nq.displayName=wq;var jq="DropdownMenuRadioItem",gT=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(oq,{...i,...r,ref:t})});gT.displayName=jq;var Sq="DropdownMenuItemIndicator",xT=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(lq,{...i,...r,ref:t})});xT.displayName=Sq;var _q="DropdownMenuSeparator",vT=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(cq,{...i,...r,ref:t})});vT.displayName=_q;var Cq="DropdownMenuArrow",Aq=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(dq,{...i,...r,ref:t})});Aq.displayName=Cq;var kq="DropdownMenuSubTrigger",yT=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(uq,{...i,...r,ref:t})});yT.displayName=kq;var Pq="DropdownMenuSubContent",bT=N.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ls(n);return s.jsx(fq,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bT.displayName=Pq;var Tq=oT,Lq=cT,Eq=dT,wT=fT,NT=hT,jT=mT,ST=pT,_T=gT,CT=xT,AT=vT,kT=yT,PT=bT;const Iq=Tq,Dq=Lq,Fq=N.forwardRef(({className:e,inset:t,children:n,...r},i)=>s.jsxs(kT,{ref:i,className:rt("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,s.jsx(vk,{className:"ml-auto"})]}));Fq.displayName=kT.displayName;const Mq=N.forwardRef(({className:e,...t},n)=>s.jsx(PT,{ref:n,className:rt("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));Mq.displayName=PT.displayName;const TT=N.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(Eq,{children:s.jsx(wT,{ref:r,sideOffset:t,className:rt("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));TT.displayName=wT.displayName;const Xy=N.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(jT,{ref:r,className:rt("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));Xy.displayName=jT.displayName;const Rq=N.forwardRef(({className:e,children:t,checked:n,...r},i)=>s.jsxs(ST,{ref:i,className:rt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(CT,{children:s.jsx(dx,{className:"h-4 w-4"})})}),t]}));Rq.displayName=ST.displayName;const Oq=N.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(_T,{ref:r,className:rt("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(CT,{children:s.jsx(FO,{className:"h-2 w-2 fill-current"})})}),t]}));Oq.displayName=_T.displayName;const Bq=N.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(NT,{ref:r,className:rt("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Bq.displayName=NT.displayName;const Jy=N.forwardRef(({className:e,...t},n)=>s.jsx(AT,{ref:n,className:rt("-mx-1 my-1 h-px bg-muted",e),...t}));Jy.displayName=AT.displayName;var r5="Dialog",[LT,ET]=xi(r5),[zq,va]=LT(r5),IT=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=N.useRef(null),c=N.useRef(null),[d=!1,f]=Bl({prop:r,defaultProp:i,onChange:a});return s.jsx(zq,{scope:t,triggerRef:l,contentRef:c,contentId:Va(),titleId:Va(),descriptionId:Va(),open:d,onOpenChange:f,onOpenToggle:N.useCallback(()=>f(h=>!h),[f]),modal:o,children:n})};IT.displayName=r5;var DT="DialogTrigger",FT=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=va(DT,n),a=en(t,i.triggerRef);return s.jsx(Lt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":a5(i.open),...r,ref:a,onClick:at(e.onClick,i.onOpenToggle)})});FT.displayName=DT;var s5="DialogPortal",[$q,MT]=LT(s5,{forceMount:void 0}),RT=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,a=va(s5,t);return s.jsx($q,{scope:t,forceMount:n,children:N.Children.map(r,o=>s.jsx(xa,{present:n||a.open,children:s.jsx(Em,{asChild:!0,container:i,children:o})}))})};RT.displayName=s5;var yx="DialogOverlay",OT=N.forwardRef((e,t)=>{const n=MT(yx,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=va(yx,e.__scopeDialog);return a.modal?s.jsx(xa,{present:r||a.open,children:s.jsx(Uq,{...i,ref:t})}):null});OT.displayName=yx;var qq=Zc("DialogOverlay.RemoveScroll"),Uq=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=va(yx,n);return s.jsx(v0,{as:qq,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(Lt.div,{"data-state":a5(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Jc="DialogContent",BT=N.forwardRef((e,t)=>{const n=MT(Jc,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,a=va(Jc,e.__scopeDialog);return s.jsx(xa,{present:r||a.open,children:a.modal?s.jsx(Vq,{...i,ref:t}):s.jsx(Wq,{...i,ref:t})})});BT.displayName=Jc;var Vq=N.forwardRef((e,t)=>{const n=va(Jc,e.__scopeDialog),r=N.useRef(null),i=en(t,n.contentRef,r);return N.useEffect(()=>{const a=r.current;if(a)return Kb(a)},[]),s.jsx(zT,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:at(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:at(e.onFocusOutside,a=>a.preventDefault())})}),Wq=N.forwardRef((e,t)=>{const n=va(Jc,e.__scopeDialog),r=N.useRef(!1),i=N.useRef(!1);return s.jsx(zT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),zT=N.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=va(Jc,n),c=N.useRef(null),d=en(t,c);return Gb(),s.jsxs(s.Fragment,{children:[s.jsx(m0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(rf,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":a5(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Gq,{titleId:l.titleId}),s.jsx(Qq,{contentRef:c,descriptionId:l.descriptionId})]})]})}),i5="DialogTitle",$T=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=va(i5,n);return s.jsx(Lt.h2,{id:i.titleId,...r,ref:t})});$T.displayName=i5;var qT="DialogDescription",UT=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=va(qT,n);return s.jsx(Lt.p,{id:i.descriptionId,...r,ref:t})});UT.displayName=qT;var VT="DialogClose",WT=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=va(VT,n);return s.jsx(Lt.button,{type:"button",...r,ref:t,onClick:at(e.onClick,()=>i.onOpenChange(!1))})});WT.displayName=VT;function a5(e){return e?"open":"closed"}var HT="DialogTitleWarning",[Hq,GT]=$R(HT,{contentName:Jc,titleName:i5,docsSlug:"dialog"}),Gq=({titleId:e})=>{const t=GT(HT),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Kq="DialogDescriptionWarning",Qq=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${GT(Kq).contentName}}.`;return N.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},o5=IT,l5=FT,c5=RT,Bm=OT,zm=BT,$m=$T,qm=UT,w0=WT;const Yq=o5,Zq=l5,Xq=c5,KT=N.forwardRef(({className:e,...t},n)=>s.jsx(Bm,{className:rt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));KT.displayName=Bm.displayName;const Jq=sf("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),QT=N.forwardRef(({side:e="right",className:t,children:n,...r},i)=>s.jsxs(Xq,{children:[s.jsx(KT,{}),s.jsxs(zm,{ref:i,className:rt(Jq({side:e}),t),...r,children:[n,s.jsxs(w0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(o0,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));QT.displayName=zm.displayName;const eU=N.forwardRef(({className:e,...t},n)=>s.jsx($m,{ref:n,className:rt("text-lg font-semibold text-foreground",e),...t}));eU.displayName=$m.displayName;const tU=N.forwardRef(({className:e,...t},n)=>s.jsx(qm,{ref:n,className:rt("text-sm text-muted-foreground",e),...t}));tU.displayName=qm.displayName;function aj(e,[t,n]){return Math.min(n,Math.max(t,e))}function YT(e){const t=N.useRef({value:e,previous:e});return N.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var nU=[" ","Enter","ArrowUp","ArrowDown"],rU=[" ","Enter"],Um="Select",[N0,j0,sU]=s0(Um),[df,VQ]=xi(Um,[sU,cf]),S0=cf(),[iU,nc]=df(Um),[aU,oU]=df(Um),ZT=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:f,autoComplete:h,disabled:g,required:m,form:S}=e,y=S0(t),[j,v]=N.useState(null),[x,_]=N.useState(null),[k,M]=N.useState(!1),L=h0(d),[O=!1,T]=Bl({prop:r,defaultProp:i,onChange:a}),[E,Z]=Bl({prop:o,defaultProp:l,onChange:c}),C=N.useRef(null),P=j?S||!!j.closest("form"):!0,[G,I]=N.useState(new Set),V=Array.from(G).map(z=>z.props.value).join(";");return s.jsx(tP,{...y,children:s.jsxs(iU,{required:m,scope:t,trigger:j,onTriggerChange:v,valueNode:x,onValueNodeChange:_,valueNodeHasChildren:k,onValueNodeHasChildrenChange:M,contentId:Va(),value:E,onValueChange:Z,open:O,onOpenChange:T,dir:L,triggerPointerDownPosRef:C,disabled:g,children:[s.jsx(N0.Provider,{scope:t,children:s.jsx(aU,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(z=>{I(q=>new Set(q).add(z))},[]),onNativeOptionRemove:N.useCallback(z=>{I(q=>{const H=new Set(q);return H.delete(z),H})},[]),children:n})}),P?s.jsxs(NL,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:h,value:E,onChange:z=>Z(z.target.value),disabled:g,form:S,children:[E===void 0?s.jsx("option",{value:""}):null,Array.from(G)]},V):null]})})};ZT.displayName=Um;var XT="SelectTrigger",JT=N.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,a=S0(n),o=nc(XT,n),l=o.disabled||r,c=en(t,o.onTriggerChange),d=j0(n),f=N.useRef("touch"),[h,g,m]=jL(y=>{const j=d().filter(_=>!_.disabled),v=j.find(_=>_.value===o.value),x=SL(j,y,v);x!==void 0&&o.onValueChange(x.value)}),S=y=>{l||(o.onOpenChange(!0),m()),y&&(o.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return s.jsx($b,{asChild:!0,...a,children:s.jsx(Lt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":wL(o.value)?"":void 0,...i,ref:c,onClick:at(i.onClick,y=>{y.currentTarget.focus(),f.current!=="mouse"&&S(y)}),onPointerDown:at(i.onPointerDown,y=>{f.current=y.pointerType;const j=y.target;j.hasPointerCapture(y.pointerId)&&j.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(S(y),y.preventDefault())}),onKeyDown:at(i.onKeyDown,y=>{const j=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&g(y.key),!(j&&y.key===" ")&&nU.includes(y.key)&&(S(),y.preventDefault())})})})});JT.displayName=XT;var eL="SelectValue",tL=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:o="",...l}=e,c=nc(eL,n),{onValueNodeHasChildrenChange:d}=c,f=a!==void 0,h=en(t,c.onValueNodeChange);return Pr(()=>{d(f)},[d,f]),s.jsx(Lt.span,{...l,ref:h,style:{pointerEvents:"none"},children:wL(c.value)?s.jsx(s.Fragment,{children:o}):a})});tL.displayName=eL;var lU="SelectIcon",nL=N.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return s.jsx(Lt.span,{"aria-hidden":!0,...i,ref:t,children:r||"▼"})});nL.displayName=lU;var cU="SelectPortal",rL=e=>s.jsx(Em,{asChild:!0,...e});rL.displayName=cU;var ed="SelectContent",sL=N.forwardRef((e,t)=>{const n=nc(ed,e.__scopeSelect),[r,i]=N.useState();if(Pr(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?od.createPortal(s.jsx(iL,{scope:e.__scopeSelect,children:s.jsx(N0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(aL,{...e,ref:t})});sL.displayName=ed;var ea=10,[iL,rc]=df(ed),dU="SelectContentImpl",uU=Zc("SelectContent.RemoveScroll"),aL=N.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:g,collisionPadding:m,sticky:S,hideWhenDetached:y,avoidCollisions:j,...v}=e,x=nc(ed,n),[_,k]=N.useState(null),[M,L]=N.useState(null),O=en(t,B=>k(B)),[T,E]=N.useState(null),[Z,C]=N.useState(null),P=j0(n),[G,I]=N.useState(!1),V=N.useRef(!1);N.useEffect(()=>{if(_)return Kb(_)},[_]),Gb();const z=N.useCallback(B=>{const[te,...oe]=P().map(Ne=>Ne.ref.current),[_e]=oe.slice(-1),we=document.activeElement;for(const Ne of B)if(Ne===we||(Ne==null||Ne.scrollIntoView({block:"nearest"}),Ne===te&&M&&(M.scrollTop=0),Ne===_e&&M&&(M.scrollTop=M.scrollHeight),Ne==null||Ne.focus(),document.activeElement!==we))return},[P,M]),q=N.useCallback(()=>z([T,_]),[z,T,_]);N.useEffect(()=>{G&&q()},[G,q]);const{onOpenChange:H,triggerPointerDownPosRef:X}=x;N.useEffect(()=>{if(_){let B={x:0,y:0};const te=_e=>{var we,Ne;B={x:Math.abs(Math.round(_e.pageX)-(((we=X.current)==null?void 0:we.x)??0)),y:Math.abs(Math.round(_e.pageY)-(((Ne=X.current)==null?void 0:Ne.y)??0))}},oe=_e=>{B.x<=10&&B.y<=10?_e.preventDefault():_.contains(_e.target)||H(!1),document.removeEventListener("pointermove",te),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",te),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",te),document.removeEventListener("pointerup",oe,{capture:!0})}}},[_,H,X]),N.useEffect(()=>{const B=()=>H(!1);return window.addEventListener("blur",B),window.addEventListener("resize",B),()=>{window.removeEventListener("blur",B),window.removeEventListener("resize",B)}},[H]);const[le,Ce]=jL(B=>{const te=P().filter(we=>!we.disabled),oe=te.find(we=>we.ref.current===document.activeElement),_e=SL(te,B,oe);_e&&setTimeout(()=>_e.ref.current.focus())}),F=N.useCallback((B,te,oe)=>{const _e=!V.current&&!oe;(x.value!==void 0&&x.value===te||_e)&&(E(B),_e&&(V.current=!0))},[x.value]),J=N.useCallback(()=>_==null?void 0:_.focus(),[_]),re=N.useCallback((B,te,oe)=>{const _e=!V.current&&!oe;(x.value!==void 0&&x.value===te||_e)&&C(B)},[x.value]),Q=r==="popper"?e2:oL,ie=Q===e2?{side:l,sideOffset:c,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:g,collisionPadding:m,sticky:S,hideWhenDetached:y,avoidCollisions:j}:{};return s.jsx(iL,{scope:n,content:_,viewport:M,onViewportChange:L,itemRefCallback:F,selectedItem:T,onItemLeave:J,itemTextRefCallback:re,focusSelectedItem:q,selectedItemText:Z,position:r,isPositioned:G,searchRef:le,children:s.jsx(v0,{as:uU,allowPinchZoom:!0,children:s.jsx(m0,{asChild:!0,trapped:x.open,onMountAutoFocus:B=>{B.preventDefault()},onUnmountAutoFocus:at(i,B=>{var te;(te=x.trigger)==null||te.focus({preventScroll:!0}),B.preventDefault()}),children:s.jsx(rf,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:B=>B.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:s.jsx(Q,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:B=>B.preventDefault(),...v,...ie,onPlaced:()=>I(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:at(v.onKeyDown,B=>{const te=B.ctrlKey||B.altKey||B.metaKey;if(B.key==="Tab"&&B.preventDefault(),!te&&B.key.length===1&&Ce(B.key),["ArrowUp","ArrowDown","Home","End"].includes(B.key)){let _e=P().filter(we=>!we.disabled).map(we=>we.ref.current);if(["ArrowUp","End"].includes(B.key)&&(_e=_e.slice().reverse()),["ArrowUp","ArrowDown"].includes(B.key)){const we=B.target,Ne=_e.indexOf(we);_e=_e.slice(Ne+1)}setTimeout(()=>z(_e)),B.preventDefault()}})})})})})})});aL.displayName=dU;var fU="SelectItemAlignedPosition",oL=N.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,a=nc(ed,n),o=rc(ed,n),[l,c]=N.useState(null),[d,f]=N.useState(null),h=en(t,O=>f(O)),g=j0(n),m=N.useRef(!1),S=N.useRef(!0),{viewport:y,selectedItem:j,selectedItemText:v,focusSelectedItem:x}=o,_=N.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&y&&j&&v){const O=a.trigger.getBoundingClientRect(),T=d.getBoundingClientRect(),E=a.valueNode.getBoundingClientRect(),Z=v.getBoundingClientRect();if(a.dir!=="rtl"){const we=Z.left-T.left,Ne=E.left-we,ke=O.left-Ne,Ue=O.width+ke,be=Math.max(Ue,T.width),se=window.innerWidth-ea,ut=aj(Ne,[ea,Math.max(ea,se-be)]);l.style.minWidth=Ue+"px",l.style.left=ut+"px"}else{const we=T.right-Z.right,Ne=window.innerWidth-E.right-we,ke=window.innerWidth-O.right-Ne,Ue=O.width+ke,be=Math.max(Ue,T.width),se=window.innerWidth-ea,ut=aj(Ne,[ea,Math.max(ea,se-be)]);l.style.minWidth=Ue+"px",l.style.right=ut+"px"}const C=g(),P=window.innerHeight-ea*2,G=y.scrollHeight,I=window.getComputedStyle(d),V=parseInt(I.borderTopWidth,10),z=parseInt(I.paddingTop,10),q=parseInt(I.borderBottomWidth,10),H=parseInt(I.paddingBottom,10),X=V+z+G+H+q,le=Math.min(j.offsetHeight*5,X),Ce=window.getComputedStyle(y),F=parseInt(Ce.paddingTop,10),J=parseInt(Ce.paddingBottom,10),re=O.top+O.height/2-ea,Q=P-re,ie=j.offsetHeight/2,B=j.offsetTop+ie,te=V+z+B,oe=X-te;if(te<=re){const we=C.length>0&&j===C[C.length-1].ref.current;l.style.bottom="0px";const Ne=d.clientHeight-y.offsetTop-y.offsetHeight,ke=Math.max(Q,ie+(we?J:0)+Ne+q),Ue=te+ke;l.style.height=Ue+"px"}else{const we=C.length>0&&j===C[0].ref.current;l.style.top="0px";const ke=Math.max(re,V+y.offsetTop+(we?F:0)+ie)+oe;l.style.height=ke+"px",y.scrollTop=te-re+y.offsetTop}l.style.margin=`${ea}px 0`,l.style.minHeight=le+"px",l.style.maxHeight=P+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[g,a.trigger,a.valueNode,l,d,y,j,v,a.dir,r]);Pr(()=>_(),[_]);const[k,M]=N.useState();Pr(()=>{d&&M(window.getComputedStyle(d).zIndex)},[d]);const L=N.useCallback(O=>{O&&S.current===!0&&(_(),x==null||x(),S.current=!1)},[_,x]);return s.jsx(mU,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:L,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:s.jsx(Lt.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});oL.displayName=fU;var hU="SelectPopperPosition",e2=N.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=ea,...a}=e,o=S0(n);return s.jsx(qb,{...o,...a,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});e2.displayName=hU;var[mU,d5]=df(ed,{}),t2="SelectViewport",lL=N.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,a=rc(t2,n),o=d5(t2,n),l=en(t,a.onViewportChange),c=N.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(N0.Slot,{scope:n,children:s.jsx(Lt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:at(i.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:g}=o;if(g!=null&&g.current&&h){const m=Math.abs(c.current-f.scrollTop);if(m>0){const S=window.innerHeight-ea*2,y=parseFloat(h.style.minHeight),j=parseFloat(h.style.height),v=Math.max(y,j);if(v<S){const x=v+m,_=Math.min(S,x),k=x-_;h.style.height=_+"px",h.style.bottom==="0px"&&(f.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});lL.displayName=t2;var cL="SelectGroup",[pU,gU]=df(cL),xU=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Va();return s.jsx(pU,{scope:n,id:i,children:s.jsx(Lt.div,{role:"group","aria-labelledby":i,...r,ref:t})})});xU.displayName=cL;var dL="SelectLabel",uL=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=gU(dL,n);return s.jsx(Lt.div,{id:i.id,...r,ref:t})});uL.displayName=dL;var bx="SelectItem",[vU,fL]=df(bx),hL=N.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...o}=e,l=nc(bx,n),c=rc(bx,n),d=l.value===r,[f,h]=N.useState(a??""),[g,m]=N.useState(!1),S=en(t,x=>{var _;return(_=c.itemRefCallback)==null?void 0:_.call(c,x,r,i)}),y=Va(),j=N.useRef("touch"),v=()=>{i||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(vU,{scope:n,value:r,disabled:i,textId:y,isSelected:d,onItemTextChange:N.useCallback(x=>{h(_=>_||((x==null?void 0:x.textContent)??"").trim())},[]),children:s.jsx(N0.ItemSlot,{scope:n,value:r,disabled:i,textValue:f,children:s.jsx(Lt.div,{role:"option","aria-labelledby":y,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:S,onFocus:at(o.onFocus,()=>m(!0)),onBlur:at(o.onBlur,()=>m(!1)),onClick:at(o.onClick,()=>{j.current!=="mouse"&&v()}),onPointerUp:at(o.onPointerUp,()=>{j.current==="mouse"&&v()}),onPointerDown:at(o.onPointerDown,x=>{j.current=x.pointerType}),onPointerMove:at(o.onPointerMove,x=>{var _;j.current=x.pointerType,i?(_=c.onItemLeave)==null||_.call(c):j.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:at(o.onPointerLeave,x=>{var _;x.currentTarget===document.activeElement&&((_=c.onItemLeave)==null||_.call(c))}),onKeyDown:at(o.onKeyDown,x=>{var k;((k=c.searchRef)==null?void 0:k.current)!==""&&x.key===" "||(rU.includes(x.key)&&v(),x.key===" "&&x.preventDefault())})})})})});hL.displayName=bx;var fh="SelectItemText",mL=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...a}=e,o=nc(fh,n),l=rc(fh,n),c=fL(fh,n),d=oU(fh,n),[f,h]=N.useState(null),g=en(t,v=>h(v),c.onItemTextChange,v=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,v,c.value,c.disabled)}),m=f==null?void 0:f.textContent,S=N.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:y,onNativeOptionRemove:j}=d;return Pr(()=>(y(S),()=>j(S)),[y,j,S]),s.jsxs(s.Fragment,{children:[s.jsx(Lt.span,{id:c.textId,...a,ref:g}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?od.createPortal(a.children,o.valueNode):null]})});mL.displayName=fh;var pL="SelectItemIndicator",gL=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return fL(pL,n).isSelected?s.jsx(Lt.span,{"aria-hidden":!0,...r,ref:t}):null});gL.displayName=pL;var n2="SelectScrollUpButton",xL=N.forwardRef((e,t)=>{const n=rc(n2,e.__scopeSelect),r=d5(n2,e.__scopeSelect),[i,a]=N.useState(!1),o=en(t,r.onScrollButtonChange);return Pr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(yL,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});xL.displayName=n2;var r2="SelectScrollDownButton",vL=N.forwardRef((e,t)=>{const n=rc(r2,e.__scopeSelect),r=d5(r2,e.__scopeSelect),[i,a]=N.useState(!1),o=en(t,r.onScrollButtonChange);return Pr(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<d;a(f)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?s.jsx(yL,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});vL.displayName=r2;var yL=N.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,a=rc("SelectScrollButton",n),o=N.useRef(null),l=j0(n),c=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>c(),[c]),Pr(()=>{var f;const d=l().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),s.jsx(Lt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:at(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:at(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:at(i.onPointerLeave,()=>{c()})})}),yU="SelectSeparator",bL=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(Lt.div,{"aria-hidden":!0,...r,ref:t})});bL.displayName=yU;var s2="SelectArrow",bU=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=S0(n),a=nc(s2,n),o=rc(s2,n);return a.open&&o.position==="popper"?s.jsx(Ub,{...i,...r,ref:t}):null});bU.displayName=s2;function wL(e){return e===""||e===void 0}var NL=N.forwardRef((e,t)=>{const{value:n,...r}=e,i=N.useRef(null),a=en(t,i),o=YT(n);return N.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&f){const h=new Event("change",{bubbles:!0});f.call(l,n),l.dispatchEvent(h)}},[o,n]),s.jsx(Im,{asChild:!0,children:s.jsx("select",{...r,ref:a,defaultValue:n})})});NL.displayName="BubbleSelect";function jL(e){const t=Kr(e),n=N.useRef(""),r=N.useRef(0),i=N.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function SL(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=wU(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function wU(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var NU=ZT,_L=JT,jU=tL,SU=nL,_U=rL,CL=sL,CU=lL,AL=uL,kL=hL,AU=mL,kU=gL,PL=xL,TL=vL,LL=bL;const rr=NU,sr=jU,Wn=N.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(_L,{ref:r,className:rt("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(SU,{asChild:!0,children:s.jsx(xk,{className:"h-4 w-4 opacity-50"})})]}));Wn.displayName=_L.displayName;const EL=N.forwardRef(({className:e,...t},n)=>s.jsx(PL,{ref:n,className:rt("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(DO,{className:"h-4 w-4"})}));EL.displayName=PL.displayName;const IL=N.forwardRef(({className:e,...t},n)=>s.jsx(TL,{ref:n,className:rt("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(xk,{className:"h-4 w-4"})}));IL.displayName=TL.displayName;const Hn=N.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>s.jsx(_U,{children:s.jsxs(CL,{ref:i,className:rt("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(EL,{}),s.jsx(CU,{className:rt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(IL,{})]})}));Hn.displayName=CL.displayName;const PU=N.forwardRef(({className:e,...t},n)=>s.jsx(AL,{ref:n,className:rt("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));PU.displayName=AL.displayName;const Tt=N.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(kL,{ref:r,className:rt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(kU,{children:s.jsx(dx,{className:"h-4 w-4"})})}),s.jsx(AU,{children:t})]}));Tt.displayName=kL.displayName;const TU=N.forwardRef(({className:e,...t},n)=>s.jsx(LL,{ref:n,className:rt("-mx-1 my-1 h-px bg-muted",e),...t}));TU.displayName=LL.displayName;function tr(){const[e]=Lm(),{user:t,logoutMutation:n}=Oo(),{language:r,setLanguage:i,t:a}=Mm(),[o,l]=N.useState(!1),[c,d]=N.useState(new Set),f=N.useRef({});N.useEffect(()=>{const k=M=>{let L=!0;for(const[O,T]of Object.entries(f.current))if(T&&T.contains(M.target)){L=!1;break}L&&d(new Set)};return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const h=[{name:a("nav.dashboard"),href:"/",icon:bk,type:"single"},{name:"Manage",type:"group",icon:BO,items:[{name:a("nav.farmers"),href:"/farmers",icon:Fi},{name:"Buyers",href:"/buyers",icon:Fi},...(t==null?void 0:t.role)==="admin"?[{name:"Staff",href:"/staff",icon:Fi}]:[]]},{name:"Operations",type:"group",icon:LO,items:[{name:a("nav.lots"),href:"/lots",icon:Cs},{name:"Missing Bags",href:"/missing-bags",icon:zl}]},{name:"Buyer/Trader",type:"group",icon:Ry,items:[{name:"Bid Prices",href:"/bid-prices",icon:ko},{name:"Invoice Processing",href:"/inventory-in",icon:MO},{name:"Invoice Reports",href:"/invoice-reports",icon:ux},{name:"Stock Reports",href:"/stock-reports",icon:Cs},{name:"Test Reports",href:"/test-reports",icon:EO}]},{name:"Bills",type:"group",icon:fx,items:[{name:"Farmer Bill",href:"/farmer-bill",icon:fx},{name:"Tax Invoice",href:"/tax-invoice",icon:ux}]},{name:"Reports",type:"group",icon:dh,items:[{name:"CESS Reports",href:"/cess-reports",icon:dh},{name:"GST Reports",href:"/gst-reports",icon:dh}]},{name:"Account",type:"group",icon:_h,items:[{name:"Final Accounts",href:"/final-accounts",icon:ko},{name:"Complete Accounting",href:"/final-accounts-complete",icon:dh},{name:a("nav.settings"),href:"/settings",icon:_h}]}],g=[{name:"Create Tenant",href:"/tenant-onboarding",icon:Ry,type:"single"}],m=()=>{n.mutate()},S=k=>k.split(" ").map(M=>M[0]).join("").toUpperCase().slice(0,2),y=k=>k==="/"?e===k:e.startsWith(k),j=k=>c.has(k),v=k=>k.some(M=>M.href&&y(M.href)),x=(t==null?void 0:t.role)==="super_admin"?g:h,_=({mobile:k=!1})=>s.jsx("div",{className:`${k?"space-y-1":"space-x-1 flex"}`,children:x.map(M=>{if(M.type==="single"){const L=M.icon,O=y(M.href);return k?s.jsxs(_s,{href:M.href,onClick:()=>{d(new Set),l(!1)},onTouchEnd:T=>{T.preventDefault(),d(new Set),l(!1),setTimeout(()=>{window.location.href=M.href},100)},className:`
                inline-flex items-center w-full justify-start py-4 px-3
                rounded-md text-sm font-medium transition-colors cursor-pointer no-underline
                ${O?"text-primary bg-primary/10 border-b-2 border-primary":"text-gray-600 hover:text-gray-900 hover:bg-gray-100 active:bg-gray-200"}
              `,style:{touchAction:"manipulation",WebkitTapHighlightColor:"rgba(0,0,0,0.1)",minHeight:"44px"},children:[s.jsx(L,{className:"h-4 w-4 mr-2"}),M.name]},M.name):s.jsxs(_s,{href:M.href,className:`
                inline-flex items-center px-3 py-2
                rounded-md text-sm font-medium transition-colors cursor-pointer
                ${O?"text-primary bg-primary/10 border-b-2 border-primary":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}
              `,onClick:()=>{console.log("Desktop single item clicked:",M.href),d(new Set)},children:[s.jsx(L,{className:"h-4 w-4 mr-1"}),M.name]},M.name)}if(M.type==="group"){const L=M.icon,O=j(M.name),T=v(M.items);return s.jsxs("div",{className:k?"space-y-1":"relative",ref:E=>{k||(f.current[M.name]=E)},children:[s.jsxs(Le,{variant:"ghost",onClick:E=>{E.preventDefault(),E.stopPropagation(),console.log("Group clicked:",M.name);const Z=j(M.name);d(new Set),Z||d(new Set([M.name]))},onTouchEnd:E=>{E.preventDefault(),E.stopPropagation();const Z=j(M.name);d(new Set),Z||d(new Set([M.name]))},className:`
                  ${k?"w-full justify-start touch-manipulation active:bg-gray-100":"px-3 py-2"}
                  ${T?"text-primary bg-primary/10 border-b-2 border-primary":"text-gray-600 hover:text-gray-900"}
                `,children:[s.jsx(L,{className:`h-4 w-4 ${k?"mr-2":"mr-1"}`}),M.name,s.jsx("div",{className:`transition-transform ml-1 ${O?"rotate-90":""}`,children:"▶"})]}),O&&s.jsx("div",{className:`
                  ${k?"ml-4 space-y-1":"absolute top-full left-0 bg-white dark:bg-gray-800 shadow-lg border rounded-md py-2 min-w-[160px] z-50"}
                `,children:M.items.map(E=>{const Z=E.icon,C=y(E.href);return k?s.jsxs(_s,{href:E.href,onClick:()=>{d(new Set),l(!1)},onTouchEnd:P=>{P.preventDefault(),d(new Set),l(!1),setTimeout(()=>{window.location.href=E.href},100)},className:`
                          inline-flex items-center w-full justify-start text-sm py-4 px-3
                          rounded-md text-sm font-medium transition-colors cursor-pointer no-underline
                          ${C?"text-primary bg-primary/10":"text-gray-600 hover:text-gray-900 hover:bg-gray-100 active:bg-gray-200"}
                        `,style:{touchAction:"manipulation",WebkitTapHighlightColor:"rgba(0,0,0,0.1)",minHeight:"44px"},children:[s.jsx(Z,{className:"h-4 w-4 mr-2"}),E.name]},E.name):s.jsxs(_s,{href:E.href,className:`
                          inline-flex items-center w-full justify-start px-4 py-2
                          rounded-md text-sm font-medium transition-colors cursor-pointer
                          ${C?"text-primary bg-primary/10":"text-gray-600 hover:text-gray-900 hover:bg-gray-100 dark:text-gray-300 dark:hover:text-white"}
                        `,onClick:()=>{console.log("Desktop sub item clicked:",E.href),d(new Set)},children:[s.jsx(Z,{className:"h-4 w-4 mr-2"}),E.name]},E.name)})})]},M.name)}return null})});return s.jsx("nav",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between h-16",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(_s,{href:"/",children:s.jsxs("div",{className:"flex items-center cursor-pointer",children:[s.jsx(jk,{className:"h-8 w-8 text-secondary mr-3"}),s.jsxs("div",{children:[s.jsx("span",{className:"text-xl font-bold text-gray-900",children:"APMC Trader"}),s.jsx("p",{className:"text-xs text-gray-600 -mt-1",children:"Agricultural Market"})]})]})}),s.jsx("div",{className:"hidden md:ml-8 md:flex md:items-center",children:s.jsx(_,{})})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[s.jsx($y,{className:"h-4 w-4 text-gray-400"}),s.jsxs(rr,{value:r,onValueChange:i,children:[s.jsx(Wn,{className:"w-auto border-none focus:ring-0 text-sm",children:s.jsx(sr,{})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"en",children:"English"}),s.jsx(Tt,{value:"hi",children:"हिंदी"}),s.jsx(Tt,{value:"kn",children:"ಕನ್ನಡ"})]})]})]}),t&&s.jsxs(Iq,{children:[s.jsx(Dq,{asChild:!0,children:s.jsxs(Le,{variant:"ghost",className:"flex items-center space-x-2 px-2",children:[s.jsxs("div",{className:"text-right hidden sm:block",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:t.role})]}),s.jsx(Gy,{className:"h-8 w-8",children:s.jsx(Ky,{className:"bg-secondary text-white text-sm",children:S(t.name)})})]})}),s.jsxs(TT,{align:"end",className:"w-56",children:[s.jsxs("div",{className:"px-2 py-1.5",children:[s.jsx("p",{className:"text-sm font-medium",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500",children:t.email})]}),s.jsx(Jy,{}),s.jsx(Xy,{asChild:!0,children:s.jsxs(_s,{href:"/settings",className:"flex items-center",children:[s.jsx(_h,{className:"h-4 w-4 mr-2"}),a("nav.settings")]})}),s.jsx(Jy,{}),s.jsxs(Xy,{onClick:m,className:"text-red-600 focus:text-red-600",children:[s.jsx(FN,{className:"h-4 w-4 mr-2"}),a("auth.logout")]})]})]}),s.jsx("div",{className:"md:hidden",children:s.jsxs(Yq,{open:o,onOpenChange:l,children:[s.jsx(Zq,{asChild:!0,children:s.jsx(Le,{variant:"ghost",size:"sm",className:"touch-manipulation",children:s.jsx(qO,{className:"h-5 w-5"})})}),s.jsx(QT,{side:"right",className:"w-80 z-[100] max-h-screen overflow-y-auto",children:s.jsxs("div",{className:"flex flex-col space-y-4 mt-8 pb-8",children:[t&&s.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[s.jsx(Gy,{className:"h-10 w-10",children:s.jsx(Ky,{className:"bg-secondary text-white text-sm",children:S(t.name)})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.name}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:t.role})]})]}),s.jsx("div",{className:"space-y-2",children:s.jsx(_,{mobile:!0})}),s.jsxs("div",{className:"border-t pt-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($y,{className:"h-4 w-4 text-gray-400"}),s.jsxs(rr,{value:r,onValueChange:i,children:[s.jsx(Wn,{className:"w-full",children:s.jsx(sr,{})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"en",children:"English"}),s.jsx(Tt,{value:"hi",children:"हिंदी"}),s.jsx(Tt,{value:"kn",children:"ಕನ್ನಡ"})]})]})]}),t&&s.jsxs(Le,{variant:"ghost",onClick:m,className:"w-full justify-start text-red-600 hover:text-red-600 touch-manipulation py-3",children:[s.jsx(FN,{className:"h-4 w-4 mr-2"}),a("auth.logout")]})]})]})})]})})]})]})})})}const LU=sf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Mn({className:e,variant:t,...n}){return s.jsx("div",{className:rt(LU({variant:t}),e),...n})}const EU=sf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),os=N.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:rt(EU({variant:t}),e),...n}));os.displayName="Alert";const IU=N.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:rt("mb-1 font-medium leading-none tracking-tight",e),...t}));IU.displayName="AlertTitle";const ls=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:rt("text-sm [&_p]:leading-relaxed",e),...t}));ls.displayName="AlertDescription";function DU(){const{user:e}=Oo();if((e==null?void 0:e.role)==="super_admin")return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(tr,{}),s.jsx("div",{className:"p-3 sm:p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Super Admin Dashboard"}),s.jsxs("p",{className:"text-sm sm:text-base text-muted-foreground mt-2",children:["Welcome, ",e.name,"! Manage tenant organizations here."]})]}),s.jsx("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2 lg:grid-cols-1",children:s.jsx(Re,{children:s.jsxs(qe,{className:"p-4 sm:p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Tenant Management"}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Create and manage APMC organizations"})]}),s.jsx(Ry,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary flex-shrink-0"})]}),s.jsx("div",{className:"mt-4",children:s.jsx(_s,{href:"/tenant-onboarding",children:s.jsxs(Le,{className:"w-full min-h-[44px] text-sm sm:text-base",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Create New Tenant"]})})})]})})})]})})]});const{data:t={totalFarmers:0,activeLots:0,totalBagsToday:0,revenueToday:0},isLoading:n}=kt({queryKey:["/api/dashboard/stats"],enabled:(e==null?void 0:e.role)!=="super_admin"}),{data:r=[],isLoading:i}=kt({queryKey:["/api/lots"],enabled:(e==null?void 0:e.role)!=="super_admin"});kt({queryKey:["/api/dashboard/lot-completion"]});const{data:a,isLoading:o}=kt({queryKey:["/api/missing-bags/today"],enabled:(e==null?void 0:e.role)!=="super_admin"});return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-8",children:[s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Dashboard Overview"}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8",children:[s.jsx(Re,{className:"bg-white shadow-sm border border-gray-200",children:s.jsx(qe,{className:"p-3 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[s.jsx("div",{className:"flex-shrink-0 order-2 sm:order-1",children:s.jsx(Fi,{className:"h-6 w-6 sm:h-8 sm:w-8 text-primary"})}),s.jsxs("div",{className:"flex-1 order-1 sm:order-2 sm:ml-4",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Total Farmers"}),s.jsx("p",{className:"text-lg sm:text-2xl font-semibold text-gray-900",children:n?"-":(t==null?void 0:t.totalFarmers)||0})]})]})})}),s.jsx(Re,{className:"bg-white shadow-sm border border-gray-200",children:s.jsx(qe,{className:"p-3 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[s.jsx("div",{className:"flex-shrink-0 order-2 sm:order-1",children:s.jsx(Cs,{className:"h-6 w-6 sm:h-8 sm:w-8 text-secondary"})}),s.jsxs("div",{className:"flex-1 order-1 sm:order-2 sm:ml-4",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Active Lots"}),s.jsx("p",{className:"text-lg sm:text-2xl font-semibold text-gray-900",children:n?"-":(t==null?void 0:t.activeLots)||0})]})]})})}),s.jsx(Re,{className:"bg-white shadow-sm border border-gray-200",children:s.jsx(qe,{className:"p-3 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[s.jsx("div",{className:"flex-shrink-0 order-2 sm:order-1",children:s.jsx(YO,{className:"h-6 w-6 sm:h-8 sm:w-8 text-warning"})}),s.jsxs("div",{className:"flex-1 order-1 sm:order-2 sm:ml-4",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Total Bags Today"}),s.jsx("p",{className:"text-lg sm:text-2xl font-semibold text-gray-900",children:n?"-":(t==null?void 0:t.totalBagsToday)||0})]})]})})}),s.jsx(Re,{className:"bg-white shadow-sm border border-gray-200",children:s.jsx(qe,{className:"p-3 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2",children:[s.jsx("div",{className:"flex-shrink-0 order-2 sm:order-1",children:s.jsx(Pb,{className:"h-6 w-6 sm:h-8 sm:w-8 text-success"})}),s.jsxs("div",{className:"flex-1 order-1 sm:order-2 sm:ml-4",children:[s.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"Revenue Today"}),s.jsxs("p",{className:"text-lg sm:text-2xl font-semibold text-gray-900",children:["₹",n?"-":((t==null?void 0:t.revenueToday)||0).toLocaleString()]})]})]})})})]})]}),!o&&a&&s.jsx("div",{className:"mb-6 sm:mb-8",children:a.summary.lotsWithMissingBags>0?s.jsxs(os,{className:"border-red-200 bg-red-50",children:[s.jsx(Ch,{className:"h-5 w-5 text-red-600"}),s.jsx(ls,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-red-900 mb-2",children:["Today's Missing Bags Detected (",a.summary.date,")"]}),s.jsxs("p",{className:"text-red-700 text-sm mb-3",children:[a.summary.lotsWithMissingBags," lots have incomplete bag entries -",a.summary.totalMissingBags," missing bags, ",a.summary.totalEmptyWeightBags," empty weights"]})]}),s.jsx("div",{className:"space-y-3",children:a.missingBagsDetails.map(l=>s.jsxs("div",{className:"bg-red-100 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{variant:"outline",className:"font-mono text-red-800 border-red-300",children:l.lotNumber}),s.jsx("span",{className:"text-red-800 font-medium",children:l.farmerName})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"text-red-900 font-semibold",children:[l.enteredBags,"/",l.totalBags," bags (",l.completionPercentage,"%)"]})})]}),s.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[l.missingBagNumbers.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-red-700 font-medium",children:"Missing: "}),s.jsxs("span",{className:"text-red-600",children:[l.missingBagNumbers.slice(0,5).map(c=>`#${c}`).join(", "),l.missingBagNumbers.length>5&&` +${l.missingBagNumbers.length-5} more`]})]}),l.emptyWeightBags.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-yellow-700 font-medium",children:"No Weight: "}),s.jsxs("span",{className:"text-yellow-600",children:[l.emptyWeightBags.slice(0,5).map(c=>`#${c}`).join(", "),l.emptyWeightBags.length>5&&` +${l.emptyWeightBags.length-5} more`]})]})]}),s.jsxs("div",{className:"mt-2 flex gap-2",children:[s.jsx(_s,{href:`/lots/${l.lotId}/bags`,children:s.jsx(Le,{size:"sm",className:"text-xs bg-red-600 hover:bg-red-700",children:"Fix Missing Bags"})}),s.jsx(_s,{href:"/missing-bags",children:s.jsx(Le,{size:"sm",variant:"outline",className:"text-xs border-red-300 text-red-700 hover:bg-red-50",children:"View Details"})})]})]},l.lotId))})]})})]}):s.jsxs(os,{className:"border-green-200 bg-green-50",children:[s.jsx(Rc,{className:"h-5 w-5 text-green-600"}),s.jsx(ls,{children:s.jsxs("div",{className:"text-green-800",children:[s.jsx("span",{className:"font-semibold",children:"✅ All Today's Lots Complete!"}),s.jsxs("span",{className:"ml-2",children:[a.summary.totalLotsToday," lots processed with no missing bags detected."]})]})})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(_s,{href:"/lots",children:s.jsx(Le,{className:"w-full h-auto p-4 text-left bg-primary hover:bg-primary/90 text-white",children:s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx(qr,{className:"h-5 w-5 mb-2"}),s.jsx("h3",{className:"font-semibold",children:"Create New Lot"}),s.jsx("p",{className:"text-sm opacity-90",children:"Start a new lot entry"})]})})}),s.jsx(_s,{href:"/farmers",children:s.jsx(Le,{className:"w-full h-auto p-4 text-left bg-secondary hover:bg-secondary/90 text-white",children:s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx(Fi,{className:"h-5 w-5 mb-2"}),s.jsx("h3",{className:"font-semibold",children:"Add Farmer"}),s.jsx("p",{className:"text-sm opacity-90",children:"Register new farmer"})]})})}),s.jsx(Le,{className:"w-full h-auto p-4 text-left bg-warning hover:bg-warning/90 text-white",children:s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx(Cs,{className:"h-5 w-5 mb-2"}),s.jsx("h3",{className:"font-semibold",children:"View Reports"}),s.jsx("p",{className:"text-sm opacity-90",children:"Generate APMC reports"})]})})]})]}),s.jsxs(Re,{className:"bg-white shadow-sm border border-gray-200",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Lots"}),s.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ze,{type:"text",placeholder:"Search lots...",className:"pl-10 pr-4 py-2"})]}),s.jsx(_s,{href:"/lots",children:s.jsxs(Le,{className:"bg-primary hover:bg-primary/90",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"New Lot"]})})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lot No."}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farmer Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mobile"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Place"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. of Bags"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle Rent"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Advance"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variety/Grade"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unload Hamali"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i?s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"px-6 py-4 text-center text-gray-500",children:"Loading lots..."})}):r&&r.length>0?r.slice(0,10).map(l=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:l.lotNumber}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l.farmer.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l.farmer.mobile}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l.farmer.place}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l.numberOfBags}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",l.vehicleRent]}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",l.advance]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:l.varietyGrade}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["₹",l.unloadHamali]})]},l.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"px-6 py-4 text-center text-gray-500",children:"No lots found. Create your first lot to get started."})})})]})}),r&&r.length>10&&s.jsx("div",{className:"px-6 py-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",s.jsx("span",{className:"font-medium",children:"1"})," to"," ",s.jsx("span",{className:"font-medium",children:"10"})," of"," ",s.jsx("span",{className:"font-medium",children:r.length})," results"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(Le,{variant:"outline",size:"sm",children:"Previous"}),s.jsx(Le,{variant:"outline",size:"sm",className:"bg-primary text-white",children:"1"}),s.jsx(Le,{variant:"outline",size:"sm",children:"2"}),s.jsx(Le,{variant:"outline",size:"sm",children:"3"}),s.jsx(Le,{variant:"outline",size:"sm",children:"Next"})]})]})})]})]})]})}var FU="Label",DL=N.forwardRef((e,t)=>s.jsx(Lt.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));DL.displayName=FU;var FL=DL;const MU=sf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ae=N.forwardRef(({className:e,...t},n)=>s.jsx(FL,{ref:n,className:rt(MU(),e),...t}));Ae.displayName=FL.displayName;var u5="Tabs",[RU,WQ]=xi(u5,[g0]),ML=g0(),[OU,f5]=RU(u5),RL=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,f=h0(l),[h,g]=Bl({prop:r,onChange:i,defaultProp:a});return s.jsx(OU,{scope:n,baseId:Va(),value:h,onValueChange:g,orientation:o,dir:f,activationMode:c,children:s.jsx(Lt.div,{dir:f,"data-orientation":o,...d,ref:t})})});RL.displayName=u5;var OL="TabsList",BL=N.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,a=f5(OL,n),o=ML(n);return s.jsx(AP,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(Lt.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});BL.displayName=OL;var zL="TabsTrigger",$L=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=e,o=f5(zL,n),l=ML(n),c=VL(o.baseId,r),d=WL(o.baseId,r),f=r===o.value;return s.jsx(kP,{asChild:!0,...l,focusable:!i,active:f,children:s.jsx(Lt.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:at(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:at(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:at(e.onFocus,()=>{const h=o.activationMode!=="manual";!f&&!i&&h&&o.onValueChange(r)})})})});$L.displayName=zL;var qL="TabsContent",UL=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...o}=e,l=f5(qL,n),c=VL(l.baseId,r),d=WL(l.baseId,r),f=r===l.value,h=N.useRef(f);return N.useEffect(()=>{const g=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(g)},[]),s.jsx(xa,{present:i||f,children:({present:g})=>s.jsx(Lt.div,{"data-state":f?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!g,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:g&&a})})});UL.displayName=qL;function VL(e,t){return`${e}-trigger-${t}`}function WL(e,t){return`${e}-content-${t}`}var BU=RL,HL=BL,GL=$L,KL=UL;const Bo=BU,eo=N.forwardRef(({className:e,...t},n)=>s.jsx(HL,{ref:n,className:rt("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));eo.displayName=HL.displayName;const wn=N.forwardRef(({className:e,...t},n)=>s.jsx(GL,{ref:n,className:rt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));wn.displayName=GL.displayName;const Nn=N.forwardRef(({className:e,...t},n)=>s.jsx(KL,{ref:n,className:rt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Nn.displayName=KL.displayName;var Vm=e=>e.type==="checkbox",Cc=e=>e instanceof Date,Ss=e=>e==null;const QL=e=>typeof e=="object";var mr=e=>!Ss(e)&&!Array.isArray(e)&&QL(e)&&!Cc(e),YL=e=>mr(e)&&e.target?Vm(e.target)?e.target.checked:e.target.value:e,zU=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ZL=(e,t)=>e.has(zU(t)),$U=e=>{const t=e.constructor&&e.constructor.prototype;return mr(t)&&t.hasOwnProperty("isPrototypeOf")},h5=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zr(e){let t;const n=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(h5&&(e instanceof Blob||r))&&(n||mr(e)))if(t=n?[]:{},!n&&!$U(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=zr(e[i]));else return e;return t}var _0=e=>Array.isArray(e)?e.filter(Boolean):[],cr=e=>e===void 0,lt=(e,t,n)=>{if(!t||!mr(e))return n;const r=_0(t.split(/[,[\].]+?/)).reduce((i,a)=>Ss(i)?i:i[a],e);return cr(r)||r===e?cr(e[t])?n:e[t]:r},si=e=>typeof e=="boolean",m5=e=>/^\w*$/.test(e),XL=e=>_0(e.replace(/["|']|\]/g,"").split(/\.|\[/)),un=(e,t,n)=>{let r=-1;const i=m5(t)?[t]:XL(t),a=i.length,o=a-1;for(;++r<a;){const l=i[r];let c=n;if(r!==o){const d=e[l];c=mr(d)||Array.isArray(d)?d:isNaN(+i[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const wx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},oa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},go={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},JL=qt.createContext(null),C0=()=>qt.useContext(JL),qU=e=>{const{children:t,...n}=e;return qt.createElement(JL.Provider,{value:n},t)};var e8=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==oa.all&&(t._proxyFormState[o]=!r||oa.all),n&&(n[o]=!0),e[o]}});return i};function UU(e){const t=C0(),{control:n=t.control,disabled:r,name:i,exact:a}=e||{},[o,l]=qt.useState(n._formState),c=qt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=qt.useRef(i);return d.current=i,qt.useEffect(()=>n._subscribe({name:d.current,formState:c.current,exact:a,callback:f=>{!r&&l({...n._formState,...f})}}),[n,r,a]),qt.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),qt.useMemo(()=>e8(o,n,c.current,!1),[o,n])}var za=e=>typeof e=="string",t8=(e,t,n,r,i)=>za(e)?(r&&t.watch.add(e),lt(n,e,i)):Array.isArray(e)?e.map(a=>(r&&t.watch.add(a),lt(n,a))):(r&&(t.watchAll=!0),n);function VU(e){const t=C0(),{control:n=t.control,name:r,defaultValue:i,disabled:a,exact:o}=e||{},l=qt.useRef(r),c=qt.useRef(i);l.current=r,qt.useEffect(()=>n._subscribe({name:l.current,formState:{values:!0},exact:o,callback:h=>!a&&f(t8(l.current,n._names,h.values||n._formValues,!1,c.current))}),[n,a,o]);const[d,f]=qt.useState(n._getWatch(r,i));return qt.useEffect(()=>n._removeUnmounted()),d}function WU(e){const t=C0(),{name:n,disabled:r,control:i=t.control,shouldUnregister:a}=e,o=ZL(i._names.array,n),l=VU({control:i,name:n,defaultValue:lt(i._formValues,n,lt(i._defaultValues,n,e.defaultValue)),exact:!0}),c=UU({control:i,name:n,exact:!0}),d=qt.useRef(e),f=qt.useRef(i.register(n,{...e.rules,value:l,...si(e.disabled)?{disabled:e.disabled}:{}})),h=qt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!lt(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!lt(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!lt(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!lt(c.validatingFields,n)},error:{enumerable:!0,get:()=>lt(c.errors,n)}}),[c,n]),g=qt.useCallback(j=>f.current.onChange({target:{value:YL(j),name:n},type:wx.CHANGE}),[n]),m=qt.useCallback(()=>f.current.onBlur({target:{value:lt(i._formValues,n),name:n},type:wx.BLUR}),[n,i._formValues]),S=qt.useCallback(j=>{const v=lt(i._fields,n);v&&j&&(v._f.ref={focus:()=>j.focus(),select:()=>j.select(),setCustomValidity:x=>j.setCustomValidity(x),reportValidity:()=>j.reportValidity()})},[i._fields,n]),y=qt.useMemo(()=>({name:n,value:l,...si(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:g,onBlur:m,ref:S}),[n,r,c.disabled,g,m,S,l]);return qt.useEffect(()=>{const j=i._options.shouldUnregister||a;i.register(n,{...d.current.rules,...si(d.current.disabled)?{disabled:d.current.disabled}:{}});const v=(x,_)=>{const k=lt(i._fields,x);k&&k._f&&(k._f.mount=_)};if(v(n,!0),j){const x=zr(lt(i._options.defaultValues,n));un(i._defaultValues,n,x),cr(lt(i._formValues,n))&&un(i._formValues,n,x)}return!o&&i.register(n),()=>{(o?j&&!i._state.action:j)?i.unregister(n):v(n,!1)}},[n,i,o,a]),qt.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),qt.useMemo(()=>({field:y,formState:c,fieldState:h}),[y,c,h])}const HU=e=>e.render(WU(e));var n8=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},Ah=e=>Array.isArray(e)?e:[e],oj=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},i2=e=>Ss(e)||!QL(e);function ml(e,t){if(i2(e)||i2(t))return e===t;if(Cc(e)&&Cc(t))return e.getTime()===t.getTime();const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n){const a=e[i];if(!r.includes(i))return!1;if(i!=="ref"){const o=t[i];if(Cc(a)&&Cc(o)||mr(a)&&mr(o)||Array.isArray(a)&&Array.isArray(o)?!ml(a,o):a!==o)return!1}}return!0}var Ns=e=>mr(e)&&!Object.keys(e).length,p5=e=>e.type==="file",la=e=>typeof e=="function",Nx=e=>{if(!h5)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},r8=e=>e.type==="select-multiple",g5=e=>e.type==="radio",GU=e=>g5(e)||Vm(e),u1=e=>Nx(e)&&e.isConnected;function KU(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=cr(e)?r++:e[t[r++]];return e}function QU(e){for(const t in e)if(e.hasOwnProperty(t)&&!cr(e[t]))return!1;return!0}function Sr(e,t){const n=Array.isArray(t)?t:m5(t)?[t]:XL(t),r=n.length===1?e:KU(e,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(mr(r)&&Ns(r)||Array.isArray(r)&&QU(r))&&Sr(e,n.slice(0,-1)),e}var s8=e=>{for(const t in e)if(la(e[t]))return!0;return!1};function jx(e,t={}){const n=Array.isArray(e);if(mr(e)||n)for(const r in e)Array.isArray(e[r])||mr(e[r])&&!s8(e[r])?(t[r]=Array.isArray(e[r])?[]:{},jx(e[r],t[r])):Ss(e[r])||(t[r]=!0);return t}function i8(e,t,n){const r=Array.isArray(e);if(mr(e)||r)for(const i in e)Array.isArray(e[i])||mr(e[i])&&!s8(e[i])?cr(t)||i2(n[i])?n[i]=Array.isArray(e[i])?jx(e[i],[]):{...jx(e[i])}:i8(e[i],Ss(t)?{}:t[i],n[i]):n[i]=!ml(e[i],t[i]);return n}var Jf=(e,t)=>i8(e,t,jx(t));const lj={value:!1,isValid:!1},cj={value:!0,isValid:!0};var a8=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!cr(e[0].attributes.value)?cr(e[0].value)||e[0].value===""?cj:{value:e[0].value,isValid:!0}:cj:lj}return lj},o8=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>cr(e)?e:t?e===""?NaN:e&&+e:n&&za(e)?new Date(e):r?r(e):e;const dj={isValid:!1,value:null};var l8=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,dj):dj;function uj(e){const t=e.ref;return p5(t)?t.files:g5(t)?l8(e.refs).value:r8(t)?[...t.selectedOptions].map(({value:n})=>n):Vm(t)?a8(e.refs).value:o8(cr(t.value)?e.ref.value:t.value,e)}var YU=(e,t,n,r)=>{const i={};for(const a of e){const o=lt(t,a);o&&un(i,a,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}},Sx=e=>e instanceof RegExp,eh=e=>cr(e)?e:Sx(e)?e.source:mr(e)?Sx(e.value)?e.value.source:e.value:e,fj=e=>({isOnSubmit:!e||e===oa.onSubmit,isOnBlur:e===oa.onBlur,isOnChange:e===oa.onChange,isOnAll:e===oa.all,isOnTouch:e===oa.onTouched});const hj="AsyncFunction";var ZU=e=>!!e&&!!e.validate&&!!(la(e.validate)&&e.validate.constructor.name===hj||mr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===hj)),XU=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),mj=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const kh=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const a=lt(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!r)return!0;if(o.ref&&t(o.ref,o.name)&&!r)return!0;if(kh(l,t))break}else if(mr(l)&&kh(l,t))break}}};function pj(e,t,n){const r=lt(e,n);if(r||m5(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=lt(t,a),l=lt(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:n}}var JU=(e,t,n,r)=>{n(e);const{name:i,...a}=e;return Ns(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!r||oa.all))},eV=(e,t,n)=>!e||!t||e===t||Ah(e).some(r=>r&&(n?r===t:r.startsWith(t)||t.startsWith(r))),tV=(e,t,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:(n?r.isOnChange:i.isOnChange)?e:!0,nV=(e,t)=>!_0(lt(e,t)).length&&Sr(e,t),rV=(e,t,n)=>{const r=Ah(lt(e,n));return un(r,"root",t[n]),un(e,n,r),e},Fg=e=>za(e);function gj(e,t,n="validate"){if(Fg(e)||Array.isArray(e)&&e.every(Fg)||si(e)&&!e)return{type:n,message:Fg(e)?e:"",ref:t}}var Vd=e=>mr(e)&&!Sx(e)?e:{value:e,message:""},xj=async(e,t,n,r,i,a)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:f,min:h,max:g,pattern:m,validate:S,name:y,valueAsNumber:j,mount:v}=e._f,x=lt(n,y);if(!v||t.has(y))return{};const _=l?l[0]:o,k=P=>{i&&_.reportValidity&&(_.setCustomValidity(si(P)?"":P||""),_.reportValidity())},M={},L=g5(o),O=Vm(o),T=L||O,E=(j||p5(o))&&cr(o.value)&&cr(x)||Nx(o)&&o.value===""||x===""||Array.isArray(x)&&!x.length,Z=n8.bind(null,y,r,M),C=(P,G,I,V=go.maxLength,z=go.minLength)=>{const q=P?G:I;M[y]={type:P?V:z,message:q,ref:o,...Z(P?V:z,q)}};if(a?!Array.isArray(x)||!x.length:c&&(!T&&(E||Ss(x))||si(x)&&!x||O&&!a8(l).isValid||L&&!l8(l).isValid)){const{value:P,message:G}=Fg(c)?{value:!!c,message:c}:Vd(c);if(P&&(M[y]={type:go.required,message:G,ref:_,...Z(go.required,G)},!r))return k(G),M}if(!E&&(!Ss(h)||!Ss(g))){let P,G;const I=Vd(g),V=Vd(h);if(!Ss(x)&&!isNaN(x)){const z=o.valueAsNumber||x&&+x;Ss(I.value)||(P=z>I.value),Ss(V.value)||(G=z<V.value)}else{const z=o.valueAsDate||new Date(x),q=le=>new Date(new Date().toDateString()+" "+le),H=o.type=="time",X=o.type=="week";za(I.value)&&x&&(P=H?q(x)>q(I.value):X?x>I.value:z>new Date(I.value)),za(V.value)&&x&&(G=H?q(x)<q(V.value):X?x<V.value:z<new Date(V.value))}if((P||G)&&(C(!!P,I.message,V.message,go.max,go.min),!r))return k(M[y].message),M}if((d||f)&&!E&&(za(x)||a&&Array.isArray(x))){const P=Vd(d),G=Vd(f),I=!Ss(P.value)&&x.length>+P.value,V=!Ss(G.value)&&x.length<+G.value;if((I||V)&&(C(I,P.message,G.message),!r))return k(M[y].message),M}if(m&&!E&&za(x)){const{value:P,message:G}=Vd(m);if(Sx(P)&&!x.match(P)&&(M[y]={type:go.pattern,message:G,ref:o,...Z(go.pattern,G)},!r))return k(G),M}if(S){if(la(S)){const P=await S(x,n),G=gj(P,_);if(G&&(M[y]={...G,...Z(go.validate,G.message)},!r))return k(G.message),M}else if(mr(S)){let P={};for(const G in S){if(!Ns(P)&&!r)break;const I=gj(await S[G](x,n),_,G);I&&(P={...I,...Z(G,I.message)},k(I.message),r&&(M[y]=P))}if(!Ns(P)&&(M[y]={ref:_,...P},!r))return M}}return k(!0),M};const sV={mode:oa.onSubmit,reValidateMode:oa.onChange,shouldFocusError:!0};function iV(e={}){let t={...sV,...e},n={submitCount:0,isDirty:!1,isLoading:la(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const r={};let i=mr(t.defaultValues)||mr(t.values)?zr(t.values||t.defaultValues)||{}:{},a=t.shouldUnregister?{}:zr(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...f};const g={array:oj(),state:oj()},m=fj(t.mode),S=fj(t.reValidateMode),y=t.criteriaMode===oa.all,j=ee=>ce=>{clearTimeout(d),d=setTimeout(ee,ce)},v=async ee=>{if(!t.disabled&&(f.isValid||h.isValid||ee)){const ce=t.resolver?Ns((await E()).errors):await C(r,!0);ce!==n.isValid&&g.state.next({isValid:ce})}},x=(ee,ce)=>{!t.disabled&&(f.isValidating||f.validatingFields||h.isValidating||h.validatingFields)&&((ee||Array.from(l.mount)).forEach(he=>{he&&(ce?un(n.validatingFields,he,ce):Sr(n.validatingFields,he))}),g.state.next({validatingFields:n.validatingFields,isValidating:!Ns(n.validatingFields)}))},_=(ee,ce=[],he,De,Ie=!0,Te=!0)=>{if(De&&he&&!t.disabled){if(o.action=!0,Te&&Array.isArray(lt(r,ee))){const Ye=he(lt(r,ee),De.argA,De.argB);Ie&&un(r,ee,Ye)}if(Te&&Array.isArray(lt(n.errors,ee))){const Ye=he(lt(n.errors,ee),De.argA,De.argB);Ie&&un(n.errors,ee,Ye),nV(n.errors,ee)}if((f.touchedFields||h.touchedFields)&&Te&&Array.isArray(lt(n.touchedFields,ee))){const Ye=he(lt(n.touchedFields,ee),De.argA,De.argB);Ie&&un(n.touchedFields,ee,Ye)}(f.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Jf(i,a)),g.state.next({name:ee,isDirty:G(ee,ce),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else un(a,ee,ce)},k=(ee,ce)=>{un(n.errors,ee,ce),g.state.next({errors:n.errors})},M=ee=>{n.errors=ee,g.state.next({errors:n.errors,isValid:!1})},L=(ee,ce,he,De)=>{const Ie=lt(r,ee);if(Ie){const Te=lt(a,ee,cr(he)?lt(i,ee):he);cr(Te)||De&&De.defaultChecked||ce?un(a,ee,ce?Te:uj(Ie._f)):z(ee,Te),o.mount&&v()}},O=(ee,ce,he,De,Ie)=>{let Te=!1,Ye=!1;const et={name:ee};if(!t.disabled){if(!he||De){(f.isDirty||h.isDirty)&&(Ye=n.isDirty,n.isDirty=et.isDirty=G(),Te=Ye!==et.isDirty);const wt=ml(lt(i,ee),ce);Ye=!!lt(n.dirtyFields,ee),wt?Sr(n.dirtyFields,ee):un(n.dirtyFields,ee,!0),et.dirtyFields=n.dirtyFields,Te=Te||(f.dirtyFields||h.dirtyFields)&&Ye!==!wt}if(he){const wt=lt(n.touchedFields,ee);wt||(un(n.touchedFields,ee,he),et.touchedFields=n.touchedFields,Te=Te||(f.touchedFields||h.touchedFields)&&wt!==he)}Te&&Ie&&g.state.next(et)}return Te?et:{}},T=(ee,ce,he,De)=>{const Ie=lt(n.errors,ee),Te=(f.isValid||h.isValid)&&si(ce)&&n.isValid!==ce;if(t.delayError&&he?(c=j(()=>k(ee,he)),c(t.delayError)):(clearTimeout(d),c=null,he?un(n.errors,ee,he):Sr(n.errors,ee)),(he?!ml(Ie,he):Ie)||!Ns(De)||Te){const Ye={...De,...Te&&si(ce)?{isValid:ce}:{},errors:n.errors,name:ee};n={...n,...Ye},g.state.next(Ye)}},E=async ee=>{x(ee,!0);const ce=await t.resolver(a,t.context,YU(ee||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return x(ee),ce},Z=async ee=>{const{errors:ce}=await E(ee);if(ee)for(const he of ee){const De=lt(ce,he);De?un(n.errors,he,De):Sr(n.errors,he)}else n.errors=ce;return ce},C=async(ee,ce,he={valid:!0})=>{for(const De in ee){const Ie=ee[De];if(Ie){const{_f:Te,...Ye}=Ie;if(Te){const et=l.array.has(Te.name),wt=Ie._f&&ZU(Ie._f);wt&&f.validatingFields&&x([De],!0);const Xe=await xj(Ie,l.disabled,a,y,t.shouldUseNativeValidation&&!ce,et);if(wt&&f.validatingFields&&x([De]),Xe[Te.name]&&(he.valid=!1,ce))break;!ce&&(lt(Xe,Te.name)?et?rV(n.errors,Xe,Te.name):un(n.errors,Te.name,Xe[Te.name]):Sr(n.errors,Te.name))}!Ns(Ye)&&await C(Ye,ce,he)}}return he.valid},P=()=>{for(const ee of l.unMount){const ce=lt(r,ee);ce&&(ce._f.refs?ce._f.refs.every(he=>!u1(he)):!u1(ce._f.ref))&&oe(ee)}l.unMount=new Set},G=(ee,ce)=>!t.disabled&&(ee&&ce&&un(a,ee,ce),!ml(F(),i)),I=(ee,ce,he)=>t8(ee,l,{...o.mount?a:cr(ce)?i:za(ee)?{[ee]:ce}:ce},he,ce),V=ee=>_0(lt(o.mount?a:i,ee,t.shouldUnregister?lt(i,ee,[]):[])),z=(ee,ce,he={})=>{const De=lt(r,ee);let Ie=ce;if(De){const Te=De._f;Te&&(!Te.disabled&&un(a,ee,o8(ce,Te)),Ie=Nx(Te.ref)&&Ss(ce)?"":ce,r8(Te.ref)?[...Te.ref.options].forEach(Ye=>Ye.selected=Ie.includes(Ye.value)):Te.refs?Vm(Te.ref)?Te.refs.length>1?Te.refs.forEach(Ye=>(!Ye.defaultChecked||!Ye.disabled)&&(Ye.checked=Array.isArray(Ie)?!!Ie.find(et=>et===Ye.value):Ie===Ye.value)):Te.refs[0]&&(Te.refs[0].checked=!!Ie):Te.refs.forEach(Ye=>Ye.checked=Ye.value===Ie):p5(Te.ref)?Te.ref.value="":(Te.ref.value=Ie,Te.ref.type||g.state.next({name:ee,values:zr(a)})))}(he.shouldDirty||he.shouldTouch)&&O(ee,Ie,he.shouldTouch,he.shouldDirty,!0),he.shouldValidate&&Ce(ee)},q=(ee,ce,he)=>{for(const De in ce){const Ie=ce[De],Te=`${ee}.${De}`,Ye=lt(r,Te);(l.array.has(ee)||mr(Ie)||Ye&&!Ye._f)&&!Cc(Ie)?q(Te,Ie,he):z(Te,Ie,he)}},H=(ee,ce,he={})=>{const De=lt(r,ee),Ie=l.array.has(ee),Te=zr(ce);un(a,ee,Te),Ie?(g.array.next({name:ee,values:zr(a)}),(f.isDirty||f.dirtyFields||h.isDirty||h.dirtyFields)&&he.shouldDirty&&g.state.next({name:ee,dirtyFields:Jf(i,a),isDirty:G(ee,Te)})):De&&!De._f&&!Ss(Te)?q(ee,Te,he):z(ee,Te,he),mj(ee,l)&&g.state.next({...n}),g.state.next({name:o.mount?ee:void 0,values:zr(a)})},X=async ee=>{o.mount=!0;const ce=ee.target;let he=ce.name,De=!0;const Ie=lt(r,he),Te=Ye=>{De=Number.isNaN(Ye)||Cc(Ye)&&isNaN(Ye.getTime())||ml(Ye,lt(a,he,Ye))};if(Ie){let Ye,et;const wt=ce.type?uj(Ie._f):YL(ee),Xe=ee.type===wx.BLUR||ee.type===wx.FOCUS_OUT,Tr=!XU(Ie._f)&&!t.resolver&&!lt(n.errors,he)&&!Ie._f.deps||tV(Xe,lt(n.touchedFields,he),n.isSubmitted,S,m),Qt=mj(he,l,Xe);un(a,he,wt),Xe?(Ie._f.onBlur&&Ie._f.onBlur(ee),c&&c(0)):Ie._f.onChange&&Ie._f.onChange(ee);const gs=O(he,wt,Xe),mn=!Ns(gs)||Qt;if(!Xe&&g.state.next({name:he,type:ee.type,values:zr(a)}),Tr)return(f.isValid||h.isValid)&&(t.mode==="onBlur"?Xe&&v():Xe||v()),mn&&g.state.next({name:he,...Qt?{}:gs});if(!Xe&&Qt&&g.state.next({...n}),t.resolver){const{errors:jn}=await E([he]);if(Te(wt),De){const vi=pj(n.errors,r,he),nn=pj(jn,r,vi.name||he);Ye=nn.error,he=nn.name,et=Ns(jn)}}else x([he],!0),Ye=(await xj(Ie,l.disabled,a,y,t.shouldUseNativeValidation))[he],x([he]),Te(wt),De&&(Ye?et=!1:(f.isValid||h.isValid)&&(et=await C(r,!0)));De&&(Ie._f.deps&&Ce(Ie._f.deps),T(he,et,Ye,gs))}},le=(ee,ce)=>{if(lt(n.errors,ce)&&ee.focus)return ee.focus(),1},Ce=async(ee,ce={})=>{let he,De;const Ie=Ah(ee);if(t.resolver){const Te=await Z(cr(ee)?ee:Ie);he=Ns(Te),De=ee?!Ie.some(Ye=>lt(Te,Ye)):he}else ee?(De=(await Promise.all(Ie.map(async Te=>{const Ye=lt(r,Te);return await C(Ye&&Ye._f?{[Te]:Ye}:Ye)}))).every(Boolean),!(!De&&!n.isValid)&&v()):De=he=await C(r);return g.state.next({...!za(ee)||(f.isValid||h.isValid)&&he!==n.isValid?{}:{name:ee},...t.resolver||!ee?{isValid:he}:{},errors:n.errors}),ce.shouldFocus&&!De&&kh(r,le,ee?Ie:l.mount),De},F=ee=>{const ce={...o.mount?a:i};return cr(ee)?ce:za(ee)?lt(ce,ee):ee.map(he=>lt(ce,he))},J=(ee,ce)=>({invalid:!!lt((ce||n).errors,ee),isDirty:!!lt((ce||n).dirtyFields,ee),error:lt((ce||n).errors,ee),isValidating:!!lt(n.validatingFields,ee),isTouched:!!lt((ce||n).touchedFields,ee)}),re=ee=>{ee&&Ah(ee).forEach(ce=>Sr(n.errors,ce)),g.state.next({errors:ee?n.errors:{}})},Q=(ee,ce,he)=>{const De=(lt(r,ee,{_f:{}})._f||{}).ref,Ie=lt(n.errors,ee)||{},{ref:Te,message:Ye,type:et,...wt}=Ie;un(n.errors,ee,{...wt,...ce,ref:De}),g.state.next({name:ee,errors:n.errors,isValid:!1}),he&&he.shouldFocus&&De&&De.focus&&De.focus()},ie=(ee,ce)=>la(ee)?g.state.subscribe({next:he=>ee(I(void 0,ce),he)}):I(ee,ce,!0),B=ee=>g.state.subscribe({next:ce=>{eV(ee.name,ce.name,ee.exact)&&JU(ce,ee.formState||f,Y,ee.reRenderRoot)&&ee.callback({values:{...a},...n,...ce})}}).unsubscribe,te=ee=>(o.mount=!0,h={...h,...ee.formState},B({...ee,formState:h})),oe=(ee,ce={})=>{for(const he of ee?Ah(ee):l.mount)l.mount.delete(he),l.array.delete(he),ce.keepValue||(Sr(r,he),Sr(a,he)),!ce.keepError&&Sr(n.errors,he),!ce.keepDirty&&Sr(n.dirtyFields,he),!ce.keepTouched&&Sr(n.touchedFields,he),!ce.keepIsValidating&&Sr(n.validatingFields,he),!t.shouldUnregister&&!ce.keepDefaultValue&&Sr(i,he);g.state.next({values:zr(a)}),g.state.next({...n,...ce.keepDirty?{isDirty:G()}:{}}),!ce.keepIsValid&&v()},_e=({disabled:ee,name:ce})=>{(si(ee)&&o.mount||ee||l.disabled.has(ce))&&(ee?l.disabled.add(ce):l.disabled.delete(ce))},we=(ee,ce={})=>{let he=lt(r,ee);const De=si(ce.disabled)||si(t.disabled);return un(r,ee,{...he||{},_f:{...he&&he._f?he._f:{ref:{name:ee}},name:ee,mount:!0,...ce}}),l.mount.add(ee),he?_e({disabled:si(ce.disabled)?ce.disabled:t.disabled,name:ee}):L(ee,!0,ce.value),{...De?{disabled:ce.disabled||t.disabled}:{},...t.progressive?{required:!!ce.required,min:eh(ce.min),max:eh(ce.max),minLength:eh(ce.minLength),maxLength:eh(ce.maxLength),pattern:eh(ce.pattern)}:{},name:ee,onChange:X,onBlur:X,ref:Ie=>{if(Ie){we(ee,ce),he=lt(r,ee);const Te=cr(Ie.value)&&Ie.querySelectorAll&&Ie.querySelectorAll("input,select,textarea")[0]||Ie,Ye=GU(Te),et=he._f.refs||[];if(Ye?et.find(wt=>wt===Te):Te===he._f.ref)return;un(r,ee,{_f:{...he._f,...Ye?{refs:[...et.filter(u1),Te,...Array.isArray(lt(i,ee))?[{}]:[]],ref:{type:Te.type,name:ee}}:{ref:Te}}}),L(ee,!1,void 0,Te)}else he=lt(r,ee,{}),he._f&&(he._f.mount=!1),(t.shouldUnregister||ce.shouldUnregister)&&!(ZL(l.array,ee)&&o.action)&&l.unMount.add(ee)}}},Ne=()=>t.shouldFocusError&&kh(r,le,l.mount),ke=ee=>{si(ee)&&(g.state.next({disabled:ee}),kh(r,(ce,he)=>{const De=lt(r,he);De&&(ce.disabled=De._f.disabled||ee,Array.isArray(De._f.refs)&&De._f.refs.forEach(Ie=>{Ie.disabled=De._f.disabled||ee}))},0,!1))},Ue=(ee,ce)=>async he=>{let De;he&&(he.preventDefault&&he.preventDefault(),he.persist&&he.persist());let Ie=zr(a);if(g.state.next({isSubmitting:!0}),t.resolver){const{errors:Te,values:Ye}=await E();n.errors=Te,Ie=Ye}else await C(r);if(l.disabled.size)for(const Te of l.disabled)un(Ie,Te,void 0);if(Sr(n.errors,"root"),Ns(n.errors)){g.state.next({errors:{}});try{await ee(Ie,he)}catch(Te){De=Te}}else ce&&await ce({...n.errors},he),Ne(),setTimeout(Ne);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ns(n.errors)&&!De,submitCount:n.submitCount+1,errors:n.errors}),De)throw De},be=(ee,ce={})=>{lt(r,ee)&&(cr(ce.defaultValue)?H(ee,zr(lt(i,ee))):(H(ee,ce.defaultValue),un(i,ee,zr(ce.defaultValue))),ce.keepTouched||Sr(n.touchedFields,ee),ce.keepDirty||(Sr(n.dirtyFields,ee),n.isDirty=ce.defaultValue?G(ee,zr(lt(i,ee))):G()),ce.keepError||(Sr(n.errors,ee),f.isValid&&v()),g.state.next({...n}))},se=(ee,ce={})=>{const he=ee?zr(ee):i,De=zr(he),Ie=Ns(ee),Te=Ie?i:De;if(ce.keepDefaultValues||(i=he),!ce.keepValues){if(ce.keepDirtyValues){const Ye=new Set([...l.mount,...Object.keys(Jf(i,a))]);for(const et of Array.from(Ye))lt(n.dirtyFields,et)?un(Te,et,lt(a,et)):H(et,lt(Te,et))}else{if(h5&&cr(ee))for(const Ye of l.mount){const et=lt(r,Ye);if(et&&et._f){const wt=Array.isArray(et._f.refs)?et._f.refs[0]:et._f.ref;if(Nx(wt)){const Xe=wt.closest("form");if(Xe){Xe.reset();break}}}}for(const Ye of l.mount)H(Ye,lt(Te,Ye))}a=zr(Te),g.array.next({values:{...Te}}),g.state.next({values:{...Te}})}l={mount:ce.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!f.isValid||!!ce.keepIsValid||!!ce.keepDirtyValues,o.watch=!!t.shouldUnregister,g.state.next({submitCount:ce.keepSubmitCount?n.submitCount:0,isDirty:Ie?!1:ce.keepDirty?n.isDirty:!!(ce.keepDefaultValues&&!ml(ee,i)),isSubmitted:ce.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ie?{}:ce.keepDirtyValues?ce.keepDefaultValues&&a?Jf(i,a):n.dirtyFields:ce.keepDefaultValues&&ee?Jf(i,ee):ce.keepDirty?n.dirtyFields:{},touchedFields:ce.keepTouched?n.touchedFields:{},errors:ce.keepErrors?n.errors:{},isSubmitSuccessful:ce.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ut=(ee,ce)=>se(la(ee)?ee(a):ee,ce),Je=(ee,ce={})=>{const he=lt(r,ee),De=he&&he._f;if(De){const Ie=De.refs?De.refs[0]:De.ref;Ie.focus&&(Ie.focus(),ce.shouldSelect&&la(Ie.select)&&Ie.select())}},Y=ee=>{n={...n,...ee}},We={control:{register:we,unregister:oe,getFieldState:J,handleSubmit:Ue,setError:Q,_subscribe:B,_runSchema:E,_getWatch:I,_getDirty:G,_setValid:v,_setFieldArray:_,_setDisabledField:_e,_setErrors:M,_getFieldArray:V,_reset:se,_resetDefaultValues:()=>la(t.defaultValues)&&t.defaultValues().then(ee=>{ut(ee,t.resetOptions),g.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:ke,_subjects:g,_proxyFormState:f,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(ee){o=ee},get _defaultValues(){return i},get _names(){return l},set _names(ee){l=ee},get _formState(){return n},get _options(){return t},set _options(ee){t={...t,...ee}}},subscribe:te,trigger:Ce,register:we,handleSubmit:Ue,watch:ie,setValue:H,getValues:F,reset:ut,resetField:be,clearErrors:re,unregister:oe,setError:Q,setFocus:Je,getFieldState:J};return{...We,formControl:We}}function Vl(e={}){const t=qt.useRef(void 0),n=qt.useRef(void 0),[r,i]=qt.useState({isDirty:!1,isValidating:!1,isLoading:la(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:la(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:iV(e),formState:r},e.formControl&&e.defaultValues&&!la(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const a=t.current.control;return a._options=e,qt.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0}),[a]),qt.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),qt.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),qt.useEffect(()=>{e.values&&!ml(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),qt.useEffect(()=>{e.errors&&!Ns(e.errors)&&a._setErrors(e.errors)},[e.errors,a]),qt.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),qt.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[e.shouldUnregister,a]),t.current.formState=e8(r,a),t.current}const vj=(e,t,n)=>{if(e&&"reportValidity"in e){const r=lt(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},c8=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?vj(r.ref,n,e):r.refs&&r.refs.forEach(i=>vj(i,n,e))}},aV=(e,t)=>{t.shouldUseNativeValidation&&c8(e,t);const n={};for(const r in e){const i=lt(t.fields,r),a=Object.assign(e[r]||{},{ref:i&&i.ref});if(oV(t.names||Object.keys(e),r)){const o=Object.assign({},lt(n,r));un(o,"root",a),un(n,r,o)}else un(n,r,a)}return n},oV=(e,t)=>e.some(n=>n.startsWith(t+"."));var lV=function(e,t){for(var n={};e.length;){var r=e[0],i=r.code,a=r.message,o=r.path.join(".");if(!n[o])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(h){return e.push(h)})}),t){var c=n[o].types,d=c&&c[r.code];n[o]=n8(o,t,n,i,d?[].concat(d,r.message):r.message)}e.shift()}return n},Wl=function(e,t,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(d){return a.shouldUseNativeValidation&&c8({},a),{errors:{},values:n.raw?r:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:aV(lV(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Jt;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Jt||(Jt={}));var a2;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(a2||(a2={}));const pt=Jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),No=e=>{switch(typeof e){case"undefined":return pt.undefined;case"string":return pt.string;case"number":return isNaN(e)?pt.nan:pt.number;case"boolean":return pt.boolean;case"function":return pt.function;case"bigint":return pt.bigint;case"symbol":return pt.symbol;case"object":return Array.isArray(e)?pt.array:e===null?pt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?pt.promise:typeof Map<"u"&&e instanceof Map?pt.map:typeof Set<"u"&&e instanceof Set?pt.set:typeof Date<"u"&&e instanceof Date?pt.date:pt.object;default:return pt.unknown}},Ke=Jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),cV=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class fi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},r={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let l=r,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(this),r}static assert(t){if(!(t instanceof fi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):r.push(t(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}fi.create=e=>new fi(e);const Qu=(e,t)=>{let n;switch(e.code){case Ke.invalid_type:e.received===pt.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Ke.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Jt.jsonStringifyReplacer)}`;break;case Ke.unrecognized_keys:n=`Unrecognized key(s) in object: ${Jt.joinValues(e.keys,", ")}`;break;case Ke.invalid_union:n="Invalid input";break;case Ke.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Jt.joinValues(e.options)}`;break;case Ke.invalid_enum_value:n=`Invalid enum value. Expected ${Jt.joinValues(e.options)}, received '${e.received}'`;break;case Ke.invalid_arguments:n="Invalid function arguments";break;case Ke.invalid_return_type:n="Invalid function return type";break;case Ke.invalid_date:n="Invalid date";break;case Ke.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Jt.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Ke.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Ke.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Ke.custom:n="Invalid input";break;case Ke.invalid_intersection_types:n="Intersection results could not be merged";break;case Ke.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Ke.not_finite:n="Number must be finite";break;default:n=t.defaultError,Jt.assertNever(e)}return{message:n}};let d8=Qu;function dV(e){d8=e}function _x(){return d8}const Cx=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=r.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...i,path:a,message:l}},uV=[];function dt(e,t){const n=_x(),r=Cx({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Qu?void 0:Qu].filter(i=>!!i)});e.common.issues.push(r)}class fs{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const i of n){if(i.status==="aborted")return Dt;i.status==="dirty"&&t.dirty(),r.push(i.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const i of n){const a=await i.key,o=await i.value;r.push({key:a,value:o})}return fs.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Dt;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[a.value]=o.value)}return{status:t.value,value:r}}}const Dt=Object.freeze({status:"aborted"}),du=e=>({status:"dirty",value:e}),ks=e=>({status:"valid",value:e}),o2=e=>e.status==="aborted",l2=e=>e.status==="dirty",td=e=>e.status==="valid",im=e=>typeof Promise<"u"&&e instanceof Promise;function Ax(e,t,n,r){if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function u8(e,t,n,r,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var yt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(yt||(yt={}));var hh,mh;class Ya{constructor(t,n,r,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const yj=(e,t)=>{if(td(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new fi(e.common.issues);return this._error=n,this._error}}};function Ut(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{var c,d;const{message:f}=e;return o.code==="invalid_enum_value"?{message:f??l.defaultError}:typeof l.data>"u"?{message:(c=f??r)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(d=f??n)!==null&&d!==void 0?d:l.defaultError}},description:i}}class Gt{get description(){return this._def.description}_getType(t){return No(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:No(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new fs,ctx:{common:t.parent.common,data:t.data,parsedType:No(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(im(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:No(t)},a=this._parseSync({data:t,path:i.path,parent:i});return yj(i,a)}"~validate"(t){var n,r;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:No(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:i});return td(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((r=(n=a==null?void 0:a.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(a=>td(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:No(t)},i=this._parse({data:t,path:r.path,parent:r}),a=await(im(i)?i:Promise.resolve(i));return yj(r,a)}refine(t,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=t(i),l=()=>a.addIssue({code:Ke.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(t){return new ga({schema:this,typeName:It.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ha.create(this,this._def)}nullable(){return Ql.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return fa.create(this)}promise(){return Zu.create(this,this._def)}or(t){return cm.create([this,t],this._def)}and(t){return dm.create(this,t,this._def)}transform(t){return new ga({...Ut(this._def),schema:this,typeName:It.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new pm({...Ut(this._def),innerType:this,defaultValue:n,typeName:It.ZodDefault})}brand(){return new x5({typeName:It.ZodBranded,type:this,...Ut(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new gm({...Ut(this._def),innerType:this,catchValue:n,typeName:It.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Wm.create(this,t)}readonly(){return xm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const fV=/^c[^\s-]{8,}$/i,hV=/^[0-9a-z]+$/,mV=/^[0-9A-HJKMNP-TV-Z]{26}$/i,pV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,gV=/^[a-z0-9_-]{21}$/i,xV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,vV=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,bV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let f1;const wV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,NV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,jV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,SV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,_V=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,CV=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,f8="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",AV=new RegExp(`^${f8}$`);function h8(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function kV(e){return new RegExp(`^${h8(e)}$`)}function m8(e){let t=`${f8}T${h8(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function PV(e,t){return!!((t==="v4"||!t)&&wV.test(e)||(t==="v6"||!t)&&jV.test(e))}function TV(e,t){if(!xV.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function LV(e,t){return!!((t==="v4"||!t)&&NV.test(e)||(t==="v6"||!t)&&SV.test(e))}class ca extends Gt{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==pt.string){const a=this._getOrReturnCtx(t);return dt(a,{code:Ke.invalid_type,expected:pt.string,received:a.parsedType}),Dt}const r=new fs;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),dt(i,{code:Ke.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),dt(i,{code:Ke.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,l=t.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?dt(i,{code:Ke.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&dt(i,{code:Ke.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")yV.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"email",code:Ke.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")f1||(f1=new RegExp(bV,"u")),f1.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"emoji",code:Ke.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")pV.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"uuid",code:Ke.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")gV.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"nanoid",code:Ke.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")fV.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"cuid",code:Ke.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")hV.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"cuid2",code:Ke.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")mV.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"ulid",code:Ke.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),dt(i,{validation:"url",code:Ke.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"regex",code:Ke.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),dt(i,{code:Ke.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),dt(i,{code:Ke.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),dt(i,{code:Ke.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?m8(a).test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{code:Ke.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?AV.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{code:Ke.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?kV(a).test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{code:Ke.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?vV.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"duration",code:Ke.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?PV(t.data,a.version)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"ip",code:Ke.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?TV(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"jwt",code:Ke.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?LV(t.data,a.version)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"cidr",code:Ke.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?_V.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"base64",code:Ke.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?CV.test(t.data)||(i=this._getOrReturnCtx(t,i),dt(i,{validation:"base64url",code:Ke.invalid_string,message:a.message}),r.dirty()):Jt.assertNever(a);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(i=>t.test(i),{validation:n,code:Ke.invalid_string,...yt.errToObj(r)})}_addCheck(t){return new ca({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...yt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...yt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...yt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...yt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...yt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...yt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...yt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...yt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...yt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...yt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...yt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...yt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...yt.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...yt.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...yt.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...yt.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...yt.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...yt.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...yt.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...yt.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...yt.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...yt.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...yt.errToObj(n)})}nonempty(t){return this.min(1,yt.errToObj(t))}trim(){return new ca({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ca({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ca({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}ca.create=e=>{var t;return new ca({checks:[],typeName:It.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ut(e)})};function EV(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r,a=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class Hl extends Gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==pt.number){const a=this._getOrReturnCtx(t);return dt(a,{code:Ke.invalid_type,expected:pt.number,received:a.parsedType}),Dt}let r;const i=new fs;for(const a of this._def.checks)a.kind==="int"?Jt.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),dt(r,{code:Ke.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),dt(r,{code:Ke.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),dt(r,{code:Ke.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?EV(t.data,a.value)!==0&&(r=this._getOrReturnCtx(t,r),dt(r,{code:Ke.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),dt(r,{code:Ke.not_finite,message:a.message}),i.dirty()):Jt.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,yt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,yt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,yt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,yt.toString(n))}setLimit(t,n,r,i){return new Hl({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:yt.toString(i)}]})}_addCheck(t){return new Hl({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:yt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:yt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:yt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:yt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:yt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:yt.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:yt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:yt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:yt.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Jt.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Hl.create=e=>new Hl({checks:[],typeName:It.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ut(e)});class Gl extends Gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==pt.bigint)return this._getInvalidInput(t);let r;const i=new fs;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(r=this._getOrReturnCtx(t,r),dt(r,{code:Ke.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(r=this._getOrReturnCtx(t,r),dt(r,{code:Ke.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),dt(r,{code:Ke.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Jt.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return dt(n,{code:Ke.invalid_type,expected:pt.bigint,received:n.parsedType}),Dt}gte(t,n){return this.setLimit("min",t,!0,yt.toString(n))}gt(t,n){return this.setLimit("min",t,!1,yt.toString(n))}lte(t,n){return this.setLimit("max",t,!0,yt.toString(n))}lt(t,n){return this.setLimit("max",t,!1,yt.toString(n))}setLimit(t,n,r,i){return new Gl({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:yt.toString(i)}]})}_addCheck(t){return new Gl({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:yt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:yt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:yt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:yt.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:yt.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Gl.create=e=>{var t;return new Gl({checks:[],typeName:It.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ut(e)})};class am extends Gt{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==pt.boolean){const r=this._getOrReturnCtx(t);return dt(r,{code:Ke.invalid_type,expected:pt.boolean,received:r.parsedType}),Dt}return ks(t.data)}}am.create=e=>new am({typeName:It.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ut(e)});class nd extends Gt{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==pt.date){const a=this._getOrReturnCtx(t);return dt(a,{code:Ke.invalid_type,expected:pt.date,received:a.parsedType}),Dt}if(isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return dt(a,{code:Ke.invalid_date}),Dt}const r=new fs;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),dt(i,{code:Ke.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),dt(i,{code:Ke.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):Jt.assertNever(a);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new nd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:yt.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:yt.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}nd.create=e=>new nd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:It.ZodDate,...Ut(e)});class kx extends Gt{_parse(t){if(this._getType(t)!==pt.symbol){const r=this._getOrReturnCtx(t);return dt(r,{code:Ke.invalid_type,expected:pt.symbol,received:r.parsedType}),Dt}return ks(t.data)}}kx.create=e=>new kx({typeName:It.ZodSymbol,...Ut(e)});class om extends Gt{_parse(t){if(this._getType(t)!==pt.undefined){const r=this._getOrReturnCtx(t);return dt(r,{code:Ke.invalid_type,expected:pt.undefined,received:r.parsedType}),Dt}return ks(t.data)}}om.create=e=>new om({typeName:It.ZodUndefined,...Ut(e)});class lm extends Gt{_parse(t){if(this._getType(t)!==pt.null){const r=this._getOrReturnCtx(t);return dt(r,{code:Ke.invalid_type,expected:pt.null,received:r.parsedType}),Dt}return ks(t.data)}}lm.create=e=>new lm({typeName:It.ZodNull,...Ut(e)});class Yu extends Gt{constructor(){super(...arguments),this._any=!0}_parse(t){return ks(t.data)}}Yu.create=e=>new Yu({typeName:It.ZodAny,...Ut(e)});class Bc extends Gt{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ks(t.data)}}Bc.create=e=>new Bc({typeName:It.ZodUnknown,...Ut(e)});class Mo extends Gt{_parse(t){const n=this._getOrReturnCtx(t);return dt(n,{code:Ke.invalid_type,expected:pt.never,received:n.parsedType}),Dt}}Mo.create=e=>new Mo({typeName:It.ZodNever,...Ut(e)});class Px extends Gt{_parse(t){if(this._getType(t)!==pt.undefined){const r=this._getOrReturnCtx(t);return dt(r,{code:Ke.invalid_type,expected:pt.void,received:r.parsedType}),Dt}return ks(t.data)}}Px.create=e=>new Px({typeName:It.ZodVoid,...Ut(e)});class fa extends Gt{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),i=this._def;if(n.parsedType!==pt.array)return dt(n,{code:Ke.invalid_type,expected:pt.array,received:n.parsedType}),Dt;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(dt(n,{code:o?Ke.too_big:Ke.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(dt(n,{code:Ke.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(dt(n,{code:Ke.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new Ya(n,o,n.path,l)))).then(o=>fs.mergeArray(r,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new Ya(n,o,n.path,l)));return fs.mergeArray(r,a)}get element(){return this._def.type}min(t,n){return new fa({...this._def,minLength:{value:t,message:yt.toString(n)}})}max(t,n){return new fa({...this._def,maxLength:{value:t,message:yt.toString(n)}})}length(t,n){return new fa({...this._def,exactLength:{value:t,message:yt.toString(n)}})}nonempty(t){return this.min(1,t)}}fa.create=(e,t)=>new fa({type:e,minLength:null,maxLength:null,exactLength:null,typeName:It.ZodArray,...Ut(t)});function Kd(e){if(e instanceof qn){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ha.create(Kd(r))}return new qn({...e._def,shape:()=>t})}else return e instanceof fa?new fa({...e._def,type:Kd(e.element)}):e instanceof Ha?Ha.create(Kd(e.unwrap())):e instanceof Ql?Ql.create(Kd(e.unwrap())):e instanceof Za?Za.create(e.items.map(t=>Kd(t))):e}class qn extends Gt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Jt.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==pt.object){const d=this._getOrReturnCtx(t);return dt(d,{code:Ke.invalid_type,expected:pt.object,received:d.parsedType}),Dt}const{status:r,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Mo&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const f=a[d],h=i.data[d];c.push({key:{status:"valid",value:d},value:f._parse(new Ya(i,h,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof Mo){const d=this._def.unknownKeys;if(d==="passthrough")for(const f of l)c.push({key:{status:"valid",value:f},value:{status:"valid",value:i.data[f]}});else if(d==="strict")l.length>0&&(dt(i,{code:Ke.unrecognized_keys,keys:l}),r.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const f of l){const h=i.data[f];c.push({key:{status:"valid",value:f},value:d._parse(new Ya(i,h,i.path,f)),alwaysSet:f in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const f of c){const h=await f.key,g=await f.value;d.push({key:h,value:g,alwaysSet:f.alwaysSet})}return d}).then(d=>fs.mergeObjectSync(r,d)):fs.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(t){return yt.errToObj,new qn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var i,a,o,l;const c=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=yt.errToObj(t).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new qn({...this._def,unknownKeys:"strip"})}passthrough(){return new qn({...this._def,unknownKeys:"passthrough"})}extend(t){return new qn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new qn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:It.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new qn({...this._def,catchall:t})}pick(t){const n={};return Jt.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new qn({...this._def,shape:()=>n})}omit(t){const n={};return Jt.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new qn({...this._def,shape:()=>n})}deepPartial(){return Kd(this)}partial(t){const n={};return Jt.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];t&&!t[r]?n[r]=i:n[r]=i.optional()}),new qn({...this._def,shape:()=>n})}required(t){const n={};return Jt.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof Ha;)a=a._def.innerType;n[r]=a}}),new qn({...this._def,shape:()=>n})}keyof(){return p8(Jt.objectKeys(this.shape))}}qn.create=(e,t)=>new qn({shape:()=>e,unknownKeys:"strip",catchall:Mo.create(),typeName:It.ZodObject,...Ut(t)});qn.strictCreate=(e,t)=>new qn({shape:()=>e,unknownKeys:"strict",catchall:Mo.create(),typeName:It.ZodObject,...Ut(t)});qn.lazycreate=(e,t)=>new qn({shape:e,unknownKeys:"strip",catchall:Mo.create(),typeName:It.ZodObject,...Ut(t)});class cm extends Gt{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new fi(l.ctx.common.issues));return dt(n,{code:Ke.invalid_union,unionErrors:o}),Dt}if(n.common.async)return Promise.all(r.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of r){const d={...n,common:{...n.common,issues:[]},parent:null},f=c._parseSync({data:n.data,path:n.path,parent:d});if(f.status==="valid")return f;f.status==="dirty"&&!a&&(a={result:f,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new fi(c));return dt(n,{code:Ke.invalid_union,unionErrors:l}),Dt}}get options(){return this._def.options}}cm.create=(e,t)=>new cm({options:e,typeName:It.ZodUnion,...Ut(t)});const yo=e=>e instanceof fm?yo(e.schema):e instanceof ga?yo(e.innerType()):e instanceof hm?[e.value]:e instanceof Kl?e.options:e instanceof mm?Jt.objectValues(e.enum):e instanceof pm?yo(e._def.innerType):e instanceof om?[void 0]:e instanceof lm?[null]:e instanceof Ha?[void 0,...yo(e.unwrap())]:e instanceof Ql?[null,...yo(e.unwrap())]:e instanceof x5||e instanceof xm?yo(e.unwrap()):e instanceof gm?yo(e._def.innerType):[];class A0 extends Gt{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==pt.object)return dt(n,{code:Ke.invalid_type,expected:pt.object,received:n.parsedType}),Dt;const r=this.discriminator,i=n.data[r],a=this.optionsMap.get(i);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(dt(n,{code:Ke.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Dt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const i=new Map;for(const a of n){const o=yo(a.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);i.set(l,a)}}return new A0({typeName:It.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...Ut(r)})}}function c2(e,t){const n=No(e),r=No(t);if(e===t)return{valid:!0,data:e};if(n===pt.object&&r===pt.object){const i=Jt.objectKeys(t),a=Jt.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of a){const c=c2(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===pt.array&&r===pt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],l=t[a],c=c2(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===pt.date&&r===pt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class dm extends Gt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=(a,o)=>{if(o2(a)||o2(o))return Dt;const l=c2(a.value,o.value);return l.valid?((l2(a)||l2(o))&&n.dirty(),{status:n.value,value:l.data}):(dt(r,{code:Ke.invalid_intersection_types}),Dt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}dm.create=(e,t,n)=>new dm({left:e,right:t,typeName:It.ZodIntersection,...Ut(n)});class Za extends Gt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==pt.array)return dt(r,{code:Ke.invalid_type,expected:pt.array,received:r.parsedType}),Dt;if(r.data.length<this._def.items.length)return dt(r,{code:Ke.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Dt;!this._def.rest&&r.data.length>this._def.items.length&&(dt(r,{code:Ke.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Ya(r,o,r.path,l)):null}).filter(o=>!!o);return r.common.async?Promise.all(a).then(o=>fs.mergeArray(n,o)):fs.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new Za({...this._def,rest:t})}}Za.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Za({items:e,typeName:It.ZodTuple,rest:null,...Ut(t)})};class um extends Gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==pt.object)return dt(r,{code:Ke.invalid_type,expected:pt.object,received:r.parsedType}),Dt;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in r.data)i.push({key:a._parse(new Ya(r,l,r.path,l)),value:o._parse(new Ya(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?fs.mergeObjectAsync(n,i):fs.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Gt?new um({keyType:t,valueType:n,typeName:It.ZodRecord,...Ut(r)}):new um({keyType:ca.create(),valueType:t,typeName:It.ZodRecord,...Ut(n)})}}class Tx extends Gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==pt.map)return dt(r,{code:Ke.invalid_type,expected:pt.map,received:r.parsedType}),Dt;const i=this._def.keyType,a=this._def.valueType,o=[...r.data.entries()].map(([l,c],d)=>({key:i._parse(new Ya(r,l,r.path,[d,"key"])),value:a._parse(new Ya(r,c,r.path,[d,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,f=await c.value;if(d.status==="aborted"||f.status==="aborted")return Dt;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(d.value,f.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,f=c.value;if(d.status==="aborted"||f.status==="aborted")return Dt;(d.status==="dirty"||f.status==="dirty")&&n.dirty(),l.set(d.value,f.value)}return{status:n.value,value:l}}}}Tx.create=(e,t,n)=>new Tx({valueType:t,keyType:e,typeName:It.ZodMap,...Ut(n)});class rd extends Gt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==pt.set)return dt(r,{code:Ke.invalid_type,expected:pt.set,received:r.parsedType}),Dt;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(dt(r,{code:Ke.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(dt(r,{code:Ke.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const d=new Set;for(const f of c){if(f.status==="aborted")return Dt;f.status==="dirty"&&n.dirty(),d.add(f.value)}return{status:n.value,value:d}}const l=[...r.data.values()].map((c,d)=>a._parse(new Ya(r,c,r.path,d)));return r.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,n){return new rd({...this._def,minSize:{value:t,message:yt.toString(n)}})}max(t,n){return new rd({...this._def,maxSize:{value:t,message:yt.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}rd.create=(e,t)=>new rd({valueType:e,minSize:null,maxSize:null,typeName:It.ZodSet,...Ut(t)});class wu extends Gt{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==pt.function)return dt(n,{code:Ke.invalid_type,expected:pt.function,received:n.parsedType}),Dt;function r(l,c){return Cx({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_x(),Qu].filter(d=>!!d),issueData:{code:Ke.invalid_arguments,argumentsError:c}})}function i(l,c){return Cx({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,_x(),Qu].filter(d=>!!d),issueData:{code:Ke.invalid_return_type,returnTypeError:c}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Zu){const l=this;return ks(async function(...c){const d=new fi([]),f=await l._def.args.parseAsync(c,a).catch(m=>{throw d.addIssue(r(c,m)),d}),h=await Reflect.apply(o,this,f);return await l._def.returns._def.type.parseAsync(h,a).catch(m=>{throw d.addIssue(i(h,m)),d})})}else{const l=this;return ks(function(...c){const d=l._def.args.safeParse(c,a);if(!d.success)throw new fi([r(c,d.error)]);const f=Reflect.apply(o,this,d.data),h=l._def.returns.safeParse(f,a);if(!h.success)throw new fi([i(f,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new wu({...this._def,args:Za.create(t).rest(Bc.create())})}returns(t){return new wu({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new wu({args:t||Za.create([]).rest(Bc.create()),returns:n||Bc.create(),typeName:It.ZodFunction,...Ut(r)})}}class fm extends Gt{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}fm.create=(e,t)=>new fm({getter:e,typeName:It.ZodLazy,...Ut(t)});class hm extends Gt{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return dt(n,{received:n.data,code:Ke.invalid_literal,expected:this._def.value}),Dt}return{status:"valid",value:t.data}}get value(){return this._def.value}}hm.create=(e,t)=>new hm({value:e,typeName:It.ZodLiteral,...Ut(t)});function p8(e,t){return new Kl({values:e,typeName:It.ZodEnum,...Ut(t)})}class Kl extends Gt{constructor(){super(...arguments),hh.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return dt(n,{expected:Jt.joinValues(r),received:n.parsedType,code:Ke.invalid_type}),Dt}if(Ax(this,hh)||u8(this,hh,new Set(this._def.values)),!Ax(this,hh).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return dt(n,{received:n.data,code:Ke.invalid_enum_value,options:r}),Dt}return ks(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Kl.create(t,{...this._def,...n})}exclude(t,n=this._def){return Kl.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}hh=new WeakMap;Kl.create=p8;class mm extends Gt{constructor(){super(...arguments),mh.set(this,void 0)}_parse(t){const n=Jt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==pt.string&&r.parsedType!==pt.number){const i=Jt.objectValues(n);return dt(r,{expected:Jt.joinValues(i),received:r.parsedType,code:Ke.invalid_type}),Dt}if(Ax(this,mh)||u8(this,mh,new Set(Jt.getValidEnumValues(this._def.values))),!Ax(this,mh).has(t.data)){const i=Jt.objectValues(n);return dt(r,{received:r.data,code:Ke.invalid_enum_value,options:i}),Dt}return ks(t.data)}get enum(){return this._def.values}}mh=new WeakMap;mm.create=(e,t)=>new mm({values:e,typeName:It.ZodNativeEnum,...Ut(t)});class Zu extends Gt{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==pt.promise&&n.common.async===!1)return dt(n,{code:Ke.invalid_type,expected:pt.promise,received:n.parsedType}),Dt;const r=n.parsedType===pt.promise?n.data:Promise.resolve(n.data);return ks(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Zu.create=(e,t)=>new Zu({type:e,typeName:It.ZodPromise,...Ut(t)});class ga extends Gt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===It.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{dt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(r.data,a);if(r.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Dt;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Dt:c.status==="dirty"||n.value==="dirty"?du(c.value):c});{if(n.value==="aborted")return Dt;const l=this._def.schema._parseSync({data:o,path:r.path,parent:r});return l.status==="aborted"?Dt:l.status==="dirty"||n.value==="dirty"?du(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Dt:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Dt:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!td(o))return o;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>td(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):o);Jt.assertNever(i)}}ga.create=(e,t,n)=>new ga({schema:e,typeName:It.ZodEffects,effect:t,...Ut(n)});ga.createWithPreprocess=(e,t,n)=>new ga({schema:t,effect:{type:"preprocess",transform:e},typeName:It.ZodEffects,...Ut(n)});class Ha extends Gt{_parse(t){return this._getType(t)===pt.undefined?ks(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ha.create=(e,t)=>new Ha({innerType:e,typeName:It.ZodOptional,...Ut(t)});class Ql extends Gt{_parse(t){return this._getType(t)===pt.null?ks(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ql.create=(e,t)=>new Ql({innerType:e,typeName:It.ZodNullable,...Ut(t)});class pm extends Gt{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===pt.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}pm.create=(e,t)=>new pm({innerType:e,typeName:It.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ut(t)});class gm extends Gt{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return im(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new fi(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new fi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}gm.create=(e,t)=>new gm({innerType:e,typeName:It.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ut(t)});class Lx extends Gt{_parse(t){if(this._getType(t)!==pt.nan){const r=this._getOrReturnCtx(t);return dt(r,{code:Ke.invalid_type,expected:pt.nan,received:r.parsedType}),Dt}return{status:"valid",value:t.data}}}Lx.create=e=>new Lx({typeName:It.ZodNaN,...Ut(e)});const IV=Symbol("zod_brand");class x5 extends Gt{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Wm extends Gt{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Dt:a.status==="dirty"?(n.dirty(),du(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Dt:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(t,n){return new Wm({in:t,out:n,typeName:It.ZodPipeline})}}class xm extends Gt{_parse(t){const n=this._def.innerType._parse(t),r=i=>(td(i)&&(i.value=Object.freeze(i.value)),i);return im(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}xm.create=(e,t)=>new xm({innerType:e,typeName:It.ZodReadonly,...Ut(t)});function bj(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function g8(e,t={},n){return e?Yu.create().superRefine((r,i)=>{var a,o;const l=e(r);if(l instanceof Promise)return l.then(c=>{var d,f;if(!c){const h=bj(t,r),g=(f=(d=h.fatal)!==null&&d!==void 0?d:n)!==null&&f!==void 0?f:!0;i.addIssue({code:"custom",...h,fatal:g})}});if(!l){const c=bj(t,r),d=(o=(a=c.fatal)!==null&&a!==void 0?a:n)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...c,fatal:d})}}):Yu.create()}const DV={object:qn.lazycreate};var It;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(It||(It={}));const FV=(e,t={message:`Input not instance of ${e.name}`})=>g8(n=>n instanceof e,t),x8=ca.create,v8=Hl.create,MV=Lx.create,RV=Gl.create,y8=am.create,OV=nd.create,BV=kx.create,zV=om.create,$V=lm.create,qV=Yu.create,UV=Bc.create,VV=Mo.create,WV=Px.create,HV=fa.create,GV=qn.create,KV=qn.strictCreate,QV=cm.create,YV=A0.create,ZV=dm.create,XV=Za.create,JV=um.create,eW=Tx.create,tW=rd.create,nW=wu.create,rW=fm.create,sW=hm.create,iW=Kl.create,aW=mm.create,oW=Zu.create,wj=ga.create,lW=Ha.create,cW=Ql.create,dW=ga.createWithPreprocess,uW=Wm.create,fW=()=>x8().optional(),hW=()=>v8().optional(),mW=()=>y8().optional(),pW={string:e=>ca.create({...e,coerce:!0}),number:e=>Hl.create({...e,coerce:!0}),boolean:e=>am.create({...e,coerce:!0}),bigint:e=>Gl.create({...e,coerce:!0}),date:e=>nd.create({...e,coerce:!0})},gW=Dt;var st=Object.freeze({__proto__:null,defaultErrorMap:Qu,setErrorMap:dV,getErrorMap:_x,makeIssue:Cx,EMPTY_PATH:uV,addIssueToContext:dt,ParseStatus:fs,INVALID:Dt,DIRTY:du,OK:ks,isAborted:o2,isDirty:l2,isValid:td,isAsync:im,get util(){return Jt},get objectUtil(){return a2},ZodParsedType:pt,getParsedType:No,ZodType:Gt,datetimeRegex:m8,ZodString:ca,ZodNumber:Hl,ZodBigInt:Gl,ZodBoolean:am,ZodDate:nd,ZodSymbol:kx,ZodUndefined:om,ZodNull:lm,ZodAny:Yu,ZodUnknown:Bc,ZodNever:Mo,ZodVoid:Px,ZodArray:fa,ZodObject:qn,ZodUnion:cm,ZodDiscriminatedUnion:A0,ZodIntersection:dm,ZodTuple:Za,ZodRecord:um,ZodMap:Tx,ZodSet:rd,ZodFunction:wu,ZodLazy:fm,ZodLiteral:hm,ZodEnum:Kl,ZodNativeEnum:mm,ZodPromise:Zu,ZodEffects:ga,ZodTransformer:ga,ZodOptional:Ha,ZodNullable:Ql,ZodDefault:pm,ZodCatch:gm,ZodNaN:Lx,BRAND:IV,ZodBranded:x5,ZodPipeline:Wm,ZodReadonly:xm,custom:g8,Schema:Gt,ZodSchema:Gt,late:DV,get ZodFirstPartyTypeKind(){return It},coerce:pW,any:qV,array:HV,bigint:RV,boolean:y8,date:OV,discriminatedUnion:YV,effect:wj,enum:iW,function:nW,instanceof:FV,intersection:ZV,lazy:rW,literal:sW,map:eW,nan:MV,nativeEnum:aW,never:VV,null:$V,nullable:cW,number:v8,object:GV,oboolean:mW,onumber:hW,optional:lW,ostring:fW,pipeline:uW,preprocess:dW,promise:oW,record:JV,set:tW,strictObject:KV,string:x8,symbol:BV,transformer:wj,tuple:XV,undefined:zV,union:QV,unknown:UV,void:WV,NEVER:gW,ZodIssueCode:Ke,quotelessJson:cV,ZodError:fi});const Ve=Symbol.for("drizzle:entityKind");function br(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,Ve))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(Ve in n&&n[Ve]===t[Ve])return!0;n=Object.getPrototypeOf(n)}return!1}var m4;m4=Ve;class Xu{constructor(t,n){xe(this,"name");xe(this,"keyAsName");xe(this,"primary");xe(this,"notNull");xe(this,"default");xe(this,"defaultFn");xe(this,"onUpdateFn");xe(this,"hasDefault");xe(this,"isUnique");xe(this,"uniqueName");xe(this,"uniqueType");xe(this,"dataType");xe(this,"columnType");xe(this,"enumValues");xe(this,"generated");xe(this,"generatedIdentity");xe(this,"config");this.table=t,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}xe(Xu,m4,"Column");var p4;p4=Ve;class b8{constructor(t,n,r){xe(this,"config");xe(this,"$default",this.$defaultFn);xe(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:r,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}xe(b8,p4,"ColumnBuilder");const Nu=Symbol.for("drizzle:Name");var g4;g4=Ve;class w8{constructor(t,n){xe(this,"reference");xe(this,"_onUpdate","no action");xe(this,"_onDelete","no action");this.reference=()=>{const{name:r,columns:i,foreignColumns:a}=t();return{name:r,columns:i,foreignTable:a[0].table,foreignColumns:a}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new N8(t,this)}}xe(w8,g4,"PgForeignKeyBuilder");var x4;x4=Ve;class N8{constructor(t,n){xe(this,"reference");xe(this,"onUpdate");xe(this,"onDelete");this.table=t,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:t,columns:n,foreignColumns:r}=this.reference(),i=n.map(l=>l.name),a=r.map(l=>l.name),o=[this.table[Nu],...i,r[0].table[Nu],...a];return t??`${o.join("_")}_fk`}}xe(N8,x4,"PgForeignKey");function xW(e,...t){return e(...t)}function vW(e,t){return`${e[Nu]}_${t.join("_")}_unique`}function Nj(e,t,n){for(let r=t;r<e.length;r++){const i=e[r];if(i==="\\"){r++;continue}if(i==='"')return[e.slice(t,r).replace(/\\/g,""),r+1];if(!n&&(i===","||i==="}"))return[e.slice(t,r).replace(/\\/g,""),r]}return[e.slice(t).replace(/\\/g,""),e.length]}function j8(e,t=0){const n=[];let r=t,i=!1;for(;r<e.length;){const a=e[r];if(a===","){(i||r===t)&&n.push(""),i=!0,r++;continue}if(i=!1,a==="\\"){r+=2;continue}if(a==='"'){const[c,d]=Nj(e,r+1,!0);n.push(c),r=d;continue}if(a==="}")return[n,r+1];if(a==="{"){const[c,d]=j8(e,r+1);n.push(c),r=d;continue}const[o,l]=Nj(e,r,!1);n.push(o),r=l}return[n,r]}function yW(e){const[t]=j8(e,1);return t}function S8(e){return`{${e.map(t=>Array.isArray(t)?S8(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var v4,y4;class tn extends(y4=b8,v4=Ve,y4){constructor(){super(...arguments);xe(this,"foreignKeyConfigs",[])}array(n){return new C8(this.config.name,this,n)}references(n,r={}){return this.foreignKeyConfigs.push({ref:n,actions:r}),this}unique(n,r){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=r==null?void 0:r.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,r){return this.foreignKeyConfigs.map(({ref:i,actions:a})=>xW((o,l)=>{const c=new w8(()=>{const d=o();return{columns:[n],foreignColumns:[d]}});return l.onUpdate&&c.onUpdate(l.onUpdate),l.onDelete&&c.onDelete(l.onDelete),c.build(r)},i,a))}buildExtraConfigColumn(n){return new _8(n,this.config)}}xe(tn,v4,"PgColumnBuilder");var b4,w4;class Vt extends(w4=Xu,b4=Ve,w4){constructor(t,n){n.uniqueName||(n.uniqueName=vW(t,[n.name])),super(t,n),this.table=t}}xe(Vt,b4,"PgColumn");var N4,j4;class _8 extends(j4=Vt,N4=Ve,j4){constructor(){super(...arguments);xe(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});xe(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}xe(_8,N4,"ExtraConfigColumn");var S4;S4=Ve;class Mg{constructor(t,n,r,i){xe(this,"name");xe(this,"keyAsName");xe(this,"type");xe(this,"indexConfig");this.name=t,this.keyAsName=n,this.type=r,this.indexConfig=i}}xe(Mg,S4,"IndexedColumn");var _4,C4;class C8 extends(C4=tn,_4=Ve,C4){constructor(t,n,r){super(t,"array","PgArray"),this.config.baseBuilder=n,this.config.size=r}build(t){const n=this.config.baseBuilder.build(t);return new d2(t,this.config,n)}}xe(C8,_4,"PgArrayBuilder");var A4,k4;const Bx=class Bx extends(k4=Vt,A4=Ve,k4){constructor(n,r,i,a){super(n,r);xe(this,"size");this.baseColumn=i,this.range=a,this.size=r.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=yW(n)),n.map(r=>this.baseColumn.mapFromDriverValue(r))}mapToDriverValue(n,r=!1){const i=n.map(a=>a===null?null:br(this.baseColumn,Bx)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return r?i:S8(i)}};xe(Bx,A4,"PgArray");let d2=Bx;const jj=Symbol.for("drizzle:isPgEnum");function bW(e){return!!e&&typeof e=="function"&&jj in e&&e[jj]===!0}var P4;P4=Ve;class v5{constructor(t,n,r,i=!1){this._={brand:"Subquery",sql:t,selectedFields:n,alias:r,isWith:i}}}xe(v5,P4,"Subquery");const wW={startActiveSpan(e,t){return t()}},ju=Symbol.for("drizzle:ViewBaseConfig"),h1=Symbol.for("drizzle:Schema"),Sj=Symbol.for("drizzle:Columns"),_j=Symbol.for("drizzle:ExtraConfigColumns"),m1=Symbol.for("drizzle:OriginalName"),p1=Symbol.for("drizzle:BaseName"),Ex=Symbol.for("drizzle:IsAlias"),Cj=Symbol.for("drizzle:ExtraConfigBuilder"),A8=Symbol.for("drizzle:IsDrizzleTable");var T4,L4,E4,I4,D4,F4,M4,R4,O4,B4,mg;let oi=(B4=Ve,O4=Nu,R4=m1,M4=h1,F4=Sj,D4=_j,I4=p1,E4=Ex,L4=A8,T4=Cj,mg=class{constructor(t,n,r){xe(this,O4);xe(this,R4);xe(this,M4);xe(this,F4);xe(this,D4);xe(this,I4);xe(this,E4,!1);xe(this,L4,!0);xe(this,T4);this[Nu]=this[m1]=t,this[h1]=n,this[p1]=r}},xe(mg,B4,"Table"),xe(mg,"Symbol",{Name:Nu,Schema:h1,OriginalName:m1,Columns:Sj,ExtraConfigColumns:_j,BaseName:p1,IsAlias:Ex,ExtraConfigBuilder:Cj}),mg);function k8(e){return typeof e=="object"&&e!==null&&A8 in e}function NW(e){return e!=null&&typeof e.getSQL=="function"}function jW(e){var n;const t={sql:"",params:[]};for(const r of e)t.sql+=r.sql,t.params.push(...r.params),(n=r.typings)!=null&&n.length&&(t.typings||(t.typings=[]),t.typings.push(...r.typings));return t}var z4;z4=Ve;class Pi{constructor(t){xe(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new nr([this])}}xe(Pi,z4,"StringChunk");var $4;$4=Ve;const Nc=class Nc{constructor(t){xe(this,"decoder",P8);xe(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return wW.startActiveSpan("drizzle.buildSQL",n=>{const r=this.buildQueryFromSourceParams(this.queryChunks,t);return n==null||n.setAttributes({"drizzle.query.text":r.sql,"drizzle.query.params":JSON.stringify(r.params)}),r})}buildQueryFromSourceParams(t,n){const r=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:o,prepareTyping:l,inlineParams:c,paramStartIndex:d}=r;return jW(t.map(f=>{var h;if(br(f,Pi))return{sql:f.value.join(""),params:[]};if(br(f,Ix))return{sql:a(f.value),params:[]};if(f===void 0)return{sql:"",params:[]};if(Array.isArray(f)){const g=[new Pi("(")];for(const[m,S]of f.entries())g.push(S),m<f.length-1&&g.push(new Pi(", "));return g.push(new Pi(")")),this.buildQueryFromSourceParams(g,r)}if(br(f,Nc))return this.buildQueryFromSourceParams(f.queryChunks,{...r,inlineParams:c||f.shouldInlineParams});if(br(f,oi)){const g=f[oi.Symbol.Schema],m=f[oi.Symbol.Name];return{sql:g===void 0||f[Ex]?a(m):a(g)+"."+a(m),params:[]}}if(br(f,Xu)){const g=i.getColumnCasing(f);if(n.invokeSource==="indexes")return{sql:a(g),params:[]};const m=f.table[oi.Symbol.Schema];return{sql:f.table[Ex]||m===void 0?a(f.table[oi.Symbol.Name])+"."+a(g):a(m)+"."+a(f.table[oi.Symbol.Name])+"."+a(g),params:[]}}if(br(f,E8)){const g=f[ju].schema,m=f[ju].name;return{sql:g===void 0||f[ju].isAlias?a(m):a(g)+"."+a(m),params:[]}}if(br(f,y5)){if(br(f.value,Fx))return{sql:o(d.value++,f),params:[f],typings:["none"]};const g=f.value===null?null:f.encoder.mapToDriverValue(f.value);if(br(g,Nc))return this.buildQueryFromSourceParams([g],r);if(c)return{sql:this.mapInlineParam(g,r),params:[]};let m=["none"];return l&&(m=[l(f.encoder)]),{sql:o(d.value++,g),params:[g],typings:m}}return br(f,Fx)?{sql:o(d.value++,f),params:[f],typings:["none"]}:br(f,Nc.Aliased)&&f.fieldAlias!==void 0?{sql:a(f.fieldAlias),params:[]}:br(f,v5)?f._.isWith?{sql:a(f._.alias),params:[]}:this.buildQueryFromSourceParams([new Pi("("),f._.sql,new Pi(") "),new Ix(f._.alias)],r):bW(f)?f.schema?{sql:a(f.schema)+"."+a(f.enumName),params:[]}:{sql:a(f.enumName),params:[]}:NW(f)?(h=f.shouldOmitSQLParens)!=null&&h.call(f)?this.buildQueryFromSourceParams([f.getSQL()],r):this.buildQueryFromSourceParams([new Pi("("),f.getSQL(),new Pi(")")],r):c?{sql:this.mapInlineParam(f,r),params:[]}:{sql:o(d.value++,f),params:[f],typings:["none"]}}))}mapInlineParam(t,{escapeString:n}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return n(t);if(typeof t=="object"){const r=t.toString();return n(r==="[object Object]"?JSON.stringify(t):r)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new Nc.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};xe(Nc,$4,"SQL");let nr=Nc;var q4;q4=Ve;class Ix{constructor(t){xe(this,"brand");this.value=t}getSQL(){return new nr([this])}}xe(Ix,q4,"Name");const P8={mapFromDriverValue:e=>e},T8={mapToDriverValue:e=>e};({...P8,...T8});var U4;U4=Ve;class y5{constructor(t,n=T8){xe(this,"brand");this.value=t,this.encoder=n}getSQL(){return new nr([this])}}xe(y5,U4,"Param");function Dx(e,...t){const n=[];(t.length>0||e.length>0&&e[0]!=="")&&n.push(new Pi(e[0]));for(const[r,i]of t.entries())n.push(i,new Pi(e[r+1]));return new nr(n)}(e=>{function t(){return new nr([])}e.empty=t;function n(c){return new nr(c)}e.fromList=n;function r(c){return new nr([new Pi(c)])}e.raw=r;function i(c,d){const f=[];for(const[h,g]of c.entries())h>0&&d!==void 0&&f.push(d),f.push(g);return new nr(f)}e.join=i;function a(c){return new Ix(c)}e.identifier=a;function o(c){return new Fx(c)}e.placeholder=o;function l(c,d){return new y5(c,d)}e.param=l})(Dx||(Dx={}));(e=>{var n;n=Ve;const r=class r{constructor(a,o){xe(this,"isSelectionField",!1);this.sql=a,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new r(this.sql,this.fieldAlias)}};xe(r,n,"SQL.Aliased");let t=r;e.Aliased=t})(nr||(nr={}));var V4;V4=Ve;class Fx{constructor(t){this.name=t}getSQL(){return new nr([this])}}xe(Fx,V4,"Placeholder");const L8=Symbol.for("drizzle:IsDrizzleView");var W4,H4,G4;G4=Ve,H4=ju,W4=L8;class E8{constructor({name:t,schema:n,selectedFields:r,query:i}){xe(this,H4);xe(this,W4,!0);this[ju]={name:t,originalName:t,schema:n,selectedFields:r,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new nr([this])}}xe(E8,G4,"View");function SW(e){return typeof e=="object"&&e!==null&&L8 in e}Xu.prototype.getSQL=function(){return new nr([this])};oi.prototype.getSQL=function(){return new nr([this])};v5.prototype.getSQL=function(){return new nr([this])};function _W(e){return e[oi.Symbol.Columns]}function CW(e){return e[ju].selectedFields}function Mr(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}var K4,Q4;class Hm extends(Q4=tn,K4=Ve,Q4){generatedAlwaysAsIdentity(t){if(t){const{name:n,...r}=t;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:n,...r}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:r}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}xe(Hm,K4,"PgIntColumnBaseBuilder");var Y4,Z4;class I8 extends(Z4=Hm,Y4=Ve,Z4){constructor(t){super(t,"number","PgBigInt53")}build(t){return new D8(t,this.config)}}xe(I8,Y4,"PgBigInt53Builder");var X4,J4;class D8 extends(J4=Vt,X4=Ve,J4){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}xe(D8,X4,"PgBigInt53");var eS,tS;class F8 extends(tS=Hm,eS=Ve,tS){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new M8(t,this.config)}}xe(F8,eS,"PgBigInt64Builder");var nS,rS;class M8 extends(rS=Vt,nS=Ve,rS){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}xe(M8,nS,"PgBigInt64");function AW(e,t){const{name:n,config:r}=Mr(e,t);return r.mode==="number"?new I8(n):new F8(n)}var sS,iS;class R8 extends(iS=tn,sS=Ve,iS){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new O8(t,this.config)}}xe(R8,sS,"PgBigSerial53Builder");var aS,oS;class O8 extends(oS=Vt,aS=Ve,oS){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}xe(O8,aS,"PgBigSerial53");var lS,cS;class B8 extends(cS=tn,lS=Ve,cS){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new z8(t,this.config)}}xe(B8,lS,"PgBigSerial64Builder");var dS,uS;class z8 extends(uS=Vt,dS=Ve,uS){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}xe(z8,dS,"PgBigSerial64");function kW(e,t){const{name:n,config:r}=Mr(e,t);return r.mode==="number"?new R8(n):new B8(n)}var fS,hS;class $8 extends(hS=tn,fS=Ve,hS){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new q8(t,this.config)}}xe($8,fS,"PgBooleanBuilder");var mS,pS;class q8 extends(pS=Vt,mS=Ve,pS){getSQLType(){return"boolean"}}xe(q8,mS,"PgBoolean");function zo(e){return new $8(e??"")}var gS,xS;class U8 extends(xS=tn,gS=Ve,xS){constructor(t,n){super(t,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new V8(t,this.config)}}xe(U8,gS,"PgCharBuilder");var vS,yS;class V8 extends(yS=Vt,vS=Ve,yS){constructor(){super(...arguments);xe(this,"length",this.config.length);xe(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}xe(V8,vS,"PgChar");function PW(e,t={}){const{name:n,config:r}=Mr(e,t);return new U8(n,r)}var bS,wS;class W8 extends(wS=tn,bS=Ve,wS){constructor(t){super(t,"string","PgCidr")}build(t){return new H8(t,this.config)}}xe(W8,bS,"PgCidrBuilder");var NS,jS;class H8 extends(jS=Vt,NS=Ve,jS){getSQLType(){return"cidr"}}xe(H8,NS,"PgCidr");function TW(e){return new W8(e??"")}var SS,_S;class G8 extends(_S=tn,SS=Ve,_S){constructor(t,n,r){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=r}build(t){return new K8(t,this.config)}}xe(G8,SS,"PgCustomColumnBuilder");var CS,AS;class K8 extends(AS=Vt,CS=Ve,AS){constructor(n,r){super(n,r);xe(this,"sqlName");xe(this,"mapTo");xe(this,"mapFrom");this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}xe(K8,CS,"PgCustomColumn");function LW(e){return(t,n)=>{const{name:r,config:i}=Mr(t,n);return new G8(r,i,e)}}var kS,PS;class uf extends(PS=tn,kS=Ve,PS){defaultNow(){return this.default(Dx`now()`)}}xe(uf,kS,"PgDateColumnBaseBuilder");var TS,LS;class Q8 extends(LS=uf,TS=Ve,LS){constructor(t){super(t,"date","PgDate")}build(t){return new Y8(t,this.config)}}xe(Q8,TS,"PgDateBuilder");var ES,IS;class Y8 extends(IS=Vt,ES=Ve,IS){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}xe(Y8,ES,"PgDate");var DS,FS;class Z8 extends(FS=uf,DS=Ve,FS){constructor(t){super(t,"string","PgDateString")}build(t){return new X8(t,this.config)}}xe(Z8,DS,"PgDateStringBuilder");var MS,RS;class X8 extends(RS=Vt,MS=Ve,RS){getSQLType(){return"date"}}xe(X8,MS,"PgDateString");function EW(e,t){const{name:n,config:r}=Mr(e,t);return(r==null?void 0:r.mode)==="date"?new Q8(n):new Z8(n)}var OS,BS;class J8 extends(BS=tn,OS=Ve,BS){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new eE(t,this.config)}}xe(J8,OS,"PgDoublePrecisionBuilder");var zS,$S;class eE extends($S=Vt,zS=Ve,$S){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}xe(eE,zS,"PgDoublePrecision");function IW(e){return new J8(e??"")}var qS,US;class tE extends(US=tn,qS=Ve,US){constructor(t){super(t,"string","PgInet")}build(t){return new nE(t,this.config)}}xe(tE,qS,"PgInetBuilder");var VS,WS;class nE extends(WS=Vt,VS=Ve,WS){getSQLType(){return"inet"}}xe(nE,VS,"PgInet");function DW(e){return new tE(e??"")}var HS,GS;class rE extends(GS=Hm,HS=Ve,GS){constructor(t){super(t,"number","PgInteger")}build(t){return new sE(t,this.config)}}xe(rE,HS,"PgIntegerBuilder");var KS,QS;class sE extends(QS=Vt,KS=Ve,QS){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}xe(sE,KS,"PgInteger");function bt(e){return new rE(e??"")}var YS,ZS;class iE extends(ZS=tn,YS=Ve,ZS){constructor(t,n){super(t,"string","PgInterval"),this.config.intervalConfig=n}build(t){return new aE(t,this.config)}}xe(iE,YS,"PgIntervalBuilder");var XS,JS;class aE extends(JS=Vt,XS=Ve,JS){constructor(){super(...arguments);xe(this,"fields",this.config.intervalConfig.fields);xe(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",r=this.precision?`(${this.precision})`:"";return`interval${n}${r}`}}xe(aE,XS,"PgInterval");function FW(e,t={}){const{name:n,config:r}=Mr(e,t);return new iE(n,r)}var e3,t3;class oE extends(t3=tn,e3=Ve,t3){constructor(t){super(t,"json","PgJson")}build(t){return new lE(t,this.config)}}xe(oE,e3,"PgJsonBuilder");var n3,r3;class lE extends(r3=Vt,n3=Ve,r3){constructor(t,n){super(t,n)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}xe(lE,n3,"PgJson");function MW(e){return new oE(e??"")}var s3,i3;class cE extends(i3=tn,s3=Ve,i3){constructor(t){super(t,"json","PgJsonb")}build(t){return new dE(t,this.config)}}xe(cE,s3,"PgJsonbBuilder");var a3,o3;class dE extends(o3=Vt,a3=Ve,o3){constructor(t,n){super(t,n)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}xe(dE,a3,"PgJsonb");function mi(e){return new cE(e??"")}var l3,c3;class uE extends(c3=tn,l3=Ve,c3){constructor(t){super(t,"array","PgLine")}build(t){return new fE(t,this.config)}}xe(uE,l3,"PgLineBuilder");var d3,u3;class fE extends(u3=Vt,d3=Ve,u3){getSQLType(){return"line"}mapFromDriverValue(t){const[n,r,i]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r),Number.parseFloat(i)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}xe(fE,d3,"PgLine");var f3,h3;class hE extends(h3=tn,f3=Ve,h3){constructor(t){super(t,"json","PgLineABC")}build(t){return new mE(t,this.config)}}xe(hE,f3,"PgLineABCBuilder");var m3,p3;class mE extends(p3=Vt,m3=Ve,p3){getSQLType(){return"line"}mapFromDriverValue(t){const[n,r,i]=t.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(r),c:Number.parseFloat(i)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}xe(mE,m3,"PgLineABC");function RW(e,t){const{name:n,config:r}=Mr(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new uE(n):new hE(n)}var g3,x3;class pE extends(x3=tn,g3=Ve,x3){constructor(t){super(t,"string","PgMacaddr")}build(t){return new gE(t,this.config)}}xe(pE,g3,"PgMacaddrBuilder");var v3,y3;class gE extends(y3=Vt,v3=Ve,y3){getSQLType(){return"macaddr"}}xe(gE,v3,"PgMacaddr");function OW(e){return new pE(e??"")}var b3,w3;class xE extends(w3=tn,b3=Ve,w3){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new vE(t,this.config)}}xe(xE,b3,"PgMacaddr8Builder");var N3,j3;class vE extends(j3=Vt,N3=Ve,j3){getSQLType(){return"macaddr8"}}xe(vE,N3,"PgMacaddr8");function BW(e){return new xE(e??"")}var S3,_3;class yE extends(_3=tn,S3=Ve,_3){constructor(t,n,r){super(t,"string","PgNumeric"),this.config.precision=n,this.config.scale=r}build(t){return new bE(t,this.config)}}xe(yE,S3,"PgNumericBuilder");var C3,A3;class bE extends(A3=Vt,C3=Ve,A3){constructor(n,r){super(n,r);xe(this,"precision");xe(this,"scale");this.precision=r.precision,this.scale=r.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}xe(bE,C3,"PgNumeric");function wE(e,t){const{name:n,config:r}=Mr(e,t);return new yE(n,r==null?void 0:r.precision,r==null?void 0:r.scale)}const nt=wE;var k3,P3;class NE extends(P3=tn,k3=Ve,P3){constructor(t){super(t,"array","PgPointTuple")}build(t){return new jE(t,this.config)}}xe(NE,k3,"PgPointTupleBuilder");var T3,L3;class jE extends(L3=Vt,T3=Ve,L3){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,r]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(r)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}xe(jE,T3,"PgPointTuple");var E3,I3;class SE extends(I3=tn,E3=Ve,I3){constructor(t){super(t,"json","PgPointObject")}build(t){return new _E(t,this.config)}}xe(SE,E3,"PgPointObjectBuilder");var D3,F3;class _E extends(F3=Vt,D3=Ve,F3){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,r]=t.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(r)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}xe(_E,D3,"PgPointObject");function zW(e,t){const{name:n,config:r}=Mr(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new NE(n):new SE(n)}function $W(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}function Aj(e,t){const n=new ArrayBuffer(8),r=new DataView(n);for(let i=0;i<8;i++)r.setUint8(i,e[t+i]);return r.getFloat64(0,!0)}function CE(e){const t=$W(e);let n=0;const r=t[n];n+=1;const i=new DataView(t.buffer),a=i.getUint32(n,r===1);if(n+=4,a&536870912&&(i.getUint32(n,r===1),n+=4),(a&65535)===1){const o=Aj(t,n);n+=8;const l=Aj(t,n);return n+=8,[o,l]}throw new Error("Unsupported geometry type")}var M3,R3;class AE extends(R3=tn,M3=Ve,R3){constructor(t){super(t,"array","PgGeometry")}build(t){return new kE(t,this.config)}}xe(AE,M3,"PgGeometryBuilder");var O3,B3;class kE extends(B3=Vt,O3=Ve,B3){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return CE(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}xe(kE,O3,"PgGeometry");var z3,$3;class PE extends($3=tn,z3=Ve,$3){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new TE(t,this.config)}}xe(PE,z3,"PgGeometryObjectBuilder");var q3,U3;class TE extends(U3=Vt,q3=Ve,U3){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const n=CE(t);return{x:n[0],y:n[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}xe(TE,q3,"PgGeometryObject");function qW(e,t){const{name:n,config:r}=Mr(e,t);return!(r!=null&&r.mode)||r.mode==="tuple"?new AE(n):new PE(n)}var V3,W3;class LE extends(W3=tn,V3=Ve,W3){constructor(t,n){super(t,"number","PgReal"),this.config.length=n}build(t){return new EE(t,this.config)}}xe(LE,V3,"PgRealBuilder");var H3,G3;class EE extends(G3=Vt,H3=Ve,G3){constructor(n,r){super(n,r);xe(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}xe(EE,H3,"PgReal");function UW(e){return new LE(e??"")}var K3,Q3;class IE extends(Q3=tn,K3=Ve,Q3){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new DE(t,this.config)}}xe(IE,K3,"PgSerialBuilder");var Y3,Z3;class DE extends(Z3=Vt,Y3=Ve,Z3){getSQLType(){return"serial"}}xe(DE,Y3,"PgSerial");function Fn(e){return new IE(e??"")}var X3,J3;class FE extends(J3=Hm,X3=Ve,J3){constructor(t){super(t,"number","PgSmallInt")}build(t){return new ME(t,this.config)}}xe(FE,X3,"PgSmallIntBuilder");var e_,t_;class ME extends(t_=Vt,e_=Ve,t_){constructor(){super(...arguments);xe(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}xe(ME,e_,"PgSmallInt");function VW(e){return new FE(e??"")}var n_,r_;class RE extends(r_=tn,n_=Ve,r_){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new OE(t,this.config)}}xe(RE,n_,"PgSmallSerialBuilder");var s_,i_;class OE extends(i_=Vt,s_=Ve,i_){getSQLType(){return"smallserial"}}xe(OE,s_,"PgSmallSerial");function WW(e){return new RE(e??"")}var a_,o_;class BE extends(o_=tn,a_=Ve,o_){constructor(t,n){super(t,"string","PgText"),this.config.enumValues=n.enum}build(t){return new zE(t,this.config)}}xe(BE,a_,"PgTextBuilder");var l_,c_;class zE extends(c_=Vt,l_=Ve,c_){constructor(){super(...arguments);xe(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}xe(zE,l_,"PgText");function ze(e,t={}){const{name:n,config:r}=Mr(e,t);return new BE(n,r)}var d_,u_;class $E extends(u_=uf,d_=Ve,u_){constructor(t,n,r){super(t,"string","PgTime"),this.withTimezone=n,this.precision=r,this.config.withTimezone=n,this.config.precision=r}build(t){return new qE(t,this.config)}}xe($E,d_,"PgTimeBuilder");var f_,h_;class qE extends(h_=Vt,f_=Ve,h_){constructor(n,r){super(n,r);xe(this,"withTimezone");xe(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}xe(qE,f_,"PgTime");function HW(e,t={}){const{name:n,config:r}=Mr(e,t);return new $E(n,r.withTimezone??!1,r.precision)}var m_,p_;class UE extends(p_=uf,m_=Ve,p_){constructor(t,n,r){super(t,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=r}build(t){return new VE(t,this.config)}}xe(UE,m_,"PgTimestampBuilder");var g_,x_;class VE extends(x_=Vt,g_=Ve,x_){constructor(n,r){super(n,r);xe(this,"withTimezone");xe(this,"precision");xe(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));xe(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}xe(VE,g_,"PgTimestamp");var v_,y_;class WE extends(y_=uf,v_=Ve,y_){constructor(t,n,r){super(t,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=r}build(t){return new HE(t,this.config)}}xe(WE,v_,"PgTimestampStringBuilder");var b_,w_;class HE extends(w_=Vt,b_=Ve,w_){constructor(n,r){super(n,r);xe(this,"withTimezone");xe(this,"precision");this.withTimezone=r.withTimezone,this.precision=r.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}xe(HE,b_,"PgTimestampString");function Nt(e,t={}){const{name:n,config:r}=Mr(e,t);return(r==null?void 0:r.mode)==="string"?new WE(n,r.withTimezone??!1,r.precision):new UE(n,(r==null?void 0:r.withTimezone)??!1,r==null?void 0:r.precision)}var N_,j_;class GE extends(j_=tn,N_=Ve,j_){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(Dx`gen_random_uuid()`)}build(t){return new KE(t,this.config)}}xe(GE,N_,"PgUUIDBuilder");var S_,__;class KE extends(__=Vt,S_=Ve,__){getSQLType(){return"uuid"}}xe(KE,S_,"PgUUID");function GW(e){return new GE(e??"")}var C_,A_;class QE extends(A_=tn,C_=Ve,A_){constructor(t,n){super(t,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new YE(t,this.config)}}xe(QE,C_,"PgVarcharBuilder");var k_,P_;class YE extends(P_=Vt,k_=Ve,P_){constructor(){super(...arguments);xe(this,"length",this.config.length);xe(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}xe(YE,k_,"PgVarchar");function KW(e,t={}){const{name:n,config:r}=Mr(e,t);return new QE(n,r)}var T_,L_;class ZE extends(L_=tn,T_=Ve,L_){constructor(t,n){super(t,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(t){return new XE(t,this.config)}}xe(ZE,T_,"PgBinaryVectorBuilder");var E_,I_;class XE extends(I_=Vt,E_=Ve,I_){constructor(){super(...arguments);xe(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}xe(XE,E_,"PgBinaryVector");function QW(e,t){const{name:n,config:r}=Mr(e,t);return new ZE(n,r)}var D_,F_;class JE extends(F_=tn,D_=Ve,F_){constructor(t,n){super(t,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(t){return new eI(t,this.config)}}xe(JE,D_,"PgHalfVectorBuilder");var M_,R_;class eI extends(R_=Vt,M_=Ve,R_){constructor(){super(...arguments);xe(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}xe(eI,M_,"PgHalfVector");function YW(e,t){const{name:n,config:r}=Mr(e,t);return new JE(n,r)}var O_,B_;class tI extends(B_=tn,O_=Ve,B_){constructor(t,n){super(t,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(t){return new nI(t,this.config)}}xe(tI,O_,"PgSparseVectorBuilder");var z_,$_;class nI extends($_=Vt,z_=Ve,$_){constructor(){super(...arguments);xe(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}xe(nI,z_,"PgSparseVector");function ZW(e,t){const{name:n,config:r}=Mr(e,t);return new tI(n,r)}var q_,U_;class rI extends(U_=tn,q_=Ve,U_){constructor(t,n){super(t,"array","PgVector"),this.config.dimensions=n.dimensions}build(t){return new sI(t,this.config)}}xe(rI,q_,"PgVectorBuilder");var V_,W_;class sI extends(W_=Vt,V_=Ve,W_){constructor(){super(...arguments);xe(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(r=>Number.parseFloat(r))}}xe(sI,V_,"PgVector");function XW(e,t){const{name:n,config:r}=Mr(e,t);return new rI(n,r)}function JW(){return{bigint:AW,bigserial:kW,boolean:zo,char:PW,cidr:TW,customType:LW,date:EW,doublePrecision:IW,inet:DW,integer:bt,interval:FW,json:MW,jsonb:mi,line:RW,macaddr:OW,macaddr8:BW,numeric:wE,point:zW,geometry:qW,real:UW,serial:Fn,smallint:VW,smallserial:WW,text:ze,time:HW,timestamp:Nt,uuid:GW,varchar:KW,bit:QW,halfvec:YW,sparsevec:ZW,vector:XW}}const u2=Symbol.for("drizzle:PgInlineForeignKeys"),kj=Symbol.for("drizzle:EnableRLS");var H_,G_,K_,Q_,Y_;class Ph extends(Y_=oi,Q_=Ve,K_=u2,G_=kj,H_=oi.Symbol.ExtraConfigBuilder,Y_){constructor(){super(...arguments);xe(this,K_,[]);xe(this,G_,!1);xe(this,H_)}}xe(Ph,Q_,"PgTable"),xe(Ph,"Symbol",Object.assign({},oi.Symbol,{InlineForeignKeys:u2,EnableRLS:kj}));function eH(e,t,n,r,i=e){const a=new Ph(e,r,i),o=typeof t=="function"?t(JW()):t,l=Object.fromEntries(Object.entries(o).map(([f,h])=>{const g=h;g.setName(f);const m=g.build(a);return a[u2].push(...g.buildForeignKeys(m,a)),[f,m]})),c=Object.fromEntries(Object.entries(o).map(([f,h])=>{const g=h;g.setName(f);const m=g.buildExtraConfigColumn(a);return[f,m]})),d=Object.assign(a,l);return d[oi.Symbol.Columns]=l,d[oi.Symbol.ExtraConfigColumns]=c,n&&(d[Ph.Symbol.ExtraConfigBuilder]=n),Object.assign(d,{enableRLS:()=>(d[Ph.Symbol.EnableRLS]=!0,d)})}const On=(e,t,n)=>eH(e,t,n,void 0);var Z_;Z_=Ve;class b5{constructor(t,n){this.unique=t,this.name=n}on(...t){return new Rg(t.map(n=>{if(br(n,nr))return n;n=n;const r=new Mg(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),r}),this.unique,!1,this.name)}onOnly(...t){return new Rg(t.map(n=>{if(br(n,nr))return n;n=n;const r=new Mg(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,r}),this.unique,!0,this.name)}using(t,...n){return new Rg(n.map(r=>{if(br(r,nr))return r;r=r;const i=new Mg(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),i}),this.unique,!0,this.name,t)}}xe(b5,Z_,"PgIndexBuilderOn");var X_;X_=Ve;class Rg{constructor(t,n,r,i,a="btree"){xe(this,"config");this.config={name:i,columns:t,unique:n,only:r,method:a}}concurrently(){return this.config.concurrently=!0,this}with(t){return this.config.with=t,this}where(t){return this.config.where=t,this}build(t){return new iI(this.config,t)}}xe(Rg,X_,"PgIndexBuilder");var J_;J_=Ve;class iI{constructor(t,n){xe(this,"config");this.config={...t,table:n}}}xe(iI,J_,"PgIndex");function Mt(e){return new b5(!1,e)}function ff(e){return new b5(!0,e)}const $n={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function lr(e,t){return t.includes(e.columnType)}function tH(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}const nH=st.union([st.string(),st.number(),st.boolean(),st.null()]),rH=st.union([nH,st.record(st.any()),st.array(st.any())]),sH=st.custom(e=>e instanceof Buffer);function aI(e,t){const n=(t==null?void 0:t.zodInstance)??st,r=(t==null?void 0:t.coerce)??{};let i;return tH(e)&&(i=e.enumValues.length?n.enum(e.enumValues):n.string()),i||(lr(e,["PgGeometry","PgPointTuple"])?i=n.tuple([n.number(),n.number()]):lr(e,["PgGeometryObject","PgPointObject"])?i=n.object({x:n.number(),y:n.number()}):lr(e,["PgHalfVector","PgVector"])?(i=n.array(n.number()),i=e.dimensions?i.length(e.dimensions):i):lr(e,["PgLine"])?i=n.tuple([n.number(),n.number(),n.number()]):lr(e,["PgLineABC"])?i=n.object({a:n.number(),b:n.number(),c:n.number()}):lr(e,["PgArray"])?(i=n.array(aI(e.baseColumn,n)),i=e.size?i.length(e.size):i):e.dataType==="array"?i=n.array(n.any()):e.dataType==="number"?i=iH(e,n,r):e.dataType==="bigint"?i=aH(e,n,r):e.dataType==="boolean"?i=r===!0||r.boolean?n.coerce.boolean():n.boolean():e.dataType==="date"?i=r===!0||r.date?n.coerce.date():n.date():e.dataType==="string"?i=oH(e,n,r):e.dataType==="json"?i=rH:e.dataType==="custom"?i=n.any():e.dataType==="buffer"&&(i=sH)),i||(i=n.any()),i}function iH(e,t,n){let r=e.getSQLType().includes("unsigned"),i,a,o=!1;lr(e,["MySqlTinyInt","SingleStoreTinyInt"])?(i=r?0:$n.INT8_MIN,a=r?$n.INT8_UNSIGNED_MAX:$n.INT8_MAX,o=!0):lr(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(i=r?0:$n.INT16_MIN,a=r?$n.INT16_UNSIGNED_MAX:$n.INT16_MAX,o=!0):lr(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(i=r?0:$n.INT24_MIN,a=r?$n.INT24_UNSIGNED_MAX:$n.INT24_MAX,o=lr(e,["MySqlMediumInt","SingleStoreMediumInt"])):lr(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(i=r?0:$n.INT32_MIN,a=r?$n.INT32_UNSIGNED_MAX:$n.INT32_MAX,o=!0):lr(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(i=r?0:$n.INT48_MIN,a=r?$n.INT48_UNSIGNED_MAX:$n.INT48_MAX):lr(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(r=r||lr(e,["MySqlSerial","SingleStoreSerial"]),i=r?0:Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,o=!0):lr(e,["MySqlYear","SingleStoreYear"])?(i=1901,a=2155,o=!0):(i=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER);let l=n===!0||n!=null&&n.number?t.coerce.number():t.number();return l=l.min(i).max(a),o?l.int():l}function aH(e,t,n){const r=e.getSQLType().includes("unsigned"),i=r?0n:$n.INT64_MIN,a=r?$n.INT64_UNSIGNED_MAX:$n.INT64_MAX;return(n===!0||n!=null&&n.bigint?t.coerce.bigint():t.bigint()).min(i).max(a)}function oH(e,t,n){if(lr(e,["PgUUID"]))return t.string().uuid();let r,i,a=!1;lr(e,["PgVarchar","SQLiteText"])?r=e.length:lr(e,["MySqlVarChar","SingleStoreVarChar"])?r=e.length??$n.INT16_UNSIGNED_MAX:lr(e,["MySqlText","SingleStoreText"])&&(e.textType==="longtext"?r=$n.INT32_UNSIGNED_MAX:e.textType==="mediumtext"?r=$n.INT24_UNSIGNED_MAX:e.textType==="text"?r=$n.INT16_UNSIGNED_MAX:r=$n.INT8_UNSIGNED_MAX),lr(e,["PgChar","MySqlChar","SingleStoreChar"])&&(r=e.length,a=!0),lr(e,["PgBinaryVector"])&&(i=/^[01]+$/,r=e.dimensions);let o=n===!0||n!=null&&n.string?t.coerce.string():t.string();return o=i?o.regex(i):o,r&&a?o.length(r):r?o.max(r):o}function oI(e){return k8(e)?_W(e):CW(e)}function lI(e,t,n,r){const i={};for(const[a,o]of Object.entries(e)){if(!br(o,Xu)&&!br(o,nr)&&!br(o,nr.Aliased)&&typeof o=="object"){const h=k8(o)||SW(o)?oI(o):o;i[a]=lI(h,t[a]??{},n,r);continue}const l=t[a];if(l!==void 0&&typeof l!="function"){i[a]=l;continue}const c=br(o,Xu)?o:void 0,d=c?aI(c,r):st.any(),f=typeof l=="function"?l(d):d;n.never(c)||(i[a]=f,c&&(n.nullable(c)&&(i[a]=i[a].nullable()),n.optional(c)&&(i[a]=i[a].optional())))}return st.object(i)}const lH={never:e=>{var t,n;return((t=e==null?void 0:e.generated)==null?void 0:t.type)==="always"||((n=e==null?void 0:e.generatedIdentity)==null?void 0:n.type)==="always"},optional:e=>!e.notNull||e.notNull&&e.hasDefault,nullable:e=>!e.notNull},Es=(e,t)=>{const n=oI(e);return lI(n,{},lH)},Bn=On("tenants",{id:Fn("id").primaryKey(),name:ze("name").notNull(),apmcCode:ze("apmc_code").notNull().unique(),mobileNumber:ze("mobile_number").notNull(),gstNumber:ze("gst_number"),fssaiNumber:ze("fssai_number"),panNumber:ze("pan_number").notNull(),subscriptionPlan:ze("subscription_plan").notNull(),maxUsers:bt("max_users").notNull().default(1),logo:ze("logo"),place:ze("place"),address:ze("address"),bankName:ze("bank_name"),bankAccountNumber:ze("bank_account_number"),ifscCode:ze("ifsc_code"),accountHolderName:ze("account_holder_name"),branchName:ze("branch_name"),branchAddress:ze("branch_address"),isActive:zo("is_active").notNull().default(!0),createdAt:Nt("created_at").defaultNow(),settings:mi("settings").default({})}),sc=On("users",{id:Fn("id").primaryKey(),username:ze("username").notNull(),password:ze("password").notNull(),name:ze("name").notNull(),email:ze("email").notNull(),role:ze("role").notNull().default("staff"),tenantId:bt("tenant_id").references(()=>Bn.id),isActive:zo("is_active").notNull().default(!0),createdAt:Nt("created_at").defaultNow()},e=>({usernameIdx:ff("username_tenant_idx").on(e.username,e.tenantId)})),w5=On("farmers",{id:Fn("id").primaryKey(),name:ze("name").notNull(),nameAsInBank:ze("name_as_in_bank"),mobile:ze("mobile").notNull(),place:ze("place").notNull(),bankName:ze("bank_name"),bankAccountNumber:ze("bank_account_number"),ifscCode:ze("ifsc_code"),accountHolderName:ze("account_holder_name"),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),createdAt:Nt("created_at").defaultNow(),updatedAt:Nt("updated_at").defaultNow()},e=>({mobileIdx:Mt("farmer_mobile_idx").on(e.mobile),tenantIdx:Mt("farmer_tenant_idx").on(e.tenantId)})),to=On("buyers",{id:Fn("id").primaryKey(),name:ze("name").notNull(),contactPerson:ze("contact_person"),mobile:ze("mobile"),address:ze("address"),panNumber:ze("pan_number"),gstNumber:ze("gst_number"),hsnCode:ze("hsn_code").notNull(),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),createdAt:Nt("created_at").defaultNow(),updatedAt:Nt("updated_at").defaultNow()}),k0=On("lots",{id:Fn("id").primaryKey(),lotNumber:ze("lot_number").notNull(),farmerId:bt("farmer_id").notNull().references(()=>w5.id),numberOfBags:bt("number_of_bags").notNull(),vehicleRent:nt("vehicle_rent",{precision:10,scale:2}),advance:nt("advance",{precision:10,scale:2}),varietyGrade:ze("variety_grade"),grade:ze("grade"),unloadHamali:nt("unload_hamali",{precision:10,scale:2}),lotPrice:nt("lot_price",{precision:10,scale:2}),buyerId:bt("buyer_id").references(()=>to.id),status:ze("status").notNull().default("active"),billGenerated:zo("bill_generated").notNull().default(!1),billGeneratedAt:Nt("bill_generated_at"),paymentStatus:ze("payment_status").notNull().default("pending"),amountDue:nt("amount_due",{precision:12,scale:2}),amountPaid:nt("amount_paid",{precision:12,scale:2}).default("0"),paymentDate:Nt("payment_date"),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),createdAt:Nt("created_at").defaultNow(),updatedAt:Nt("updated_at").defaultNow()},e=>({lotNumberIdx:ff("lot_number_tenant_idx").on(e.lotNumber,e.tenantId),tenantIdx:Mt("lot_tenant_idx").on(e.tenantId)})),cH=On("bags",{id:Fn("id").primaryKey(),lotId:bt("lot_id").notNull().references(()=>k0.id),bagNumber:bt("bag_number").notNull(),weight:nt("weight",{precision:8,scale:2}),notes:ze("notes"),buyerId:bt("buyer_id").references(()=>to.id),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),createdAt:Nt("created_at").defaultNow(),updatedAt:Nt("updated_at").defaultNow()},e=>({lotBagIdx:ff("lot_bag_number_idx").on(e.lotId,e.bagNumber),tenantIdx:Mt("bag_tenant_idx").on(e.tenantId),buyerIdx:Mt("bag_buyer_idx").on(e.buyerId)}));On("bag_entry_drafts",{id:Fn("id").primaryKey(),lotId:bt("lot_id").notNull().references(()=>k0.id),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),userId:bt("user_id").notNull().references(()=>sc.id),draftData:mi("draft_data").notNull(),lastModified:Nt("last_modified").defaultNow(),createdAt:Nt("created_at").defaultNow()},e=>({lotUserIdx:ff("draft_lot_user_idx").on(e.lotId,e.userId),tenantIdx:Mt("draft_tenant_idx").on(e.tenantId)}));On("lot_buyers",{id:Fn("id").primaryKey(),lotId:bt("lot_id").notNull().references(()=>k0.id,{onDelete:"cascade"}),buyerId:bt("buyer_id").notNull().references(()=>to.id,{onDelete:"cascade"}),tenantId:bt("tenant_id").notNull().references(()=>Bn.id,{onDelete:"cascade"}),bagAllocation:mi("bag_allocation"),createdAt:Nt("created_at").defaultNow()},e=>[Mt("idx_lot_buyers_lot_id").on(e.lotId),Mt("idx_lot_buyers_buyer_id").on(e.buyerId),Mt("idx_lot_buyers_tenant_id").on(e.tenantId)]);const dH=On("audit_logs",{id:Fn("id").primaryKey(),userId:bt("user_id").references(()=>sc.id),tenantId:bt("tenant_id").references(()=>Bn.id),action:ze("action").notNull(),entityType:ze("entity_type"),entityId:bt("entity_id"),oldData:mi("old_data"),newData:mi("new_data"),ipAddress:ze("ip_address"),userAgent:ze("user_agent"),timestamp:Nt("timestamp").defaultNow()}),uH=On("pattis",{id:Fn("id").primaryKey(),pattiNumber:ze("patti_number").notNull(),description:ze("description"),status:ze("status").default("active").notNull(),tenantId:bt("tenant_id").references(()=>Bn.id).notNull(),createdAt:Nt("created_at").defaultNow().notNull(),updatedAt:Nt("updated_at").defaultNow().notNull()});Es(Bn).omit({id:!0,createdAt:!0});const fH=Es(sc).omit({id:!0,createdAt:!0}),hH=Es(w5).omit({id:!0,createdAt:!0,updatedAt:!0}),mH=Es(k0).omit({id:!0,createdAt:!0,updatedAt:!0});Es(cH).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({weight:st.string().optional().transform(e=>e===""?null:e)});const pH=Es(to).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({name:st.string().min(1,"Company name is required"),contactPerson:st.string().optional(),mobile:st.string().optional(),address:st.string().optional(),hsnCode:st.string().min(1,"HSN code is required")});Es(dH).omit({id:!0,timestamp:!0});Es(uH).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({pattiNumber:st.string().min(1,"Patti number is required"),description:st.string().optional()});On("expenses",{id:Fn("id").primaryKey(),tenantId:bt("tenant_id").references(()=>Bn.id).notNull(),expenseDate:Nt("expense_date").defaultNow(),category:ze("category").notNull(),subcategory:ze("subcategory"),description:ze("description").notNull(),amount:nt("amount",{precision:10,scale:2}).notNull(),paymentMethod:ze("payment_method").notNull(),receiptNumber:ze("receipt_number"),vendorName:ze("vendor_name"),isRecurring:zo("is_recurring").default(!1),createdAt:Nt("created_at").defaultNow(),updatedAt:Nt("updated_at").defaultNow()},e=>({tenantIdx:Mt("expense_tenant_idx").on(e.tenantId),dateIdx:Mt("expense_date_idx").on(e.expenseDate),categoryIdx:Mt("expense_category_idx").on(e.category)}));const gH=On("farmer_bills",{id:Fn("id").primaryKey(),pattiNumber:ze("patti_number").notNull().unique(),farmerId:bt("farmer_id").references(()=>w5.id).notNull(),tenantId:bt("tenant_id").references(()=>Bn.id).notNull(),billDate:Nt("bill_date").defaultNow(),totalAmount:nt("total_amount",{precision:12,scale:2}).notNull(),hamali:nt("hamali",{precision:10,scale:2}).default("0"),vehicleRent:nt("vehicle_rent",{precision:10,scale:2}).default("0"),emptyBagCharges:nt("empty_bag_charges",{precision:10,scale:2}).default("0"),advance:nt("advance",{precision:10,scale:2}).default("0"),rok:nt("rok",{precision:10,scale:2}).default("0"),otherCharges:nt("other_charges",{precision:10,scale:2}).default("0"),totalDeductions:nt("total_deductions",{precision:12,scale:2}).notNull(),netPayable:nt("net_payable",{precision:12,scale:2}).notNull(),totalBags:bt("total_bags").notNull(),totalWeight:nt("total_weight",{precision:10,scale:2}).notNull(),lotIds:mi("lot_ids").notNull(),status:ze("status").default("generated"),createdAt:Nt("created_at").defaultNow(),updatedAt:Nt("updated_at").defaultNow()}),xH=On("tax_invoices",{id:Fn("id").primaryKey(),invoiceNumber:ze("invoice_number").notNull().unique(),buyerId:bt("buyer_id").references(()=>to.id).notNull(),tenantId:bt("tenant_id").references(()=>Bn.id).notNull(),invoiceDate:Nt("invoice_date").defaultNow(),basicAmount:nt("basic_amount",{precision:12,scale:2}).notNull(),packaging:nt("packaging",{precision:10,scale:2}).default("0"),hamali:nt("hamali",{precision:10,scale:2}).default("0"),weighingCharges:nt("weighing_charges",{precision:10,scale:2}).default("0"),commission:nt("commission",{precision:10,scale:2}).default("0"),cess:nt("cess",{precision:10,scale:2}).default("0"),sgst:nt("sgst",{precision:10,scale:2}).default("0"),cgst:nt("cgst",{precision:10,scale:2}).default("0"),igst:nt("igst",{precision:10,scale:2}).default("0"),totalGst:nt("total_gst",{precision:10,scale:2}).default("0"),totalBags:bt("total_bags"),totalWeight:nt("total_weight",{precision:10,scale:2}),invoiceData:mi("invoice_data"),totalAmount:nt("total_amount",{precision:12,scale:2}).notNull(),lotIds:mi("lot_ids").notNull(),status:ze("status").default("generated"),paymentStatus:ze("payment_status").default("pending"),amountPaid:nt("amount_paid",{precision:12,scale:2}).default("0"),paymentDate:Nt("payment_date"),dueDate:Nt("due_date"),createdAt:Nt("created_at").defaultNow(),updatedAt:Nt("updated_at").defaultNow()});On("accounting_ledger",{id:Fn("id").primaryKey(),tenantId:bt("tenant_id").references(()=>Bn.id).notNull(),transactionType:ze("transaction_type").notNull(),entityType:ze("entity_type").notNull(),entityId:bt("entity_id"),referenceType:ze("reference_type"),referenceId:bt("reference_id"),debitAmount:nt("debit_amount",{precision:12,scale:2}).default("0"),creditAmount:nt("credit_amount",{precision:12,scale:2}).default("0"),description:ze("description").notNull(),accountHead:ze("account_head").notNull(),fiscalYear:ze("fiscal_year").notNull(),transactionDate:Nt("transaction_date").defaultNow(),createdAt:Nt("created_at").defaultNow(),createdBy:bt("created_by").references(()=>sc.id)},e=>[Mt("idx_ledger_tenant_date").on(e.tenantId,e.transactionDate),Mt("idx_ledger_account_head").on(e.accountHead),Mt("idx_ledger_fiscal_year").on(e.fiscalYear)]);On("bank_transactions",{id:Fn("id").primaryKey(),tenantId:bt("tenant_id").references(()=>Bn.id).notNull(),transactionType:ze("transaction_type").notNull(),amount:nt("amount",{precision:12,scale:2}).notNull(),bankAccount:ze("bank_account").notNull(),referenceNumber:ze("reference_number"),description:ze("description").notNull(),entityType:ze("entity_type"),entityId:bt("entity_id"),transactionDate:Nt("transaction_date").defaultNow(),createdAt:Nt("created_at").defaultNow(),createdBy:bt("created_by").references(()=>sc.id)},e=>[Mt("idx_bank_tenant_date").on(e.tenantId,e.transactionDate)]);On("final_accounts",{id:Fn("id").primaryKey(),tenantId:bt("tenant_id").references(()=>Bn.id).notNull(),fiscalYear:ze("fiscal_year").notNull(),totalSales:nt("total_sales",{precision:15,scale:2}).default("0"),totalPurchases:nt("total_purchases",{precision:15,scale:2}).default("0"),grossProfit:nt("gross_profit",{precision:15,scale:2}).default("0"),commissionIncome:nt("commission_income",{precision:12,scale:2}).default("0"),serviceCharges:nt("service_charges",{precision:12,scale:2}).default("0"),otherIncome:nt("other_income",{precision:12,scale:2}).default("0"),totalIncome:nt("total_income",{precision:15,scale:2}).default("0"),operatingExpenses:nt("operating_expenses",{precision:12,scale:2}).default("0"),bankCharges:nt("bank_charges",{precision:10,scale:2}).default("0"),otherExpenses:nt("other_expenses",{precision:12,scale:2}).default("0"),totalExpenses:nt("total_expenses",{precision:15,scale:2}).default("0"),netProfit:nt("net_profit",{precision:15,scale:2}).default("0"),cash:nt("cash",{precision:12,scale:2}).default("0"),bankBalance:nt("bank_balance",{precision:12,scale:2}).default("0"),accountsReceivable:nt("accounts_receivable",{precision:12,scale:2}).default("0"),totalAssets:nt("total_assets",{precision:15,scale:2}).default("0"),accountsPayable:nt("accounts_payable",{precision:12,scale:2}).default("0"),taxLiabilities:nt("tax_liabilities",{precision:12,scale:2}).default("0"),totalLiabilities:nt("total_liabilities",{precision:15,scale:2}).default("0"),netWorth:nt("net_worth",{precision:15,scale:2}).default("0"),gstPayable:nt("gst_payable",{precision:12,scale:2}).default("0"),cessPayable:nt("cess_payable",{precision:12,scale:2}).default("0"),periodStartDate:Nt("period_start_date").notNull(),periodEndDate:Nt("period_end_date").notNull(),status:ze("status").default("draft"),finalizedAt:Nt("finalized_at"),finalizedBy:bt("finalized_by").references(()=>sc.id),createdAt:Nt("created_at").defaultNow(),updatedAt:Nt("updated_at").defaultNow()},e=>[ff("idx_final_accounts_tenant_year").on(e.tenantId,e.fiscalYear)]);On("expense_categories",{id:Fn("id").primaryKey(),tenantId:bt("tenant_id").references(()=>Bn.id).notNull(),categoryName:ze("category_name").notNull(),description:ze("description"),accountHead:ze("account_head").notNull(),isActive:zo("is_active").default(!0),createdAt:Nt("created_at").defaultNow()});Es(gH).omit({id:!0,createdAt:!0,updatedAt:!0});Es(xH).omit({id:!0,createdAt:!0,updatedAt:!0});const N5=On("purchase_invoices",{id:Fn("id").primaryKey(),invoiceNumber:ze("invoice_number").notNull(),invoiceDate:Nt("invoice_date").notNull(),traderName:ze("trader_name").notNull(),traderContact:ze("trader_contact"),traderAddress:ze("trader_address"),totalAmount:nt("total_amount",{precision:12,scale:2}).notNull(),taxAmount:nt("tax_amount",{precision:12,scale:2}).default("0"),netAmount:nt("net_amount",{precision:12,scale:2}).notNull(),paymentStatus:ze("payment_status").notNull().default("pending"),paymentDate:Nt("payment_date"),notes:ze("notes"),originalImagePath:ze("original_image_path"),ocrProcessed:zo("ocr_processed").default(!1),ocrConfidence:nt("ocr_confidence",{precision:5,scale:2}),buyerId:bt("buyer_id").notNull().references(()=>to.id),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),createdAt:Nt("created_at").defaultNow(),updatedAt:Nt("updated_at").defaultNow()},e=>({tenantIdx:Mt("purchase_invoice_tenant_idx").on(e.tenantId),buyerIdx:Mt("purchase_invoice_buyer_idx").on(e.buyerId),invoiceNumberIdx:Mt("purchase_invoice_number_idx").on(e.invoiceNumber),dateIdx:Mt("purchase_invoice_date_idx").on(e.invoiceDate),traderIdx:Mt("purchase_invoice_trader_idx").on(e.traderName)})),vH=On("purchase_invoice_items",{id:Fn("id").primaryKey(),invoiceId:bt("invoice_id").notNull().references(()=>N5.id,{onDelete:"cascade"}),itemName:ze("item_name").notNull(),itemDescription:ze("item_description"),quantity:nt("quantity",{precision:12,scale:3}).notNull(),unit:ze("unit").notNull(),ratePerUnit:nt("rate_per_unit",{precision:12,scale:2}).notNull(),amount:nt("amount",{precision:12,scale:2}).notNull(),hsnCode:ze("hsn_code"),batchNumber:ze("batch_number"),expiryDate:Nt("expiry_date"),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),createdAt:Nt("created_at").defaultNow()},e=>({invoiceIdx:Mt("purchase_item_invoice_idx").on(e.invoiceId),tenantIdx:Mt("purchase_item_tenant_idx").on(e.tenantId),itemNameIdx:Mt("purchase_item_name_idx").on(e.itemName)})),cI=On("stock_inventory",{id:Fn("id").primaryKey(),itemName:ze("item_name").notNull(),itemDescription:ze("item_description"),currentQuantity:nt("current_quantity",{precision:12,scale:3}).notNull().default("0"),reservedQuantity:nt("reserved_quantity",{precision:12,scale:3}).notNull().default("0"),availableQuantity:nt("available_quantity",{precision:12,scale:3}).notNull().default("0"),unit:ze("unit").notNull(),avgPurchaseRate:nt("avg_purchase_rate",{precision:12,scale:2}),lastPurchaseRate:nt("last_purchase_rate",{precision:12,scale:2}),lastPurchaseDate:Nt("last_purchase_date"),minimumStockLevel:nt("minimum_stock_level",{precision:12,scale:3}).default("0"),maximumStockLevel:nt("maximum_stock_level",{precision:12,scale:3}),reorderPoint:nt("reorder_point",{precision:12,scale:3}),category:ze("category"),buyerId:bt("buyer_id").notNull().references(()=>to.id),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),lastUpdated:Nt("last_updated").defaultNow(),createdAt:Nt("created_at").defaultNow()},e=>({tenantBuyerIdx:ff("stock_tenant_buyer_item_idx").on(e.tenantId,e.buyerId,e.itemName),tenantIdx:Mt("stock_tenant_idx").on(e.tenantId),buyerIdx:Mt("stock_buyer_idx").on(e.buyerId),itemNameIdx:Mt("stock_item_name_idx").on(e.itemName),lowStockIdx:Mt("stock_low_stock_idx").on(e.availableQuantity,e.minimumStockLevel)}));On("stock_movements",{id:Fn("id").primaryKey(),stockId:bt("stock_id").notNull().references(()=>cI.id),movementType:ze("movement_type").notNull(),referenceType:ze("reference_type").notNull(),referenceId:bt("reference_id"),quantityChange:nt("quantity_change",{precision:12,scale:3}).notNull(),balanceAfter:nt("balance_after",{precision:12,scale:3}).notNull(),ratePerUnit:nt("rate_per_unit",{precision:12,scale:2}),totalValue:nt("total_value",{precision:12,scale:2}),notes:ze("notes"),buyerId:bt("buyer_id").notNull().references(()=>to.id),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),createdAt:Nt("created_at").defaultNow(),createdBy:bt("created_by").references(()=>sc.id)},e=>({stockIdx:Mt("stock_movement_stock_idx").on(e.stockId),tenantIdx:Mt("stock_movement_tenant_idx").on(e.tenantId),buyerIdx:Mt("stock_movement_buyer_idx").on(e.buyerId),typeIdx:Mt("stock_movement_type_idx").on(e.movementType),dateIdx:Mt("stock_movement_date_idx").on(e.createdAt),referenceIdx:Mt("stock_movement_reference_idx").on(e.referenceType,e.referenceId)}));On("ocr_extraction_logs",{id:Fn("id").primaryKey(),invoiceId:bt("invoice_id").references(()=>N5.id,{onDelete:"cascade"}),originalImagePath:ze("original_image_path").notNull(),extractedText:ze("extracted_text"),extractedData:mi("extracted_data"),confidenceScore:nt("confidence_score",{precision:5,scale:2}),processingTimeMs:bt("processing_time_ms"),ocrEngine:ze("ocr_engine").default("tesseract"),errorMessage:ze("error_message"),userCorrected:zo("user_corrected").default(!1),correctedData:mi("corrected_data"),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),processedAt:Nt("processed_at").defaultNow(),processedBy:bt("processed_by").references(()=>sc.id)},e=>({invoiceIdx:Mt("ocr_log_invoice_idx").on(e.invoiceId),tenantIdx:Mt("ocr_log_tenant_idx").on(e.tenantId),dateIdx:Mt("ocr_log_date_idx").on(e.processedAt)}));const dI=On("suppliers",{id:Fn("id").primaryKey(),name:ze("name").notNull(),apmcCode:ze("apmc_code"),contactPerson:ze("contact_person"),mobile:ze("mobile"),email:ze("email"),address:ze("address"),gstNumber:ze("gst_number"),panNumber:ze("pan_number"),bankDetails:mi("bank_details"),paymentTerms:ze("payment_terms"),rating:nt("rating",{precision:3,scale:2}),isActive:zo("is_active").default(!0),totalPurchases:nt("total_purchases",{precision:15,scale:2}).default("0"),lastPurchaseDate:Nt("last_purchase_date"),buyerId:bt("buyer_id").references(()=>to.id),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),createdAt:Nt("created_at").defaultNow(),updatedAt:Nt("updated_at").defaultNow()},e=>({tenantBuyerIdx:Mt("supplier_tenant_buyer_idx").on(e.tenantId,e.buyerId),nameIdx:Mt("supplier_name_idx").on(e.name),mobileIdx:Mt("supplier_mobile_idx").on(e.mobile),gstIdx:Mt("supplier_gst_idx").on(e.gstNumber)}));Es(N5).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({invoiceNumber:st.string().min(1,"Invoice number is required"),traderName:st.string().min(1,"Trader name is required"),totalAmount:st.string().min(1,"Total amount is required"),netAmount:st.string().min(1,"Net amount is required")});Es(vH).omit({id:!0,createdAt:!0}).extend({itemName:st.string().min(1,"Item name is required"),quantity:st.string().min(1,"Quantity is required"),unit:st.string().min(1,"Unit is required"),ratePerUnit:st.string().min(1,"Rate per unit is required"),amount:st.string().min(1,"Amount is required")});Es(cI).omit({id:!0,createdAt:!0,lastUpdated:!0}).extend({itemName:st.string().min(1,"Item name is required"),unit:st.string().min(1,"Unit is required")});Es(dI).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({name:st.string().min(1,"Supplier name is required")});const yH=On("bid_prices",{id:Fn("id").primaryKey(),buyerId:bt("buyer_id").references(()=>to.id),supplierId:bt("supplier_id").references(()=>dI.id),dalalName:ze("dalal_name").notNull(),lotNumber:ze("lot_number").notNull(),bidPrice:nt("bid_price",{precision:10,scale:2}).notNull(),chiliPhotos:mi("chili_photos").default([]),notes:ze("notes"),bidDate:Nt("bid_date").defaultNow(),tenantId:bt("tenant_id").notNull().references(()=>Bn.id),createdAt:Nt("created_at").defaultNow()},e=>({buyerIdx:Mt("bid_buyer_idx").on(e.buyerId),supplierIdx:Mt("bid_supplier_idx").on(e.supplierId),tenantIdx:Mt("bid_tenant_idx").on(e.tenantId),dalalIdx:Mt("bid_dalal_idx").on(e.dalalName)}));Es(yH).omit({id:!0,createdAt:!0}).extend({dalalName:st.string().min(1,"Dalal name is required"),lotNumber:st.string().min(1,"Lot number is required"),bidPrice:st.string().min(1,"Bid price is required")});function uI(e={}){const{language:t="en-US",continuous:n=!1,interimResults:r=!1,maxAlternatives:i=1}=e,[a,o]=N.useState(!1),[l,c]=N.useState(""),[d,f]=N.useState(0),[h,g]=N.useState(null),m=N.useRef(null),S=N.useRef(!1);N.useEffect(()=>{if(typeof window<"u"){const x=window.SpeechRecognition||window.webkitSpeechRecognition;S.current=!!x,S.current&&(m.current=new x)}},[]),N.useEffect(()=>{if(!m.current)return;const x=m.current;x.language=t,x.continuous=n,x.interimResults=r,x.maxAlternatives=i,x.onstart=()=>{o(!0),g(null)},x.onend=()=>{o(!1)},x.onresult=_=>{let k="",M=0;for(let L=_.resultIndex;L<_.results.length;L++){const O=_.results[L];(O.isFinal||r)&&(k+=O[0].transcript,M=O[0].confidence)}c(k),f(M)},x.onerror=_=>{g(new Error(_.error)),o(!1)},x.onnomatch=()=>{g(new Error("No speech was recognized"))},x.onspeechend=()=>{x.stop()}},[t,n,r,i]);const y=N.useCallback(()=>{if(!(!m.current||a))try{c(""),f(0),g(null),m.current.start()}catch(x){g(x instanceof Error?x:new Error("Failed to start recognition"))}},[a]),j=N.useCallback(()=>{if(!(!m.current||!a))try{m.current.stop()}catch(x){g(x instanceof Error?x:new Error("Failed to stop recognition"))}},[a]),v=N.useCallback(()=>{c(""),f(0),g(null)},[]);return{isSupported:S.current,isListening:a,transcript:l,confidence:d,error:h,startListening:y,stopListening:j,resetTranscript:v}}const At=N.forwardRef(({enableVoice:e=!0,voiceType:t,className:n,onChange:r,value:i,...a},o)=>{var T;const{language:l}=Mm(),[c,d]=N.useState(!1),[f,h]=N.useState(!1),{isSupported:g,isListening:m,startListening:S,stopListening:y,transcript:j,confidence:v,error:x}=uI({language:l==="hi"?"hi-IN":l==="kn"?"kn-IN":"en-IN",continuous:!1,interimResults:!1});N.useEffect(()=>{d(m)},[m]),N.useEffect(()=>{if(j&&v>.6){h(!0);let E=j.trim();const Z=t||a.type;if(Z==="number"||Z==="currency"?E=k(E,l):Z==="tel"?E=M(E):Z==="email"&&(E=L(E)),r){const C={target:{value:E,name:a.name,type:a.type}};r(C)}setTimeout(()=>{h(!1),y()},500)}},[j,v,t,a.type,a.name,l,r,y]);const _=E=>{E.preventDefault(),E.stopPropagation(),c?y():S()},k=(E,Z)=>{let C=E.toLowerCase();const P={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10",eleven:"11",twelve:"12",thirteen:"13",fourteen:"14",fifteen:"15",sixteen:"16",seventeen:"17",eighteen:"18",nineteen:"19",twenty:"20",thirty:"30",forty:"40",fifty:"50",sixty:"60",seventy:"70",eighty:"80",ninety:"90",hundred:"100"};return Z==="hi"?Object.entries({शून्य:"0",एक:"1",दो:"2",तीन:"3",चार:"4",पांच:"5",छह:"6",सात:"7",आठ:"8",नौ:"9",दस:"10",ग्यारह:"11",बारह:"12",तेरह:"13",चौदह:"14",पंद्रह:"15",सोलह:"16",सत्रह:"17",अठारह:"18",उन्नीस:"19",बीस:"20",तीस:"30",चालीस:"40",पचास:"50",साठ:"60",सत्तर:"70",अस्सी:"80",नब्बे:"90",सौ:"100"}).forEach(([I,V])=>{C=C.replace(new RegExp(I,"g"),V)}):Z==="kn"&&Object.entries({ಸೊನ್ನೆ:"0",ಒಂದು:"1",ಎರಡು:"2",ಮೂರು:"3",ನಾಲ್ಕು:"4",ಐದು:"5",ಆರು:"6",ಏಳು:"7",ಎಂಟು:"8",ಒಂಬತ್ತು:"9",ಹತ್ತು:"10",ಹನ್ನೊಂದು:"11",ಹನ್ನೆರಡು:"12",ಹದಿಮೂರು:"13",ಹದಿನಾಲ್ಕು:"14",ಹದಿನೈದು:"15",ಹದಿನಾರು:"16",ಹದಿನೇಳು:"17",ಹದಿನೆಂಟು:"18",ಹತ್ತೊಂಬತ್ತು:"19",ಇಪ್ಪತ್ತು:"20",ಮೂವತ್ತು:"30",ನಲವತ್ತು:"40",ಐವತ್ತು:"50",ಅರವತ್ತು:"60",ಎಪ್ಪತ್ತು:"70",ಎಂಬತ್ತು:"80",ತೊಂಬತ್ತು:"90",ನೂರು:"100"}).forEach(([I,V])=>{C=C.replace(new RegExp(I,"g"),V)}),Object.entries(P).forEach(([G,I])=>{C=C.replace(new RegExp(G,"g"),I)}),C=C.replace(/point|dot|decimal/gi,"."),C=C.replace(/[^\d.]/g,""),C},M=E=>E.replace(/[^\d]/g,""),L=E=>E.toLowerCase().replace(/\s+/g,"").replace(/at/gi,"@").replace(/dot/gi,"."),O=e&&!a.disabled;return s.jsxs("div",{className:"relative w-full",children:[s.jsx(Ze,{ref:o,...a,value:i,onChange:r,className:rt(O&&"pr-12",c&&"ring-2 ring-red-200 border-red-300",f&&"bg-green-50",n)}),O&&s.jsx(Le,{type:"button",variant:"ghost",size:"sm",onClick:_,disabled:!g,className:rt("absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 p-0","hover:bg-gray-100 focus:ring-2 focus:ring-gray-200","transition-all duration-200 ease-in-out",c&&"bg-red-100 text-red-600 hover:bg-red-200",f&&"bg-green-100 text-green-600",!g&&"opacity-50 cursor-not-allowed"),children:f?s.jsx(cu,{className:"h-4 w-4 animate-spin"}):c?s.jsx(wk,{className:"h-4 w-4"}):s.jsx(Nk,{className:"h-4 w-4"})}),!O&&s.jsxs("div",{className:"absolute -bottom-6 left-0 text-xs text-gray-500",children:["Voice disabled: enableVoice=",e==null?void 0:e.toString(),", disabled=",(T=a.disabled)==null?void 0:T.toString()]}),c&&s.jsx("div",{className:"absolute -bottom-5 left-0 text-xs text-red-600 font-medium",children:"🎤 Listening..."}),f&&s.jsx("div",{className:"absolute -bottom-5 left-0 text-xs text-green-600 font-medium",children:"✓ Processing..."}),x&&s.jsx("div",{className:"absolute -bottom-5 left-0 text-xs text-red-500",children:"⚠ Voice error"})]})});At.displayName="UnifiedInput";const bH=st.object({username:st.string().min(1,"Username is required"),password:st.string().min(1,"Password is required")}),wH=fH.extend({confirmPassword:st.string()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function NH(){const{user:e,loginMutation:t,registerMutation:n}=Oo(),[,r]=Lm(),[i,a]=N.useState("login"),o=Vl({resolver:Wl(bH),defaultValues:{username:"",password:""}}),l=Vl({resolver:Wl(wH),defaultValues:{username:"",password:"",confirmPassword:"",name:"",email:"",role:"staff"}});if(e)return setTimeout(()=>r("/"),0),null;const c=f=>{t.mutate(f)},d=f=>{const{confirmPassword:h,...g}=f;n.mutate(g)};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-green-50 flex flex-col lg:flex-row",children:[s.jsx("div",{className:"flex-1 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-center mb-8",children:[s.jsx(jk,{className:"h-12 w-12 text-secondary mr-3"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"APMC Trader"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Agricultural Market Management"})]})]}),s.jsxs(Bo,{value:i,onValueChange:a,className:"w-full",children:[s.jsxs(eo,{className:"grid w-full grid-cols-2",children:[s.jsx(wn,{value:"login",children:"Login"}),s.jsx(wn,{value:"register",children:"Register"})]}),s.jsx(Nn,{value:"login",children:s.jsxs(Re,{children:[s.jsx(it,{children:s.jsx(ct,{children:"Sign In"})}),s.jsxs(qe,{children:[t.error&&s.jsxs("div",{className:"mb-4 p-3 sm:p-4 bg-red-50 border border-red-200 rounded-md shadow-sm",children:[s.jsx("p",{className:"text-sm sm:text-base text-red-800 font-medium leading-relaxed",children:t.error.message}),t.error.message.includes("deactivated")&&s.jsx("p",{className:"text-xs sm:text-sm text-red-600 mt-2 leading-relaxed",children:"💡 Contact your organization admin to reactivate your account access."})]}),s.jsxs("form",{onSubmit:o.handleSubmit(c),className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"login-username",children:"Username"}),s.jsx(At,{...o.register("username"),placeholder:"Enter your username",type:"text",voiceType:"text",required:!0}),o.formState.errors.username&&s.jsx("p",{className:"text-sm text-destructive",children:o.formState.errors.username.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"login-password",children:"Password"}),s.jsx(At,{...o.register("password"),type:"password",placeholder:"Enter your password",voiceType:"text",required:!0}),o.formState.errors.password&&s.jsx("p",{className:"text-sm text-destructive",children:o.formState.errors.password.message})]}),s.jsx(Le,{type:"submit",className:"w-full",disabled:t.isPending,children:t.isPending?"Signing In...":"Sign In"})]})]})]})}),s.jsx(Nn,{value:"register",children:s.jsxs(Re,{children:[s.jsx(it,{children:s.jsx(ct,{children:"Create Account"})}),s.jsx(qe,{children:s.jsxs("form",{onSubmit:l.handleSubmit(d),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"register-name",children:"Full Name"}),s.jsx(At,{...l.register("name"),placeholder:"Your full name",type:"text",voiceType:"text",required:!0}),l.formState.errors.name&&s.jsx("p",{className:"text-sm text-destructive",children:l.formState.errors.name.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"register-username",children:"Username"}),s.jsx(At,{...l.register("username"),placeholder:"Choose username",type:"text",voiceType:"text",required:!0}),l.formState.errors.username&&s.jsx("p",{className:"text-sm text-destructive",children:l.formState.errors.username.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"register-email",children:"Email"}),s.jsx(At,{...l.register("email"),type:"email",placeholder:"your.email@example.com",voiceType:"text"}),l.formState.errors.email&&s.jsx("p",{className:"text-sm text-destructive",children:l.formState.errors.email.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"register-password",children:"Password"}),s.jsx(At,{...l.register("password"),type:"password",placeholder:"Create password",voiceType:"text",required:!0}),l.formState.errors.password&&s.jsx("p",{className:"text-sm text-destructive",children:l.formState.errors.password.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"register-confirm",children:"Confirm Password"}),s.jsx(At,{...l.register("confirmPassword"),type:"password",placeholder:"Confirm password",voiceType:"text",required:!0}),l.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-destructive",children:l.formState.errors.confirmPassword.message})]}),s.jsx(Le,{type:"submit",className:"w-full",disabled:n.isPending,children:n.isPending?"Creating Account...":"Create Account"})]})})]})})]})]})}),s.jsx("div",{className:"hidden lg:flex flex-1 bg-gradient-to-br from-primary to-secondary p-8 text-white items-center justify-center",children:s.jsxs("div",{className:"max-w-lg text-center",children:[s.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Modern APMC Management System"}),s.jsx("p",{className:"text-lg mb-8 opacity-90",children:"Streamline your agricultural market operations with our comprehensive farmer management, lot tracking, and bag entry system."}),s.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:s.jsx(Fi,{className:"h-6 w-6"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"font-semibold",children:"Farmer Management"}),s.jsx("p",{className:"text-sm opacity-80",children:"Complete farmer profiles with bank details"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:s.jsx(dh,{className:"h-6 w-6"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"font-semibold",children:"Real-time Tracking"}),s.jsx("p",{className:"text-sm opacity-80",children:"Live lot and bag entry with auto-save"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:s.jsx($y,{className:"h-6 w-6"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"font-semibold",children:"Multi-language Support"}),s.jsx("p",{className:"text-sm opacity-80",children:"English, Hindi, and Kannada support"})]})]})]})]})})]})}function jH({farmer:e,onSuccess:t}){const{user:n}=Oo(),{toast:r}=Qr(),{t:i}=Mm(),a=Vl({resolver:Wl(hH),defaultValues:{name:"",mobile:"",place:"",bankAccountNumber:"",ifscCode:"",bankName:"",accountHolderName:"",tenantId:(n==null?void 0:n.tenantId)||0,...e}});N.useEffect(()=>{e&&a.reset(e)},[e,a]);const o=fn({mutationFn:async c=>e?an("PUT",`/api/farmers/${e.id}`,c):an("POST","/api/farmers",c),onSuccess:()=>{Tn.invalidateQueries({queryKey:["/api/farmers"]}),r({title:i("farmer.success"),description:i(e?"farmer.updated":"farmer.created")}),e||a.reset(),t==null||t()},onError:c=>{r({title:i("error.title"),description:c.message||i("error.generic"),variant:"destructive"})}}),l=c=>{o.mutate(c)};return s.jsxs("form",{onSubmit:a.handleSubmit(l),className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ae,{htmlFor:"name",children:[i("farmer.name")," *"]}),s.jsx(At,{...a.register("name"),placeholder:i("farmer.namePlaceholder"),type:"text",voiceType:"text",required:!0}),a.formState.errors.name&&s.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.name.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ae,{htmlFor:"mobile",children:[i("farmer.mobile")," *"]}),s.jsx(At,{...a.register("mobile"),placeholder:i("farmer.mobilePlaceholder"),type:"tel",voiceType:"tel",required:!0}),a.formState.errors.mobile&&s.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.mobile.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"place",children:i("farmer.place")}),s.jsx(At,{...a.register("place"),placeholder:i("farmer.placePlaceholder"),type:"text",voiceType:"text"}),a.formState.errors.place&&s.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.place.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"bankAccountNumber",children:i("farmer.bankAccount")}),s.jsx(At,{...a.register("bankAccountNumber"),placeholder:i("farmer.bankAccountPlaceholder"),type:"text",voiceType:"number"}),a.formState.errors.bankAccountNumber&&s.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.bankAccountNumber.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"ifscCode",children:i("farmer.ifscCode")}),s.jsx(At,{...a.register("ifscCode"),placeholder:i("farmer.ifscCodePlaceholder"),type:"text",voiceType:"text"}),a.formState.errors.ifscCode&&s.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.ifscCode.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"bankName",children:i("farmer.bankName")}),s.jsx(At,{...a.register("bankName"),placeholder:i("farmer.bankNamePlaceholder"),type:"text",voiceType:"text"}),a.formState.errors.bankName&&s.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.bankName.message})]}),s.jsxs("div",{className:"space-y-2 md:col-span-2",children:[s.jsx(Ae,{htmlFor:"accountHolderName",children:i("farmer.accountHolderName")}),s.jsx(At,{...a.register("accountHolderName"),placeholder:i("farmer.accountHolderNamePlaceholder"),type:"text",voiceType:"text"}),a.formState.errors.accountHolderName&&s.jsx("p",{className:"text-sm text-destructive",children:a.formState.errors.accountHolderName.message})]})]}),s.jsx(Le,{type:"submit",disabled:o.isPending,className:"w-full",children:o.isPending?i("farmer.saving"):i(e?"farmer.update":"farmer.create")})]})}const ds=o5,Xa=l5,SH=c5,fI=N.forwardRef(({className:e,...t},n)=>s.jsx(Bm,{ref:n,className:rt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));fI.displayName=Bm.displayName;const Vr=N.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(SH,{children:[s.jsx(fI,{}),s.jsxs(zm,{ref:r,className:rt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(w0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(o0,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Vr.displayName=zm.displayName;const Wr=({className:e,...t})=>s.jsx("div",{className:rt("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Wr.displayName="DialogHeader";const Hr=N.forwardRef(({className:e,...t},n)=>s.jsx($m,{ref:n,className:rt("text-lg font-semibold leading-none tracking-tight",e),...t}));Hr.displayName=$m.displayName;const j5=N.forwardRef(({className:e,...t},n)=>s.jsx(qm,{ref:n,className:rt("text-sm text-muted-foreground",e),...t}));j5.displayName=qm.displayName;function Bi(){return s.jsx(_s,{href:"/",children:s.jsxs(Le,{variant:"outline",size:"sm",className:"mb-4",children:[s.jsx(bk,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})})}function _H(){const[e,t]=N.useState(""),[n,r]=N.useState(!1),[i,a]=N.useState(null),{toast:o}=Qr(),{data:l,isLoading:c}=kt({queryKey:["/api/farmers",e],queryFn:async()=>{const m=e?`/api/farmers?search=${encodeURIComponent(e)}`:"/api/farmers",S=await fetch(m,{credentials:"include"});if(!S.ok)throw new Error("Failed to fetch farmers");return S.json()}}),d=fn({mutationFn:async m=>{await an("DELETE",`/api/farmers/${m}`)},onSuccess:()=>{Tn.invalidateQueries({queryKey:["/api/farmers"]}),o({title:"Success",description:"Farmer deleted successfully"})},onError:m=>{o({title:"Error",description:m.message,variant:"destructive"})}}),f=m=>{a(m),r(!0)},h=m=>{confirm("Are you sure you want to delete this farmer?")&&d.mutate(m)},g=()=>{r(!1),a(null)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-8",children:[s.jsx(Bi,{}),s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Farmer Management"}),s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between sm:gap-4",children:[s.jsxs("div",{className:"relative w-full sm:w-auto",children:[s.jsx(zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ze,{type:"text",placeholder:"Search farmers by name, mobile, or place...",value:e,onChange:m=>t(m.target.value),className:"pl-10 w-full sm:w-80 min-h-[44px]"})]}),s.jsxs(ds,{open:n,onOpenChange:r,children:[s.jsx(Xa,{asChild:!0,children:s.jsxs(Le,{className:"bg-primary hover:bg-primary/90 w-full sm:w-auto min-h-[44px]",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Add Farmer"]})}),s.jsxs(Vr,{className:"w-[95vw] max-w-2xl max-h-[95vh] overflow-y-auto",children:[s.jsx(Wr,{children:s.jsx(Hr,{children:i?"Edit Farmer":"Add New Farmer"})}),s.jsx(jH,{farmer:i,onSuccess:g})]})]})]})]}),c?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6",children:[...Array(6)].map((m,S)=>s.jsxs(Re,{className:"animate-pulse",children:[s.jsxs(it,{className:"pb-2 sm:pb-3",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]}),s.jsx(qe,{className:"pt-0",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-3 bg-gray-200 rounded"}),s.jsx("div",{className:"h-3 bg-gray-200 rounded w-5/6"})]})})]},S))}):l&&l.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-6",children:l.map(m=>s.jsxs(Re,{className:"hover:shadow-md transition-shadow",children:[s.jsxs(it,{className:"pb-2 sm:pb-3",children:[s.jsx(ct,{className:"text-base sm:text-lg",children:m.name}),s.jsx("p",{className:"text-sm text-gray-600",children:m.place})]}),s.jsxs(qe,{className:"pt-0",children:[s.jsxs("div",{className:"space-y-1.5 sm:space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Mobile:"}),s.jsx("span",{className:"font-medium",children:m.mobile})]}),m.bankName&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Bank:"}),s.jsx("span",{className:"font-medium truncate ml-2",children:m.bankName})]}),m.nameAsInBank&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Bank Name:"}),s.jsx("span",{className:"font-medium truncate ml-2",children:m.nameAsInBank})]}),m.bankAccountNumber&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-500",children:"Account:"}),s.jsxs("span",{className:"font-medium",children:["****",m.bankAccountNumber.slice(-4)]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-1 sm:space-x-2 mt-3 sm:mt-4 pt-3 sm:pt-4 border-t",children:[s.jsxs(Le,{variant:"ghost",size:"sm",onClick:()=>f(m),className:"text-primary hover:text-primary/80 min-h-[36px] px-2 sm:px-3",children:[s.jsx(em,{className:"h-4 w-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),s.jsxs(Le,{variant:"ghost",size:"sm",onClick:()=>h(m.id),className:"text-destructive hover:text-destructive/80 min-h-[36px] px-2 sm:px-3",disabled:d.isPending,children:[s.jsx(Oc,{className:"h-4 w-4 sm:mr-1"}),s.jsx("span",{className:"hidden sm:inline",children:"Delete"})]})]})]})]},m.id))}):s.jsx(Re,{className:"text-center py-12",children:s.jsx(qe,{children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(qr,{className:"h-8 w-8 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No farmers found"}),s.jsx("p",{className:"text-gray-500 mt-1",children:e?"Try adjusting your search terms":"Get started by adding your first farmer"})]}),!e&&s.jsxs(Le,{onClick:()=>r(!0),className:"bg-primary hover:bg-primary/90",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Add First Farmer"]})]})})})]})]})}function CH({onSuccess:e}){const{user:t}=Oo(),{toast:n}=Qr(),{t:r}=Mm(),[i,a]=N.useState(""),[o,l]=N.useState(!1),[c,d]=N.useState(null),f=N.useRef(null),h=N.useRef(null),g=Vl({resolver:Wl(mH.omit({lotNumber:!0,tenantId:!0,lotPrice:!0}).extend({farmerId:st.number().min(1,"Please select a farmer"),varietyGrade:st.string().optional()})),defaultValues:{farmerId:0,numberOfBags:1,vehicleRent:"0",advance:"0",varietyGrade:"",unloadHamali:"0"}}),[m,S]=N.useState("");N.useEffect(()=>{const L=setTimeout(()=>{S(i)},300);return()=>clearTimeout(L)},[i]),N.useEffect(()=>{const L=O=>{h.current&&!h.current.contains(O.target)&&f.current&&!f.current.contains(O.target)&&l(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const{data:y,isLoading:j}=kt({queryKey:["/api/farmers",m],queryFn:async()=>{const L=m&&m.trim()?`/api/farmers?search=${encodeURIComponent(m.trim())}`:"/api/farmers",O=await fetch(L,{credentials:"include"});if(!O.ok)throw new Error("Failed to fetch farmers");return O.json()},staleTime:3e4,enabled:m.length===0||m.length>=2}),v=L=>{d(L),a(L.name),l(!1),g.setValue("farmerId",L.id)},x=L=>{const O=L.target.value;a(O),l(O.length>=2),O!==(c==null?void 0:c.name)&&(d(null),g.setValue("farmerId",void 0))},_=fn({mutationFn:async L=>(console.log("Creating lot with data:",L),(await an("POST","/api/lots",{...L,tenantId:t==null?void 0:t.tenantId})).json()),onSuccess:()=>{Tn.invalidateQueries({queryKey:["/api/lots"]}),Tn.invalidateQueries({queryKey:["/api/dashboard/stats"]}),n({title:r("messages.success"),description:r("lot.created")}),g.reset(),d(null),a(""),l(!1),e==null||e()},onError:L=>{console.error("Lot creation error:",L),n({title:r("messages.error"),description:L.message,variant:"destructive"})}}),k=L=>{if(!L.farmerId||L.farmerId===0){n({title:r("messages.error"),description:"Please select a farmer",variant:"destructive"});return}_.mutate(L)},M=[{value:"premium",label:"Premium Grade"},{value:"super",label:"Super Grade"},{value:"grade-a",label:"Grade A"},{value:"grade-b",label:"Grade B"},{value:"grade-c",label:"Grade C"},{value:"export-quality",label:"Export Quality"},{value:"local-market",label:"Local Market"},{value:"machine-clean",label:"Machine Clean"},{value:"hand-picked",label:"Hand Picked"},{value:"mixed-grade",label:"Mixed Grade"}];return s.jsxs("form",{onSubmit:g.handleSubmit(k),className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ae,{htmlFor:"farmerId",children:[r("lot.farmer")," *"]}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ze,{ref:f,placeholder:"Search farmers by name, mobile, or place...",value:i,onChange:x,onFocus:()=>i.length>=2&&l(!0),className:`pl-10 pr-10 ${c?"border-green-500":""}`}),c&&s.jsx(dx,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500 h-4 w-4"})]}),o&&i.length>=2&&s.jsx("div",{ref:h,className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:j?s.jsxs("div",{className:"p-3 text-center text-gray-500",children:[s.jsx("div",{className:"animate-spin inline-block w-4 h-4 border-2 border-gray-300 border-t-blue-600 rounded-full mr-2"}),"Loading farmers..."]}):y&&y.length>0?y.map(L=>s.jsx("div",{onClick:()=>v(L),className:"p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:L.name}),s.jsxs("div",{className:"text-sm text-gray-500",children:[L.mobile," • ",L.place]}),L.bankName&&s.jsxs("div",{className:"text-xs text-gray-400",children:["Bank: ",L.bankName]})]}),(c==null?void 0:c.id)===L.id&&s.jsx(dx,{className:"h-4 w-4 text-green-500"})]})},L.id)):s.jsxs("div",{className:"p-3 text-center text-gray-500",children:['No farmers found for "',i,'"']})})]}),c&&s.jsxs("div",{className:"p-2 bg-green-50 border border-green-200 rounded text-sm",children:[s.jsx("span",{className:"text-green-800 font-medium",children:"Selected: "}),s.jsxs("span",{className:"text-green-700",children:[c.name," (",c.mobile,")"]})]}),g.formState.errors.farmerId&&s.jsx("p",{className:"text-sm text-destructive",children:"Please select a farmer from the dropdown"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(Ae,{htmlFor:"numberOfBags",children:[r("lot.numberOfBags")," *"]}),s.jsx(At,{...g.register("numberOfBags",{valueAsNumber:!0}),type:"number",voiceType:"number",min:"1",placeholder:r("lot.numberOfBagsPlaceholder"),required:!0}),g.formState.errors.numberOfBags&&s.jsx("p",{className:"text-sm text-destructive",children:g.formState.errors.numberOfBags.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"vehicleRent",children:r("lot.vehicleRent")}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 z-10",children:"₹"}),s.jsx(At,{...g.register("vehicleRent"),type:"number",voiceType:"currency",step:"0.01",min:"0",placeholder:"0.00",className:"pl-8"})]}),g.formState.errors.vehicleRent&&s.jsx("p",{className:"text-sm text-destructive",children:g.formState.errors.vehicleRent.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"advance",children:r("lot.advance")}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 z-10",children:"₹"}),s.jsx(At,{...g.register("advance"),type:"number",voiceType:"currency",step:"0.01",min:"0",placeholder:"0.00",className:"pl-8"})]}),g.formState.errors.advance&&s.jsx("p",{className:"text-sm text-destructive",children:g.formState.errors.advance.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"varietyGrade",children:r("lot.varietyGrade")}),s.jsxs(rr,{value:g.watch("varietyGrade")||"",onValueChange:L=>g.setValue("varietyGrade",L),children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:r("lot.selectVariety")})}),s.jsx(Hn,{children:M.map(L=>s.jsx(Tt,{value:L.value,children:L.label},L.value))})]}),g.formState.errors.varietyGrade&&s.jsx("p",{className:"text-sm text-destructive",children:g.formState.errors.varietyGrade.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"unloadHamali",children:r("lot.unloadHamali")}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500 z-10",children:"₹"}),s.jsx(At,{...g.register("unloadHamali"),type:"number",voiceType:"currency",step:"0.01",min:"0",placeholder:"0.00",className:"pl-8"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:r("lot.unloadHamaliNote")}),g.formState.errors.unloadHamali&&s.jsx("p",{className:"text-sm text-destructive",children:g.formState.errors.unloadHamali.message})]})]}),s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:r("lot.summary")}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm text-blue-800",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium",children:[r("lot.bags"),":"]}),s.jsx("span",{className:"ml-1",children:g.watch("numberOfBags")||0})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium",children:[r("lot.vehicleRent"),":"]}),s.jsxs("span",{className:"ml-1",children:["₹",g.watch("vehicleRent")||"0"]})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium",children:[r("lot.advance"),":"]}),s.jsxs("span",{className:"ml-1",children:["₹",g.watch("advance")||"0"]})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium",children:[r("lot.hamali"),":"]}),s.jsxs("span",{className:"ml-1",children:["₹",g.watch("unloadHamali")||"0"]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx(Le,{type:"button",variant:"outline",onClick:()=>e==null?void 0:e(),children:r("common.cancel")}),s.jsx(Le,{type:"submit",disabled:_.isPending,className:"bg-primary hover:bg-primary/90",children:_.isPending?r("common.creating"):r("lot.create")})]})]})}function AH(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768}async function kH(e){if(AH()){Pj(e,"Trader_Lots_Report");return}const n=window.open("","_blank","width=800,height=600");if(!n){Pj(e,"Trader_Lots_Report");return}const r=TH(e);n.document.write(r),n.document.close()}function Pj(e,t){const n=PH(e),r=new Blob([n],{type:"text/html;charset=utf-8"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=`${t}_${new Date().toISOString().split("T")[0]}.html`,a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}function PH(e){return`
    <!DOCTYPE html>
    <html lang="en">
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Trader Lots Report</title>
      <style>
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        body {
          font-family: Arial, sans-serif;
          font-size: 14px;
          line-height: 1.4;
          color: #000;
          background: white;
          padding: 20px;
        }
        
        .trader-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #000;
          padding: 20px;
        }
        
        .header {
          text-align: center;
          margin-bottom: 30px;
          border-bottom: 2px solid #000;
          padding-bottom: 15px;
        }
        
        .header h1 {
          font-size: 20px;
          font-weight: bold;
          margin-bottom: 5px;
        }
        
        .header h2 {
          font-size: 16px;
          font-weight: normal;
        }
        
        .details-section {
          margin-bottom: 30px;
        }
        
        .detail-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 40px;
          margin-bottom: 15px;
        }
        
        .detail-item {
          display: flex;
          align-items: center;
        }
        
        .detail-item strong {
          min-width: 120px;
          margin-right: 10px;
        }
        
        .underline {
          border-bottom: 1px solid #000;
          min-width: 150px;
          padding-bottom: 2px;
        }
        
        .lots-table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 30px;
        }
        
        .lots-table th,
        .lots-table td {
          border: 1px solid #000;
          padding: 8px;
          text-align: left;
        }
        
        .lots-table th {
          background-color: #f5f5f5;
          font-weight: bold;
        }
        
        .total-row {
          font-weight: bold;
          background-color: #f9f9f9;
        }
        
        .signatures-section {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 40px;
          margin-top: 60px;
        }
        
        .signature-box {
          text-align: center;
        }
        
        .signature-line {
          border-bottom: 1px solid #000;
          height: 60px;
          margin-bottom: 10px;
        }
        
        .mobile-controls {
          margin-bottom: 20px;
          text-align: center;
          padding: 15px;
          background-color: #f8f9fa;
          border-radius: 8px;
        }
        
        .mobile-btn {
          background: #007bff;
          color: white;
          border: none;
          padding: 12px 20px;
          border-radius: 5px;
          cursor: pointer;
          font-size: 14px;
          margin: 0 5px;
          min-width: 120px;
        }
        
        .mobile-btn:hover {
          background: #0056b3;
        }
        
        .mobile-btn.secondary {
          background: #6c757d;
        }
        
        .mobile-btn.secondary:hover {
          background: #545b62;
        }
        
        @media print {
          body { margin: 0; padding: 10px; }
          .trader-container { border: 2px solid #000; }
          .mobile-controls { display: none; }
        }
        
        @media (max-width: 768px) {
          .detail-row {
            grid-template-columns: 1fr;
            gap: 15px;
          }
          
          .signatures-section {
            grid-template-columns: 1fr;
            gap: 30px;
          }
          
          .lots-table {
            font-size: 12px;
          }
          
          .lots-table th,
          .lots-table td {
            padding: 6px;
          }
          
          .trader-container {
            padding: 15px;
          }
          
          body {
            padding: 10px;
          }
        }
      </style>
    </head>
    <body>
      <div class="mobile-controls">
        <button class="mobile-btn" onclick="window.print()">Print</button>
        <button class="mobile-btn secondary" onclick="window.print()">Save as PDF</button>
      </div>
      
      <div class="trader-container">
        <div class="header">
          <h1>MAHANTESHWAR TRADERS BYADAGI</h1>
          <h2>${e.traderName} - Trader Code: ${e.traderCode}</h2>
        </div>
        
        <div class="details-section">
          <div class="detail-row">
            <div class="detail-item">
              <strong>Trader Code:</strong>
              <span class="underline">${e.traderCode}</span>
            </div>
            <div class="detail-item">
              <strong>Mobile:</strong>
              <span class="underline">${e.traderMobile}</span>
            </div>
          </div>
          <div class="detail-row">
            <div class="detail-item">
              <strong>Date:</strong>
              <span class="underline">${e.date}</span>
            </div>
            <div class="detail-item">
              <strong>Place:</strong>
              <span class="underline">${e.place}</span>
            </div>
          </div>
        </div>
        
        <table class="lots-table">
          <thead>
            <tr>
              <th>Lot Number</th>
              <th>Farmer Name</th>
              <th>Place</th>
              <th>Number of Bags</th>
            </tr>
          </thead>
          <tbody>
            ${e.lots.map(t=>`
              <tr>
                <td>${t.lotNumber}</td>
                <td>${t.farmerName}</td>
                <td>${t.place}</td>
                <td>${t.numberOfBags}</td>
              </tr>
            `).join("")}
            <tr class="total-row">
              <td colspan="3"><strong>Total</strong></td>
              <td><strong>${e.lots.reduce((t,n)=>t+n.numberOfBags,0)}</strong></td>
            </tr>
          </tbody>
        </table>
        
        <div class="signatures-section">
          <div class="signature-box">
            <div class="signature-line"></div>
            <div>Trader Signature</div>
          </div>
          <div class="signature-box">
            <div class="signature-line"></div>
            <div>APMC Officer Signature</div>
          </div>
        </div>
      </div>
    </body>
    </html>
  `}function TH(e){return`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Trader Receipt - ${e.date}</title>
      <style>
        body {
          font-family: Arial, sans-serif;
          margin: 0;
          padding: 20px;
          background: white;
        }
        
        .trader-container {
          max-width: 800px;
          margin: 0 auto;
          border: 2px solid #000;
          padding: 20px;
        }
        
        .header {
          text-align: center;
          margin-bottom: 30px;
        }
        
        .header h1 {
          font-size: 24px;
          font-weight: bold;
          margin: 0 0 10px 0;
        }
        
        .header h2 {
          font-size: 18px;
          margin: 0;
        }
        
        .details-section {
          margin-bottom: 30px;
        }
        
        .detail-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 40px;
          margin-bottom: 15px;
        }
        
        .detail-item {
          display: flex;
          align-items: center;
        }
        
        .detail-item strong {
          min-width: 120px;
          margin-right: 10px;
        }
        
        .detail-item .underline {
          border-bottom: 1px solid #000;
          min-width: 150px;
          padding-bottom: 2px;
        }
        
        .lots-table {
          width: 100%;
          border-collapse: collapse;
          margin-bottom: 30px;
        }
        
        .lots-table th,
        .lots-table td {
          border: 1px solid #000;
          padding: 8px;
          text-align: left;
        }
        
        .lots-table th {
          background-color: #f5f5f5;
          font-weight: bold;
        }
        
        .total-row {
          font-weight: bold;
          background-color: #f9f9f9;
        }
        
        .signatures-section {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 40px;
          margin-top: 60px;
        }
        
        .signature-box {
          text-align: center;
        }
        
        .signature-line {
          border-bottom: 1px solid #000;
          height: 60px;
          margin-bottom: 10px;
        }
        
        @media print {
          body { margin: 0; padding: 10px; }
          .trader-container { border: 2px solid #000; }
        }
      </style>
    </head>
    <body>
      <div class="trader-container">
        <div class="header">
          <h1>MAHANTESHWAR TRADERS BYADAGI</h1>
          <h2>${e.traderName} - Trader Code: ${e.traderCode}</h2>
        </div>
        
        <div class="details-section">
          <div class="detail-row">
            <div class="detail-item">
              <strong>Trader Code:</strong>
              <span class="underline">${e.traderCode}</span>
            </div>
            <div class="detail-item">
              <strong>Mobile:</strong>
              <span class="underline">${e.traderMobile}</span>
            </div>
          </div>
          <div class="detail-row">
            <div class="detail-item">
              <strong>Date:</strong>
              <span class="underline">${e.date}</span>
            </div>
            <div class="detail-item">
              <strong>Place:</strong>
              <span class="underline">${e.place}</span>
            </div>
          </div>
        </div>
        
        <table class="lots-table">
          <thead>
            <tr>
              <th>Lot No.</th>
              <th>Farmer Name</th>
              <th>Place</th>
              <th>No. of Bags</th>
            </tr>
          </thead>
          <tbody>
            ${e.lots.map(t=>`
              <tr>
                <td>${t.lotNumber}</td>
                <td>${t.farmerName}</td>
                <td>${t.place}</td>
                <td>${t.numberOfBags}</td>
              </tr>
            `).join("")}
            <tr class="total-row">
              <td colspan="3" style="text-align: right;">Total No. of Bags:</td>
              <td>${e.lots.reduce((t,n)=>t+n.numberOfBags,0)}</td>
            </tr>
          </tbody>
        </table>
        
        <div class="signatures-section">
          <div class="signature-box">
            <div class="signature-line"></div>
            <p>Trader Signature</p>
          </div>
          <div class="signature-box">
            <div class="signature-line"></div>
            <p>APMC Official</p>
          </div>
        </div>
      </div>
      
      <script>
        window.onload = function() {
          window.print();
          window.onafterprint = function() {
            window.close();
          };
        };
      <\/script>
    </body>
    </html>
  `}function LH(e){return e.toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"/")}const EH=e=>{switch(e){case"active":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};function IH(){const[e,t]=N.useState(""),[n,r]=N.useState(new Date().toISOString().split("T")[0]),[i,a]=N.useState(!1),[o,l]=N.useState(!1),[c,d]=N.useState(""),[f,h]=N.useState(""),[g,m]=N.useState("all"),{toast:S}=Qr(),{data:y,isLoading:j}=kt({queryKey:["/api/lots",e,n],queryFn:async()=>{const L=new URLSearchParams;e&&L.append("search",e),n&&L.append("date",n);const O=`/api/lots${L.toString()?`?${L.toString()}`:""}`,T=await fetch(O,{credentials:"include"});if(!T.ok)throw new Error("Failed to fetch lots");return T.json()}}),v=y||[],{data:x}=kt({queryKey:["/api/tenant"],queryFn:async()=>{const L=await fetch("/api/tenant",{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch tenant info");return L.json()}}),_=fn({mutationFn:async L=>await an("PUT",`/api/lots/${L}`,{status:"completed"}),onSuccess:()=>{Tn.invalidateQueries({queryKey:["/api/lots"]}),S({title:"Success",description:"Lot marked as completed and ready for billing"})},onError:L=>{S({title:"Error",description:L.message,variant:"destructive"})}}),k=L=>{_.mutate(L)},M=async()=>{if(!y||!x){S({title:"Error",description:"Unable to print - missing data",variant:"destructive"});return}let L=y||[];g==="active"?L=L.filter(E=>E.status==="active"):g==="completed"&&(L=L.filter(E=>E.status==="completed")),(c||f)&&(L=L.filter(E=>{const Z=new Date(E.createdAt||Date.now()).toISOString().split("T")[0],C=!c||Z>=c,P=!f||Z<=f;return C&&P}));const O=[...L].sort((E,Z)=>{const C=parseInt(E.lotNumber.replace(/\D/g,""),10)||0,P=parseInt(Z.lotNumber.replace(/\D/g,""),10)||0;return C-P}),T={place:x.place||x.name,traderName:x.name,traderMobile:x.mobileNumber||"N/A",traderCode:x.apmcCode,traderAddress:`${x.address||x.name} - Trader Code: ${x.apmcCode}`,date:LH(new Date),lots:O.map(E=>({lotNumber:E.lotNumber,farmerName:E.farmer.name,place:E.farmer.place,numberOfBags:E.numberOfBags}))};try{await kH(T),S({title:"Success",description:`${g} lots printed successfully`})}catch(E){S({title:"Error",description:E.message,variant:"destructive"})}l(!1)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-8",children:[s.jsx(Bi,{}),s.jsxs("div",{className:"mb-6 sm:mb-8",children:[s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Daily Lots Management"}),s.jsx("div",{className:"mb-4 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-base sm:text-lg font-medium text-blue-900",children:"Daily Lots Overview"}),s.jsxs("p",{className:"text-sm text-blue-700",children:["Showing lots for ",new Date(n).toLocaleDateString("en-IN")," - Active: ",(v==null?void 0:v.filter(L=>L.status==="active").length)||0,", Completed: ",(v==null?void 0:v.filter(L=>L.status==="completed").length)||0]})]}),s.jsxs("div",{className:"text-xl sm:text-2xl font-bold text-blue-900 text-center sm:text-right",children:[(v==null?void 0:v.length)||0," Total Lots"]})]})}),s.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[s.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[s.jsx(zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ze,{type:"text",placeholder:"Search lots by lot number, farmer name...",value:e,onChange:L=>t(L.target.value),className:"pl-10 w-full sm:w-72 min-h-[44px]"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ao,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),s.jsx(Ze,{type:"date",value:n,onChange:L=>r(L.target.value),className:"w-full sm:w-40 min-h-[44px]"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(ds,{open:o,onOpenChange:l,children:[s.jsx(Xa,{asChild:!0,children:s.jsxs(Le,{variant:"outline",className:"bg-green-50 border-green-300 text-green-700 hover:bg-green-100 w-full sm:w-auto min-h-[44px]",children:[s.jsx(Hu,{className:"h-4 w-4 mr-2"}),"Print Lots Report"]})}),s.jsxs(Vr,{className:"max-w-md",children:[s.jsx(Wr,{children:s.jsx(Hr,{children:"Print Lots Report"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"printType",children:"Report Type"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"printType",value:"all",checked:g==="all",onChange:L=>m(L.target.value),className:"w-4 h-4"}),s.jsx("span",{children:"All Lots (Active + Completed)"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"printType",value:"active",checked:g==="active",onChange:L=>m(L.target.value),className:"w-4 h-4"}),s.jsx("span",{children:"Active Lots Only"})]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"radio",name:"printType",value:"completed",checked:g==="completed",onChange:L=>m(L.target.value),className:"w-4 h-4"}),s.jsx("span",{children:"Completed Lots Only"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"dateRange",children:"Date Range (Optional)"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"startDate",className:"text-sm",children:"Start Date"}),s.jsx(Ze,{id:"startDate",type:"date",value:c,onChange:L=>d(L.target.value),className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"endDate",className:"text-sm",children:"End Date"}),s.jsx(Ze,{id:"endDate",type:"date",value:f,onChange:L=>h(L.target.value),className:"mt-1"})]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsxs(Le,{onClick:M,className:"flex-1 bg-green-600 hover:bg-green-700",children:[s.jsx(Hu,{className:"h-4 w-4 mr-2"}),"Generate Report"]}),s.jsx(Le,{variant:"outline",onClick:()=>l(!1),className:"flex-1",children:"Cancel"})]})]})]})]}),s.jsxs(ds,{open:i,onOpenChange:a,children:[s.jsx(Xa,{asChild:!0,children:s.jsxs(Le,{className:"bg-primary hover:bg-primary/90",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Create New Lot"]})}),s.jsxs(Vr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Wr,{children:s.jsx(Hr,{children:"Create New Lot"})}),s.jsx(CH,{onSuccess:()=>a(!1)})]})]})]})]})]}),s.jsx(Re,{className:"bg-white shadow-sm border border-gray-200",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lot No."}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Farmer Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bags & Variety"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Financial Details"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Loading lots..."})}):v&&v.length>0?v.map(L=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.lotNumber})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:L.farmer.name}),s.jsx("div",{className:"text-gray-500",children:L.farmer.mobile}),s.jsx("div",{className:"text-gray-500",children:L.farmer.place})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[L.numberOfBags," bags"]}),s.jsx("div",{className:"text-gray-500",children:L.varietyGrade})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"text-gray-900",children:["Vehicle: ₹",L.vehicleRent]}),s.jsxs("div",{className:"text-gray-500",children:["Advance: ₹",L.advance]}),s.jsxs("div",{className:"text-gray-500",children:["Hamali: ₹",L.unloadHamali]}),L.lotPrice&&s.jsxs("div",{className:"font-medium text-gray-900",children:["Price: ₹",L.lotPrice]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(Mn,{className:EH(L.status),children:L.status})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(_s,{href:`/lots/${L.id}/bags`,children:s.jsxs(Le,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary/80",children:[s.jsx(Cs,{className:"h-4 w-4 mr-1"}),"Bag Entry"]})}),L.status==="active"&&L.lotPrice&&s.jsxs(Le,{variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-700",onClick:()=>k(L.id),disabled:_.isPending,children:[s.jsx(Rc,{className:"h-4 w-4 mr-1"}),"Complete"]})]})})]},L.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx(Cs,{className:"h-8 w-8 text-gray-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No active lots found"}),s.jsx("p",{className:"text-gray-500 mt-1",children:e?"No active lots match your search criteria":"All lots have been completed or no lots exist. Create a new lot to get started."})]}),!e&&s.jsxs(Le,{onClick:()=>a(!0),className:"bg-primary hover:bg-primary/90",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Create First Lot"]})]})})})})]})})})]})]})}const DH="modulepreload",FH=function(e){return"/"+e},Tj={},Mx=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=FH(c),c in Tj)return;Tj[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":DH,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((g,m)=>{h.addEventListener("load",g),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function vn(e){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vn(e)}var cs=Uint8Array,ci=Uint16Array,S5=Int32Array,P0=new cs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),T0=new cs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f2=new cs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hI=function(e,t){for(var n=new ci(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new S5(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},mI=hI(P0,2),pI=mI.b,h2=mI.r;pI[28]=258,h2[258]=28;var gI=hI(T0,0),MH=gI.b,Lj=gI.r,m2=new ci(32768);for(var In=0;In<32768;++In){var il=(In&43690)>>1|(In&21845)<<1;il=(il&52428)>>2|(il&13107)<<2,il=(il&61680)>>4|(il&3855)<<4,m2[In]=((il&65280)>>8|(il&255)<<8)>>1}var Ga=function(e,t,n){for(var r=e.length,i=0,a=new ci(t);i<r;++i)e[i]&&++a[e[i]-1];var o=new ci(t);for(i=1;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;var l;if(n){l=new ci(1<<t);var c=15-t;for(i=0;i<r;++i)if(e[i])for(var d=i<<4|e[i],f=t-e[i],h=o[e[i]-1]++<<f,g=h|(1<<f)-1;h<=g;++h)l[m2[h]>>c]=d}else for(l=new ci(r),i=0;i<r;++i)e[i]&&(l[i]=m2[o[e[i]-1]++]>>15-e[i]);return l},Yl=new cs(288);for(var In=0;In<144;++In)Yl[In]=8;for(var In=144;In<256;++In)Yl[In]=9;for(var In=256;In<280;++In)Yl[In]=7;for(var In=280;In<288;++In)Yl[In]=8;var vm=new cs(32);for(var In=0;In<32;++In)vm[In]=5;var RH=Ga(Yl,9,0),OH=Ga(Yl,9,1),BH=Ga(vm,5,0),zH=Ga(vm,5,1),g1=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Zi=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},x1=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},_5=function(e){return(e+7)/8|0},xI=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new cs(e.subarray(t,n))},$H=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],na=function(e,t,n){var r=new Error(t||$H[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,na),!n)throw r;return r},qH=function(e,t,n,r){var i=e.length,a=0;if(!i||t.f&&!t.l)return n||new cs(0);var o=!n,l=o||t.i!=2,c=t.i;o&&(n=new cs(i*3));var d=function(we){var Ne=n.length;if(we>Ne){var ke=new cs(Math.max(Ne*2,we));ke.set(n),n=ke}},f=t.f||0,h=t.p||0,g=t.b||0,m=t.l,S=t.d,y=t.m,j=t.n,v=i*8;do{if(!m){f=Zi(e,h,1);var x=Zi(e,h+1,3);if(h+=3,x)if(x==1)m=OH,S=zH,y=9,j=5;else if(x==2){var L=Zi(e,h,31)+257,O=Zi(e,h+10,15)+4,T=L+Zi(e,h+5,31)+1;h+=14;for(var E=new cs(T),Z=new cs(19),C=0;C<O;++C)Z[f2[C]]=Zi(e,h+C*3,7);h+=O*3;for(var P=g1(Z),G=(1<<P)-1,I=Ga(Z,P,1),C=0;C<T;){var V=I[Zi(e,h,G)];h+=V&15;var _=V>>4;if(_<16)E[C++]=_;else{var z=0,q=0;for(_==16?(q=3+Zi(e,h,3),h+=2,z=E[C-1]):_==17?(q=3+Zi(e,h,7),h+=3):_==18&&(q=11+Zi(e,h,127),h+=7);q--;)E[C++]=z}}var H=E.subarray(0,L),X=E.subarray(L);y=g1(H),j=g1(X),m=Ga(H,y,1),S=Ga(X,j,1)}else na(1);else{var _=_5(h)+4,k=e[_-4]|e[_-3]<<8,M=_+k;if(M>i){c&&na(0);break}l&&d(g+k),n.set(e.subarray(_,M),g),t.b=g+=k,t.p=h=M*8,t.f=f;continue}if(h>v){c&&na(0);break}}l&&d(g+131072);for(var le=(1<<y)-1,Ce=(1<<j)-1,F=h;;F=h){var z=m[x1(e,h)&le],J=z>>4;if(h+=z&15,h>v){c&&na(0);break}if(z||na(2),J<256)n[g++]=J;else if(J==256){F=h,m=null;break}else{var re=J-254;if(J>264){var C=J-257,Q=P0[C];re=Zi(e,h,(1<<Q)-1)+pI[C],h+=Q}var ie=S[x1(e,h)&Ce],B=ie>>4;ie||na(3),h+=ie&15;var X=MH[B];if(B>3){var Q=T0[B];X+=x1(e,h)&(1<<Q)-1,h+=Q}if(h>v){c&&na(0);break}l&&d(g+131072);var te=g+re;if(g<X){var oe=a-X,_e=Math.min(X,te);for(oe+g<0&&na(3);g<_e;++g)n[g]=r[oe+g]}for(;g<te;++g)n[g]=n[g-X]}}t.l=m,t.p=F,t.b=g,t.f=f,m&&(f=1,t.m=y,t.d=S,t.n=j)}while(!f);return g!=n.length&&o?xI(n,0,g):n.subarray(0,g)},xo=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},th=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},v1=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,a=n.slice();if(!i)return{t:yI,l:0};if(i==1){var o=new cs(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(M,L){return M.f-L.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,f=1,h=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};f!=i-1;)l=n[n[d].f<n[h].f?d++:h++],c=n[d!=f&&n[d].f<n[h].f?d++:h++],n[f++]={s:-1,f:l.f+c.f,l,r:c};for(var g=a[0].s,r=1;r<i;++r)a[r].s>g&&(g=a[r].s);var m=new ci(g+1),S=p2(n[f-1],m,0);if(S>t){var r=0,y=0,j=S-t,v=1<<j;for(a.sort(function(L,O){return m[O.s]-m[L.s]||L.f-O.f});r<i;++r){var x=a[r].s;if(m[x]>t)y+=v-(1<<S-m[x]),m[x]=t;else break}for(y>>=j;y>0;){var _=a[r].s;m[_]<t?y-=1<<t-m[_]++-1:++r}for(;r>=0&&y;--r){var k=a[r].s;m[k]==t&&(--m[k],++y)}S=t}return{t:new cs(m),l:S}},p2=function(e,t,n){return e.s==-1?Math.max(p2(e.l,t,n+1),p2(e.r,t,n+1)):t[e.s]=n},Ej=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ci(++t),r=0,i=e[0],a=1,o=function(c){n[r++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[l]}return{c:n.subarray(0,r),n:t}},nh=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},vI=function(e,t,n){var r=n.length,i=_5(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<r;++a)e[i+a+4]=n[a];return(i+4+r)*8},Ij=function(e,t,n,r,i,a,o,l,c,d,f){xo(t,f++,n),++i[256];for(var h=v1(i,15),g=h.t,m=h.l,S=v1(a,15),y=S.t,j=S.l,v=Ej(g),x=v.c,_=v.n,k=Ej(y),M=k.c,L=k.n,O=new ci(19),T=0;T<x.length;++T)++O[x[T]&31];for(var T=0;T<M.length;++T)++O[M[T]&31];for(var E=v1(O,7),Z=E.t,C=E.l,P=19;P>4&&!Z[f2[P-1]];--P);var G=d+5<<3,I=nh(i,Yl)+nh(a,vm)+o,V=nh(i,g)+nh(a,y)+o+14+3*P+nh(O,Z)+2*O[16]+3*O[17]+7*O[18];if(c>=0&&G<=I&&G<=V)return vI(t,f,e.subarray(c,c+d));var z,q,H,X;if(xo(t,f,1+(V<I)),f+=2,V<I){z=Ga(g,m,0),q=g,H=Ga(y,j,0),X=y;var le=Ga(Z,C,0);xo(t,f,_-257),xo(t,f+5,L-1),xo(t,f+10,P-4),f+=14;for(var T=0;T<P;++T)xo(t,f+3*T,Z[f2[T]]);f+=3*P;for(var Ce=[x,M],F=0;F<2;++F)for(var J=Ce[F],T=0;T<J.length;++T){var re=J[T]&31;xo(t,f,le[re]),f+=Z[re],re>15&&(xo(t,f,J[T]>>5&127),f+=J[T]>>12)}}else z=RH,q=Yl,H=BH,X=vm;for(var T=0;T<l;++T){var Q=r[T];if(Q>255){var re=Q>>18&31;th(t,f,z[re+257]),f+=q[re+257],re>7&&(xo(t,f,Q>>23&31),f+=P0[re]);var ie=Q&31;th(t,f,H[ie]),f+=X[ie],ie>3&&(th(t,f,Q>>5&8191),f+=T0[ie])}else th(t,f,z[Q]),f+=q[Q]}return th(t,f,z[256]),f+q[256]},UH=new S5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),yI=new cs(0),VH=function(e,t,n,r,i,a){var o=a.z||e.length,l=new cs(r+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(r,l.length-i),d=a.l,f=(a.r||0)&7;if(t){f&&(c[0]=a.r>>3);for(var h=UH[t-1],g=h>>13,m=h&8191,S=(1<<n)-1,y=a.p||new ci(32768),j=a.h||new ci(S+1),v=Math.ceil(n/3),x=2*v,_=function(Ue){return(e[Ue]^e[Ue+1]<<v^e[Ue+2]<<x)&S},k=new S5(25e3),M=new ci(288),L=new ci(32),O=0,T=0,E=a.i||0,Z=0,C=a.w||0,P=0;E+2<o;++E){var G=_(E),I=E&32767,V=j[G];if(y[I]=V,j[G]=I,C<=E){var z=o-E;if((O>7e3||Z>24576)&&(z>423||!d)){f=Ij(e,c,0,k,M,L,T,Z,P,E-P,f),Z=O=T=0,P=E;for(var q=0;q<286;++q)M[q]=0;for(var q=0;q<30;++q)L[q]=0}var H=2,X=0,le=m,Ce=I-V&32767;if(z>2&&G==_(E-Ce))for(var F=Math.min(g,z)-1,J=Math.min(32767,E),re=Math.min(258,z);Ce<=J&&--le&&I!=V;){if(e[E+H]==e[E+H-Ce]){for(var Q=0;Q<re&&e[E+Q]==e[E+Q-Ce];++Q);if(Q>H){if(H=Q,X=Ce,Q>F)break;for(var ie=Math.min(Ce,Q-2),B=0,q=0;q<ie;++q){var te=E-Ce+q&32767,oe=y[te],_e=te-oe&32767;_e>B&&(B=_e,V=te)}}}I=V,V=y[I],Ce+=I-V&32767}if(X){k[Z++]=268435456|h2[H]<<18|Lj[X];var we=h2[H]&31,Ne=Lj[X]&31;T+=P0[we]+T0[Ne],++M[257+we],++L[Ne],C=E+H,++O}else k[Z++]=e[E],++M[e[E]]}}for(E=Math.max(E,C);E<o;++E)k[Z++]=e[E],++M[e[E]];f=Ij(e,c,d,k,M,L,T,Z,P,E-P,f),d||(a.r=f&7|c[f/8|0]<<3,f-=7,a.h=j,a.p=y,a.i=E,a.w=C)}else{for(var E=a.w||0;E<o+d;E+=65535){var ke=E+65535;ke>=o&&(c[f/8|0]=d,ke=o),f=vI(c,f+1,e.subarray(E,ke))}a.i=o}return xI(l,0,r+_5(f)+i)},bI=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,a=n.length|0,o=0;o!=a;){for(var l=Math.min(o+2655,a);o<l;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},WH=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new cs(a.length+e.length);o.set(a),o.set(e,a.length),e=o,i.w=a.length}return VH(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},wI=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},HH=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=bI();i.p(t.dictionary),wI(e,2,i.d())}},GH=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&na(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&na(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function g2(e,t){t||(t={});var n=bI();n.p(e);var r=WH(e,t,t.dictionary?6:2,4);return HH(r,t),wI(r,r.length-4,n.d()),r}function KH(e,t){return qH(e.subarray(GH(e,t),-4),{i:2},t,t)}var QH=typeof TextDecoder<"u"&&new TextDecoder,YH=0;try{QH.decode(yI,{stream:!0}),YH=1}catch{}var Et=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function y1(){Et.console&&typeof Et.console.log=="function"&&Et.console.log.apply(Et.console,arguments)}var _n={log:y1,warn:function(e){Et.console&&(typeof Et.console.warn=="function"?Et.console.warn.apply(Et.console,arguments):y1.call(null,arguments))},error:function(e){Et.console&&(typeof Et.console.error=="function"?Et.console.error.apply(Et.console,arguments):y1(e))}};function b1(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){bc(r.response,t,n)},r.onerror=function(){_n.error("could not download file")},r.send()}function Dj(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function dg(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Th,x2,bc=Et.saveAs||((typeof window>"u"?"undefined":vn(window))!=="object"||window!==Et?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Et.URL||Et.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?Dj(i.href)?b1(e,t,n):dg(i,i.target="_blank"):dg(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){dg(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(Dj(e))b1(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){dg(r)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:vn(a)!=="object"&&(_n.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return b1(e,t,n);var i=e.type==="application/octet-stream",a=/constructor/i.test(Et.HTMLElement)||Et.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":vn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=f:location=f,r=null},l.readAsDataURL(e)}else{var c=Et.URL||Et.webkitURL,d=c.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function NI(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,o=i.exec(e);o&&(t=a(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function w1(e,t){var n=e[0],r=e[1],i=e[2],a=e[3];n=es(n,r,i,a,t[0],7,-680876936),a=es(a,n,r,i,t[1],12,-389564586),i=es(i,a,n,r,t[2],17,606105819),r=es(r,i,a,n,t[3],22,-1044525330),n=es(n,r,i,a,t[4],7,-176418897),a=es(a,n,r,i,t[5],12,1200080426),i=es(i,a,n,r,t[6],17,-1473231341),r=es(r,i,a,n,t[7],22,-45705983),n=es(n,r,i,a,t[8],7,1770035416),a=es(a,n,r,i,t[9],12,-1958414417),i=es(i,a,n,r,t[10],17,-42063),r=es(r,i,a,n,t[11],22,-1990404162),n=es(n,r,i,a,t[12],7,1804603682),a=es(a,n,r,i,t[13],12,-40341101),i=es(i,a,n,r,t[14],17,-1502002290),n=ts(n,r=es(r,i,a,n,t[15],22,1236535329),i,a,t[1],5,-165796510),a=ts(a,n,r,i,t[6],9,-1069501632),i=ts(i,a,n,r,t[11],14,643717713),r=ts(r,i,a,n,t[0],20,-373897302),n=ts(n,r,i,a,t[5],5,-701558691),a=ts(a,n,r,i,t[10],9,38016083),i=ts(i,a,n,r,t[15],14,-660478335),r=ts(r,i,a,n,t[4],20,-405537848),n=ts(n,r,i,a,t[9],5,568446438),a=ts(a,n,r,i,t[14],9,-1019803690),i=ts(i,a,n,r,t[3],14,-187363961),r=ts(r,i,a,n,t[8],20,1163531501),n=ts(n,r,i,a,t[13],5,-1444681467),a=ts(a,n,r,i,t[2],9,-51403784),i=ts(i,a,n,r,t[7],14,1735328473),n=ns(n,r=ts(r,i,a,n,t[12],20,-1926607734),i,a,t[5],4,-378558),a=ns(a,n,r,i,t[8],11,-2022574463),i=ns(i,a,n,r,t[11],16,1839030562),r=ns(r,i,a,n,t[14],23,-35309556),n=ns(n,r,i,a,t[1],4,-1530992060),a=ns(a,n,r,i,t[4],11,1272893353),i=ns(i,a,n,r,t[7],16,-155497632),r=ns(r,i,a,n,t[10],23,-1094730640),n=ns(n,r,i,a,t[13],4,681279174),a=ns(a,n,r,i,t[0],11,-358537222),i=ns(i,a,n,r,t[3],16,-722521979),r=ns(r,i,a,n,t[6],23,76029189),n=ns(n,r,i,a,t[9],4,-640364487),a=ns(a,n,r,i,t[12],11,-421815835),i=ns(i,a,n,r,t[15],16,530742520),n=rs(n,r=ns(r,i,a,n,t[2],23,-995338651),i,a,t[0],6,-198630844),a=rs(a,n,r,i,t[7],10,1126891415),i=rs(i,a,n,r,t[14],15,-1416354905),r=rs(r,i,a,n,t[5],21,-57434055),n=rs(n,r,i,a,t[12],6,1700485571),a=rs(a,n,r,i,t[3],10,-1894986606),i=rs(i,a,n,r,t[10],15,-1051523),r=rs(r,i,a,n,t[1],21,-2054922799),n=rs(n,r,i,a,t[8],6,1873313359),a=rs(a,n,r,i,t[15],10,-30611744),i=rs(i,a,n,r,t[6],15,-1560198380),r=rs(r,i,a,n,t[13],21,1309151649),n=rs(n,r,i,a,t[4],6,-145523070),a=rs(a,n,r,i,t[11],10,-1120210379),i=rs(i,a,n,r,t[2],15,718787259),r=rs(r,i,a,n,t[9],21,-343485551),e[0]=Al(n,e[0]),e[1]=Al(r,e[1]),e[2]=Al(i,e[2]),e[3]=Al(a,e[3])}function L0(e,t,n,r,i,a){return t=Al(Al(t,e),Al(r,a)),Al(t<<i|t>>>32-i,n)}function es(e,t,n,r,i,a,o){return L0(t&n|~t&r,e,t,i,a,o)}function ts(e,t,n,r,i,a,o){return L0(t&r|n&~r,e,t,i,a,o)}function ns(e,t,n,r,i,a,o){return L0(t^n^r,e,t,i,a,o)}function rs(e,t,n,r,i,a,o){return L0(n^(t|~r),e,t,i,a,o)}function jI(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)w1(r,ZH(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(w1(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,w1(r,i),r}function ZH(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Th=Et.atob.bind(Et),x2=Et.btoa.bind(Et);var Fj="0123456789abcdef".split("");function XH(e){for(var t="",n=0;n<4;n++)t+=Fj[e>>8*n+4&15]+Fj[e>>8*n&15];return t}function JH(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function v2(e){return jI(e).map(JH).join("")}var eG=function(e){for(var t=0;t<e.length;t++)e[t]=XH(e[t]);return e.join("")}(jI("hello"))!="5d41402abc4b2a76b9719d911017c592";function Al(e,t){if(eG){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function y2(e,t){var n,r,i,a;if(e!==n){for(var o=(i=e,a=1+(256/e.length>>0),new Array(a+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var f=l[c];d=(d+f+o.charCodeAt(c))%256,l[c]=l[d],l[d]=f}n=e,r=l}else l=r;var h=t.length,g=0,m=0,S="";for(c=0;c<h;c++)m=(m+(f=l[g=(g+1)%256]))%256,l[g]=l[m],l[m]=f,o=l[(l[g]+l[m])%256],S+=String.fromCharCode(t.charCodeAt(c)^o);return S}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Mj={print:4,modify:8,copy:16,"annot-forms":32};function Qd(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(Mj.perm!==void 0)throw new Error("Invalid permission: "+l);i+=Mj[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=v2(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=y2(this.encryptionKey,this.padding)}function Yd(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function Rj(e){if(vn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var a=Math.random().toString(35);return t[n][a]=[r,!!i],a},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[n]){var o=t[n][a];try{o[0].apply(e,r)}catch(l){Et.console&&_n.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function ym(e){if(!(this instanceof ym))return new ym(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function SI(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function pl(e,t,n,r,i){if(!(this instanceof pl))return new pl(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,SI.call(this,r,i)}function Ac(e,t,n,r,i){if(!(this instanceof Ac))return new Ac(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,SI.call(this,r,i)}function _t(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],o=[],l=1,c=16,d="S",f=null;vn(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,a=e.compress||e.compressPdf||a,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(a===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,g={},m={internal:{},__private__:{}};m.__private__.PubSub=Rj;var S="1.3",y=m.__private__.getPdfVersion=function(){return S};m.__private__.setPdfVersion=function(b){S=b};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return j};var v=m.__private__.getPageFormat=function(b){return j[b]};i=i||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},_=x.COMPAT;function k(){this.saveGraphicsState(),se(new Pt(Xe,0,0,-Xe,0,Vo()*Xe).toString()+" cm"),this.setFontSize(this.getFontSize()/Xe),d="n",_=x.ADVANCED}function M(){this.restoreGraphicsState(),d="S",_=x.COMPAT}var L=m.__private__.combineFontStyleAndFontWeight=function(b,R){if(b=="bold"&&R=="normal"||b=="bold"&&R==400||b=="normal"&&R=="italic"||b=="bold"&&R=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return R&&(b=R==400||R==="normal"?b==="italic"?"italic":"normal":R!=700&&R!=="bold"||b!=="normal"?(R==700?"bold":R)+""+b:"bold"),b};m.advancedAPI=function(b){var R=_===x.COMPAT;return R&&k.call(this),typeof b!="function"||(b(this),R&&M.call(this)),this},m.compatAPI=function(b){var R=_===x.ADVANCED;return R&&M.call(this),typeof b!="function"||(b(this),R&&k.call(this)),this},m.isAdvancedAPI=function(){return _===x.ADVANCED};var O,T=function(b){if(_!==x.ADVANCED)throw new Error(b+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},E=m.roundToPrecision=m.__private__.roundToPrecision=function(b,R){var ae=t||R;if(isNaN(b)||isNaN(ae))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return b.toFixed(ae).replace(/0+$/,"")};O=m.hpf=m.__private__.hpf=typeof c=="number"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return E(b,c)}:c==="smart"?function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return E(b,b>-1&&b<1?16:5)}:function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.hpf");return E(b,16)};var Z=m.f2=m.__private__.f2=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f2");return E(b,2)},C=m.__private__.f3=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.f3");return E(b,3)},P=m.scale=m.__private__.scale=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.scale");return _===x.COMPAT?b*Xe:_===x.ADVANCED?b:void 0},G=function(b){return _===x.COMPAT?Vo()-b:_===x.ADVANCED?b:void 0},I=function(b){return P(G(b))};m.__private__.setPrecision=m.setPrecision=function(b){typeof parseInt(b,10)=="number"&&(t=parseInt(b,10))};var V,z="00000000000000000000000000000000",q=m.__private__.getFileId=function(){return z},H=m.__private__.setFileId=function(b){return z=b!==void 0&&/^[a-fA-F0-9]{32}$/.test(b)?b.toUpperCase():z.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Yr=new Qd(f.userPermissions,f.userPassword,f.ownerPassword,z)),z};m.setFileId=function(b){return H(b),this},m.getFileId=function(){return q()};var X=m.__private__.convertDateToPDFDate=function(b){var R=b.getTimezoneOffset(),ae=R<0?"+":"-",ue=Math.floor(Math.abs(R/60)),ye=Math.abs(R%60),Ee=[ae,re(ue),"'",re(ye),"'"].join("");return["D:",b.getFullYear(),re(b.getMonth()+1),re(b.getDate()),re(b.getHours()),re(b.getMinutes()),re(b.getSeconds()),Ee].join("")},le=m.__private__.convertPDFDateToDate=function(b){var R=parseInt(b.substr(2,4),10),ae=parseInt(b.substr(6,2),10)-1,ue=parseInt(b.substr(8,2),10),ye=parseInt(b.substr(10,2),10),Ee=parseInt(b.substr(12,2),10),Ge=parseInt(b.substr(14,2),10);return new Date(R,ae,ue,ye,Ee,Ge,0)},Ce=m.__private__.setCreationDate=function(b){var R;if(b===void 0&&(b=new Date),b instanceof Date)R=X(b);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(b))throw new Error("Invalid argument passed to jsPDF.setCreationDate");R=b}return V=R},F=m.__private__.getCreationDate=function(b){var R=V;return b==="jsDate"&&(R=le(V)),R};m.setCreationDate=function(b){return Ce(b),this},m.getCreationDate=function(b){return F(b)};var J,re=m.__private__.padd2=function(b){return("0"+parseInt(b)).slice(-2)},Q=m.__private__.padd2Hex=function(b){return("00"+(b=b.toString())).substr(b.length)},ie=0,B=[],te=[],oe=0,_e=[],we=[],Ne=!1,ke=te,Ue=function(){ie=0,oe=0,te=[],B=[],_e=[],so=pr(),qi=pr()};m.__private__.setCustomOutputDestination=function(b){Ne=!0,ke=b};var be=function(b){Ne||(ke=b)};m.__private__.resetCustomOutputDestination=function(){Ne=!1,ke=te};var se=m.__private__.out=function(b){return b=b.toString(),oe+=b.length+1,ke.push(b),ke},ut=m.__private__.write=function(b){return se(arguments.length===1?b.toString():Array.prototype.join.call(arguments," "))},Je=m.__private__.getArrayBuffer=function(b){for(var R=b.length,ae=new ArrayBuffer(R),ue=new Uint8Array(ae);R--;)ue[R]=b.charCodeAt(R);return ae},Y=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Y};var de=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(b){return de=_===x.ADVANCED?b/Xe:b,this};var We,ee=m.__private__.getFontSize=m.getFontSize=function(){return _===x.COMPAT?de:de*Xe},ce=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(b){return ce=b,this},m.__private__.getR2L=m.getR2L=function(){return ce};var he,De=m.__private__.setZoomMode=function(b){var R=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(b))We=b;else if(isNaN(b)){if(R.indexOf(b)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+b+'" is not recognized.');We=b}else We=parseInt(b,10)};m.__private__.getZoomMode=function(){return We};var Ie,Te=m.__private__.setPageMode=function(b){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(b)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+b+'" is not recognized.');he=b};m.__private__.getPageMode=function(){return he};var Ye=m.__private__.setLayoutMode=function(b){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(b)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+b+'" is not recognized.');Ie=b};m.__private__.getLayoutMode=function(){return Ie},m.__private__.setDisplayMode=m.setDisplayMode=function(b,R,ae){return De(b),Ye(R),Te(ae),this};var et={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(b){if(Object.keys(et).indexOf(b)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return et[b]},m.__private__.getDocumentProperties=function(){return et},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(b){for(var R in et)et.hasOwnProperty(R)&&b[R]&&(et[R]=b[R]);return this},m.__private__.setDocumentProperty=function(b,R){if(Object.keys(et).indexOf(b)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return et[b]=R};var wt,Xe,Tr,Qt,gs,mn={},jn={},vi=[],nn={},ic={},Kn={},zi={},ro=null,Qn=0,Rt=[],cn=new Rj(m),ac=e.hotfixes||[],Rr={},Na={},ja=[],Pt=function b(R,ae,ue,ye,Ee,Ge){if(!(this instanceof b))return new b(R,ae,ue,ye,Ee,Ge);isNaN(R)&&(R=1),isNaN(ae)&&(ae=0),isNaN(ue)&&(ue=0),isNaN(ye)&&(ye=1),isNaN(Ee)&&(Ee=0),isNaN(Ge)&&(Ge=0),this._matrix=[R,ae,ue,ye,Ee,Ge]};Object.defineProperty(Pt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Pt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Pt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Pt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Pt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Pt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Pt.prototype,"a",{get:function(){return this._matrix[0]},set:function(b){this._matrix[0]=b}}),Object.defineProperty(Pt.prototype,"b",{get:function(){return this._matrix[1]},set:function(b){this._matrix[1]=b}}),Object.defineProperty(Pt.prototype,"c",{get:function(){return this._matrix[2]},set:function(b){this._matrix[2]=b}}),Object.defineProperty(Pt.prototype,"d",{get:function(){return this._matrix[3]},set:function(b){this._matrix[3]=b}}),Object.defineProperty(Pt.prototype,"e",{get:function(){return this._matrix[4]},set:function(b){this._matrix[4]=b}}),Object.defineProperty(Pt.prototype,"f",{get:function(){return this._matrix[5]},set:function(b){this._matrix[5]=b}}),Object.defineProperty(Pt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Pt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Pt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Pt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Pt.prototype.join=function(b){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(O).join(b)},Pt.prototype.multiply=function(b){var R=b.sx*this.sx+b.shy*this.shx,ae=b.sx*this.shy+b.shy*this.sy,ue=b.shx*this.sx+b.sy*this.shx,ye=b.shx*this.shy+b.sy*this.sy,Ee=b.tx*this.sx+b.ty*this.shx+this.tx,Ge=b.tx*this.shy+b.ty*this.sy+this.ty;return new Pt(R,ae,ue,ye,Ee,Ge)},Pt.prototype.decompose=function(){var b=this.sx,R=this.shy,ae=this.shx,ue=this.sy,ye=this.tx,Ee=this.ty,Ge=Math.sqrt(b*b+R*R),ft=(b/=Ge)*ae+(R/=Ge)*ue;ae-=b*ft,ue-=R*ft;var jt=Math.sqrt(ae*ae+ue*ue);return ft/=jt,b*(ue/=jt)<R*(ae/=jt)&&(b=-b,R=-R,ft=-ft,Ge=-Ge),{scale:new Pt(Ge,0,0,jt,0,0),translate:new Pt(1,0,0,1,ye,Ee),rotate:new Pt(b,R,-R,b,0,0),skew:new Pt(1,0,ft,1,0,0)}},Pt.prototype.toString=function(b){return this.join(" ")},Pt.prototype.inversed=function(){var b=this.sx,R=this.shy,ae=this.shx,ue=this.sy,ye=this.tx,Ee=this.ty,Ge=1/(b*ue-R*ae),ft=ue*Ge,jt=-R*Ge,zt=-ae*Ge,Ot=b*Ge;return new Pt(ft,jt,zt,Ot,-ft*ye-zt*Ee,-jt*ye-Ot*Ee)},Pt.prototype.applyToPoint=function(b){var R=b.x*this.sx+b.y*this.shx+this.tx,ae=b.x*this.shy+b.y*this.sy+this.ty;return new Sd(R,ae)},Pt.prototype.applyToRectangle=function(b){var R=this.applyToPoint(b),ae=this.applyToPoint(new Sd(b.x+b.w,b.y+b.h));return new jf(R.x,R.y,ae.x-R.x,ae.y-R.y)},Pt.prototype.clone=function(){var b=this.sx,R=this.shy,ae=this.shx,ue=this.sy,ye=this.tx,Ee=this.ty;return new Pt(b,R,ae,ue,ye,Ee)},m.Matrix=Pt;var $i=m.matrixMult=function(b,R){return R.multiply(b)},Sa=new Pt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Sa;var Is=function(b,R){if(!ic[b]){var ae=(R instanceof pl?"Sh":"P")+(Object.keys(nn).length+1).toString(10);R.id=ae,ic[b]=ae,nn[ae]=R,cn.publish("addPattern",R)}};m.ShadingPattern=pl,m.TilingPattern=Ac,m.addShadingPattern=function(b,R){return T("addShadingPattern()"),Is(b,R),this},m.beginTilingPattern=function(b){T("beginTilingPattern()"),up(b.boundingBox[0],b.boundingBox[1],b.boundingBox[2]-b.boundingBox[0],b.boundingBox[3]-b.boundingBox[1],b.matrix)},m.endTilingPattern=function(b,R){T("endTilingPattern()"),R.stream=we[J].join(`
`),Is(b,R),cn.publish("endTilingPattern",R),ja.pop().restore()};var Nr=m.__private__.newObject=function(){var b=pr();return Zs(b,!0),b},pr=m.__private__.newObjectDeferred=function(){return ie++,B[ie]=function(){return oe},ie},Zs=function(b,R){return R=typeof R=="boolean"&&R,B[b]=oe,R&&se(b+" 0 obj"),b},ud=m.__private__.newAdditionalObject=function(){var b={objId:pr(),content:""};return _e.push(b),b},so=pr(),qi=pr(),Ui=m.__private__.decodeColorString=function(b){var R=b.split(" ");if(R.length!==2||R[1]!=="g"&&R[1]!=="G")R.length===5&&(R[4]==="k"||R[4]==="K")&&(R=[(1-R[0])*(1-R[3]),(1-R[1])*(1-R[3]),(1-R[2])*(1-R[3]),"r"]);else{var ae=parseFloat(R[0]);R=[ae,ae,ae,"r"]}for(var ue="#",ye=0;ye<3;ye++)ue+=("0"+Math.floor(255*parseFloat(R[ye])).toString(16)).slice(-2);return ue},Vi=m.__private__.encodeColorString=function(b){var R;typeof b=="string"&&(b={ch1:b});var ae=b.ch1,ue=b.ch2,ye=b.ch3,Ee=b.ch4,Ge=b.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ae=="string"&&ae.charAt(0)!=="#"){var ft=new NI(ae);if(ft.ok)ae=ft.toHex();else if(!/^\d*\.?\d*$/.test(ae))throw new Error('Invalid color "'+ae+'" passed to jsPDF.encodeColorString.')}if(typeof ae=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ae)&&(ae="#"+ae[1]+ae[1]+ae[2]+ae[2]+ae[3]+ae[3]),typeof ae=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ae)){var jt=parseInt(ae.substr(1),16);ae=jt>>16&255,ue=jt>>8&255,ye=255&jt}if(ue===void 0||Ee===void 0&&ae===ue&&ue===ye)if(typeof ae=="string")R=ae+" "+Ge[0];else switch(b.precision){case 2:R=Z(ae/255)+" "+Ge[0];break;case 3:default:R=C(ae/255)+" "+Ge[0]}else if(Ee===void 0||vn(Ee)==="object"){if(Ee&&!isNaN(Ee.a)&&Ee.a===0)return R=["1.","1.","1.",Ge[1]].join(" ");if(typeof ae=="string")R=[ae,ue,ye,Ge[1]].join(" ");else switch(b.precision){case 2:R=[Z(ae/255),Z(ue/255),Z(ye/255),Ge[1]].join(" ");break;default:case 3:R=[C(ae/255),C(ue/255),C(ye/255),Ge[1]].join(" ")}}else if(typeof ae=="string")R=[ae,ue,ye,Ee,Ge[2]].join(" ");else switch(b.precision){case 2:R=[Z(ae),Z(ue),Z(ye),Z(Ee),Ge[2]].join(" ");break;case 3:default:R=[C(ae),C(ue),C(ye),C(Ee),Ge[2]].join(" ")}return R},_a=m.__private__.getFilters=function(){return o},yi=m.__private__.putStream=function(b){var R=(b=b||{}).data||"",ae=b.filters||_a(),ue=b.alreadyAppliedFilters||[],ye=b.addLength1||!1,Ee=R.length,Ge=b.objectId,ft=function(Zr){return Zr};if(f!==null&&Ge===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(ft=Yr.encryptor(Ge,0));var jt={};ae===!0&&(ae=["FlateEncode"]);var zt=b.additionalKeyValues||[],Ot=(jt=_t.API.processDataByFilters!==void 0?_t.API.processDataByFilters(R,ae):{data:R,reverseChain:[]}).reverseChain+(Array.isArray(ue)?ue.join(" "):ue.toString());if(jt.data.length!==0&&(zt.push({key:"Length",value:jt.data.length}),ye===!0&&zt.push({key:"Length1",value:Ee})),Ot.length!=0)if(Ot.split("/").length-1==1)zt.push({key:"Filter",value:Ot});else{zt.push({key:"Filter",value:"["+Ot+"]"});for(var Xt=0;Xt<zt.length;Xt+=1)if(zt[Xt].key==="DecodeParms"){for(var zn=[],Yn=0;Yn<jt.reverseChain.split("/").length-1;Yn+=1)zn.push("null");zn.push(zt[Xt].value),zt[Xt].value="["+zn.join(" ")+"]"}}se("<<");for(var gr=0;gr<zt.length;gr++)se("/"+zt[gr].key+" "+zt[gr].value);se(">>"),jt.data.length!==0&&(se("stream"),se(ft(jt.data)),se("endstream"))},Ca=m.__private__.putPage=function(b){var R=b.number,ae=b.data,ue=b.objId,ye=b.contentsObjId;Zs(ue,!0),se("<</Type /Page"),se("/Parent "+b.rootDictionaryObjId+" 0 R"),se("/Resources "+b.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(O(b.mediaBox.bottomLeftX))+" "+parseFloat(O(b.mediaBox.bottomLeftY))+" "+O(b.mediaBox.topRightX)+" "+O(b.mediaBox.topRightY)+"]"),b.cropBox!==null&&se("/CropBox ["+O(b.cropBox.bottomLeftX)+" "+O(b.cropBox.bottomLeftY)+" "+O(b.cropBox.topRightX)+" "+O(b.cropBox.topRightY)+"]"),b.bleedBox!==null&&se("/BleedBox ["+O(b.bleedBox.bottomLeftX)+" "+O(b.bleedBox.bottomLeftY)+" "+O(b.bleedBox.topRightX)+" "+O(b.bleedBox.topRightY)+"]"),b.trimBox!==null&&se("/TrimBox ["+O(b.trimBox.bottomLeftX)+" "+O(b.trimBox.bottomLeftY)+" "+O(b.trimBox.topRightX)+" "+O(b.trimBox.topRightY)+"]"),b.artBox!==null&&se("/ArtBox ["+O(b.artBox.bottomLeftX)+" "+O(b.artBox.bottomLeftY)+" "+O(b.artBox.topRightX)+" "+O(b.artBox.topRightY)+"]"),typeof b.userUnit=="number"&&b.userUnit!==1&&se("/UserUnit "+b.userUnit),cn.publish("putPage",{objId:ue,pageContext:Rt[R],pageNumber:R,page:ae}),se("/Contents "+ye+" 0 R"),se(">>"),se("endobj");var Ee=ae.join(`
`);return _===x.ADVANCED&&(Ee+=`
Q`),Zs(ye,!0),yi({data:Ee,filters:_a(),objectId:ye}),se("endobj"),ue},oc=m.__private__.putPages=function(){var b,R,ae=[];for(b=1;b<=Qn;b++)Rt[b].objId=pr(),Rt[b].contentsObjId=pr();for(b=1;b<=Qn;b++)ae.push(Ca({number:b,data:we[b],objId:Rt[b].objId,contentsObjId:Rt[b].contentsObjId,mediaBox:Rt[b].mediaBox,cropBox:Rt[b].cropBox,bleedBox:Rt[b].bleedBox,trimBox:Rt[b].trimBox,artBox:Rt[b].artBox,userUnit:Rt[b].userUnit,rootDictionaryObjId:so,resourceDictionaryObjId:qi}));Zs(so,!0),se("<</Type /Pages");var ue="/Kids [";for(R=0;R<Qn;R++)ue+=ae[R]+" 0 R ";se(ue+"]"),se("/Count "+Qn),se(">>"),se("endobj"),cn.publish("postPutPages")},fd=function(b){cn.publish("putFont",{font:b,out:se,newObject:Nr,putStream:yi}),b.isAlreadyPutted!==!0&&(b.objectNumber=Nr(),se("<<"),se("/Type /Font"),se("/BaseFont /"+Yd(b.postScriptName)),se("/Subtype /Type1"),typeof b.encoding=="string"&&se("/Encoding /"+b.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},hd=function(){for(var b in mn)mn.hasOwnProperty(b)&&(h===!1||h===!0&&g.hasOwnProperty(b))&&fd(mn[b])},md=function(b){b.objectNumber=Nr();var R=[];R.push({key:"Type",value:"/XObject"}),R.push({key:"Subtype",value:"/Form"}),R.push({key:"BBox",value:"["+[O(b.x),O(b.y),O(b.x+b.width),O(b.y+b.height)].join(" ")+"]"}),R.push({key:"Matrix",value:"["+b.matrix.toString()+"]"});var ae=b.pages[1].join(`
`);yi({data:ae,additionalKeyValues:R,objectId:b.objectNumber}),se("endobj")},pd=function(){for(var b in Rr)Rr.hasOwnProperty(b)&&md(Rr[b])},Gm=function(b,R){var ae,ue=[],ye=1/(R-1);for(ae=0;ae<1;ae+=ye)ue.push(ae);if(ue.push(1),b[0].offset!=0){var Ee={offset:0,color:b[0].color};b.unshift(Ee)}if(b[b.length-1].offset!=1){var Ge={offset:1,color:b[b.length-1].color};b.push(Ge)}for(var ft="",jt=0,zt=0;zt<ue.length;zt++){for(ae=ue[zt];ae>b[jt+1].offset;)jt++;var Ot=b[jt].offset,Xt=(ae-Ot)/(b[jt+1].offset-Ot),zn=b[jt].color,Yn=b[jt+1].color;ft+=Q(Math.round((1-Xt)*zn[0]+Xt*Yn[0]).toString(16))+Q(Math.round((1-Xt)*zn[1]+Xt*Yn[1]).toString(16))+Q(Math.round((1-Xt)*zn[2]+Xt*Yn[2]).toString(16))}return ft.trim()},D0=function(b,R){R||(R=21);var ae=Nr(),ue=Gm(b.colors,R),ye=[];ye.push({key:"FunctionType",value:"0"}),ye.push({key:"Domain",value:"[0.0 1.0]"}),ye.push({key:"Size",value:"["+R+"]"}),ye.push({key:"BitsPerSample",value:"8"}),ye.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ye.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yi({data:ue,additionalKeyValues:ye,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ae}),se("endobj"),b.objectNumber=Nr(),se("<< /ShadingType "+b.type),se("/ColorSpace /DeviceRGB");var Ee="/Coords ["+O(parseFloat(b.coords[0]))+" "+O(parseFloat(b.coords[1]))+" ";b.type===2?Ee+=O(parseFloat(b.coords[2]))+" "+O(parseFloat(b.coords[3])):Ee+=O(parseFloat(b.coords[2]))+" "+O(parseFloat(b.coords[3]))+" "+O(parseFloat(b.coords[4]))+" "+O(parseFloat(b.coords[5])),se(Ee+="]"),b.matrix&&se("/Matrix ["+b.matrix.toString()+"]"),se("/Function "+ae+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},F0=function(b,R){var ae=pr(),ue=Nr();R.push({resourcesOid:ae,objectOid:ue}),b.objectNumber=ue;var ye=[];ye.push({key:"Type",value:"/Pattern"}),ye.push({key:"PatternType",value:"1"}),ye.push({key:"PaintType",value:"1"}),ye.push({key:"TilingType",value:"1"}),ye.push({key:"BBox",value:"["+b.boundingBox.map(O).join(" ")+"]"}),ye.push({key:"XStep",value:O(b.xStep)}),ye.push({key:"YStep",value:O(b.yStep)}),ye.push({key:"Resources",value:ae+" 0 R"}),b.matrix&&ye.push({key:"Matrix",value:"["+b.matrix.toString()+"]"}),yi({data:b.stream,additionalKeyValues:ye,objectId:b.objectNumber}),se("endobj")},gd=function(b){var R;for(R in nn)nn.hasOwnProperty(R)&&(nn[R]instanceof pl?D0(nn[R]):nn[R]instanceof Ac&&F0(nn[R],b))},Km=function(b){for(var R in b.objectNumber=Nr(),se("<<"),b)switch(R){case"opacity":se("/ca "+Z(b[R]));break;case"stroke-opacity":se("/CA "+Z(b[R]))}se(">>"),se("endobj")},M0=function(){var b;for(b in Kn)Kn.hasOwnProperty(b)&&Km(Kn[b])},hf=function(){for(var b in se("/XObject <<"),Rr)Rr.hasOwnProperty(b)&&Rr[b].objectNumber>=0&&se("/"+b+" "+Rr[b].objectNumber+" 0 R");cn.publish("putXobjectDict"),se(">>")},R0=function(){Yr.oid=Nr(),se("<<"),se("/Filter /Standard"),se("/V "+Yr.v),se("/R "+Yr.r),se("/U <"+Yr.toHexString(Yr.U)+">"),se("/O <"+Yr.toHexString(Yr.O)+">"),se("/P "+Yr.P),se(">>"),se("endobj")},Qm=function(){for(var b in se("/Font <<"),mn)mn.hasOwnProperty(b)&&(h===!1||h===!0&&g.hasOwnProperty(b))&&se("/"+b+" "+mn[b].objectNumber+" 0 R");se(">>")},O0=function(){if(Object.keys(nn).length>0){for(var b in se("/Shading <<"),nn)nn.hasOwnProperty(b)&&nn[b]instanceof pl&&nn[b].objectNumber>=0&&se("/"+b+" "+nn[b].objectNumber+" 0 R");cn.publish("putShadingPatternDict"),se(">>")}},xd=function(b){if(Object.keys(nn).length>0){for(var R in se("/Pattern <<"),nn)nn.hasOwnProperty(R)&&nn[R]instanceof m.TilingPattern&&nn[R].objectNumber>=0&&nn[R].objectNumber<b&&se("/"+R+" "+nn[R].objectNumber+" 0 R");cn.publish("putTilingPatternDict"),se(">>")}},B0=function(){if(Object.keys(Kn).length>0){var b;for(b in se("/ExtGState <<"),Kn)Kn.hasOwnProperty(b)&&Kn[b].objectNumber>=0&&se("/"+b+" "+Kn[b].objectNumber+" 0 R");cn.publish("putGStateDict"),se(">>")}},ir=function(b){Zs(b.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Qm(),O0(),xd(b.objectOid),B0(),hf(),se(">>"),se("endobj")},Ym=function(){var b=[];hd(),M0(),pd(),gd(b),cn.publish("putResources"),b.forEach(ir),ir({resourcesOid:qi,objectOid:Number.MAX_SAFE_INTEGER}),cn.publish("postPutResources")},Zm=function(){cn.publish("putAdditionalObjects");for(var b=0;b<_e.length;b++){var R=_e[b];Zs(R.objId,!0),se(R.content),se("endobj")}cn.publish("postPutAdditionalObjects")},Xm=function(b){jn[b.fontName]=jn[b.fontName]||{},jn[b.fontName][b.fontStyle]=b.id},mf=function(b,R,ae,ue,ye){var Ee={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:b,fontName:R,fontStyle:ae,encoding:ue,isStandardFont:ye||!1,metadata:{}};return cn.publish("addFont",{font:Ee,instance:this}),mn[Ee.id]=Ee,Xm(Ee),Ee.id},z0=function(b){for(var R=0,ae=Y.length;R<ae;R++){var ue=mf.call(this,b[R][0],b[R][1],b[R][2],Y[R][3],!0);h===!1&&(g[ue]=!0);var ye=b[R][0].split("-");Xm({id:ue,fontName:ye[0],fontStyle:ye[1]||""})}cn.publish("addFonts",{fonts:mn,dictionary:jn})},Wi=function(b){return b.foo=function(){try{return b.apply(this,arguments)}catch(ue){var R=ue.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var ae="Error in function "+R.split(`
`)[0].split("<")[0]+": "+ue.message;if(!Et.console)throw new Error(ae);Et.console.error(ae,ue),Et.alert&&alert(ae)}},b.foo.bar=b,b.foo},vd=function(b,R){var ae,ue,ye,Ee,Ge,ft,jt,zt,Ot;if(ye=(R=R||{}).sourceEncoding||"Unicode",Ge=R.outputEncoding,(R.autoencode||Ge)&&mn[wt].metadata&&mn[wt].metadata[ye]&&mn[wt].metadata[ye].encoding&&(Ee=mn[wt].metadata[ye].encoding,!Ge&&mn[wt].encoding&&(Ge=mn[wt].encoding),!Ge&&Ee.codePages&&(Ge=Ee.codePages[0]),typeof Ge=="string"&&(Ge=Ee[Ge]),Ge)){for(jt=!1,ft=[],ae=0,ue=b.length;ae<ue;ae++)(zt=Ge[b.charCodeAt(ae)])?ft.push(String.fromCharCode(zt)):ft.push(b[ae]),ft[ae].charCodeAt(0)>>8&&(jt=!0);b=ft.join("")}for(ae=b.length;jt===void 0&&ae!==0;)b.charCodeAt(ae-1)>>8&&(jt=!0),ae--;if(!jt)return b;for(ft=R.noBOM?[]:[254,255],ae=0,ue=b.length;ae<ue;ae++){if((Ot=(zt=b.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+b+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ft.push(Ot),ft.push(zt-(Ot<<8))}return String.fromCharCode.apply(void 0,ft)},Ds=m.__private__.pdfEscape=m.pdfEscape=function(b,R){return vd(b,R).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pf=m.__private__.beginPage=function(b){we[++Qn]=[],Rt[Qn]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(b[0]),topRightY:Number(b[1])}},ep(Qn),be(we[J])},Jm=function(b,R){var ae,ue,ye;switch(n=R||n,typeof b=="string"&&(ae=v(b.toLowerCase()),Array.isArray(ae)&&(ue=ae[0],ye=ae[1])),Array.isArray(b)&&(ue=b[0]*Xe,ye=b[1]*Xe),isNaN(ue)&&(ue=i[0],ye=i[1]),(ue>14400||ye>14400)&&(_n.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ue=Math.min(14400,ue),ye=Math.min(14400,ye)),i=[ue,ye],n.substr(0,1)){case"l":ye>ue&&(i=[ye,ue]);break;case"p":ue>ye&&(i=[ye,ue])}pf(i),ap(yf),se(Hi),wf!==0&&se(wf+" J"),Nf!==0&&se(Nf+" j"),cn.publish("addPage",{pageNumber:Qn})},$0=function(b){b>0&&b<=Qn&&(we.splice(b,1),Rt.splice(b,1),Qn--,J>Qn&&(J=Qn),this.setPage(J))},ep=function(b){b>0&&b<=Qn&&(J=b)},q0=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return we.length-1},tp=function(b,R,ae){var ue,ye=void 0;return ae=ae||{},b=b!==void 0?b:mn[wt].fontName,R=R!==void 0?R:mn[wt].fontStyle,ue=b.toLowerCase(),jn[ue]!==void 0&&jn[ue][R]!==void 0?ye=jn[ue][R]:jn[b]!==void 0&&jn[b][R]!==void 0?ye=jn[b][R]:ae.disableWarning===!1&&_n.warn("Unable to look up font label for font '"+b+"', '"+R+"'. Refer to getFontList() for available fonts."),ye||ae.noFallback||(ye=jn.times[R])==null&&(ye=jn.times.normal),ye},U0=m.__private__.putInfo=function(){var b=Nr(),R=function(ue){return ue};for(var ae in f!==null&&(R=Yr.encryptor(b,0)),se("<<"),se("/Producer ("+Ds(R("jsPDF "+_t.version))+")"),et)et.hasOwnProperty(ae)&&et[ae]&&se("/"+ae.substr(0,1).toUpperCase()+ae.substr(1)+" ("+Ds(R(et[ae]))+")");se("/CreationDate ("+Ds(R(V))+")"),se(">>"),se("endobj")},gf=m.__private__.putCatalog=function(b){var R=(b=b||{}).rootDictionaryObjId||so;switch(Nr(),se("<<"),se("/Type /Catalog"),se("/Pages "+R+" 0 R"),We||(We="fullwidth"),We){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ae=""+We;ae.substr(ae.length-1)==="%"&&(We=parseInt(We)/100),typeof We=="number"&&se("/OpenAction [3 0 R /XYZ null null "+Z(We)+"]")}switch(Ie||(Ie="continuous"),Ie){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}he&&se("/PageMode /"+he),cn.publish("putCatalog"),se(">>"),se("endobj")},V0=m.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(ie+1)),se("/Root "+ie+" 0 R"),se("/Info "+(ie-1)+" 0 R"),f!==null&&se("/Encrypt "+Yr.oid+" 0 R"),se("/ID [ <"+z+"> <"+z+"> ]"),se(">>")},W0=m.__private__.putHeader=function(){se("%PDF-"+S),se("%ºß¬à")},H0=m.__private__.putXRef=function(){var b="0000000000";se("xref"),se("0 "+(ie+1)),se("0000000000 65535 f ");for(var R=1;R<=ie;R++)typeof B[R]=="function"?se((b+B[R]()).slice(-10)+" 00000 n "):B[R]!==void 0?se((b+B[R]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},io=m.__private__.buildDocument=function(){Ue(),be(te),cn.publish("buildDocument"),W0(),oc(),Zm(),Ym(),f!==null&&R0(),U0(),gf();var b=oe;return H0(),V0(),se("startxref"),se(""+b),se("%%EOF"),be(we[J]),te.join(`
`)},yd=m.__private__.getBlob=function(b){return new Blob([Je(b)],{type:"application/pdf"})},bd=m.output=m.__private__.output=Wi(function(b,R){switch(typeof(R=R||{})=="string"?R={filename:R}:R.filename=R.filename||"generated.pdf",b){case void 0:return io();case"save":m.save(R.filename);break;case"arraybuffer":return Je(io());case"blob":return yd(io());case"bloburi":case"bloburl":if(Et.URL!==void 0&&typeof Et.URL.createObjectURL=="function")return Et.URL&&Et.URL.createObjectURL(yd(io()))||void 0;_n.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ae="",ue=io();try{ae=x2(ue)}catch{ae=x2(unescape(encodeURIComponent(ue)))}return"data:application/pdf;filename="+R.filename+";base64,"+ae;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Et)==="[object Window]"){var ye="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ee=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';R.pdfObjectUrl&&(ye=R.pdfObjectUrl,Ee="");var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ye+'"'+Ee+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(R)+");<\/script></body></html>",ft=Et.open();return ft!==null&&ft.document.write(Ge),ft}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Et)==="[object Window]"){var jt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(R.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+R.filename+'" width="500px" height="400px" /></body></html>',zt=Et.open();if(zt!==null){zt.document.write(jt);var Ot=this;zt.document.documentElement.querySelector("#pdfViewer").onload=function(){zt.document.title=R.filename,zt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Ot.output("bloburl"))}}return zt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Et)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Xt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",R)+'"></iframe></body></html>',zn=Et.open();if(zn!==null&&(zn.document.write(Xt),zn.document.title=R.filename),zn||typeof safari>"u")return zn;break;case"datauri":case"dataurl":return Et.document.location.href=this.output("datauristring",R);default:return null}}),np=function(b){return Array.isArray(ac)===!0&&ac.indexOf(b)>-1};switch(r){case"pt":Xe=1;break;case"mm":Xe=72/25.4;break;case"cm":Xe=72/2.54;break;case"in":Xe=72;break;case"px":Xe=np("px_scaling")==1?.75:96/72;break;case"pc":case"em":Xe=12;break;case"ex":Xe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Xe=r}var Yr=null;Ce(),H();var G0=function(b){return f!==null?Yr.encryptor(b,0):function(R){return R}},rp=m.__private__.getPageInfo=m.getPageInfo=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Rt[b].objId,pageNumber:b,pageContext:Rt[b]}},Ft=m.__private__.getPageInfoByObjId=function(b){if(isNaN(b)||b%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var R in Rt)if(Rt[R].objId===b)break;return rp(R)},K0=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Rt[J].objId,pageNumber:J,pageContext:Rt[J]}};m.addPage=function(){return Jm.apply(this,arguments),this},m.setPage=function(){return ep.apply(this,arguments),be.call(this,we[J]),this},m.insertPage=function(b){return this.addPage(),this.movePage(J,b),this},m.movePage=function(b,R){var ae,ue;if(b>R){ae=we[b],ue=Rt[b];for(var ye=b;ye>R;ye--)we[ye]=we[ye-1],Rt[ye]=Rt[ye-1];we[R]=ae,Rt[R]=ue,this.setPage(R)}else if(b<R){ae=we[b],ue=Rt[b];for(var Ee=b;Ee<R;Ee++)we[Ee]=we[Ee+1],Rt[Ee]=Rt[Ee+1];we[R]=ae,Rt[R]=ue,this.setPage(R)}return this},m.deletePage=function(){return $0.apply(this,arguments),this},m.__private__.text=m.text=function(b,R,ae,ue,ye){var Ee,Ge,ft,jt,zt,Ot,Xt,zn,Yn,gr=(ue=ue||{}).scope||this;if(typeof b=="number"&&typeof R=="number"&&(typeof ae=="string"||Array.isArray(ae))){var Zr=ae;ae=R,R=b,b=Zr}if(arguments[3]instanceof Pt?(T("The transform parameter of text() with a Matrix value"),Yn=ye):(ft=arguments[4],jt=arguments[5],vn(Xt=arguments[3])==="object"&&Xt!==null||(typeof ft=="string"&&(jt=ft,ft=null),typeof Xt=="string"&&(jt=Xt,Xt=null),typeof Xt=="number"&&(ft=Xt,Xt=null),ue={flags:Xt,angle:ft,align:jt})),isNaN(R)||isNaN(ae)||b==null)throw new Error("Invalid arguments passed to jsPDF.text");if(b.length===0)return gr;var Lr="",Gi=!1,Xs=typeof ue.lineHeightFactor=="number"?ue.lineHeightFactor:cc,Pa=gr.internal.scaleFactor;function fp(An){return An=An.split("	").join(Array(ue.TabLen||9).join(" ")),Ds(An,Xt)}function Af(An){for(var kn,or=An.concat(),jr=[],uo=or.length;uo--;)typeof(kn=or.shift())=="string"?jr.push(kn):Array.isArray(An)&&(kn.length===1||kn[1]===void 0&&kn[2]===void 0)?jr.push(kn[0]):jr.push([kn[0],kn[1],kn[2]]);return jr}function kf(An,kn){var or;if(typeof An=="string")or=kn(An)[0];else if(Array.isArray(An)){for(var jr,uo,Mf=An.concat(),Fd=[],xp=Mf.length;xp--;)typeof(jr=Mf.shift())=="string"?Fd.push(kn(jr)[0]):Array.isArray(jr)&&typeof jr[0]=="string"&&(uo=kn(jr[0],jr[1],jr[2]),Fd.push([uo[0],uo[1],uo[2]]));or=Fd}return or}var Cd=!1,Pf=!0;if(typeof b=="string")Cd=!0;else if(Array.isArray(b)){var Tf=b.concat();Ge=[];for(var Ad,Or=Tf.length;Or--;)(typeof(Ad=Tf.shift())!="string"||Array.isArray(Ad)&&typeof Ad[0]!="string")&&(Pf=!1);Cd=Pf}if(Cd===!1)throw new Error('Type of text must be string or Array. "'+b+'" is not recognized.');typeof b=="string"&&(b=b.match(/[\r?\n]/)?b.split(/\r\n|\r|\n/g):[b]);var kd=de/gr.internal.scaleFactor,Pd=kd*(Xs-1);switch(ue.baseline){case"bottom":ae-=Pd;break;case"top":ae+=kd-Pd;break;case"hanging":ae+=kd-2*Pd;break;case"middle":ae+=kd/2-Pd}if((Ot=ue.maxWidth||0)>0&&(typeof b=="string"?b=gr.splitTextToSize(b,Ot):Object.prototype.toString.call(b)==="[object Array]"&&(b=b.reduce(function(An,kn){return An.concat(gr.splitTextToSize(kn,Ot))},[]))),Ee={text:b,x:R,y:ae,options:ue,mutex:{pdfEscape:Ds,activeFontKey:wt,fonts:mn,activeFontSize:de}},cn.publish("preProcessText",Ee),b=Ee.text,ft=(ue=Ee.options).angle,!(Yn instanceof Pt)&&ft&&typeof ft=="number"){ft*=Math.PI/180,ue.rotationDirection===0&&(ft=-ft),_===x.ADVANCED&&(ft=-ft);var Td=Math.cos(ft),Lf=Math.sin(ft);Yn=new Pt(Td,Lf,-Lf,Td,0,0)}else ft&&ft instanceof Pt&&(Yn=ft);_!==x.ADVANCED||Yn||(Yn=Sa),(zt=ue.charSpace||jd)!==void 0&&(Lr+=O(P(zt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(zn=ue.horizontalScale)!==void 0&&(Lr+=O(100*zn)+` Tz
`),ue.lang;var Fs=-1,sv=ue.renderingMode!==void 0?ue.renderingMode:ue.stroke,Ef=gr.internal.getCurrentPageInfo().pageContext;switch(sv){case 0:case!1:case"fill":Fs=0;break;case 1:case!0:case"stroke":Fs=1;break;case 2:case"fillThenStroke":Fs=2;break;case 3:case"invisible":Fs=3;break;case 4:case"fillAndAddForClipping":Fs=4;break;case 5:case"strokeAndAddPathForClipping":Fs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fs=6;break;case 7:case"addToPathForClipping":Fs=7}var hp=Ef.usedRenderingMode!==void 0?Ef.usedRenderingMode:-1;Fs!==-1?Lr+=Fs+` Tr
`:hp!==-1&&(Lr+=`0 Tr
`),Fs!==-1&&(Ef.usedRenderingMode=Fs),jt=ue.align||"left";var bi,Ld=de*Xs,mp=gr.internal.pageSize.getWidth(),pp=mn[wt];zt=ue.charSpace||jd,Ot=ue.maxWidth||0,Xt=Object.assign({autoencode:!0,noBOM:!0},ue.flags);var Wo=[],fc=function(An){return gr.getStringUnitWidth(An,{font:pp,charSpace:zt,fontSize:de,doKerning:!1})*de/Pa};if(Object.prototype.toString.call(b)==="[object Array]"){var Ms;Ge=Af(b),jt!=="left"&&(bi=Ge.map(fc));var xs,Ho=0;if(jt==="right"){R-=bi[0],b=[],Or=Ge.length;for(var oo=0;oo<Or;oo++)oo===0?(xs=ka(R),Ms=ao(ae)):(xs=P(Ho-bi[oo]),Ms=-Ld),b.push([Ge[oo],xs,Ms]),Ho=bi[oo]}else if(jt==="center"){R-=bi[0]/2,b=[],Or=Ge.length;for(var lo=0;lo<Or;lo++)lo===0?(xs=ka(R),Ms=ao(ae)):(xs=P((Ho-bi[lo])/2),Ms=-Ld),b.push([Ge[lo],xs,Ms]),Ho=bi[lo]}else if(jt==="left"){b=[],Or=Ge.length;for(var Ed=0;Ed<Or;Ed++)b.push(Ge[Ed])}else if(jt==="justify"&&pp.encoding==="Identity-H"){b=[],Or=Ge.length,Ot=Ot!==0?Ot:mp;for(var co=0,ar=0;ar<Or;ar++)if(Ms=ar===0?ao(ae):-Ld,xs=ar===0?ka(R):co,ar<Or-1){var If=P((Ot-bi[ar])/(Ge[ar].split(" ").length-1)),vs=Ge[ar].split(" ");b.push([vs[0]+" ",xs,Ms]),co=0;for(var wi=1;wi<vs.length;wi++){var Id=(fc(vs[wi-1]+" "+vs[wi])-fc(vs[wi]))*Pa+If;wi==vs.length-1?b.push([vs[wi],Id,0]):b.push([vs[wi]+" ",Id,0]),co-=Id}}else b.push([Ge[ar],xs,Ms]);b.push(["",co,0])}else{if(jt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(b=[],Or=Ge.length,Ot=Ot!==0?Ot:mp,ar=0;ar<Or;ar++)Ms=ar===0?ao(ae):-Ld,xs=ar===0?ka(R):0,ar<Or-1?Wo.push(O(P((Ot-bi[ar])/(Ge[ar].split(" ").length-1)))):Wo.push(0),b.push([Ge[ar],xs,Ms])}}var gp=typeof ue.R2L=="boolean"?ue.R2L:ce;gp===!0&&(b=kf(b,function(An,kn,or){return[An.split("").reverse().join(""),kn,or]})),Ee={text:b,x:R,y:ae,options:ue,mutex:{pdfEscape:Ds,activeFontKey:wt,fonts:mn,activeFontSize:de}},cn.publish("postProcessText",Ee),b=Ee.text,Gi=Ee.mutex.isHex||!1;var Df=mn[wt].encoding;Df!=="WinAnsiEncoding"&&Df!=="StandardEncoding"||(b=kf(b,function(An,kn,or){return[fp(An),kn,or]})),Ge=Af(b),b=[];for(var hc,mc,Go,pc=0,Dd=1,gc=Array.isArray(Ge[0])?Dd:pc,Ko="",Ff=function(An,kn,or){var jr="";return or instanceof Pt?(or=typeof ue.angle=="number"?$i(or,new Pt(1,0,0,1,An,kn)):$i(new Pt(1,0,0,1,An,kn),or),_===x.ADVANCED&&(or=$i(new Pt(1,0,0,-1,0,0),or)),jr=or.join(" ")+` Tm
`):jr=O(An)+" "+O(kn)+` Td
`,jr},Ni=0;Ni<Ge.length;Ni++){switch(Ko="",gc){case Dd:Go=(Gi?"<":"(")+Ge[Ni][0]+(Gi?">":")"),hc=parseFloat(Ge[Ni][1]),mc=parseFloat(Ge[Ni][2]);break;case pc:Go=(Gi?"<":"(")+Ge[Ni]+(Gi?">":")"),hc=ka(R),mc=ao(ae)}Wo!==void 0&&Wo[Ni]!==void 0&&(Ko=Wo[Ni]+` Tw
`),Ni===0?b.push(Ko+Ff(hc,mc,Yn)+Go):gc===pc?b.push(Ko+Go):gc===Dd&&b.push(Ko+Ff(hc,mc,Yn)+Go)}b=gc===pc?b.join(` Tj
T* `):b.join(` Tj
`),b+=` Tj
`;var ji=`BT
/`;return ji+=wt+" "+de+` Tf
`,ji+=O(de*Xs)+` TL
`,ji+=dc+`
`,ji+=Lr,ji+=b,se(ji+="ET"),g[wt]=!0,gr};var Q0=m.__private__.clip=m.clip=function(b){return se(b==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Q0("evenodd")},m.__private__.discardPath=m.discardPath=function(){return se("n"),this};var Aa=m.__private__.isValidStyle=function(b){var R=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(b)!==-1&&(R=!0),R};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(b){return Aa(b)&&(d=b),this};var sp=m.__private__.getStyle=m.getStyle=function(b){var R=d;switch(b){case"D":case"S":R="S";break;case"F":R="f";break;case"FD":case"DF":R="B";break;case"f":case"f*":case"B":case"B*":R=b}return R},ip=m.close=function(){return se("h"),this};m.stroke=function(){return se("S"),this},m.fill=function(b){return wd("f",b),this},m.fillEvenOdd=function(b){return wd("f*",b),this},m.fillStroke=function(b){return wd("B",b),this},m.fillStrokeEvenOdd=function(b){return wd("B*",b),this};var wd=function(b,R){vn(R)==="object"?Z0(R,b):se(b)},xf=function(b){b===null||_===x.ADVANCED&&b===void 0||(b=sp(b),se(b))};function Y0(b,R,ae,ue,ye){var Ee=new Ac(R||this.boundingBox,ae||this.xStep,ue||this.yStep,this.gState,ye||this.matrix);Ee.stream=this.stream;var Ge=b+"$$"+this.cloneIndex+++"$$";return Is(Ge,Ee),Ee}var Z0=function(b,R){var ae=ic[b.key],ue=nn[ae];if(ue instanceof pl)se("q"),se(X0(R)),ue.gState&&m.setGState(ue.gState),se(b.matrix.toString()+" cm"),se("/"+ae+" sh"),se("Q");else if(ue instanceof Ac){var ye=new Pt(1,0,0,-1,0,Vo());b.matrix&&(ye=ye.multiply(b.matrix||Sa),ae=Y0.call(ue,b.key,b.boundingBox,b.xStep,b.yStep,ye).id),se("q"),se("/Pattern cs"),se("/"+ae+" scn"),ue.gState&&m.setGState(ue.gState),se(R),se("Q")}},X0=function(b){switch(b){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},vf=m.moveTo=function(b,R){return se(O(P(b))+" "+O(I(R))+" m"),this},lc=m.lineTo=function(b,R){return se(O(P(b))+" "+O(I(R))+" l"),this},qo=m.curveTo=function(b,R,ae,ue,ye,Ee){return se([O(P(b)),O(I(R)),O(P(ae)),O(I(ue)),O(P(ye)),O(I(Ee)),"c"].join(" ")),this};m.__private__.line=m.line=function(b,R,ae,ue,ye){if(isNaN(b)||isNaN(R)||isNaN(ae)||isNaN(ue)||!Aa(ye))throw new Error("Invalid arguments passed to jsPDF.line");return _===x.COMPAT?this.lines([[ae-b,ue-R]],b,R,[1,1],ye||"S"):this.lines([[ae-b,ue-R]],b,R,[1,1]).stroke()},m.__private__.lines=m.lines=function(b,R,ae,ue,ye,Ee){var Ge,ft,jt,zt,Ot,Xt,zn,Yn,gr,Zr,Lr,Gi;if(typeof b=="number"&&(Gi=ae,ae=R,R=b,b=Gi),ue=ue||[1,1],Ee=Ee||!1,isNaN(R)||isNaN(ae)||!Array.isArray(b)||!Array.isArray(ue)||!Aa(ye)||typeof Ee!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(vf(R,ae),Ge=ue[0],ft=ue[1],zt=b.length,Zr=R,Lr=ae,jt=0;jt<zt;jt++)(Ot=b[jt]).length===2?(Zr=Ot[0]*Ge+Zr,Lr=Ot[1]*ft+Lr,lc(Zr,Lr)):(Xt=Ot[0]*Ge+Zr,zn=Ot[1]*ft+Lr,Yn=Ot[2]*Ge+Zr,gr=Ot[3]*ft+Lr,Zr=Ot[4]*Ge+Zr,Lr=Ot[5]*ft+Lr,qo(Xt,zn,Yn,gr,Zr,Lr));return Ee&&ip(),xf(ye),this},m.path=function(b){for(var R=0;R<b.length;R++){var ae=b[R],ue=ae.c;switch(ae.op){case"m":vf(ue[0],ue[1]);break;case"l":lc(ue[0],ue[1]);break;case"c":qo.apply(this,ue);break;case"h":ip()}}return this},m.__private__.rect=m.rect=function(b,R,ae,ue,ye){if(isNaN(b)||isNaN(R)||isNaN(ae)||isNaN(ue)||!Aa(ye))throw new Error("Invalid arguments passed to jsPDF.rect");return _===x.COMPAT&&(ue=-ue),se([O(P(b)),O(I(R)),O(P(ae)),O(P(ue)),"re"].join(" ")),xf(ye),this},m.__private__.triangle=m.triangle=function(b,R,ae,ue,ye,Ee,Ge){if(isNaN(b)||isNaN(R)||isNaN(ae)||isNaN(ue)||isNaN(ye)||isNaN(Ee)||!Aa(Ge))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ae-b,ue-R],[ye-ae,Ee-ue],[b-ye,R-Ee]],b,R,[1,1],Ge,!0),this},m.__private__.roundedRect=m.roundedRect=function(b,R,ae,ue,ye,Ee,Ge){if(isNaN(b)||isNaN(R)||isNaN(ae)||isNaN(ue)||isNaN(ye)||isNaN(Ee)||!Aa(Ge))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ft=4/3*(Math.SQRT2-1);return ye=Math.min(ye,.5*ae),Ee=Math.min(Ee,.5*ue),this.lines([[ae-2*ye,0],[ye*ft,0,ye,Ee-Ee*ft,ye,Ee],[0,ue-2*Ee],[0,Ee*ft,-ye*ft,Ee,-ye,Ee],[2*ye-ae,0],[-ye*ft,0,-ye,-Ee*ft,-ye,-Ee],[0,2*Ee-ue],[0,-Ee*ft,ye*ft,-Ee,ye,-Ee]],b+ye,R,[1,1],Ge,!0),this},m.__private__.ellipse=m.ellipse=function(b,R,ae,ue,ye){if(isNaN(b)||isNaN(R)||isNaN(ae)||isNaN(ue)||!Aa(ye))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ee=4/3*(Math.SQRT2-1)*ae,Ge=4/3*(Math.SQRT2-1)*ue;return vf(b+ae,R),qo(b+ae,R-Ge,b+Ee,R-ue,b,R-ue),qo(b-Ee,R-ue,b-ae,R-Ge,b-ae,R),qo(b-ae,R+Ge,b-Ee,R+ue,b,R+ue),qo(b+Ee,R+ue,b+ae,R+Ge,b+ae,R),xf(ye),this},m.__private__.circle=m.circle=function(b,R,ae,ue){if(isNaN(b)||isNaN(R)||isNaN(ae)||!Aa(ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(b,R,ae,ae,ue)},m.setFont=function(b,R,ae){return ae&&(R=L(R,ae)),wt=tp(b,R,{disableWarning:!1}),this};var J0=m.__private__.getFont=m.getFont=function(){return mn[tp.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var b,R,ae={};for(b in jn)if(jn.hasOwnProperty(b))for(R in ae[b]=[],jn[b])jn[b].hasOwnProperty(R)&&ae[b].push(R);return ae},m.addFont=function(b,R,ae,ue,ye){var Ee=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ee.indexOf(arguments[3])!==-1?ye=arguments[3]:arguments[3]&&Ee.indexOf(arguments[3])==-1&&(ae=L(ae,ue)),ye=ye||"Identity-H",mf.call(this,b,R,ae,ye)};var cc,yf=e.lineWidth||.200025,Nd=m.__private__.getLineWidth=m.getLineWidth=function(){return yf},ap=m.__private__.setLineWidth=m.setLineWidth=function(b){return yf=b,se(O(P(b))+" w"),this};m.__private__.setLineDash=_t.API.setLineDash=_t.API.setLineDashPattern=function(b,R){if(b=b||[],R=R||0,isNaN(R)||!Array.isArray(b))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return b=b.map(function(ae){return O(P(ae))}).join(" "),R=O(P(R)),se("["+b+"] "+R+" d"),this};var op=m.__private__.getLineHeight=m.getLineHeight=function(){return de*cc};m.__private__.getLineHeight=m.getLineHeight=function(){return de*cc};var lp=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(b){return typeof(b=b||1.15)=="number"&&(cc=b),this},cp=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return cc};lp(e.lineHeight);var ka=m.__private__.getHorizontalCoordinate=function(b){return P(b)},ao=m.__private__.getVerticalCoordinate=function(b){return _===x.ADVANCED?b:Rt[J].mediaBox.topRightY-Rt[J].mediaBox.bottomLeftY-P(b)},ev=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(b){return O(ka(b))},Uo=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(b){return O(ao(b))},Hi=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ui(Hi)},m.__private__.setStrokeColor=m.setDrawColor=function(b,R,ae,ue){return Hi=Vi({ch1:b,ch2:R,ch3:ae,ch4:ue,pdfColorType:"draw",precision:2}),se(Hi),this};var bf=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ui(bf)},m.__private__.setFillColor=m.setFillColor=function(b,R,ae,ue){return bf=Vi({ch1:b,ch2:R,ch3:ae,ch4:ue,pdfColorType:"fill",precision:2}),se(bf),this};var dc=e.textColor||"0 g",tv=m.__private__.getTextColor=m.getTextColor=function(){return Ui(dc)};m.__private__.setTextColor=m.setTextColor=function(b,R,ae,ue){return dc=Vi({ch1:b,ch2:R,ch3:ae,ch4:ue,pdfColorType:"text",precision:3}),this};var jd=e.charSpace,nv=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(jd||0)};m.__private__.setCharSpace=m.setCharSpace=function(b){if(isNaN(b))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return jd=b,this};var wf=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(b){var R=m.CapJoinStyles[b];if(R===void 0)throw new Error("Line cap style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wf=R,se(R+" J"),this};var Nf=0;m.__private__.setLineJoin=m.setLineJoin=function(b){var R=m.CapJoinStyles[b];if(R===void 0)throw new Error("Line join style of '"+b+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nf=R,se(R+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(b){if(b=b||0,isNaN(b))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(O(P(b))+" M"),this},m.GState=ym,m.setGState=function(b){(b=typeof b=="string"?Kn[zi[b]]:dp(null,b)).equals(ro)||(se("/"+b.id+" gs"),ro=b)};var dp=function(b,R){if(!b||!zi[b]){var ae=!1;for(var ue in Kn)if(Kn.hasOwnProperty(ue)&&Kn[ue].equals(R)){ae=!0;break}if(ae)R=Kn[ue];else{var ye="GS"+(Object.keys(Kn).length+1).toString(10);Kn[ye]=R,R.id=ye}return b&&(zi[b]=R.id),cn.publish("addGState",R),R}};m.addGState=function(b,R){return dp(b,R),this},m.saveGraphicsState=function(){return se("q"),vi.push({key:wt,size:de,color:dc}),this},m.restoreGraphicsState=function(){se("Q");var b=vi.pop();return wt=b.key,de=b.size,dc=b.color,ro=null,this},m.setCurrentTransformationMatrix=function(b){return se(b.toString()+" cm"),this},m.comment=function(b){return se("#"+b),this};var Sd=function(b,R){var ae=b||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ae},set:function(Ee){isNaN(Ee)||(ae=parseFloat(Ee))}});var ue=R||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ue},set:function(Ee){isNaN(Ee)||(ue=parseFloat(Ee))}});var ye="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ye},set:function(Ee){ye=Ee.toString()}}),this},jf=function(b,R,ae,ue){Sd.call(this,b,R),this.type="rect";var ye=ae||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ye},set:function(Ge){isNaN(Ge)||(ye=parseFloat(Ge))}});var Ee=ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ee},set:function(Ge){isNaN(Ge)||(Ee=parseFloat(Ge))}}),this},Sf=function(){this.page=Qn,this.currentPage=J,this.pages=we.slice(0),this.pagesContext=Rt.slice(0),this.x=Tr,this.y=Qt,this.matrix=gs,this.width=uc(J),this.height=Vo(J),this.outputDestination=ke,this.id="",this.objectNumber=-1};Sf.prototype.restore=function(){Qn=this.page,J=this.currentPage,Rt=this.pagesContext,we=this.pages,Tr=this.x,Qt=this.y,gs=this.matrix,_f(J,this.width),Cf(J,this.height),ke=this.outputDestination};var up=function(b,R,ae,ue,ye){ja.push(new Sf),Qn=J=0,we=[],Tr=b,Qt=R,gs=ye,pf([ae,ue])},rv=function(b){if(Na[b])ja.pop().restore();else{var R=new Sf,ae="Xo"+(Object.keys(Rr).length+1).toString(10);R.id=ae,Na[b]=ae,Rr[ae]=R,cn.publish("addFormObject",R),ja.pop().restore()}};for(var _d in m.beginFormObject=function(b,R,ae,ue,ye){return up(b,R,ae,ue,ye),this},m.endFormObject=function(b){return rv(b),this},m.doFormObject=function(b,R){var ae=Rr[Na[b]];return se("q"),se(R.toString()+" cm"),se("/"+ae.id+" Do"),se("Q"),this},m.getFormObject=function(b){var R=Rr[Na[b]];return{x:R.x,y:R.y,width:R.width,height:R.height,matrix:R.matrix}},m.save=function(b,R){return b=b||"generated.pdf",(R=R||{}).returnPromise=R.returnPromise||!1,R.returnPromise===!1?(bc(yd(io()),b),typeof bc.unload=="function"&&Et.setTimeout&&setTimeout(bc.unload,911),this):new Promise(function(ae,ue){try{var ye=bc(yd(io()),b);typeof bc.unload=="function"&&Et.setTimeout&&setTimeout(bc.unload,911),ae(ye)}catch(Ee){ue(Ee.message)}})},_t.API)_t.API.hasOwnProperty(_d)&&(_d==="events"&&_t.API.events.length?function(b,R){var ae,ue,ye;for(ye=R.length-1;ye!==-1;ye--)ae=R[ye][0],ue=R[ye][1],b.subscribe.apply(b,[ae].concat(typeof ue=="function"?[ue]:ue))}(cn,_t.API.events):m[_d]=_t.API[_d]);var uc=m.getPageWidth=function(b){return(Rt[b=b||J].mediaBox.topRightX-Rt[b].mediaBox.bottomLeftX)/Xe},_f=m.setPageWidth=function(b,R){Rt[b].mediaBox.topRightX=R*Xe+Rt[b].mediaBox.bottomLeftX},Vo=m.getPageHeight=function(b){return(Rt[b=b||J].mediaBox.topRightY-Rt[b].mediaBox.bottomLeftY)/Xe},Cf=m.setPageHeight=function(b,R){Rt[b].mediaBox.topRightY=R*Xe+Rt[b].mediaBox.bottomLeftY};return m.internal={pdfEscape:Ds,getStyle:sp,getFont:J0,getFontSize:ee,getCharSpace:nv,getTextColor:tv,getLineHeight:op,getLineHeightFactor:cp,getLineWidth:Nd,write:ut,getHorizontalCoordinate:ka,getVerticalCoordinate:ao,getCoordinateString:ev,getVerticalCoordinateString:Uo,collections:{},newObject:Nr,newAdditionalObject:ud,newObjectDeferred:pr,newObjectDeferredBegin:Zs,getFilters:_a,putStream:yi,events:cn,scaleFactor:Xe,pageSize:{getWidth:function(){return uc(J)},setWidth:function(b){_f(J,b)},getHeight:function(){return Vo(J)},setHeight:function(b){Cf(J,b)}},encryptionOptions:f,encryption:Yr,getEncryptor:G0,output:bd,getNumberOfPages:q0,pages:we,out:se,f2:Z,f3:C,getPageInfo:rp,getPageInfoByObjId:Ft,getCurrentPageInfo:K0,getPDFVersion:y,Point:Sd,Rectangle:jf,Matrix:Pt,hasHotfix:np},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return uc(J)},set:function(b){_f(J,b)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Vo(J)},set:function(b){Cf(J,b)},enumerable:!0,configurable:!0}),z0.call(m,Y),wt="F1",Jm(i,n),cn.publish("initialized"),m}Qd.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Qd.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Qd.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Qd.prototype.processOwnerPassword=function(e,t){return y2(v2(t).substr(0,5),e)},Qd.prototype.encryptor=function(e,t){var n=v2(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return y2(n,r)}},ym.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||vn(e)!==vn(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},_t.API={events:[]},_t.version="3.0.1";var Jn=_t.API,C5=1,dd=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wd=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Bt=function(e){return e.toFixed(2)},al=function(e){return e.toFixed(5)};Jn.__acroform__={};var Ys=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Oj=function(e){return e*C5},Ea=function(e){var t=new CI,n=xt.internal.getHeight(e)||0,r=xt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Bt(r)),Number(Bt(n))],t},tG=Jn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},nG=Jn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},rG=Jn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ur=Jn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return rG(e,t-1)},fr=Jn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return tG(e,t-1)},hr=Jn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return nG(e,t-1)},sG=Jn.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],a=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=r(a+l)||0,c.upperRight_X=n(i+o)||0,c.upperRight_Y=r(a)||0,[Number(Bt(c.lowerLeft_X)),Number(Bt(c.lowerLeft_Y)),Number(Bt(c.upperRight_X)),Number(Bt(c.upperRight_Y))]},iG=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=b2(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Bt(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=Ea(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},b2=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(C){return C.split(`
`)}):i.map(function(C){return[C]});var a=n,o=xt.internal.getHeight(e)||0;o=o<0?-o:o;var l=xt.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(C,P,G){if(C+1<i.length){var I=P+" "+i[C+1][0];return ug(I,e,G).width<=l-4}return!1};a++;e:for(;a>0;){t="",a--;var d,f,h=ug("3",e,a).height,g=e.multiline?o-a:(o-h)/2,m=g+=2,S=0,y=0,j=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+ug(t,e,a=12).width+", FieldWidth:"+l+`
`;break}for(var v="",x=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var k=!1;if(i[_].length!==1&&j!==i[_].length-1){if((h+2)*(x+2)+2>o)continue e;v+=i[_][j],k=!0,y=_,_--}else{v=(v+=i[_][j]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var M=parseInt(_),L=c(M,v,a),O=_>=i.length-1;if(L&&!O){v+=" ",j=0;continue}if(L||O){if(O)y=M;else if(e.multiline&&(h+2)*(x+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(x+2)+2>o)continue e;y=M}}for(var T="",E=S;E<=y;E++){var Z=i[E];if(e.multiline){if(E===y){T+=Z[j]+" ",j=(j+1)%Z.length;continue}if(E===S){T+=Z[Z.length-1]+" ";continue}}T+=Z[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,f=ug(T,e,a).width,e.textAlign){case"right":d=l-f-2;break;case"center":d=(l-f)/2;break;case"left":default:d=2}t+=Bt(d)+" "+Bt(m)+` Td
`,t+="("+dd(T)+`) Tj
`,t+=-Bt(d)+` 0 Td
`,m=-(a+2),f=0,S=k?y:y+1,x++,v=""}break}return r.text=t,r.fontSize=a,r},ug=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},aG={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},oG=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},lG=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),vn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},cG=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ya.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(aG)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");C5=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new AI,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a.objId=void 0,a.hasAnnotation&&oG(a,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var a=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var l=r[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=sG(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=xt.createDefaultAppearanceStream(l),vn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=iG(l);c.push({key:"AP",value:"<</N "+f+">>"}),i.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var h="";for(var g in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(g)){var m=l.appearanceStreamContent[g];if(h+="/"+g+" ",h+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var S=m[o];typeof S=="function"&&(S=S.call(i,l)),h+="/"+o+" "+S+" ",i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S)}}else typeof(S=m)=="function"&&(S=S.call(i,l)),h+="/"+o+" "+S,i.internal.acroformPlugin.xForms.indexOf(S)>=0||i.internal.acroformPlugin.xForms.push(S);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}a&&lG(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},_I=Jn.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(o){return o};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(a!==0&&(i+=" "),vn(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+dd(r(e[a].toString()))+")"):i+=e[a].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},N1=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+dd(r(e))+")"},$a=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};$a.prototype.toString=function(){return this.objId+" 0 R"},$a.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},$a.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:_I(i,this.objId,this.scope)}):i instanceof $a?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var CI=function(){$a.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Ys(CI,$a);var AI=function(){$a.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+dd(n(e))+")"}},set:function(n){e=n}})};Ys(AI,$a);var ya=function e(){$a.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ur(t,3)},set:function(v){v?this.F=fr(t,3):this.F=hr(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');n=v}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(v){r=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(v){r[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(v){r[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(v){r[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(v){r[3]=v}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Rx)return;a="FieldObject"+e.FieldNum++}var v=function(x){return x};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+dd(v(a))+")"},set:function(v){a=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(v){a=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/C5:d},set:function(v){d=v}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(v){f=v}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Rx||this instanceof Ml))return N1(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=v}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Cr?g:N1(g,this.objId,this.scope)},set:function(v){v=v.toString(),g=this instanceof Cr?v:v.substr(0,1)==="("?Wd(v.substr(1,v.length-2)):Wd(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cr?Wd(g.substr(1,g.length-1)):g},set:function(v){v=v.toString(),g=this instanceof Cr?"/"+v:v}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Cr?m:N1(m,this.objId,this.scope)},set:function(v){v=v.toString(),m=this instanceof Cr?v:v.substr(0,1)==="("?Wd(v.substr(1,v.length-2)):Wd(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Cr?Wd(m.substr(1,m.length-1)):m},set:function(v){v=v.toString(),m=this instanceof Cr?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var S,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(v){v=!!v,y=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(S)return S},set:function(v){S=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,1)},set:function(v){v?this.Ff=fr(this.Ff,1):this.Ff=hr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,2)},set:function(v){v?this.Ff=fr(this.Ff,2):this.Ff=hr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,3)},set:function(v){v?this.Ff=fr(this.Ff,3):this.Ff=hr(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');j=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(j){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};Ys(ya,$a);var zc=function(){ya.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _I(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(a,o,l){l||(l=1);for(var c,d=[];c=o.exec(a);)d.push(c[l]);return d}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,18)},set:function(n){n?this.Ff=fr(this.Ff,18):this.Ff=hr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=fr(this.Ff,19):this.Ff=hr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,20)},set:function(n){n?(this.Ff=fr(this.Ff,20),t.sort()):this.Ff=hr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,22)},set:function(n){n?this.Ff=fr(this.Ff,22):this.Ff=hr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,23)},set:function(n){n?this.Ff=fr(this.Ff,23):this.Ff=hr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,27)},set:function(n){n?this.Ff=fr(this.Ff,27):this.Ff=hr(this.Ff,27)}}),this.hasAppearanceStream=!1};Ys(zc,ya);var $c=function(){zc.call(this),this.fontName="helvetica",this.combo=!1};Ys($c,zc);var qc=function(){$c.call(this),this.combo=!0};Ys(qc,$c);var Lh=function(){qc.call(this),this.edit=!0};Ys(Lh,qc);var Cr=function(){ya.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,15)},set:function(n){n?this.Ff=fr(this.Ff,15):this.Ff=hr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,16)},set:function(n){n?this.Ff=fr(this.Ff,16):this.Ff=hr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,17)},set:function(n){n?this.Ff=fr(this.Ff,17):this.Ff=hr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,26)},set:function(n){n?this.Ff=fr(this.Ff,26):this.Ff=hr(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+dd(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){vn(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Ys(Cr,ya);var Eh=function(){Cr.call(this),this.pushButton=!0};Ys(Eh,Cr);var Uc=function(){Cr.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ys(Uc,Cr);var Rx=function(){var e,t;ya.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),r)o.push("/"+a+" ("+dd(i(r[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){vn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ys(Rx,ya),Uc.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Uc.prototype.createOption=function(e){var t=new Rx;return t.Parent=this,t.optionName=e,this.Kids.push(t),dG.call(this.scope,t),t};var Ih=function(){Cr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};Ys(Ih,Cr);var Ml=function(){ya.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,13)},set:function(t){t?this.Ff=fr(this.Ff,13):this.Ff=hr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,21)},set:function(t){t?this.Ff=fr(this.Ff,21):this.Ff=hr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,23)},set:function(t){t?this.Ff=fr(this.Ff,23):this.Ff=hr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,24)},set:function(t){t?this.Ff=fr(this.Ff,24):this.Ff=hr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,25)},set:function(t){t?this.Ff=fr(this.Ff,25):this.Ff=hr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,26)},set:function(t){t?this.Ff=fr(this.Ff,26):this.Ff=hr(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ys(Ml,ya);var Dh=function(){Ml.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,14)},set:function(e){e?this.Ff=fr(this.Ff,14):this.Ff=hr(this.Ff,14)}}),this.password=!0};Ys(Dh,Ml);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=b2(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Bt(xt.internal.getWidth(e))+" "+Bt(xt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Bt(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Ea(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],a=xt.internal.getHeight(e),o=xt.internal.getWidth(e),l=b2(e,e.caption);return i.push("1 g"),i.push("0 0 "+Bt(o)+" "+Bt(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Bt(o-1)+" "+Bt(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Bt(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Bt(xt.internal.getWidth(e))+" "+Bt(xt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=xt.RadioButton.Circle.YesNormal,t.D[e]=xt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ea(e);t.scope=e.scope;var n=[],r=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=xt.internal.Bezier_C,a=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+al(xt.internal.getWidth(e)/2)+" "+al(xt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=[],r=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*xt.internal.Bezier_C).toFixed(5)),o=Number((r*xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+al(xt.internal.getWidth(e)/2)+" "+al(xt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+al(xt.internal.getWidth(e)/2)+" "+al(xt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=[],r=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*xt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+al(xt.internal.getWidth(e)/2)+" "+al(xt.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=xt.RadioButton.Cross.YesNormal,t.D[e]=xt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ea(e);t.scope=e.scope;var n=[],r=xt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Bt(xt.internal.getWidth(e)-2)+" "+Bt(xt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Bt(r.x1.x)+" "+Bt(r.x1.y)+" m"),n.push(Bt(r.x2.x)+" "+Bt(r.x2.y)+" l"),n.push(Bt(r.x4.x)+" "+Bt(r.x4.y)+" m"),n.push(Bt(r.x3.x)+" "+Bt(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=xt.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Bt(xt.internal.getWidth(e))+" "+Bt(xt.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Bt(xt.internal.getWidth(e)-2)+" "+Bt(xt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Bt(n.x1.x)+" "+Bt(n.x1.y)+" m"),r.push(Bt(n.x2.x)+" "+Bt(n.x2.y)+" l"),r.push(Bt(n.x4.x)+" "+Bt(n.x4.y)+" m"),r.push(Bt(n.x3.x)+" "+Bt(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Ea(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Bt(xt.internal.getWidth(e))+" "+Bt(xt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};xt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=xt.internal.getWidth(e),n=xt.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},xt.internal.getWidth=function(e){var t=0;return vn(e)==="object"&&(t=Oj(e.Rect[2])),t},xt.internal.getHeight=function(e){var t=0;return vn(e)==="object"&&(t=Oj(e.Rect[3])),t};var dG=Jn.addField=function(e){if(cG(this,e),!(e instanceof ya))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Jn.AcroFormChoiceField=zc,Jn.AcroFormListBox=$c,Jn.AcroFormComboBox=qc,Jn.AcroFormEditBox=Lh,Jn.AcroFormButton=Cr,Jn.AcroFormPushButton=Eh,Jn.AcroFormRadioButton=Uc,Jn.AcroFormCheckBox=Ih,Jn.AcroFormTextField=Ml,Jn.AcroFormPasswordField=Dh,Jn.AcroFormAppearance=xt,Jn.AcroForm={ChoiceField:zc,ListBox:$c,ComboBox:qc,EditBox:Lh,Button:Cr,PushButton:Eh,RadioButton:Uc,CheckBox:Ih,TextField:Ml,PasswordField:Dh,Appearance:xt},_t.AcroForm={ChoiceField:zc,ListBox:$c,ComboBox:qc,EditBox:Lh,Button:Cr,PushButton:Eh,RadioButton:Uc,CheckBox:Ih,TextField:Ml,PasswordField:Dh,Appearance:xt};_t.AcroForm;function kI(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(C,P){var G,I,V,z,q,H=t;if((P=P||t)==="RGBA"||C.data!==void 0&&C.data instanceof Uint8ClampedArray&&"height"in C&&"width"in C)return"RGBA";if(L(C))for(q in n)for(V=n[q],G=0;G<V.length;G+=1){for(z=!0,I=0;I<V[G].length;I+=1)if(V[G][I]!==void 0&&V[G][I]!==C[I]){z=!1;break}if(z===!0){H=q;break}}else for(q in n)for(V=n[q],G=0;G<V.length;G+=1){for(z=!0,I=0;I<V[G].length;I+=1)if(V[G][I]!==void 0&&V[G][I]!==C.charCodeAt(I)){z=!1;break}if(z===!0){H=q;break}}return H===t&&P!==t&&(H=P),H},i=function C(P){for(var G=this.internal.write,I=this.internal.putStream,V=(0,this.internal.getFilters)();V.indexOf("FlateEncode")!==-1;)V.splice(V.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var z=[];if(z.push({key:"Type",value:"/XObject"}),z.push({key:"Subtype",value:"/Image"}),z.push({key:"Width",value:P.width}),z.push({key:"Height",value:P.height}),P.colorSpace===j.INDEXED?z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(z.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===j.DEVICE_CMYK&&z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),z.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&z.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var q="",H=0,X=P.transparency.length;H<X;H++)q+=P.transparency[H]+" "+P.transparency[H]+" ";z.push({key:"Mask",value:"["+q+"]"})}P.sMask!==void 0&&z.push({key:"SMask",value:P.objectId+1+" 0 R"});var le=P.filter!==void 0?["/"+P.filter]:void 0;if(I({data:P.data,additionalKeyValues:z,alreadyAppliedFilters:le,objectId:P.objectId}),G("endobj"),"sMask"in P&&P.sMask!==void 0){var Ce="/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,F={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:Ce,data:P.sMask};"filter"in P&&(F.filter=P.filter),C.call(this,F)}if(P.colorSpace===j.INDEXED){var J=this.internal.newObject();I({data:T(new Uint8Array(P.palette)),objectId:J}),G("endobj")}},a=function(){var C=this.internal.collections.addImage_images;for(var P in C)i.call(this,C[P])},o=function(){var C,P=this.internal.collections.addImage_images,G=this.internal.write;for(var I in P)G("/I"+(C=P[I]).index,C.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var C=this.internal.collections.addImage_images;return l.call(this),C},d=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(C){return typeof e["process"+C.toUpperCase()]=="function"},h=function(C){return vn(C)==="object"&&C.nodeType===1},g=function(C,P){if(C.nodeName==="IMG"&&C.hasAttribute("src")){var G=""+C.getAttribute("src");if(G.indexOf("data:image/")===0)return Th(unescape(G).split("base64,").pop());var I=e.loadFile(G,!0);if(I!==void 0)return I}if(C.nodeName==="CANVAS"){if(C.width===0||C.height===0)throw new Error("Given canvas must have data. Canvas width: "+C.width+", height: "+C.height);var V;switch(P){case"PNG":V="image/png";break;case"WEBP":V="image/webp";break;case"JPEG":case"JPG":default:V="image/jpeg"}return Th(C.toDataURL(V,1).split("base64,").pop())}},m=function(C){var P=this.internal.collections.addImage_images;if(P){for(var G in P)if(C===P[G].alias)return P[G]}},S=function(C,P,G){return C||P||(C=-96,P=-96),C<0&&(C=-1*G.width*72/C/this.internal.scaleFactor),P<0&&(P=-1*G.height*72/P/this.internal.scaleFactor),C===0&&(C=P*G.width/G.height),P===0&&(P=C*G.height/G.width),[C,P]},y=function(C,P,G,I,V,z){var q=S.call(this,G,I,V),H=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,le=c.call(this);if(G=q[0],I=q[1],le[V.index]=V,z){z*=Math.PI/180;var Ce=Math.cos(z),F=Math.sin(z),J=function(Q){return Q.toFixed(4)},re=[J(Ce),J(F),J(-1*F),J(Ce),0,0,"cm"]}this.internal.write("q"),z?(this.internal.write([1,"0","0",1,H(C),X(P+I),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([H(G),"0","0",H(I),"0","0","cm"].join(" "))):this.internal.write([H(G),"0","0",H(I),H(C),X(P+I),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+V.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=e.__addimage__.sHashCode=function(C){var P,G,I=0;if(typeof C=="string")for(G=C.length,P=0;P<G;P++)I=(I<<5)-I+C.charCodeAt(P),I|=0;else if(L(C))for(G=C.byteLength/2,P=0;P<G;P++)I=(I<<5)-I+C[P],I|=0;return I},_=e.__addimage__.validateStringAsBase64=function(C){(C=C||"").toString().trim();var P=!0;return C.length===0&&(P=!1),C.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(C.substr(0,C.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(C.substr(-2))===!1&&(P=!1),P},k=e.__addimage__.extractImageFromDataUrl=function(C){if(C==null||!(C=C.trim()).startsWith("data:"))return null;var P=C.indexOf(",");return P<0?null:C.substring(0,P).trim().endsWith("base64")?C.substring(P+1):null},M=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(C){return M()&&C instanceof ArrayBuffer};var L=e.__addimage__.isArrayBufferView=function(C){return M()&&typeof Uint32Array<"u"&&(C instanceof Int8Array||C instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&C instanceof Uint8ClampedArray||C instanceof Int16Array||C instanceof Uint16Array||C instanceof Int32Array||C instanceof Uint32Array||C instanceof Float32Array||C instanceof Float64Array)},O=e.__addimage__.binaryStringToUint8Array=function(C){for(var P=C.length,G=new Uint8Array(P),I=0;I<P;I++)G[I]=C.charCodeAt(I);return G},T=e.__addimage__.arrayBufferToBinaryString=function(C){for(var P="",G=L(C)?C:new Uint8Array(C),I=0;I<G.length;I+=8192)P+=String.fromCharCode.apply(null,G.subarray(I,I+8192));return P};e.addImage=function(){var C,P,G,I,V,z,q,H,X;if(typeof arguments[1]=="number"?(P=t,G=arguments[1],I=arguments[2],V=arguments[3],z=arguments[4],q=arguments[5],H=arguments[6],X=arguments[7]):(P=arguments[1],G=arguments[2],I=arguments[3],V=arguments[4],z=arguments[5],q=arguments[6],H=arguments[7],X=arguments[8]),vn(C=arguments[0])==="object"&&!h(C)&&"imageData"in C){var le=C;C=le.imageData,P=le.format||P||t,G=le.x||G||0,I=le.y||I||0,V=le.w||le.width||V,z=le.h||le.height||z,q=le.alias||q,H=le.compression||H,X=le.rotation||le.angle||X}var Ce=this.internal.getFilters();if(H===void 0&&Ce.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(G)||isNaN(I))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var F=E.call(this,C,P,q,H);return y.call(this,G,I,V,z,F,X),this};var E=function(C,P,G,I){var V,z,q;if(typeof C=="string"&&r(C)===t){C=unescape(C);var H=Z(C,!1);(H!==""||(H=e.loadFile(C,!0))!==void 0)&&(C=H)}if(h(C)&&(C=g(C,P)),P=r(C,P),!f(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((q=G)==null||q.length===0)&&(G=function(X){return typeof X=="string"||L(X)?x(X):L(X.data)?x(X.data):null}(C)),(V=m.call(this,G))||(M()&&(C instanceof Uint8Array||P==="RGBA"||(z=C,C=O(C))),V=this["process"+P.toUpperCase()](C,d.call(this),G,function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in e.image_compression?X:v.NONE}(I),z)),!V)throw new Error("An unknown error occurred whilst processing the image.");return V},Z=e.__addimage__.convertBase64ToBinaryString=function(C,P){P=typeof P!="boolean"||P;var G,I="";if(typeof C=="string"){var V;G=(V=k(C))!==null&&V!==void 0?V:C;try{I=Th(G)}catch(z){if(P)throw _(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return I};e.getImageProperties=function(C){var P,G,I="";if(h(C)&&(C=g(C)),typeof C=="string"&&r(C)===t&&((I=Z(C,!1))===""&&(I=e.loadFile(C)||""),C=I),G=r(C),!f(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!M()||C instanceof Uint8Array||(C=O(C)),!(P=this["process"+G.toUpperCase()](C)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=G,P}})(_t.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};_t.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,a,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,f=!1,h=0;h<d.length&&!f;h++)switch((r=d[h]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var g=0;g<d.length;g++){r=d[g];var m=this.internal.pdfEscape,S=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(y.objId),x=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+m(v(r.contents))+")",a+=" /Popup "+j.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+m(v(x))+") >>",y.content=a;var _=y.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(a+=" /Open true"),a+=" >>",j.content=a,this.internal.write(y.objId,"0 R",j.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+l(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var k=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(S(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var M=this.annotations._nameMap[r.options.name];r.options.pageNumber=M.page,r.options.top=M.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(S(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var L=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+L+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,a,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:d(r),w:c(n+i),h:d(r+a)},options:o,type:"link"})},e.textWithLink=function(n,r,i,a){var o,l,c=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var f=this.splitTextToSize(n,l).length;o=Math.ceil(d*f)}else l=c,o=d;return this.text(n,r,i,a),i+=.2*d,a.align==="center"&&(r-=c/2),a.align==="right"&&(r-=c),this.link(r,i-d,l,o,a),c},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(_t.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(y){return t[y.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},l=e.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&a(y)&&t[y.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&i.indexOf(y.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&a(y)&&t[y.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&a(y)&&t[y.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&a(y)&&t[y.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&a(y)&&t[y.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(y){var j=0,v=n,x="",_=0;for(j=0;j<y.length;j+=1)v[y.charCodeAt(j)]!==void 0?(_++,typeof(v=v[y.charCodeAt(j)])=="number"&&(x+=String.fromCharCode(v),v=n,_=0),j===y.length-1&&(v=n,x+=y.charAt(j-(_-1)),j-=_-1,_=0)):(v=n,x+=y.charAt(j-_),j-=_,_=0);return x};e.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var g=e.__arabicParser__.getCorrectForm=function(y,j,v){return o(y)?a(y)===!1?-1:!d(y)||!o(j)&&!o(v)||!o(v)&&l(j)||l(y)&&!o(j)||l(y)&&c(j)||l(y)&&l(j)?0:f(y)&&o(j)&&!l(j)&&o(v)&&d(v)?3:l(y)||!o(v)?1:2:-1},m=function(y){var j=0,v=0,x=0,_="",k="",M="",L=(y=y||"").split("\\s+"),O=[];for(j=0;j<L.length;j+=1){for(O.push(""),v=0;v<L[j].length;v+=1)_=L[j][v],k=L[j][v-1],M=L[j][v+1],o(_)?(x=g(_,k,M),O[j]+=x!==-1?String.fromCharCode(t[_.charCodeAt(0)][x]):_):O[j]+=_;O[j]=h(O[j])}return O.join(" ")},S=e.__arabicParser__.processArabic=e.processArabic=function(){var y,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(j)){var x=0;for(v=[],x=0;x<j.length;x+=1)Array.isArray(j[x])?v.push([m(j[x][0]),j[x][1],j[x][2]]):v.push([m(j[x])]);y=v}else y=m(j);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};e.events.push(["preProcessText",S])}(_t.API),_t.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(_t.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var S=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return S},set:function(y){S=y}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){r.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),g=d.scaleFactor||this.internal.scaleFactor,m=0,S=0,y=0,j=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=d.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,k){return _.concat(j.splitTextToSize(k,v))},[])):c=Array.isArray(c)?c:[c];for(var x=0;x<c.length;x++)m<(y=this.getStringUnitWidth(c[x],{font:h})*f)&&(m=y);return m!==0&&(S=c.length),{w:m/=g,h:Math.max((S*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/g,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,g=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,m&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,f,h,g){if(r.call(this),!f)throw new Error("No data for PDF table.");var m,S,y,j,v=[],x=[],_=[],k={},M={},L=[],O=[],T=(g=g||{}).autoSize||!1,E=g.printHeaders!==!1,Z=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,C=g.margins||Object.assign({width:this.getPageWidth()},t),P=typeof g.padding=="number"?g.padding:3,G=g.headerBackgroundColor||"#c8c8c8",I=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=E,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=I,this.setFontSize(Z),h==null)x=v=Object.keys(f[0]),_=v.map(function(){return"left"});else if(Array.isArray(h)&&vn(h[0])==="object")for(v=h.map(function(le){return le.name}),x=h.map(function(le){return le.prompt||le.name||""}),_=h.map(function(le){return le.align||"left"}),m=0;m<h.length;m+=1)M[h[m].name]=h[m].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(x=v=h,_=v.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(m=0;m<v.length;m+=1){for(k[j=v[m]]=f.map(function(le){return le[j]}),this.setFont(void 0,"bold"),L.push(this.getTextDimensions(x[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),S=k[j],this.setFont(void 0,"normal"),y=0;y<S.length;y+=1)L.push(this.getTextDimensions(S[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);M[j]=Math.max.apply(null,L)+P+P,L=[]}if(E){var V={};for(m=0;m<v.length;m+=1)V[v[m]]={},V[v[m]].text=x[m],V[v[m]].align=_[m];var z=l.call(this,V,M);O=v.map(function(le){return new a(c,d,M[le],z,V[le].text,void 0,V[le].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var q=h.reduce(function(le,Ce){return le[Ce.name]=Ce.align,le},{});for(m=0;m<f.length;m+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:m,data:f[m]},this);var H=l.call(this,f[m],M);for(y=0;y<v.length;y+=1){var X=f[m][v[y]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:m,col:y,data:X},this),o.call(this,new a(c,d,M[v[y]],H,X,m+2,q[v[y]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var f=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(m){var S=c[m];return this.splitTextToSize(S.hasOwnProperty("text")?S.text:S,d[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*h/g+f+f},this).reduce(function(m,S){return Math.max(m,S)},0)};e.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,g.push(f)),f.lineNumber=c;var S=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(S)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),n=!1}}(_t.API);var PI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},TI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],w2=kI(TI),LI=[100,200,300,400,500,600,700,800,900],uG=kI(LI);function N2(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return PI[a=a||"normal"]?a:"normal"}(e.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(a){return typeof w2[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function Bj(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var fG={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},zj={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function $j(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function hG(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},fG,n.genericFontFamilies||{}),a=null,o=null,l=0;l<t.length;++l)if(i[(a=N2(t[l])).family]&&(a.family=i[a.family]),e.hasOwnProperty(a.family)){o=e[a.family];break}if(!(o=o||e[r]))throw new Error("Could not find a font-family for the rule '"+$j(a)+"' and default family '"+r+"'.");if(o=function(c,d){if(d[c])return d[c];var f=w2[c],h=f<=w2.normal?-1:1,g=Bj(d,TI,f,h);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(a.stretch,o),o=function(c,d){if(d[c])return d[c];for(var f=PI[c],h=0;h<f.length;++h)if(d[f[h]])return d[f[h]];throw new Error("Could not find a matching font-style for "+c)}(a.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var f=uG[c],h=Bj(d,LI,f,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(a.weight,o)))throw new Error("Failed to resolve a font for the rule '"+$j(a)+"'.");return o}function qj(e){return e.trimLeft()}function mG(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function pG(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var fg,Uj,Vj,j1=["times"];(function(e){var t,n,r,i,a,o,l,c,d,f=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new f}]);var h=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var J=F;Object.defineProperty(this,"pdf",{get:function(){return J}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(be){re=!!be}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(be){Q=!!be}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(be){isNaN(be)||(ie=be)}});var B=0;Object.defineProperty(this,"posY",{get:function(){return B},set:function(be){isNaN(be)||(B=be)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(be){var se;typeof be=="number"?se=[be,be,be,be]:((se=new Array(4))[0]=be[0],se[1]=be.length>=2?be[1]:se[0],se[2]=be.length>=3?be[2]:se[0],se[3]=be.length>=4?be[3]:se[1]),d.margin=se}});var te=!1;Object.defineProperty(this,"autoPaging",{get:function(){return te},set:function(be){te=be}});var oe=0;Object.defineProperty(this,"lastBreak",{get:function(){return oe},set:function(be){oe=be}});var _e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return _e},set:function(be){_e=be}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(be){be instanceof f&&(d=be)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(be){d.path=be}});var we=[];Object.defineProperty(this,"ctxStack",{get:function(){return we},set:function(be){we=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var se;se=g(be),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var se=g(be);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var Ne=null;function ke(be,se){if(Ne===null){var ut=function(Je){var Y=[];return Object.keys(Je).forEach(function(de){Je[de].forEach(function(We){var ee=null;switch(We){case"bold":ee={family:de,weight:"bold"};break;case"italic":ee={family:de,style:"italic"};break;case"bolditalic":ee={family:de,weight:"bold",style:"italic"};break;case"":case"normal":ee={family:de}}ee!==null&&(ee.ref={name:de,style:We},Y.push(ee))})}),Y}(be.getFontList());Ne=function(Je){for(var Y={},de=0;de<Je.length;++de){var We=N2(Je[de]),ee=We.family,ce=We.stretch,he=We.style,De=We.weight;Y[ee]=Y[ee]||{},Y[ee][ce]=Y[ee][ce]||{},Y[ee][ce][he]=Y[ee][ce][he]||{},Y[ee][ce][he][De]=We}return Y}(ut.concat(se))}return Ne}var Ue=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ue},set:function(be){Ne=null,Ue=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var se;if(this.ctx.font=be,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var ut=se[1];se[2];var Je=se[3],Y=se[4];se[5];var de=se[6],We=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Y)[2];Y=Math.floor(We==="px"?parseFloat(Y)*this.pdf.internal.scaleFactor:We==="em"?parseFloat(Y)*this.pdf.getFontSize():parseFloat(Y)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Y);var ee=function(et){var wt,Xe,Tr=[],Qt=et.trim();if(Qt==="")return j1;if(Qt in zj)return[zj[Qt]];for(;Qt!=="";){switch(Xe=null,wt=(Qt=qj(Qt)).charAt(0)){case'"':case"'":Xe=mG(Qt.substring(1),wt);break;default:Xe=pG(Qt)}if(Xe===null||(Tr.push(Xe[0]),(Qt=qj(Xe[1]))!==""&&Qt.charAt(0)!==","))return j1;Qt=Qt.replace(/^,/,"")}return Tr}(de);if(this.fontFaces){var ce=hG(ke(this.pdf,this.fontFaces),ee.map(function(et){return{family:et,stretch:"normal",weight:Je,style:ut}}));this.pdf.setFont(ce.ref.name,ce.ref.style)}else{var he="";(Je==="bold"||parseInt(Je,10)>=700||ut==="bold")&&(he="bold"),ut==="italic"&&(he+="italic"),he.length===0&&(he="normal");for(var De="",Ie={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Te=0;Te<ee.length;Te++){if(this.pdf.internal.getFont(ee[Te],he,{noFallback:!0,disableWarning:!0})!==void 0){De=ee[Te];break}if(he==="bolditalic"&&this.pdf.internal.getFont(ee[Te],"bold",{noFallback:!0,disableWarning:!0})!==void 0)De=ee[Te],he="bold";else if(this.pdf.internal.getFont(ee[Te],"normal",{noFallback:!0,disableWarning:!0})!==void 0){De=ee[Te],he="normal";break}}if(De===""){for(var Ye=0;Ye<ee.length;Ye++)if(Ie[ee[Ye]]){De=Ie[ee[Ye]];break}}De=De===""?"Times":De,this.pdf.setFont(De,he)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,Ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,Ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};h.prototype.setLineDash=function(F){this.lineDash=F},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){k.call(this,"fill",!1)},h.prototype.stroke=function(){k.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(F,J){if(isNaN(F)||isNaN(J))throw _n.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new o(F,J));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new o(F,J)},h.prototype.closePath=function(){var F=new o(0,0),J=0;for(J=this.path.length-1;J!==-1;J--)if(this.path[J].type==="begin"&&vn(this.path[J+1])==="object"&&typeof this.path[J+1].x=="number"){F=new o(this.path[J+1].x,this.path[J+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},h.prototype.lineTo=function(F,J){if(isNaN(F)||isNaN(J))throw _n.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new o(F,J));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},h.prototype.quadraticCurveTo=function(F,J,re,Q){if(isNaN(re)||isNaN(Q)||isNaN(F)||isNaN(J))throw _n.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new o(re,Q)),B=this.ctx.transform.applyToPoint(new o(F,J));this.path.push({type:"qct",x1:B.x,y1:B.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},h.prototype.bezierCurveTo=function(F,J,re,Q,ie,B){if(isNaN(ie)||isNaN(B)||isNaN(F)||isNaN(J)||isNaN(re)||isNaN(Q))throw _n.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var te=this.ctx.transform.applyToPoint(new o(ie,B)),oe=this.ctx.transform.applyToPoint(new o(F,J)),_e=this.ctx.transform.applyToPoint(new o(re,Q));this.path.push({type:"bct",x1:oe.x,y1:oe.y,x2:_e.x,y2:_e.y,x:te.x,y:te.y}),this.ctx.lastPoint=new o(te.x,te.y)},h.prototype.arc=function(F,J,re,Q,ie,B){if(isNaN(F)||isNaN(J)||isNaN(re)||isNaN(Q)||isNaN(ie))throw _n.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(B=!!B,!this.ctx.transform.isIdentity){var te=this.ctx.transform.applyToPoint(new o(F,J));F=te.x,J=te.y;var oe=this.ctx.transform.applyToPoint(new o(0,re)),_e=this.ctx.transform.applyToPoint(new o(0,0));re=Math.sqrt(Math.pow(oe.x-_e.x,2)+Math.pow(oe.y-_e.y,2))}Math.abs(ie-Q)>=2*Math.PI&&(Q=0,ie=2*Math.PI),this.path.push({type:"arc",x:F,y:J,radius:re,startAngle:Q,endAngle:ie,counterclockwise:B})},h.prototype.arcTo=function(F,J,re,Q,ie){throw new Error("arcTo not implemented.")},h.prototype.rect=function(F,J,re,Q){if(isNaN(F)||isNaN(J)||isNaN(re)||isNaN(Q))throw _n.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,J),this.lineTo(F+re,J),this.lineTo(F+re,J+Q),this.lineTo(F,J+Q),this.lineTo(F,J),this.lineTo(F+re,J),this.lineTo(F,J)},h.prototype.fillRect=function(F,J,re,Q){if(isNaN(F)||isNaN(J)||isNaN(re)||isNaN(Q))throw _n.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,J,re,Q),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},h.prototype.strokeRect=function(F,J,re,Q){if(isNaN(F)||isNaN(J)||isNaN(re)||isNaN(Q))throw _n.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");S.call(this)||(this.beginPath(),this.rect(F,J,re,Q),this.stroke())},h.prototype.clearRect=function(F,J,re,Q){if(isNaN(F)||isNaN(J)||isNaN(re)||isNaN(Q))throw _n.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,J,re,Q))},h.prototype.save=function(F){F=typeof F!="boolean"||F;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(J),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},h.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var J=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(J),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(F){var J,re,Q,ie;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))J=0,re=0,Q=0,ie=0;else{var B=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(B!==null)J=parseInt(B[1]),re=parseInt(B[2]),Q=parseInt(B[3]),ie=1;else if((B=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)J=parseInt(B[1]),re=parseInt(B[2]),Q=parseInt(B[3]),ie=parseFloat(B[4]);else{if(ie=1,typeof F=="string"&&F.charAt(0)!=="#"){var te=new NI(F);F=te.ok?te.toHex():"#000000"}F.length===4?(J=F.substring(1,2),J+=J,re=F.substring(2,3),re+=re,Q=F.substring(3,4),Q+=Q):(J=F.substring(1,3),re=F.substring(3,5),Q=F.substring(5,7)),J=parseInt(J,16),re=parseInt(re,16),Q=parseInt(Q,16)}}return{r:J,g:re,b:Q,a:ie,style:F}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},S=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(F,J,re,Q){if(isNaN(J)||isNaN(re)||typeof F!="string")throw _n.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!m.call(this)){var ie=H(this.ctx.transform.rotation),B=this.ctx.transform.scaleX;P.call(this,{text:F,x:J,y:re,scale:B,angle:ie,align:this.textAlign,maxWidth:Q})}},h.prototype.strokeText=function(F,J,re,Q){if(isNaN(J)||isNaN(re)||typeof F!="string")throw _n.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!S.call(this)){Q=isNaN(Q)?void 0:Q;var ie=H(this.ctx.transform.rotation),B=this.ctx.transform.scaleX;P.call(this,{text:F,x:J,y:re,scale:B,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:Q})}},h.prototype.measureText=function(F){if(typeof F!="string")throw _n.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var J=this.pdf,re=this.pdf.internal.scaleFactor,Q=J.internal.getFontSize(),ie=J.getStringUnitWidth(F)*Q/J.internal.scaleFactor,B=function(te){var oe=(te=te||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this};return new B({width:ie*=Math.round(96*re/72*1e4)/1e4})},h.prototype.scale=function(F,J){if(isNaN(F)||isNaN(J))throw _n.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new c(F,0,0,J,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},h.prototype.rotate=function(F){if(isNaN(F))throw _n.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var J=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.translate=function(F,J){if(isNaN(F)||isNaN(J))throw _n.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new c(1,0,0,1,F,J);this.ctx.transform=this.ctx.transform.multiply(re)},h.prototype.transform=function(F,J,re,Q,ie,B){if(isNaN(F)||isNaN(J)||isNaN(re)||isNaN(Q)||isNaN(ie)||isNaN(B))throw _n.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var te=new c(F,J,re,Q,ie,B);this.ctx.transform=this.ctx.transform.multiply(te)},h.prototype.setTransform=function(F,J,re,Q,ie,B){F=isNaN(F)?1:F,J=isNaN(J)?0:J,re=isNaN(re)?0:re,Q=isNaN(Q)?1:Q,ie=isNaN(ie)?0:ie,B=isNaN(B)?0:B,this.ctx.transform=new c(F,J,re,Q,ie,B)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(F,J,re,Q,ie,B,te,oe,_e){var we=this.pdf.getImageProperties(F),Ne=1,ke=1,Ue=1,be=1;Q!==void 0&&oe!==void 0&&(Ue=oe/Q,be=_e/ie,Ne=we.width/Q*oe/Q,ke=we.height/ie*_e/ie),B===void 0&&(B=J,te=re,J=0,re=0),Q!==void 0&&oe===void 0&&(oe=Q,_e=ie),Q===void 0&&oe===void 0&&(oe=we.width,_e=we.height);for(var se,ut=this.ctx.transform.decompose(),Je=H(ut.rotate.shx),Y=new c,de=(Y=(Y=(Y=Y.multiply(ut.translate)).multiply(ut.skew)).multiply(ut.scale)).applyToRectangle(new l(B-J*Ue,te-re*be,Q*Ne,ie*ke)),We=j.call(this,de),ee=[],ce=0;ce<We.length;ce+=1)ee.indexOf(We[ce])===-1&&ee.push(We[ce]);if(_(ee),this.autoPaging)for(var he=ee[0],De=ee[ee.length-1],Ie=he;Ie<De+1;Ie++){this.pdf.setPage(Ie);var Te=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ye=Ie===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=Ie===1?0:et+(Ie-2)*wt;if(this.ctx.clip_path.length!==0){var Tr=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(se,this.posX+this.margin[3],-Xe+Ye+this.ctx.prevPageLastElemOffset),M.call(this,"fill",!0),this.path=Tr}var Qt=JSON.parse(JSON.stringify(de));Qt=x([Qt],this.posX+this.margin[3],-Xe+Ye+this.ctx.prevPageLastElemOffset)[0];var gs=(Ie>he||Ie<De)&&y.call(this);gs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Te,wt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,Je),gs&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",de.x,de.y,de.w,de.h,null,null,Je)};var j=function(F,J,re){var Q=[];J=J||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":Q.push(Math.floor((F.y+ie)/re)+1);break;case"arc":Q.push(Math.floor((F.y+ie-F.radius)/re)+1),Q.push(Math.floor((F.y+ie+F.radius)/re)+1);break;case"qct":var B=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);Q.push(Math.floor((B.y+ie)/re)+1),Q.push(Math.floor((B.y+B.h+ie)/re)+1);break;case"bct":var te=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);Q.push(Math.floor((te.y+ie)/re)+1),Q.push(Math.floor((te.y+te.h+ie)/re)+1);break;case"rect":Q.push(Math.floor((F.y+ie)/re)+1),Q.push(Math.floor((F.y+F.h+ie)/re)+1)}for(var oe=0;oe<Q.length;oe+=1)for(;this.pdf.internal.getNumberOfPages()<Q[oe];)v.call(this);return Q},v=function(){var F=this.fillStyle,J=this.strokeStyle,re=this.font,Q=this.lineCap,ie=this.lineWidth,B=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=J,this.font=re,this.lineCap=Q,this.lineWidth=ie,this.lineJoin=B},x=function(F,J,re){for(var Q=0;Q<F.length;Q++)switch(F[Q].type){case"bct":F[Q].x2+=J,F[Q].y2+=re;case"qct":F[Q].x1+=J,F[Q].y1+=re;case"mt":case"lt":case"arc":default:F[Q].x+=J,F[Q].y+=re}return F},_=function(F){return F.sort(function(J,re){return J-re})},k=function(F,J){for(var re,Q,ie=this.fillStyle,B=this.strokeStyle,te=this.lineCap,oe=this.lineWidth,_e=Math.abs(oe*this.ctx.transform.scaleX),we=this.lineJoin,Ne=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),Ue=[],be=0;be<ke.length;be++)if(ke[be].x!==void 0)for(var se=j.call(this,ke[be]),ut=0;ut<se.length;ut+=1)Ue.indexOf(se[ut])===-1&&Ue.push(se[ut]);for(var Je=0;Je<Ue.length;Je++)for(;this.pdf.internal.getNumberOfPages()<Ue[Je];)v.call(this);if(_(Ue),this.autoPaging)for(var Y=Ue[0],de=Ue[Ue.length-1],We=Y;We<de+1;We++){this.pdf.setPage(We),this.fillStyle=ie,this.strokeStyle=B,this.lineCap=te,this.lineWidth=_e,this.lineJoin=we;var ee=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ce=We===1?this.posY+this.margin[0]:this.margin[0],he=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],De=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=We===1?0:he+(We-2)*De;if(this.ctx.clip_path.length!==0){var Te=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(re,this.posX+this.margin[3],-Ie+ce+this.ctx.prevPageLastElemOffset),M.call(this,F,!0),this.path=Te}if(Q=JSON.parse(JSON.stringify(Ne)),this.path=x(Q,this.posX+this.margin[3],-Ie+ce+this.ctx.prevPageLastElemOffset),J===!1||We===0){var Ye=(We>Y||We<de)&&y.call(this);Ye&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ee,De,null).clip().discardPath()),M.call(this,F,J),Ye&&this.pdf.restoreGraphicsState()}this.lineWidth=oe}else this.lineWidth=_e,M.call(this,F,J),this.lineWidth=oe;this.path=Ne},M=function(F,J){if((F!=="stroke"||J||!S.call(this))&&(F==="stroke"||J||!m.call(this))){for(var re,Q,ie=[],B=this.path,te=0;te<B.length;te++){var oe=B[te];switch(oe.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:oe,deltas:[],abs:[]});break;case"lt":var _e=ie.length;if(B[te-1]&&!isNaN(B[te-1].x)&&(re=[oe.x-B[te-1].x,oe.y-B[te-1].y],_e>0)){for(;_e>=0;_e--)if(ie[_e-1].close!==!0&&ie[_e-1].begin!==!0){ie[_e-1].deltas.push(re),ie[_e-1].abs.push(oe);break}}break;case"bct":re=[oe.x1-B[te-1].x,oe.y1-B[te-1].y,oe.x2-B[te-1].x,oe.y2-B[te-1].y,oe.x-B[te-1].x,oe.y-B[te-1].y],ie[ie.length-1].deltas.push(re);break;case"qct":var we=B[te-1].x+2/3*(oe.x1-B[te-1].x),Ne=B[te-1].y+2/3*(oe.y1-B[te-1].y),ke=oe.x+2/3*(oe.x1-oe.x),Ue=oe.y+2/3*(oe.y1-oe.y),be=oe.x,se=oe.y;re=[we-B[te-1].x,Ne-B[te-1].y,ke-B[te-1].x,Ue-B[te-1].y,be-B[te-1].x,se-B[te-1].y],ie[ie.length-1].deltas.push(re);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(oe)}}Q=J?null:F==="stroke"?"stroke":"fill";for(var ut=!1,Je=0;Je<ie.length;Je++)if(ie[Je].arc)for(var Y=ie[Je].abs,de=0;de<Y.length;de++){var We=Y[de];We.type==="arc"?T.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,J,!ut):G.call(this,We.x,We.y),ut=!0}else if(ie[Je].close===!0)this.pdf.internal.out("h"),ut=!1;else if(ie[Je].begin!==!0){var ee=ie[Je].start.x,ce=ie[Je].start.y;I.call(this,ie[Je].deltas,ee,ce),ut=!0}Q&&E.call(this,Q),J&&Z.call(this)}},L=function(F){var J=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=J*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-re;case"top":return F+J-re;case"hanging":return F+J-2*re;case"middle":return F+J/2-re;case"ideographic":return F;case"alphabetic":default:return F}},O=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(J,re){this.colorStops.push([J,re])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(F,J,re,Q,ie,B,te,oe,_e){for(var we=z.call(this,re,Q,ie,B),Ne=0;Ne<we.length;Ne++){var ke=we[Ne];Ne===0&&(_e?C.call(this,ke.x1+F,ke.y1+J):G.call(this,ke.x1+F,ke.y1+J)),V.call(this,F,J,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}oe?Z.call(this):E.call(this,te)},E=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(F,J){this.pdf.internal.out(n(F)+" "+r(J)+" m")},P=function(F){var J;switch(F.align){case"right":case"end":J="right";break;case"center":J="center";break;case"left":case"start":default:J="left"}var re=this.pdf.getTextDimensions(F.text),Q=L.call(this,F.y),ie=O.call(this,Q)-re.h,B=this.ctx.transform.applyToPoint(new o(F.x,Q)),te=this.ctx.transform.decompose(),oe=new c;oe=(oe=(oe=oe.multiply(te.translate)).multiply(te.skew)).multiply(te.scale);for(var _e,we,Ne,ke=this.ctx.transform.applyToRectangle(new l(F.x,Q,re.w,re.h)),Ue=oe.applyToRectangle(new l(F.x,ie,re.w,re.h)),be=j.call(this,Ue),se=[],ut=0;ut<be.length;ut+=1)se.indexOf(be[ut])===-1&&se.push(be[ut]);if(_(se),this.autoPaging)for(var Je=se[0],Y=se[se.length-1],de=Je;de<Y+1;de++){this.pdf.setPage(de);var We=de===1?this.posY+this.margin[0]:this.margin[0],ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ce=this.pdf.internal.pageSize.height-this.margin[2],he=ce-this.margin[0],De=this.pdf.internal.pageSize.width-this.margin[1],Ie=De-this.margin[3],Te=de===1?0:ee+(de-2)*he;if(this.ctx.clip_path.length!==0){var Ye=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(_e,this.posX+this.margin[3],-1*Te+We),M.call(this,"fill",!0),this.path=Ye}var et=x([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-Te+We+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*F.scale),Ne=this.lineWidth,this.lineWidth=Ne*F.scale);var wt=this.autoPaging!=="text";if(wt||et.y+et.h<=ce){if(wt||et.y>=We&&et.x<=De){var Xe=wt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||De-et.x)[0],Tr=x([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-Te+We+this.ctx.prevPageLastElemOffset)[0],Qt=wt&&(de>Je||de<Y)&&y.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,he,null).clip().discardPath()),this.pdf.text(Xe,Tr.x,Tr.y,{angle:F.angle,align:J,renderingMode:F.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else et.y<ce&&(this.ctx.prevPageLastElemOffset+=ce-et.y);F.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Ne)}else F.scale>=.01&&(we=this.pdf.internal.getFontSize(),this.pdf.setFontSize(we*F.scale),Ne=this.lineWidth,this.lineWidth=Ne*F.scale),this.pdf.text(F.text,B.x+this.posX,B.y+this.posY,{angle:F.angle,align:J,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(we),this.lineWidth=Ne)},G=function(F,J,re,Q){re=re||0,Q=Q||0,this.pdf.internal.out(n(F+re)+" "+r(J+Q)+" l")},I=function(F,J,re){return this.pdf.lines(F,J,re,null,null)},V=function(F,J,re,Q,ie,B,te,oe){this.pdf.internal.out([t(i(re+F)),t(a(Q+J)),t(i(ie+F)),t(a(B+J)),t(i(te+F)),t(a(oe+J)),"c"].join(" "))},z=function(F,J,re,Q){for(var ie=2*Math.PI,B=Math.PI/2;J>re;)J-=ie;var te=Math.abs(re-J);te<ie&&Q&&(te=ie-te);for(var oe=[],_e=Q?-1:1,we=J;te>1e-5;){var Ne=we+_e*Math.min(te,B);oe.push(q.call(this,F,we,Ne)),te-=Math.abs(Ne-we),we=Ne}return oe},q=function(F,J,re){var Q=(re-J)/2,ie=F*Math.cos(Q),B=F*Math.sin(Q),te=ie,oe=-B,_e=te*te+oe*oe,we=_e+te*ie+oe*B,Ne=4/3*(Math.sqrt(2*_e*we)-we)/(te*B-oe*ie),ke=te-Ne*oe,Ue=oe+Ne*te,be=ke,se=-Ue,ut=Q+J,Je=Math.cos(ut),Y=Math.sin(ut);return{x1:F*Math.cos(J),y1:F*Math.sin(J),x2:ke*Je-Ue*Y,y2:ke*Y+Ue*Je,x3:be*Je-se*Y,y3:be*Y+se*Je,x4:F*Math.cos(re),y4:F*Math.sin(re)}},H=function(F){return 180*F/Math.PI},X=function(F,J,re,Q,ie,B){var te=F+.5*(re-F),oe=J+.5*(Q-J),_e=ie+.5*(re-ie),we=B+.5*(Q-B),Ne=Math.min(F,ie,te,_e),ke=Math.max(F,ie,te,_e),Ue=Math.min(J,B,oe,we),be=Math.max(J,B,oe,we);return new l(Ne,Ue,ke-Ne,be-Ue)},le=function(F,J,re,Q,ie,B,te,oe){var _e,we,Ne,ke,Ue,be,se,ut,Je,Y,de,We,ee,ce,he=re-F,De=Q-J,Ie=ie-re,Te=B-Q,Ye=te-ie,et=oe-B;for(we=0;we<41;we++)Je=(se=(Ne=F+(_e=we/40)*he)+_e*((Ue=re+_e*Ie)-Ne))+_e*(Ue+_e*(ie+_e*Ye-Ue)-se),Y=(ut=(ke=J+_e*De)+_e*((be=Q+_e*Te)-ke))+_e*(be+_e*(B+_e*et-be)-ut),we==0?(de=Je,We=Y,ee=Je,ce=Y):(de=Math.min(de,Je),We=Math.min(We,Y),ee=Math.max(ee,Je),ce=Math.max(ce,Y));return new l(Math.round(de),Math.round(We),Math.round(ee-de),Math.round(ce-We))},Ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,J,re=(F=this.ctx.lineDash,J=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:J}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(_t.API),function(e){var t=function(a){var o,l,c,d,f,h,g,m,S,y;for(l=[],c=0,d=(a+=o="\0\0\0\0".slice(a.length%4||4)).length;d>c;c+=4)(f=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(h=(f=((f=((f=((f=(f-(y=f%85))/85)-(S=f%85))/85)-(m=f%85))/85)-(g=f%85))/85)%85,l.push(h+33,g+33,m+33,S+33,y+33)):l.push(122);return function(j,v){for(var x=v;x>0;x--)j.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},n=function(a){var o,l,c,d,f,h=String,g="length",m=255,S="charCodeAt",y="slice",j="replace";for(a[y](-2),a=a[y](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),c=[],d=0,f=(a+=o="uuuuu"[y](a[g]%5||5))[g];f>d;d+=5)l=52200625*(a[S](d)-33)+614125*(a[S](d+1)-33)+7225*(a[S](d+2)-33)+85*(a[S](d+3)-33)+(a[S](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(v,x){for(var _=x;_>0;_--)v.pop()}(c,o[g]),h.fromCharCode.apply(h,c)},r=function(a){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),o.test(a)===!1)return"";for(var l="",c=0;c<a.length;c+=2)l+=String.fromCharCode("0x"+(a[c]+a[c+1]));return l},i=function(a){for(var o=new Uint8Array(a.length),l=a.length;l--;)o[l]=a.charCodeAt(l);return a=(o=g2(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(a,o){var l=0,c=a||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=n(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(_t.API),function(e){e.loadFile=function(t,n,r){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,f){var h=new XMLHttpRequest,g=0,m=function(S){var y=S.length,j=[],v=String.fromCharCode;for(g=0;g<y;g+=1)j.push(v(255&S.charCodeAt(g)));return j.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?f(m(this.responseText)):f(void 0)}),h.send(null),d&&h.status===200)return m(h.responseText)}(i,a,o)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(_t.API),function(e){function t(){return(Et.html2canvas?Promise.resolve(Et.html2canvas):Mx(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Et.DOMPurify?Promise.resolve(Et.DOMPurify):Mx(()=>import("./purify.es-BFmuJLeH.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var l=vn(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},a=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(o,l){return o.__proto__=l||a.prototype,o},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(c){return this.set({src:i("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},a.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,f){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),g=d.firstChild;g;g=g.nextSibling)f!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||h.appendChild(c(g,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var g=0;g<d.length;++g){var m=d[g],S=m.src.find(function(y){return y.format==="truetype"});S&&c.addFont(S.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},a.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},a.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},a.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(o){if(r(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},a.prototype.get=function(o,l){return this.then(function(){var c=o in a.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},a.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},a.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||_t.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},a.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},a.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,f){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,f).then(function(h){return c.updateProgress(1),h})})},a.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),f=c.call(d,o,l);return a.convert(f,this.__proto__)},a.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},a.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},a.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return a.convert(l,this)},a.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},a.prototype.error=function(o){return this.then(function(){throw new Error(o)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,_t.getPageSize=function(o,l,c){if(vn(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,h=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var m,S=0,y=0;if(g.hasOwnProperty(h))S=g[h][1]/f,y=g[h][0]/f;else try{S=c[1],y=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",y>S&&(m=y,y=S,S=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",S>y&&(m=y,y=S,S=m)}return{width:y,height:S,unit:l,k:f,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(N2):null;var c=new a(l);return l.worker?c:c.from(o).doCallback()}}(_t.API),_t.API.addJS=function(e){return Vj=e,this.internal.events.subscribe("postPutResources",function(){fg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Uj=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Vj+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){fg!==void 0&&Uj!==void 0&&this.internal.out("/Names <</JavaScript "+fg+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],l=r.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(a=0;a<d;a++){var h=n.internal.newObject();f.push(h);var g=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<f.length;a++)n.internal.write("(page_"+(a+1)+")"+f[a]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,a){var o={title:i,options:a,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var o=r.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var a=0;a<i.children.length;a++)r.count++,this.count_r(r,i.children[a]);return r.count}}])}(_t.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,a,o,l){var c,d=this.decode.DCT_DECODE,f=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(c=function(h){for(var g,m=256*h.charCodeAt(4)+h.charCodeAt(5),S=h.length,y={width:0,height:0,numcomponents:1},j=4;j<S;j+=2){if(j+=m,t.indexOf(h.charCodeAt(j+1))!==-1){g=256*h.charCodeAt(j+5)+h.charCodeAt(j+6),y={width:256*h.charCodeAt(j+7)+h.charCodeAt(j+8),height:g,numcomponents:h.charCodeAt(j+9)};break}m=256*h.charCodeAt(j+2)+h.charCodeAt(j+3)}return y}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:i}}return f}}(_t.API);var Hd,hg,Wj,Hj,Gj,gG=function(){var e,t,n;function r(a){var o,l,c,d,f,h,g,m,S,y,j,v,x,_;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),S=(function(){var k,M;for(M=[],k=0;k<4;++k)M.push(String.fromCharCode(this.data[this.pos++]));return M}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*f/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(S==="fdAT"&&(this.pos+=4,o-=4),a=(h!=null?h.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((y=c-this.transparency.indexed.length)>0)for(x=0;0<=y?x<y:x>y;0<=y?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":g=(j=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,j.slice(0,g)),this.text[m]=String.fromCharCode.apply(String,j.slice(g+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var o,l;for(l=[],o=0;0<=a?o<a:o>a;0<=a?++o:--o)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function f(h,g,m,S){var y,j,v,x,_,k,M,L,O,T,E,Z,C,P,G,I,V,z,q,H,X,le=Math.ceil((d.width-h)/m),Ce=Math.ceil((d.height-g)/S),F=d.width==le&&d.height==Ce;for(P=o*le,Z=F?l:new Uint8Array(P*Ce),k=a.length,C=0,j=0;C<Ce&&c<k;){switch(a[c++]){case 0:for(x=V=0;V<P;x=V+=1)Z[j++]=a[c++];break;case 1:for(x=z=0;z<P;x=z+=1)y=a[c++],_=x<o?0:Z[j-o],Z[j++]=(y+_)%256;break;case 2:for(x=q=0;q<P;x=q+=1)y=a[c++],v=(x-x%o)/o,G=C&&Z[(C-1)*P+v*o+x%o],Z[j++]=(G+y)%256;break;case 3:for(x=H=0;H<P;x=H+=1)y=a[c++],v=(x-x%o)/o,_=x<o?0:Z[j-o],G=C&&Z[(C-1)*P+v*o+x%o],Z[j++]=(y+Math.floor((_+G)/2))%256;break;case 4:for(x=X=0;X<P;x=X+=1)y=a[c++],v=(x-x%o)/o,_=x<o?0:Z[j-o],C===0?G=I=0:(G=Z[(C-1)*P+v*o+x%o],I=v&&Z[(C-1)*P+(v-1)*o+x%o]),M=_+G-I,L=Math.abs(M-_),T=Math.abs(M-G),E=Math.abs(M-I),O=L<=T&&L<=E?_:T<=E?G:I,Z[j++]=(y+O)%256;break;default:throw new Error("Invalid filter algorithm: "+a[c-1])}if(!F){var J=((g+C*S)*d.width+h)*o,re=C*P;for(x=0;x<le;x+=1){for(var Q=0;Q<o;Q+=1)l[J++]=Z[re++];J+=(m-1)*o}}C++}}return a=KH(a),d.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},r.prototype.decodePalette=function(){var a,o,l,c,d,f,h,g,m;for(l=this.palette,f=this.transparency.indexed||[],d=new Uint8Array((f.length||0)+l.length),c=0,a=0,o=h=0,g=l.length;h<g;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(m=f[a++])!=null?m:255;return d},r.prototype.copyToImageData=function(a,o){var l,c,d,f,h,g,m,S,y,j,v;if(c=this.colors,y=null,l=this.hasAlphaChannel,this.palette.length&&(y=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),c=4,l=!0),S=(d=a.data||a).length,h=y||o,f=g=0,c===1)for(;f<S;)m=y?4*o[f/4]:g,j=h[m++],d[f++]=j,d[f++]=j,d[f++]=j,d[f++]=l?h[m++]:255,g=m;else for(;f<S;)m=y?4*o[f/4]:g,d[f++]=h[m++],d[f++]=h[m++],d[f++]=h[m++],d[f++]=l?h[m++]:255,g=m},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var i=function(){if(Object.prototype.toString.call(Et)==="[object Window]"){try{t=Et.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(a){var o;if(i()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var o,l,c,d,f,h,g,m;if(this.animation){for(m=[],l=f=0,h=(g=this.animation.frames).length;f<h;l=++f)o=g[l],c=a.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,m.push(o.image=e(c));return m}},r.prototype.renderFrame=function(a,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&a.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?a.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&a.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&a.clearRect(l.xOffset,l.yOffset,l.width,l.height),a.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(a){var o,l,c,d,f,h,g=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,f=h.numPlays,(o=function(){var m,S;if(m=l++%d,S=c[m],g.renderFrame(a,m),d>1&&l/d<f)return g.animation._timeout=setTimeout(o,S.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var o,l;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,o=a.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function xG(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,o=1<<(7&i)+1;e[t++],e[t++];var l=null,c=null;a&&(l=t,c=o,t+=3*o);var d=!0,f=[],h=0,g=null,m=0,S=null;for(this.width=n,this.height=r;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,S=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var y=e[t++];h=e[t++]|e[t++]<<8,g=e[t++],!(1&y)&&(g=null),m=y>>2&7,t++;break;case 254:for(;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var j=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,k=e[t++],M=k>>6&1,L=1<<(7&k)+1,O=l,T=c,E=!1;k>>7&&(E=!0,O=t,T=L,t+=3*L);var Z=t;for(t++;;){var C;if(!((C=e[t++])>=0))throw Error("Invalid block size");if(C===0)break;t+=C}f.push({x:j,y:v,width:x,height:_,has_local_palette:E,palette_offset:O,palette_size:T,data_offset:Z,data_length:t-Z,transparent_index:g,interlaced:!!M,delay:h,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return S},this.frameInfo=function(P){if(P<0||P>=f.length)throw new Error("Frame index out of range.");return f[P]},this.decodeAndBlitFrameBGRA=function(P,G){var I=this.frameInfo(P),V=I.width*I.height,z=new Uint8Array(V);Kj(e,I.data_offset,z,V);var q=I.palette_offset,H=I.transparent_index;H===null&&(H=256);var X=I.width,le=n-X,Ce=X,F=4*(I.y*n+I.x),J=4*((I.y+I.height)*n+I.x),re=F,Q=4*le;I.interlaced===!0&&(Q+=4*n*7);for(var ie=8,B=0,te=z.length;B<te;++B){var oe=z[B];if(Ce===0&&(Ce=X,(re+=Q)>=J&&(Q=4*le+4*n*(ie-1),re=F+(X+le)*(ie<<1),ie>>=1)),oe===H)re+=4;else{var _e=e[q+3*oe],we=e[q+3*oe+1],Ne=e[q+3*oe+2];G[re++]=Ne,G[re++]=we,G[re++]=_e,G[re++]=255}--Ce}},this.decodeAndBlitFrameRGBA=function(P,G){var I=this.frameInfo(P),V=I.width*I.height,z=new Uint8Array(V);Kj(e,I.data_offset,z,V);var q=I.palette_offset,H=I.transparent_index;H===null&&(H=256);var X=I.width,le=n-X,Ce=X,F=4*(I.y*n+I.x),J=4*((I.y+I.height)*n+I.x),re=F,Q=4*le;I.interlaced===!0&&(Q+=4*n*7);for(var ie=8,B=0,te=z.length;B<te;++B){var oe=z[B];if(Ce===0&&(Ce=X,(re+=Q)>=J&&(Q=4*le+4*n*(ie-1),re=F+(X+le)*(ie<<1),ie>>=1)),oe===H)re+=4;else{var _e=e[q+3*oe],we=e[q+3*oe+1],Ne=e[q+3*oe+2];G[re++]=_e,G[re++]=we,G[re++]=Ne,G[re++]=255}--Ce}}}function Kj(e,t,n,r){for(var i=e[t++],a=1<<i,o=a+1,l=o+1,c=i+1,d=(1<<c)-1,f=0,h=0,g=0,m=e[t++],S=new Int32Array(4096),y=null;;){for(;f<16&&m!==0;)h|=e[t++]<<f,f+=8,m===1?m=e[t++]:--m;if(f<c)break;var j=h&d;if(h>>=c,f-=c,j!==a){if(j===o)break;for(var v=j<l?j:y,x=0,_=v;_>a;)_=S[_]>>8,++x;var k=_;if(g+x+(v!==j?1:0)>r)return void _n.log("Warning, gif stream longer than expected.");n[g++]=k;var M=g+=x;for(v!==j&&(n[g++]=k),_=v;x--;)_=S[_],n[--M]=255&_,_>>=8;y!==null&&l<4096&&(S[l++]=y<<8|k,l>=d+1&&c<12&&(++c,d=d<<1|1)),y=j}else l=o+1,d=(1<<(c=i+1))-1,y=null}return g!==r&&_n.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function S1(e){var t,n,r,i,a,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),f=new Array(64),h=new Array(65535),g=new Array(65535),m=new Array(64),S=new Array(64),y=[],j=0,v=7,x=new Array(64),_=new Array(64),k=new Array(64),M=new Array(256),L=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],I=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],V=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function z(F,J){for(var re=0,Q=0,ie=new Array,B=1;B<=16;B++){for(var te=1;te<=F[B];te++)ie[J[Q]]=[],ie[J[Q]][0]=re,ie[J[Q]][1]=B,Q++,re++;re*=2}return ie}function q(F){for(var J=F[0],re=F[1]-1;re>=0;)J&1<<re&&(j|=1<<v),re--,--v<0&&(j==255?(H(255),H(0)):H(j),v=7,j=0)}function H(F){y.push(F)}function X(F){H(F>>8&255),H(255&F)}function le(F,J,re,Q,ie){for(var B,te=ie[0],oe=ie[240],_e=function(Y,de){var We,ee,ce,he,De,Ie,Te,Ye,et,wt,Xe=0;for(et=0;et<8;++et){We=Y[Xe],ee=Y[Xe+1],ce=Y[Xe+2],he=Y[Xe+3],De=Y[Xe+4],Ie=Y[Xe+5],Te=Y[Xe+6];var Tr=We+(Ye=Y[Xe+7]),Qt=We-Ye,gs=ee+Te,mn=ee-Te,jn=ce+Ie,vi=ce-Ie,nn=he+De,ic=he-De,Kn=Tr+nn,zi=Tr-nn,ro=gs+jn,Qn=gs-jn;Y[Xe]=Kn+ro,Y[Xe+4]=Kn-ro;var Rt=.707106781*(Qn+zi);Y[Xe+2]=zi+Rt,Y[Xe+6]=zi-Rt;var cn=.382683433*((Kn=ic+vi)-(Qn=mn+Qt)),ac=.5411961*Kn+cn,Rr=1.306562965*Qn+cn,Na=.707106781*(ro=vi+mn),ja=Qt+Na,Pt=Qt-Na;Y[Xe+5]=Pt+ac,Y[Xe+3]=Pt-ac,Y[Xe+1]=ja+Rr,Y[Xe+7]=ja-Rr,Xe+=8}for(Xe=0,et=0;et<8;++et){We=Y[Xe],ee=Y[Xe+8],ce=Y[Xe+16],he=Y[Xe+24],De=Y[Xe+32],Ie=Y[Xe+40],Te=Y[Xe+48];var $i=We+(Ye=Y[Xe+56]),Sa=We-Ye,Is=ee+Te,Nr=ee-Te,pr=ce+Ie,Zs=ce-Ie,ud=he+De,so=he-De,qi=$i+ud,Ui=$i-ud,Vi=Is+pr,_a=Is-pr;Y[Xe]=qi+Vi,Y[Xe+32]=qi-Vi;var yi=.707106781*(_a+Ui);Y[Xe+16]=Ui+yi,Y[Xe+48]=Ui-yi;var Ca=.382683433*((qi=so+Zs)-(_a=Nr+Sa)),oc=.5411961*qi+Ca,fd=1.306562965*_a+Ca,hd=.707106781*(Vi=Zs+Nr),md=Sa+hd,pd=Sa-hd;Y[Xe+40]=pd+oc,Y[Xe+24]=pd-oc,Y[Xe+8]=md+fd,Y[Xe+56]=md-fd,Xe++}for(et=0;et<64;++et)wt=Y[et]*de[et],m[et]=wt>0?wt+.5|0:wt-.5|0;return m}(F,J),we=0;we<64;++we)S[O[we]]=_e[we];var Ne=S[0]-re;re=S[0],Ne==0?q(Q[0]):(q(Q[g[B=32767+Ne]]),q(h[B]));for(var ke=63;ke>0&&S[ke]==0;)ke--;if(ke==0)return q(te),re;for(var Ue,be=1;be<=ke;){for(var se=be;S[be]==0&&be<=ke;)++be;var ut=be-se;if(ut>=16){Ue=ut>>4;for(var Je=1;Je<=Ue;++Je)q(oe);ut&=15}B=32767+S[be],q(ie[(ut<<4)+g[B]]),q(h[B]),be++}return ke!=63&&q(te),re}function Ce(F){F=Math.min(Math.max(F,1),100),a!=F&&(function(J){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var ie=o((re[Q]*J+50)/100);ie=Math.min(Math.max(ie,1),255),l[O[Q]]=ie}for(var B=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],te=0;te<64;te++){var oe=o((B[te]*J+50)/100);oe=Math.min(Math.max(oe,1),255),c[O[te]]=oe}for(var _e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],we=0,Ne=0;Ne<8;Ne++)for(var ke=0;ke<8;ke++)d[we]=1/(l[O[we]]*_e[Ne]*_e[ke]*8),f[we]=1/(c[O[we]]*_e[Ne]*_e[ke]*8),we++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),a=F)}this.encode=function(F,J){J&&Ce(J),y=new Array,j=0,v=7,X(65496),X(65504),X(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),X(1),X(1),H(0),H(0),function(){X(65499),X(132),H(0);for(var ee=0;ee<64;ee++)H(l[ee]);H(1);for(var ce=0;ce<64;ce++)H(c[ce])}(),function(ee,ce){X(65472),X(17),H(8),X(ce),X(ee),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(F.width,F.height),function(){X(65476),X(418),H(0);for(var ee=0;ee<16;ee++)H(T[ee+1]);for(var ce=0;ce<=11;ce++)H(E[ce]);H(16);for(var he=0;he<16;he++)H(Z[he+1]);for(var De=0;De<=161;De++)H(C[De]);H(1);for(var Ie=0;Ie<16;Ie++)H(P[Ie+1]);for(var Te=0;Te<=11;Te++)H(G[Te]);H(17);for(var Ye=0;Ye<16;Ye++)H(I[Ye+1]);for(var et=0;et<=161;et++)H(V[et])}(),X(65498),X(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var re=0,Q=0,ie=0;j=0,v=7,this.encode.displayName="_encode_";for(var B,te,oe,_e,we,Ne,ke,Ue,be,se=F.data,ut=F.width,Je=F.height,Y=4*ut,de=0;de<Je;){for(B=0;B<Y;){for(we=Y*de+B,ke=-1,Ue=0,be=0;be<64;be++)Ne=we+(Ue=be>>3)*Y+(ke=4*(7&be)),de+Ue>=Je&&(Ne-=Y*(de+1+Ue-Je)),B+ke>=Y&&(Ne-=B+ke-Y+4),te=se[Ne++],oe=se[Ne++],_e=se[Ne++],x[be]=(L[te]+L[oe+256>>0]+L[_e+512>>0]>>16)-128,_[be]=(L[te+768>>0]+L[oe+1024>>0]+L[_e+1280>>0]>>16)-128,k[be]=(L[te+1280>>0]+L[oe+1536>>0]+L[_e+1792>>0]>>16)-128;re=le(x,d,re,t,r),Q=le(_,f,Q,n,i),ie=le(k,f,ie,n,i),B+=32}de+=8}if(v>=0){var We=[];We[1]=v+1,We[0]=(1<<v+1)-1,q(We)}return X(65497),new Uint8Array(y)},e=e||50,function(){for(var F=String.fromCharCode,J=0;J<256;J++)M[J]=F(J)}(),t=z(T,E),n=z(P,G),r=z(Z,C),i=z(I,V),function(){for(var F=1,J=2,re=1;re<=15;re++){for(var Q=F;Q<J;Q++)g[32767+Q]=re,h[32767+Q]=[],h[32767+Q][1]=re,h[32767+Q][0]=Q;for(var ie=-(J-1);ie<=-F;ie++)g[32767+ie]=re,h[32767+ie]=[],h[32767+ie][1]=re,h[32767+ie][0]=J-1+ie;F<<=1,J<<=1}}(),function(){for(var F=0;F<256;F++)L[F]=19595*F,L[F+256>>0]=38470*F,L[F+512>>0]=7471*F+32768,L[F+768>>0]=-11059*F,L[F+1024>>0]=-21709*F,L[F+1280>>0]=32768*F+8421375,L[F+1536>>0]=-27439*F,L[F+1792>>0]=-5329*F}(),Ce(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Xi(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Qj(e){function t(T){if(!T)throw Error("assert :P")}function n(T,E,Z){for(var C=0;4>C;C++)if(T[E+C]!=Z.charCodeAt(C))return!0;return!1}function r(T,E,Z,C,P){for(var G=0;G<P;G++)T[E+G]=Z[C+G]}function i(T,E,Z,C){for(var P=0;P<C;P++)T[E+P]=Z}function a(T){return new Int32Array(T)}function o(T,E){for(var Z=[],C=0;C<T;C++)Z.push(new E);return Z}function l(T,E){var Z=[];return function C(P,G,I){for(var V=I[G],z=0;z<V&&(P.push(I.length>G+1?[]:new E),!(I.length<G+1));z++)C(P[z],G+1,I)}(Z,0,T),Z}var c=function(){var T=this;function E(u,p){for(var w=1<<p-1>>>0;u&w;)w>>>=1;return w?(u&w-1)+w:u}function Z(u,p,w,A,D){t(!(A%w));do u[p+(A-=w)]=D;while(0<A)}function C(u,p,w,A,D){if(t(2328>=D),512>=D)var $=a(512);else if(($=a(D))==null)return 0;return function(U,W,K,ne,me,je){var Se,ve,Oe=W,Pe=1<<K,pe=a(16),ge=a(16);for(t(me!=0),t(ne!=null),t(U!=null),t(0<K),ve=0;ve<me;++ve){if(15<ne[ve])return 0;++pe[ne[ve]]}if(pe[0]==me)return 0;for(ge[1]=0,Se=1;15>Se;++Se){if(pe[Se]>1<<Se)return 0;ge[Se+1]=ge[Se]+pe[Se]}for(ve=0;ve<me;++ve)Se=ne[ve],0<ne[ve]&&(je[ge[Se]++]=ve);if(ge[15]==1)return(ne=new P).g=0,ne.value=je[0],Z(U,Oe,1,Pe,ne),Pe;var Fe,He=-1,Me=Pe-1,ht=0,tt=1,St=1,ot=1<<K;for(ve=0,Se=1,me=2;Se<=K;++Se,me<<=1){if(tt+=St<<=1,0>(St-=pe[Se]))return 0;for(;0<pe[Se];--pe[Se])(ne=new P).g=Se,ne.value=je[ve++],Z(U,Oe+ht,me,ot,ne),ht=E(ht,Se)}for(Se=K+1,me=2;15>=Se;++Se,me<<=1){if(tt+=St<<=1,0>(St-=pe[Se]))return 0;for(;0<pe[Se];--pe[Se]){if(ne=new P,(ht&Me)!=He){for(Oe+=ot,Fe=1<<(He=Se)-K;15>He&&!(0>=(Fe-=pe[He]));)++He,Fe<<=1;Pe+=ot=1<<(Fe=He-K),U[W+(He=ht&Me)].g=Fe+K,U[W+He].value=Oe-W-He}ne.g=Se-K,ne.value=je[ve++],Z(U,Oe+(ht>>K),me,ot,ne),ht=E(ht,Se)}}return tt!=2*ge[15]-1?0:Pe}(u,p,w,A,D,$)}function P(){this.value=this.g=0}function G(){this.value=this.g=0}function I(){this.G=o(5,P),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Or,G)}function V(u,p,w,A){t(u!=null),t(p!=null),t(2147483648>A),u.Ca=254,u.I=0,u.b=-8,u.Ka=0,u.oa=p,u.pa=w,u.Jd=p,u.Yc=w+A,u.Zc=4<=A?w+A-4+1:w,B(u)}function z(u,p){for(var w=0;0<p--;)w|=oe(u,128)<<p;return w}function q(u,p){var w=z(u,p);return te(u)?-w:w}function H(u,p,w,A){var D,$=0;for(t(u!=null),t(p!=null),t(4294967288>A),u.Sb=A,u.Ra=0,u.u=0,u.h=0,4<A&&(A=4),D=0;D<A;++D)$+=p[w+D]<<8*D;u.Ra=$,u.bb=A,u.oa=p,u.pa=w}function X(u){for(;8<=u.u&&u.bb<u.Sb;)u.Ra>>>=8,u.Ra+=u.oa[u.pa+u.bb]<<Td-8>>>0,++u.bb,u.u-=8;re(u)&&(u.h=1,u.u=0)}function le(u,p){if(t(0<=p),!u.h&&p<=Pd){var w=J(u)&kd[p];return u.u+=p,X(u),w}return u.h=1,u.u=0}function Ce(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(u){return u.Ra>>>(u.u&Td-1)>>>0}function re(u){return t(u.bb<=u.Sb),u.h||u.bb==u.Sb&&u.u>Td}function Q(u,p){u.u=p,u.h=re(u)}function ie(u){u.u>=Lf&&(t(u.u>=Lf),X(u))}function B(u){t(u!=null&&u.oa!=null),u.pa<u.Zc?(u.I=(u.oa[u.pa++]|u.I<<8)>>>0,u.b+=8):(t(u!=null&&u.oa!=null),u.pa<u.Yc?(u.b+=8,u.I=u.oa[u.pa++]|u.I<<8):u.Ka?u.b=0:(u.I<<=8,u.b+=8,u.Ka=1))}function te(u){return z(u,1)}function oe(u,p){var w=u.Ca;0>u.b&&B(u);var A=u.b,D=w*p>>>8,$=(u.I>>>A>D)+0;for($?(w-=D,u.I-=D+1<<A>>>0):w=D+1,A=w,D=0;256<=A;)D+=8,A>>=8;return A=7^D+Fs[A],u.b-=A,u.Ca=(w<<A)-1,$}function _e(u,p,w){u[p+0]=w>>24&255,u[p+1]=w>>16&255,u[p+2]=w>>8&255,u[p+3]=w>>0&255}function we(u,p){return u[p+0]<<0|u[p+1]<<8}function Ne(u,p){return we(u,p)|u[p+2]<<16}function ke(u,p){return we(u,p)|we(u,p+2)<<16}function Ue(u,p){var w=1<<p;return t(u!=null),t(0<p),u.X=a(w),u.X==null?0:(u.Mb=32-p,u.Xa=p,1)}function be(u,p){t(u!=null),t(p!=null),t(u.Xa==p.Xa),r(p.X,0,u.X,0,1<<p.Xa)}function se(){this.X=[],this.Xa=this.Mb=0}function ut(u,p,w,A){t(w!=null),t(A!=null);var D=w[0],$=A[0];return D==0&&(D=(u*$+p/2)/p),$==0&&($=(p*D+u/2)/u),0>=D||0>=$?0:(w[0]=D,A[0]=$,1)}function Je(u,p){return u+(1<<p)-1>>>p}function Y(u,p){return((4278255360&u)+(4278255360&p)>>>0&4278255360)+((16711935&u)+(16711935&p)>>>0&16711935)>>>0}function de(u,p){T[p]=function(w,A,D,$,U,W,K){var ne;for(ne=0;ne<U;++ne){var me=T[u](W[K+ne-1],D,$+ne);W[K+ne]=Y(w[A+ne],me)}}}function We(){this.ud=this.hd=this.jd=0}function ee(u,p){return((4278124286&(u^p))>>>1)+(u&p)>>>0}function ce(u){return 0<=u&&256>u?u:0>u?0:255<u?255:void 0}function he(u,p){return ce(u+(u-p+.5>>1))}function De(u,p,w){return Math.abs(p-w)-Math.abs(u-w)}function Ie(u,p,w,A,D,$,U){for(A=$[U-1],w=0;w<D;++w)$[U+w]=A=Y(u[p+w],A)}function Te(u,p,w,A,D){var $;for($=0;$<w;++$){var U=u[p+$],W=U>>8&255,K=16711935&(K=(K=16711935&U)+((W<<16)+W));A[D+$]=(4278255360&U)+K>>>0}}function Ye(u,p){p.jd=u>>0&255,p.hd=u>>8&255,p.ud=u>>16&255}function et(u,p,w,A,D,$){var U;for(U=0;U<A;++U){var W=p[w+U],K=W>>>8,ne=W,me=255&(me=(me=W>>>16)+((u.jd<<24>>24)*(K<<24>>24)>>>5));ne=255&(ne=(ne=ne+((u.hd<<24>>24)*(K<<24>>24)>>>5))+((u.ud<<24>>24)*(me<<24>>24)>>>5)),D[$+U]=(4278255360&W)+(me<<16)+ne}}function wt(u,p,w,A,D){T[p]=function($,U,W,K,ne,me,je,Se,ve){for(K=je;K<Se;++K)for(je=0;je<ve;++je)ne[me++]=D(W[A($[U++])])},T[u]=function($,U,W,K,ne,me,je){var Se=8>>$.b,ve=$.Ea,Oe=$.K[0],Pe=$.w;if(8>Se)for($=(1<<$.b)-1,Pe=(1<<Se)-1;U<W;++U){var pe,ge=0;for(pe=0;pe<ve;++pe)pe&$||(ge=A(K[ne++])),me[je++]=D(Oe[ge&Pe]),ge>>=Se}else T["VP8LMapColor"+w](K,ne,Oe,Pe,me,je,U,W,ve)}}function Xe(u,p,w,A,D){for(w=p+w;p<w;){var $=u[p++];A[D++]=$>>16&255,A[D++]=$>>8&255,A[D++]=$>>0&255}}function Tr(u,p,w,A,D){for(w=p+w;p<w;){var $=u[p++];A[D++]=$>>16&255,A[D++]=$>>8&255,A[D++]=$>>0&255,A[D++]=$>>24&255}}function Qt(u,p,w,A,D){for(w=p+w;p<w;){var $=(U=u[p++])>>16&240|U>>12&15,U=U>>0&240|U>>28&15;A[D++]=$,A[D++]=U}}function gs(u,p,w,A,D){for(w=p+w;p<w;){var $=(U=u[p++])>>16&248|U>>13&7,U=U>>5&224|U>>3&31;A[D++]=$,A[D++]=U}}function mn(u,p,w,A,D){for(w=p+w;p<w;){var $=u[p++];A[D++]=$>>0&255,A[D++]=$>>8&255,A[D++]=$>>16&255}}function jn(u,p,w,A,D,$){if($==0)for(w=p+w;p<w;)_e(A,(($=u[p++])[0]>>24|$[1]>>8&65280|$[2]<<8&16711680|$[3]<<24)>>>0),D+=32;else r(A,D,u,p,w)}function vi(u,p){T[p][0]=T[u+"0"],T[p][1]=T[u+"1"],T[p][2]=T[u+"2"],T[p][3]=T[u+"3"],T[p][4]=T[u+"4"],T[p][5]=T[u+"5"],T[p][6]=T[u+"6"],T[p][7]=T[u+"7"],T[p][8]=T[u+"8"],T[p][9]=T[u+"9"],T[p][10]=T[u+"10"],T[p][11]=T[u+"11"],T[p][12]=T[u+"12"],T[p][13]=T[u+"13"],T[p][14]=T[u+"0"],T[p][15]=T[u+"0"]}function nn(u){return u==ov||u==lv||u==jp||u==cv}function ic(){this.eb=[],this.size=this.A=this.fb=0}function Kn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function zi(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ic,this.f.kb=new Kn,this.sd=null}function ro(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Qn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Rt(u){return alert("todo:WebPSamplerProcessPlane"),u.T}function cn(u,p){var w=u.T,A=p.ba.f.RGBA,D=A.eb,$=A.fb+u.ka*A.A,U=_i[p.ba.S],W=u.y,K=u.O,ne=u.f,me=u.N,je=u.ea,Se=u.W,ve=p.cc,Oe=p.dc,Pe=p.Mc,pe=p.Nc,ge=u.ka,Fe=u.ka+u.T,He=u.U,Me=He+1>>1;for(ge==0?U(W,K,null,null,ne,me,je,Se,ne,me,je,Se,D,$,null,null,He):(U(p.ec,p.fc,W,K,ve,Oe,Pe,pe,ne,me,je,Se,D,$-A.A,D,$,He),++w);ge+2<Fe;ge+=2)ve=ne,Oe=me,Pe=je,pe=Se,me+=u.Rc,Se+=u.Rc,$+=2*A.A,U(W,(K+=2*u.fa)-u.fa,W,K,ve,Oe,Pe,pe,ne,me,je,Se,D,$-A.A,D,$,He);return K+=u.fa,u.j+Fe<u.o?(r(p.ec,p.fc,W,K,He),r(p.cc,p.dc,ne,me,Me),r(p.Mc,p.Nc,je,Se,Me),w--):1&Fe||U(W,K,null,null,ne,me,je,Se,ne,me,je,Se,D,$+A.A,null,null,He),w}function ac(u,p,w){var A=u.F,D=[u.J];if(A!=null){var $=u.U,U=p.ba.S,W=U==Np||U==jp;p=p.ba.f.RGBA;var K=[0],ne=u.ka;K[0]=u.T,u.Kb&&(ne==0?--K[0]:(--ne,D[0]-=u.width),u.j+u.ka+u.T==u.o&&(K[0]=u.o-u.j-ne));var me=p.eb;ne=p.fb+ne*p.A,u=kn(A,D[0],u.width,$,K,me,ne+(W?0:3),p.A),t(w==K),u&&nn(U)&&ji(me,ne,W,$,K,p.A)}return 0}function Rr(u){var p=u.ma,w=p.ba.S,A=11>w,D=w==bp||w==wp||w==Np||w==av||w==12||nn(w);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!Pf(p.Oa,u,D?11:12))return 0;if(D&&nn(w)&&Ge(),u.da)alert("todo:use_scaling");else{if(A){if(p.Ib=Rt,u.Kb){if(w=u.U+1>>1,p.memory=a(u.U+2*w),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+u.U,p.Mc=p.cc,p.Nc=p.dc+w,p.Ib=cn,Ge()}}else alert("todo:EmitYUV");D&&(p.Jb=ac,A&&ye())}if(A&&!B5){for(u=0;256>u;++u)R7[u]=89858*(u-128)+_p>>Sp,z7[u]=-22014*(u-128)+_p,B7[u]=-45773*(u-128),O7[u]=113618*(u-128)+_p>>Sp;for(u=Of;u<fv;++u)p=76283*(u-16)+_p>>Sp,$7[u-Of]=Xs(p,255),q7[u-Of]=Xs(p+8>>4,15);B5=1}return 1}function Na(u){var p=u.ma,w=u.U,A=u.T;return t(!(1&u.ka)),0>=w||0>=A?0:(w=p.Ib(u,p),p.Jb!=null&&p.Jb(u,p,w),p.Dc+=w,1)}function ja(u){u.ma.memory=null}function Pt(u,p,w,A){return le(u,8)!=47?0:(p[0]=le(u,14)+1,w[0]=le(u,14)+1,A[0]=le(u,1),le(u,3)!=0?0:!u.h)}function $i(u,p){if(4>u)return u+1;var w=u-2>>1;return(2+(1&u)<<w)+le(p,w)+1}function Sa(u,p){return 120<p?p-120:1<=(w=((w=j7[p-1])>>4)*u+(8-(15&w)))?w:1;var w}function Is(u,p,w){var A=J(w),D=u[p+=255&A].g-8;return 0<D&&(Q(w,w.u+8),A=J(w),p+=u[p].value,p+=A&(1<<D)-1),Q(w,w.u+u[p].g),u[p].value}function Nr(u,p,w){return w.g+=u.g,w.value+=u.value<<p>>>0,t(8>=w.g),u.g}function pr(u,p,w){var A=u.xc;return t((p=A==0?0:u.vc[u.md*(w>>A)+(p>>A)])<u.Wb),u.Ya[p]}function Zs(u,p,w,A){var D=u.ab,$=u.c*p,U=u.C;p=U+p;var W=w,K=A;for(A=u.Ta,w=u.Ua;0<D--;){var ne=u.gc[D],me=U,je=p,Se=W,ve=K,Oe=(K=A,W=w,ne.Ea);switch(t(me<je),t(je<=ne.nc),ne.hc){case 2:hp(Se,ve,(je-me)*Oe,K,W);break;case 0:var Pe=me,pe=je,ge=K,Fe=W,He=(ot=ne).Ea;Pe==0&&(sv(Se,ve,null,null,1,ge,Fe),Ie(Se,ve+1,0,0,He-1,ge,Fe+1),ve+=He,Fe+=He,++Pe);for(var Me=1<<ot.b,ht=Me-1,tt=Je(He,ot.b),St=ot.K,ot=ot.w+(Pe>>ot.b)*tt;Pe<pe;){var ln=St,pn=ot,rn=1;for(Ef(Se,ve,ge,Fe-He,1,ge,Fe);rn<He;){var Yt=(rn&~ht)+Me;Yt>He&&(Yt=He),(0,Wo[ln[pn++]>>8&15])(Se,ve+ +rn,ge,Fe+rn-He,Yt-rn,ge,Fe+rn),rn=Yt}ve+=He,Fe+=He,++Pe&ht||(ot+=tt)}je!=ne.nc&&r(K,W-Oe,K,W+(je-me-1)*Oe,Oe);break;case 1:for(Oe=Se,pe=ve,He=(Se=ne.Ea)-(Fe=Se&~(ge=(ve=1<<ne.b)-1)),Pe=Je(Se,ne.b),Me=ne.K,ne=ne.w+(me>>ne.b)*Pe;me<je;){for(ht=Me,tt=ne,St=new We,ot=pe+Fe,ln=pe+Se;pe<ot;)Ye(ht[tt++],St),fc(St,Oe,pe,ve,K,W),pe+=ve,W+=ve;pe<ln&&(Ye(ht[tt++],St),fc(St,Oe,pe,He,K,W),pe+=He,W+=He),++me&ge||(ne+=Pe)}break;case 3:if(Se==K&&ve==W&&0<ne.b){for(pe=K,Se=Oe=W+(je-me)*Oe-(Fe=(je-me)*Je(ne.Ea,ne.b)),ve=K,ge=W,Pe=[],Fe=(He=Fe)-1;0<=Fe;--Fe)Pe[Fe]=ve[ge+Fe];for(Fe=He-1;0<=Fe;--Fe)pe[Se+Fe]=Pe[Fe];bi(ne,me,je,K,Oe,K,W)}else bi(ne,me,je,Se,ve,K,W)}W=A,K=w}K!=w&&r(A,w,W,K,$)}function ud(u,p){var w=u.V,A=u.Ba+u.c*u.C,D=p-u.C;if(t(p<=u.l.o),t(16>=D),0<D){var $=u.l,U=u.Ta,W=u.Ua,K=$.width;if(Zs(u,D,w,A),D=W=[W],t((w=u.C)<(A=p)),t($.v<$.va),A>$.o&&(A=$.o),w<$.j){var ne=$.j-w;w=$.j,D[0]+=ne*K}if(w>=A?w=0:(D[0]+=4*$.v,$.ka=w-$.j,$.U=$.va-$.v,$.T=A-w,w=1),w){if(W=W[0],11>(w=u.ca).S){var me=w.f.RGBA,je=(A=w.S,D=$.U,$=$.T,ne=me.eb,me.A),Se=$;for(me=me.fb+u.Ma*me.A;0<Se--;){var ve=U,Oe=W,Pe=D,pe=ne,ge=me;switch(A){case yp:Ms(ve,Oe,Pe,pe,ge);break;case bp:xs(ve,Oe,Pe,pe,ge);break;case ov:xs(ve,Oe,Pe,pe,ge),ji(pe,ge,0,Pe,1,0);break;case P5:lo(ve,Oe,Pe,pe,ge);break;case wp:jn(ve,Oe,Pe,pe,ge,1);break;case lv:jn(ve,Oe,Pe,pe,ge,1),ji(pe,ge,0,Pe,1,0);break;case Np:jn(ve,Oe,Pe,pe,ge,0);break;case jp:jn(ve,Oe,Pe,pe,ge,0),ji(pe,ge,1,Pe,1,0);break;case av:Ho(ve,Oe,Pe,pe,ge);break;case cv:Ho(ve,Oe,Pe,pe,ge),An(pe,ge,Pe,1,0);break;case T5:oo(ve,Oe,Pe,pe,ge);break;default:t(0)}W+=K,me+=je}u.Ma+=$}else alert("todo:EmitRescaledRowsYUVA");t(u.Ma<=w.height)}}u.C=p,t(u.C<=u.i)}function so(u){var p;if(0<u.ua)return 0;for(p=0;p<u.Wb;++p){var w=u.Ya[p].G,A=u.Ya[p].H;if(0<w[1][A[1]+0].g||0<w[2][A[2]+0].g||0<w[3][A[3]+0].g)return 0}return 1}function qi(u,p,w,A,D,$){if(u.Z!=0){var U=u.qd,W=u.rd;for(t(Yo[u.Z]!=null);p<w;++p)Yo[u.Z](U,W,A,D,A,D,$),U=A,W=D,D+=$;u.qd=U,u.rd=W}}function Ui(u,p){var w=u.l.ma,A=w.Z==0||w.Z==1?u.l.j:u.C;if(A=u.C<A?A:u.C,t(p<=u.l.o),p>A){var D=u.l.width,$=w.ca,U=w.tb+D*A,W=u.V,K=u.Ba+u.c*A,ne=u.gc;t(u.ab==1),t(ne[0].hc==3),mp(ne[0],A,p,W,K,$,U),qi(w,A,p,$,U,D)}u.C=u.Ma=p}function Vi(u,p,w,A,D,$,U){var W=u.$/A,K=u.$%A,ne=u.m,me=u.s,je=w+u.$,Se=je;D=w+A*D;var ve=w+A*$,Oe=280+me.ua,Pe=u.Pb?W:16777216,pe=0<me.ua?me.Wa:null,ge=me.wc,Fe=je<ve?pr(me,K,W):null;t(u.C<$),t(ve<=D);var He=!1;e:for(;;){for(;He||je<ve;){var Me=0;if(W>=Pe){var ht=je-w;t((Pe=u).Pb),Pe.wd=Pe.m,Pe.xd=ht,0<Pe.s.ua&&be(Pe.s.Wa,Pe.s.vb),Pe=W+_7}if(K&ge||(Fe=pr(me,K,W)),t(Fe!=null),Fe.Qb&&(p[je]=Fe.qb,He=!0),!He)if(ie(ne),Fe.jc){Me=ne,ht=p;var tt=je,St=Fe.pd[J(Me)&Or-1];t(Fe.jc),256>St.g?(Q(Me,Me.u+St.g),ht[tt]=St.value,Me=0):(Q(Me,Me.u+St.g-256),t(256<=St.value),Me=St.value),Me==0&&(He=!0)}else Me=Is(Fe.G[0],Fe.H[0],ne);if(ne.h)break;if(He||256>Me){if(!He)if(Fe.nd)p[je]=(Fe.qb|Me<<8)>>>0;else{if(ie(ne),He=Is(Fe.G[1],Fe.H[1],ne),ie(ne),ht=Is(Fe.G[2],Fe.H[2],ne),tt=Is(Fe.G[3],Fe.H[3],ne),ne.h)break;p[je]=(tt<<24|He<<16|Me<<8|ht)>>>0}if(He=!1,++je,++K>=A&&(K=0,++W,U!=null&&W<=$&&!(W%16)&&U(u,W),pe!=null))for(;Se<je;)Me=p[Se++],pe.X[(506832829*Me&4294967295)>>>pe.Mb]=Me}else if(280>Me){if(Me=$i(Me-256,ne),ht=Is(Fe.G[4],Fe.H[4],ne),ie(ne),ht=Sa(A,ht=$i(ht,ne)),ne.h)break;if(je-w<ht||D-je<Me)break e;for(tt=0;tt<Me;++tt)p[je+tt]=p[je+tt-ht];for(je+=Me,K+=Me;K>=A;)K-=A,++W,U!=null&&W<=$&&!(W%16)&&U(u,W);if(t(je<=D),K&ge&&(Fe=pr(me,K,W)),pe!=null)for(;Se<je;)Me=p[Se++],pe.X[(506832829*Me&4294967295)>>>pe.Mb]=Me}else{if(!(Me<Oe))break e;for(He=Me-280,t(pe!=null);Se<je;)Me=p[Se++],pe.X[(506832829*Me&4294967295)>>>pe.Mb]=Me;Me=je,t(!(He>>>(ht=pe).Xa)),p[Me]=ht.X[He],He=!0}He||t(ne.h==re(ne))}if(u.Pb&&ne.h&&je<D)t(u.m.h),u.a=5,u.m=u.wd,u.$=u.xd,0<u.s.ua&&be(u.s.vb,u.s.Wa);else{if(ne.h)break e;U!=null&&U(u,W>$?$:W),u.a=0,u.$=je-w}return 1}return u.a=3,0}function _a(u){t(u!=null),u.vc=null,u.yc=null,u.Ya=null;var p=u.Wa;p!=null&&(p.X=null),u.vb=null,t(u!=null)}function yi(){var u=new rv;return u==null?null:(u.a=0,u.xb=I5,vi("Predictor","VP8LPredictors"),vi("Predictor","VP8LPredictors_C"),vi("PredictorAdd","VP8LPredictorsAdd"),vi("PredictorAdd","VP8LPredictorsAdd_C"),hp=Te,fc=et,Ms=Xe,xs=Tr,Ho=Qt,oo=gs,lo=mn,T.VP8LMapColor32b=Ld,T.VP8LMapColor8b=pp,u)}function Ca(u,p,w,A,D){var $=1,U=[u],W=[p],K=A.m,ne=A.s,me=null,je=0;e:for(;;){if(w)for(;$&&le(K,1);){var Se=U,ve=W,Oe=A,Pe=1,pe=Oe.m,ge=Oe.gc[Oe.ab],Fe=le(pe,2);if(Oe.Oc&1<<Fe)$=0;else{switch(Oe.Oc|=1<<Fe,ge.hc=Fe,ge.Ea=Se[0],ge.nc=ve[0],ge.K=[null],++Oe.ab,t(4>=Oe.ab),Fe){case 0:case 1:ge.b=le(pe,3)+2,Pe=Ca(Je(ge.Ea,ge.b),Je(ge.nc,ge.b),0,Oe,ge.K),ge.K=ge.K[0];break;case 3:var He,Me=le(pe,8)+1,ht=16<Me?0:4<Me?1:2<Me?2:3;if(Se[0]=Je(ge.Ea,ht),ge.b=ht,He=Pe=Ca(Me,1,0,Oe,ge.K)){var tt,St=Me,ot=ge,ln=1<<(8>>ot.b),pn=a(ln);if(pn==null)He=0;else{var rn=ot.K[0],Yt=ot.w;for(pn[0]=ot.K[0][0],tt=1;tt<1*St;++tt)pn[tt]=Y(rn[Yt+tt],pn[tt-1]);for(;tt<4*ln;++tt)pn[tt]=0;ot.K[0]=null,ot.K[0]=pn,He=1}}Pe=He;break;case 2:break;default:t(0)}$=Pe}}if(U=U[0],W=W[0],$&&le(K,1)&&!($=1<=(je=le(K,4))&&11>=je)){A.a=3;break e}var Sn;if(Sn=$)t:{var bn,$t,xr,Rs=A,vr=U,Os=W,gn=je,ei=w,ti=Rs.m,Er=Rs.s,Br=[null],ys=1,Ci=0,Ta=S7[gn];n:for(;;){if(ei&&le(ti,1)){var Ir=le(ti,3)+2,ho=Je(vr,Ir),xc=Je(Os,Ir),Md=ho*xc;if(!Ca(ho,xc,0,Rs,Br))break n;for(Br=Br[0],Er.xc=Ir,bn=0;bn<Md;++bn){var Zo=Br[bn]>>8&65535;Br[bn]=Zo,Zo>=ys&&(ys=Zo+1)}}if(ti.h)break n;for($t=0;5>$t;++$t){var Zn=L5[$t];!$t&&0<gn&&(Zn+=1<<gn),Ci<Zn&&(Ci=Zn)}var hv=o(ys*Ta,P),q5=ys,U5=o(q5,I);if(U5==null)var Ap=null;else t(65536>=q5),Ap=U5;var Bf=a(Ci);if(Ap==null||Bf==null||hv==null){Rs.a=1;break n}var kp=hv;for(bn=xr=0;bn<ys;++bn){var Qi=Ap[bn],Rd=Qi.G,Od=Qi.H,V5=0,Pp=1,W5=0;for($t=0;5>$t;++$t){Zn=L5[$t],Rd[$t]=kp,Od[$t]=xr,!$t&&0<gn&&(Zn+=1<<gn);s:{var Tp,mv=Zn,Lp=Rs,zf=Bf,W7=kp,H7=xr,pv=0,Xo=Lp.m,G7=le(Xo,1);if(i(zf,0,0,mv),G7){var K7=le(Xo,1)+1,Q7=le(Xo,1),H5=le(Xo,Q7==0?1:8);zf[H5]=1,K7==2&&(zf[H5=le(Xo,8)]=1);var Ep=1}else{var G5=a(19),K5=le(Xo,4)+4;if(19<K5){Lp.a=3;var Ip=0;break s}for(Tp=0;Tp<K5;++Tp)G5[N7[Tp]]=le(Xo,3);var gv=void 0,$f=void 0,Q5=Lp,Y7=G5,Dp=mv,Y5=zf,xv=0,Jo=Q5.m,Z5=8,X5=o(128,P);r:for(;C(X5,0,7,Y7,19);){if(le(Jo,1)){var Z7=2+2*le(Jo,3);if((gv=2+le(Jo,Z7))>Dp)break r}else gv=Dp;for($f=0;$f<Dp&&gv--;){ie(Jo);var J5=X5[0+(127&J(Jo))];Q(Jo,Jo.u+J5.g);var Bd=J5.value;if(16>Bd)Y5[$f++]=Bd,Bd!=0&&(Z5=Bd);else{var X7=Bd==16,ew=Bd-16,J7=b7[ew],tw=le(Jo,y7[ew])+J7;if($f+tw>Dp)break r;for(var eD=X7?Z5:0;0<tw--;)Y5[$f++]=eD}}xv=1;break r}xv||(Q5.a=3),Ep=xv}(Ep=Ep&&!Xo.h)&&(pv=C(W7,H7,8,zf,mv)),Ep&&pv!=0?Ip=pv:(Lp.a=3,Ip=0)}if(Ip==0)break n;if(Pp&&w7[$t]==1&&(Pp=kp[xr].g==0),V5+=kp[xr].g,xr+=Ip,3>=$t){var qf,vv=Bf[0];for(qf=1;qf<Zn;++qf)Bf[qf]>vv&&(vv=Bf[qf]);W5+=vv}}if(Qi.nd=Pp,Qi.Qb=0,Pp&&(Qi.qb=(Rd[3][Od[3]+0].value<<24|Rd[1][Od[1]+0].value<<16|Rd[2][Od[2]+0].value)>>>0,V5==0&&256>Rd[0][Od[0]+0].value&&(Qi.Qb=1,Qi.qb+=Rd[0][Od[0]+0].value<<8)),Qi.jc=!Qi.Qb&&6>W5,Qi.jc){var Fp,mo=Qi;for(Fp=0;Fp<Or;++Fp){var el=Fp,tl=mo.pd[el],Mp=mo.G[0][mo.H[0]+el];256<=Mp.value?(tl.g=Mp.g+256,tl.value=Mp.value):(tl.g=0,tl.value=0,el>>=Nr(Mp,8,tl),el>>=Nr(mo.G[1][mo.H[1]+el],16,tl),el>>=Nr(mo.G[2][mo.H[2]+el],0,tl),Nr(mo.G[3][mo.H[3]+el],24,tl))}}}Er.vc=Br,Er.Wb=ys,Er.Ya=Ap,Er.yc=hv,Sn=1;break t}Sn=0}if(!($=Sn)){A.a=3;break e}if(0<je){if(ne.ua=1<<je,!Ue(ne.Wa,je)){A.a=1,$=0;break e}}else ne.ua=0;var yv=A,nw=U,tD=W,bv=yv.s,wv=bv.xc;if(yv.c=nw,yv.i=tD,bv.md=Je(nw,wv),bv.wc=wv==0?-1:(1<<wv)-1,w){A.xb=E7;break e}if((me=a(U*W))==null){A.a=1,$=0;break e}$=($=Vi(A,me,0,U,W,W,null))&&!K.h;break e}return $?(D!=null?D[0]=me:(t(me==null),t(w)),A.$=0,w||_a(ne)):_a(ne),$}function oc(u,p){var w=u.c*u.i,A=w+p+16*p;return t(u.c<=p),u.V=a(A),u.V==null?(u.Ta=null,u.Ua=0,u.a=1,0):(u.Ta=u.V,u.Ua=u.Ba+w+p,1)}function fd(u,p){var w=u.C,A=p-w,D=u.V,$=u.Ba+u.c*w;for(t(p<=u.l.o);0<A;){var U=16<A?16:A,W=u.l.ma,K=u.l.width,ne=K*U,me=W.ca,je=W.tb+K*w,Se=u.Ta,ve=u.Ua;Zs(u,U,D,$),or(Se,ve,me,je,ne),qi(W,w,w+U,me,je,K),A-=U,D+=U*u.c,w+=U}t(w==p),u.C=u.Ma=p}function hd(){this.ub=this.yd=this.td=this.Rb=0}function md(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pd(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Gm(){this.Yb=function(){var u=[];return function p(w,A,D){for(var $=D[A],U=0;U<$&&(w.push(D.length>A+1?[]:0),!(D.length<A+1));U++)p(w[U],A+1,D)}(u,0,[3,11]),u}()}function D0(){this.jb=a(3),this.Wc=l([4,8],Gm),this.Xc=l([4,17],Gm)}function F0(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function gd(){this.ld=this.La=this.dd=this.tc=0}function Km(){this.Na=this.la=0}function M0(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hf(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function R0(){this.uc=this.M=this.Nb=0,this.wa=Array(new gd),this.Y=0,this.ya=Array(new hf),this.aa=0,this.l=new xd}function Qm(){this.y=a(16),this.f=a(8),this.ea=a(8)}function O0(){this.cb=this.a=0,this.sc="",this.m=new Ce,this.Od=new hd,this.Kc=new md,this.ed=new F0,this.Qa=new pd,this.Ic=this.$c=this.Aa=0,this.D=new R0,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ce),this.ia=0,this.pb=o(4,M0),this.Pa=new D0,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Qm),this.Hd=0,this.rb=Array(new Km),this.sb=0,this.wa=Array(new gd),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hf),this.L=this.aa=0,this.gd=l([4,2],gd),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function xd(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function B0(){var u=new O0;return u!=null&&(u.a=0,u.sc="OK",u.cb=0,u.Xb=0,Rf||(Rf=Xm)),u}function ir(u,p,w){return u.a==0&&(u.a=p,u.sc=w,u.cb=0),0}function Ym(u,p,w){return 3<=w&&u[p+0]==157&&u[p+1]==1&&u[p+2]==42}function Zm(u,p){if(u==null)return 0;if(u.a=0,u.sc="OK",p==null)return ir(u,2,"null VP8Io passed to VP8GetHeaders()");var w=p.data,A=p.w,D=p.ha;if(4>D)return ir(u,7,"Truncated header.");var $=w[A+0]|w[A+1]<<8|w[A+2]<<16,U=u.Od;if(U.Rb=!(1&$),U.td=$>>1&7,U.yd=$>>4&1,U.ub=$>>5,3<U.td)return ir(u,3,"Incorrect keyframe parameters.");if(!U.yd)return ir(u,4,"Frame not displayable.");A+=3,D-=3;var W=u.Kc;if(U.Rb){if(7>D)return ir(u,7,"cannot parse picture header");if(!Ym(w,A,D))return ir(u,3,"Bad code word");W.c=16383&(w[A+4]<<8|w[A+3]),W.Td=w[A+4]>>6,W.i=16383&(w[A+6]<<8|w[A+5]),W.Ud=w[A+6]>>6,A+=7,D-=7,u.za=W.c+15>>4,u.Ub=W.i+15>>4,p.width=W.c,p.height=W.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,i(($=u.Pa).jb,0,255,$.jb.length),t(($=u.Qa)!=null),$.Cb=0,$.Bb=0,$.Fb=1,i($.Zb,0,0,$.Zb.length),i($.Lb,0,0,$.Lb)}if(U.ub>D)return ir(u,7,"bad partition length");V($=u.m,w,A,U.ub),A+=U.ub,D-=U.ub,U.Rb&&(W.Ld=te($),W.Kd=te($)),W=u.Qa;var K,ne=u.Pa;if(t($!=null),t(W!=null),W.Cb=te($),W.Cb){if(W.Bb=te($),te($)){for(W.Fb=te($),K=0;4>K;++K)W.Zb[K]=te($)?q($,7):0;for(K=0;4>K;++K)W.Lb[K]=te($)?q($,6):0}if(W.Bb)for(K=0;3>K;++K)ne.jb[K]=te($)?z($,8):255}else W.Bb=0;if($.Ka)return ir(u,3,"cannot parse segment header");if((W=u.ed).zd=te($),W.Tb=z($,6),W.wb=z($,3),W.Pc=te($),W.Pc&&te($)){for(ne=0;4>ne;++ne)te($)&&(W.vd[ne]=q($,6));for(ne=0;4>ne;++ne)te($)&&(W.od[ne]=q($,6))}if(u.L=W.Tb==0?0:W.zd?1:2,$.Ka)return ir(u,3,"cannot parse filter header");var me=D;if(D=K=A,A=K+me,W=me,u.Xb=(1<<z(u.m,2))-1,me<3*(ne=u.Xb))w=7;else{for(K+=3*ne,W-=3*ne,me=0;me<ne;++me){var je=w[D+0]|w[D+1]<<8|w[D+2]<<16;je>W&&(je=W),V(u.Jc[+me],w,K,je),K+=je,W-=je,D+=3}V(u.Jc[+ne],w,K,W),w=K<A?0:5}if(w!=0)return ir(u,w,"cannot parse partitions");for(w=z(K=u.m,7),D=te(K)?q(K,4):0,A=te(K)?q(K,4):0,W=te(K)?q(K,4):0,ne=te(K)?q(K,4):0,K=te(K)?q(K,4):0,me=u.Qa,je=0;4>je;++je){if(me.Cb){var Se=me.Zb[je];me.Fb||(Se+=w)}else{if(0<je){u.pb[je]=u.pb[0];continue}Se=w}var ve=u.pb[je];ve.Sc[0]=dv[Xs(Se+D,127)],ve.Sc[1]=uv[Xs(Se+0,127)],ve.Eb[0]=2*dv[Xs(Se+A,127)],ve.Eb[1]=101581*uv[Xs(Se+W,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=dv[Xs(Se+ne,117)],ve.Qc[1]=uv[Xs(Se+K,127)],ve.lc=Se+K}if(!U.Rb)return ir(u,4,"Not a key frame.");for(te($),U=u.Pa,w=0;4>w;++w){for(D=0;8>D;++D)for(A=0;3>A;++A)for(W=0;11>W;++W)ne=oe($,T7[w][D][A][W])?z($,8):k7[w][D][A][W],U.Wc[w][D].Yb[A][W]=ne;for(D=0;17>D;++D)U.Xc[w][D]=U.Wc[w][L7[D]]}return u.kc=te($),u.kc&&(u.Bd=z($,8)),u.cb=1}function Xm(u,p,w,A,D,$,U){var W=p[D].Yb[w];for(w=0;16>D;++D){if(!oe(u,W[w+0]))return D;for(;!oe(u,W[w+1]);)if(W=p[++D].Yb[0],w=0,D==16)return 16;var K=p[D+1].Yb;if(oe(u,W[w+2])){var ne=u,me=0;if(oe(ne,(Se=W)[(je=w)+3]))if(oe(ne,Se[je+6])){for(W=0,je=2*(me=oe(ne,Se[je+8]))+(Se=oe(ne,Se[je+9+me])),me=0,Se=C7[je];Se[W];++W)me+=me+oe(ne,Se[W]);me+=3+(8<<je)}else oe(ne,Se[je+7])?(me=7+2*oe(ne,165),me+=oe(ne,145)):me=5+oe(ne,159);else me=oe(ne,Se[je+4])?3+oe(ne,Se[je+5]):2;W=K[2]}else me=1,W=K[1];K=U+A7[D],0>(ne=u).b&&B(ne);var je,Se=ne.b,ve=(je=ne.Ca>>1)-(ne.I>>Se)>>31;--ne.b,ne.Ca+=ve,ne.Ca|=1,ne.I-=(je+1&ve)<<Se,$[K]=((me^ve)-ve)*A[(0<D)+0]}return 16}function mf(u){var p=u.rb[u.sb-1];p.la=0,p.Na=0,i(u.zc,0,0,u.zc.length),u.ja=0}function z0(u,p){if(u==null)return 0;if(p==null)return ir(u,2,"NULL VP8Io parameter in VP8Decode().");if(!u.cb&&!Zm(u,p))return 0;if(t(u.cb),p.ac==null||p.ac(p)){p.ob&&(u.L=0);var w=Cp[u.L];if(u.L==2?(u.yb=0,u.zb=0):(u.yb=p.v-w>>4,u.zb=p.j-w>>4,0>u.yb&&(u.yb=0),0>u.zb&&(u.zb=0)),u.Va=p.o+15+w>>4,u.Hb=p.va+15+w>>4,u.Hb>u.za&&(u.Hb=u.za),u.Va>u.Ub&&(u.Va=u.Ub),0<u.L){var A=u.ed;for(w=0;4>w;++w){var D;if(u.Qa.Cb){var $=u.Qa.Lb[w];u.Qa.Fb||($+=A.Tb)}else $=A.Tb;for(D=0;1>=D;++D){var U=u.gd[w][D],W=$;if(A.Pc&&(W+=A.vd[0],D&&(W+=A.od[0])),0<(W=0>W?0:63<W?63:W)){var K=W;0<A.wb&&(K=4<A.wb?K>>2:K>>1)>9-A.wb&&(K=9-A.wb),1>K&&(K=1),U.dd=K,U.tc=2*W+K,U.ld=40<=W?2:15<=W?1:0}else U.tc=0;U.La=D}}}w=0}else ir(u,6,"Frame setup failed"),w=u.a;if(w=w==0){if(w){u.$c=0,0<u.Aa||(u.Ic=V7);e:{w=u.Ic,A=4*(K=u.za);var ne=32*K,me=K+1,je=0<u.L?K*(0<u.Aa?2:1):0,Se=(u.Aa==2?2:1)*K;if((U=A+832+(D=3*(16*w+Cp[u.L])/2*ne)+($=u.Fa!=null&&0<u.Fa.length?u.Kc.c*u.Kc.i:0))!=U)w=0;else{if(U>u.Vb){if(u.Vb=0,u.Ec=a(U),u.Fc=0,u.Ec==null){w=ir(u,1,"no memory during frame initialization.");break e}u.Vb=U}U=u.Ec,W=u.Fc,u.Ac=U,u.Bc=W,W+=A,u.Gd=o(ne,Qm),u.Hd=0,u.rb=o(me+1,Km),u.sb=1,u.wa=je?o(je,gd):null,u.Y=0,u.D.Nb=0,u.D.wa=u.wa,u.D.Y=u.Y,0<u.Aa&&(u.D.Y+=K),t(!0),u.oc=U,u.pc=W,W+=832,u.ya=o(Se,hf),u.aa=0,u.D.ya=u.ya,u.D.aa=u.aa,u.Aa==2&&(u.D.aa+=K),u.R=16*K,u.B=8*K,K=(ne=Cp[u.L])*u.R,ne=ne/2*u.B,u.sa=U,u.ta=W+K,u.qa=u.sa,u.ra=u.ta+16*w*u.R+ne,u.Ha=u.qa,u.Ia=u.ra+8*w*u.B+ne,u.$c=0,W+=D,u.mb=$?U:null,u.nb=$?W:null,t(W+$<=u.Fc+u.Vb),mf(u),i(u.Ac,u.Bc,0,A),w=1}}if(w){if(p.ka=0,p.y=u.sa,p.O=u.ta,p.f=u.qa,p.N=u.ra,p.ea=u.Ha,p.Vd=u.Ia,p.fa=u.R,p.Rc=u.B,p.F=null,p.J=0,!xp){for(w=-255;255>=w;++w)jr[255+w]=0>w?-w:w;for(w=-1020;1020>=w;++w)uo[1020+w]=-128>w?-128:127<w?127:w;for(w=-112;112>=w;++w)Mf[112+w]=-16>w?-16:15<w?15:w;for(w=-255;510>=w;++w)Fd[255+w]=0>w?0:255<w?255:w;xp=1}Ed=U0,co=$0,If=ep,vs=q0,wi=tp,ar=Jm,Id=bf,gp=dc,Df=nv,hc=wf,mc=tv,Go=jd,pc=Nf,Dd=dp,gc=cp,Ko=ka,Ff=ao,Ni=ev,Ki[0]=Aa,Ki[1]=V0,Ki[2]=K0,Ki[3]=Q0,Ki[4]=sp,Ki[5]=wd,Ki[6]=ip,Ki[7]=xf,Ki[8]=Z0,Ki[9]=Y0,Qo[0]=np,Qo[1]=H0,Qo[2]=io,Qo[3]=yd,Qo[4]=Yr,Qo[5]=G0,Qo[6]=rp,fo[0]=qo,fo[1]=W0,fo[2]=X0,fo[3]=vf,fo[4]=cc,fo[5]=J0,fo[6]=yf,w=1}else w=0}w&&(w=function(ve,Oe){for(ve.M=0;ve.M<ve.Va;++ve.M){var Pe,pe=ve.Jc[ve.M&ve.Xb],ge=ve.m,Fe=ve;for(Pe=0;Pe<Fe.za;++Pe){var He=ge,Me=Fe,ht=Me.Ac,tt=Me.Bc+4*Pe,St=Me.zc,ot=Me.ya[Me.aa+Pe];if(Me.Qa.Bb?ot.$b=oe(He,Me.Pa.jb[0])?2+oe(He,Me.Pa.jb[2]):oe(He,Me.Pa.jb[1]):ot.$b=0,Me.kc&&(ot.Ad=oe(He,Me.Bd)),ot.Za=!oe(He,145)+0,ot.Za){var ln=ot.Ob,pn=0;for(Me=0;4>Me;++Me){var rn,Yt=St[0+Me];for(rn=0;4>rn;++rn){Yt=P7[ht[tt+rn]][Yt];for(var Sn=E5[oe(He,Yt[0])];0<Sn;)Sn=E5[2*Sn+oe(He,Yt[Sn])];Yt=-Sn,ht[tt+rn]=Yt}r(ln,pn,ht,tt,4),pn+=4,St[0+Me]=Yt}}else Yt=oe(He,156)?oe(He,128)?1:3:oe(He,163)?2:0,ot.Ob[0]=Yt,i(ht,tt,Yt,4),i(St,0,Yt,4);ot.Dd=oe(He,142)?oe(He,114)?oe(He,183)?1:3:2:0}if(Fe.m.Ka)return ir(ve,7,"Premature end-of-partition0 encountered.");for(;ve.ja<ve.za;++ve.ja){if(Fe=pe,He=(ge=ve).rb[ge.sb-1],ht=ge.rb[ge.sb+ge.ja],Pe=ge.ya[ge.aa+ge.ja],tt=ge.kc?Pe.Ad:0)He.la=ht.la=0,Pe.Za||(He.Na=ht.Na=0),Pe.Hc=0,Pe.Gc=0,Pe.ia=0;else{var bn,$t;if(He=ht,ht=Fe,tt=ge.Pa.Xc,St=ge.ya[ge.aa+ge.ja],ot=ge.pb[St.$b],Me=St.ad,ln=0,pn=ge.rb[ge.sb-1],Yt=rn=0,i(Me,ln,0,384),St.Za)var xr=0,Rs=tt[3];else{Sn=a(16);var vr=He.Na+pn.Na;if(vr=Rf(ht,tt[1],vr,ot.Eb,0,Sn,0),He.Na=pn.Na=(0<vr)+0,1<vr)Ed(Sn,0,Me,ln);else{var Os=Sn[0]+3>>3;for(Sn=0;256>Sn;Sn+=16)Me[ln+Sn]=Os}xr=1,Rs=tt[0]}var gn=15&He.la,ei=15&pn.la;for(Sn=0;4>Sn;++Sn){var ti=1&ei;for(Os=$t=0;4>Os;++Os)gn=gn>>1|(ti=(vr=Rf(ht,Rs,vr=ti+(1&gn),ot.Sc,xr,Me,ln))>xr)<<7,$t=$t<<2|(3<vr?3:1<vr?2:Me[ln+0]!=0),ln+=16;gn>>=4,ei=ei>>1|ti<<7,rn=(rn<<8|$t)>>>0}for(Rs=gn,xr=ei>>4,bn=0;4>bn;bn+=2){for($t=0,gn=He.la>>4+bn,ei=pn.la>>4+bn,Sn=0;2>Sn;++Sn){for(ti=1&ei,Os=0;2>Os;++Os)vr=ti+(1&gn),gn=gn>>1|(ti=0<(vr=Rf(ht,tt[2],vr,ot.Qc,0,Me,ln)))<<3,$t=$t<<2|(3<vr?3:1<vr?2:Me[ln+0]!=0),ln+=16;gn>>=2,ei=ei>>1|ti<<5}Yt|=$t<<4*bn,Rs|=gn<<4<<bn,xr|=(240&ei)<<bn}He.la=Rs,pn.la=xr,St.Hc=rn,St.Gc=Yt,St.ia=43690&Yt?0:ot.ia,tt=!(rn|Yt)}if(0<ge.L&&(ge.wa[ge.Y+ge.ja]=ge.gd[Pe.$b][Pe.Za],ge.wa[ge.Y+ge.ja].La|=!tt),Fe.Ka)return ir(ve,7,"Premature end-of-file encountered.")}if(mf(ve),ge=Oe,Fe=1,Pe=(pe=ve).D,He=0<pe.L&&pe.M>=pe.zb&&pe.M<=pe.Va,pe.Aa==0)e:{if(Pe.M=pe.M,Pe.uc=He,kf(pe,Pe),Fe=1,Pe=($t=pe.D).Nb,He=(Yt=Cp[pe.L])*pe.R,ht=Yt/2*pe.B,Sn=16*Pe*pe.R,Os=8*Pe*pe.B,tt=pe.sa,St=pe.ta-He+Sn,ot=pe.qa,Me=pe.ra-ht+Os,ln=pe.Ha,pn=pe.Ia-ht+Os,ei=(gn=$t.M)==0,rn=gn>=pe.Va-1,pe.Aa==2&&kf(pe,$t),$t.uc)for(ti=(vr=pe).D.M,t(vr.D.uc),$t=vr.yb;$t<vr.Hb;++$t){xr=$t,Rs=ti;var Er=(Br=(Zn=vr).D).Nb;bn=Zn.R;var Br=Br.wa[Br.Y+xr],ys=Zn.sa,Ci=Zn.ta+16*Er*bn+16*xr,Ta=Br.dd,Ir=Br.tc;if(Ir!=0)if(t(3<=Ir),Zn.L==1)0<xr&&Ko(ys,Ci,bn,Ir+4),Br.La&&Ni(ys,Ci,bn,Ir),0<Rs&&gc(ys,Ci,bn,Ir+4),Br.La&&Ff(ys,Ci,bn,Ir);else{var ho=Zn.B,xc=Zn.qa,Md=Zn.ra+8*Er*ho+8*xr,Zo=Zn.Ha,Zn=Zn.Ia+8*Er*ho+8*xr;Er=Br.ld,0<xr&&(gp(ys,Ci,bn,Ir+4,Ta,Er),hc(xc,Md,Zo,Zn,ho,Ir+4,Ta,Er)),Br.La&&(Go(ys,Ci,bn,Ir,Ta,Er),Dd(xc,Md,Zo,Zn,ho,Ir,Ta,Er)),0<Rs&&(Id(ys,Ci,bn,Ir+4,Ta,Er),Df(xc,Md,Zo,Zn,ho,Ir+4,Ta,Er)),Br.La&&(mc(ys,Ci,bn,Ir,Ta,Er),pc(xc,Md,Zo,Zn,ho,Ir,Ta,Er))}}if(pe.ia&&alert("todo:DitherRow"),ge.put!=null){if($t=16*gn,gn=16*(gn+1),ei?(ge.y=pe.sa,ge.O=pe.ta+Sn,ge.f=pe.qa,ge.N=pe.ra+Os,ge.ea=pe.Ha,ge.W=pe.Ia+Os):($t-=Yt,ge.y=tt,ge.O=St,ge.f=ot,ge.N=Me,ge.ea=ln,ge.W=pn),rn||(gn-=Yt),gn>ge.o&&(gn=ge.o),ge.F=null,ge.J=null,pe.Fa!=null&&0<pe.Fa.length&&$t<gn&&(ge.J=Cf(pe,ge,$t,gn-$t),ge.F=pe.mb,ge.F==null&&ge.F.length==0)){Fe=ir(pe,3,"Could not decode alpha data.");break e}$t<ge.j&&(Yt=ge.j-$t,$t=ge.j,t(!(1&Yt)),ge.O+=pe.R*Yt,ge.N+=pe.B*(Yt>>1),ge.W+=pe.B*(Yt>>1),ge.F!=null&&(ge.J+=ge.width*Yt)),$t<gn&&(ge.O+=ge.v,ge.N+=ge.v>>1,ge.W+=ge.v>>1,ge.F!=null&&(ge.J+=ge.v),ge.ka=$t-ge.j,ge.U=ge.va-ge.v,ge.T=gn-$t,Fe=ge.put(ge))}Pe+1!=pe.Ic||rn||(r(pe.sa,pe.ta-He,tt,St+16*pe.R,He),r(pe.qa,pe.ra-ht,ot,Me+8*pe.B,ht),r(pe.Ha,pe.Ia-ht,ln,pn+8*pe.B,ht))}if(!Fe)return ir(ve,6,"Output aborted.")}return 1}(u,p)),p.bc!=null&&p.bc(p),w&=1}return w?(u.cb=0,w):0}function Wi(u,p,w,A,D){D=u[p+w+32*A]+(D>>3),u[p+w+32*A]=-256&D?0>D?0:255:D}function vd(u,p,w,A,D,$){Wi(u,p,0,w,A+D),Wi(u,p,1,w,A+$),Wi(u,p,2,w,A-$),Wi(u,p,3,w,A-D)}function Ds(u){return(20091*u>>16)+u}function pf(u,p,w,A){var D,$=0,U=a(16);for(D=0;4>D;++D){var W=u[p+0]+u[p+8],K=u[p+0]-u[p+8],ne=(35468*u[p+4]>>16)-Ds(u[p+12]),me=Ds(u[p+4])+(35468*u[p+12]>>16);U[$+0]=W+me,U[$+1]=K+ne,U[$+2]=K-ne,U[$+3]=W-me,$+=4,p++}for(D=$=0;4>D;++D)W=(u=U[$+0]+4)+U[$+8],K=u-U[$+8],ne=(35468*U[$+4]>>16)-Ds(U[$+12]),Wi(w,A,0,0,W+(me=Ds(U[$+4])+(35468*U[$+12]>>16))),Wi(w,A,1,0,K+ne),Wi(w,A,2,0,K-ne),Wi(w,A,3,0,W-me),$++,A+=32}function Jm(u,p,w,A){var D=u[p+0]+4,$=35468*u[p+4]>>16,U=Ds(u[p+4]),W=35468*u[p+1]>>16;vd(w,A,0,D+U,u=Ds(u[p+1]),W),vd(w,A,1,D+$,u,W),vd(w,A,2,D-$,u,W),vd(w,A,3,D-U,u,W)}function $0(u,p,w,A,D){pf(u,p,w,A),D&&pf(u,p+16,w,A+4)}function ep(u,p,w,A){co(u,p+0,w,A,1),co(u,p+32,w,A+128,1)}function q0(u,p,w,A){var D;for(u=u[p+0]+4,D=0;4>D;++D)for(p=0;4>p;++p)Wi(w,A,p,D,u)}function tp(u,p,w,A){u[p+0]&&vs(u,p+0,w,A),u[p+16]&&vs(u,p+16,w,A+4),u[p+32]&&vs(u,p+32,w,A+128),u[p+48]&&vs(u,p+48,w,A+128+4)}function U0(u,p,w,A){var D,$=a(16);for(D=0;4>D;++D){var U=u[p+0+D]+u[p+12+D],W=u[p+4+D]+u[p+8+D],K=u[p+4+D]-u[p+8+D],ne=u[p+0+D]-u[p+12+D];$[0+D]=U+W,$[8+D]=U-W,$[4+D]=ne+K,$[12+D]=ne-K}for(D=0;4>D;++D)U=(u=$[0+4*D]+3)+$[3+4*D],W=$[1+4*D]+$[2+4*D],K=$[1+4*D]-$[2+4*D],ne=u-$[3+4*D],w[A+0]=U+W>>3,w[A+16]=ne+K>>3,w[A+32]=U-W>>3,w[A+48]=ne-K>>3,A+=64}function gf(u,p,w){var A,D=p-32,$=Js,U=255-u[D-1];for(A=0;A<w;++A){var W,K=$,ne=U+u[p-1];for(W=0;W<w;++W)u[p+W]=K[ne+u[D+W]];p+=32}}function V0(u,p){gf(u,p,4)}function W0(u,p){gf(u,p,8)}function H0(u,p){gf(u,p,16)}function io(u,p){var w;for(w=0;16>w;++w)r(u,p+32*w,u,p-32,16)}function yd(u,p){var w;for(w=16;0<w;--w)i(u,p,u[p-1],16),p+=32}function bd(u,p,w){var A;for(A=0;16>A;++A)i(p,w+32*A,u,16)}function np(u,p){var w,A=16;for(w=0;16>w;++w)A+=u[p-1+32*w]+u[p+w-32];bd(A>>5,u,p)}function Yr(u,p){var w,A=8;for(w=0;16>w;++w)A+=u[p-1+32*w];bd(A>>4,u,p)}function G0(u,p){var w,A=8;for(w=0;16>w;++w)A+=u[p+w-32];bd(A>>4,u,p)}function rp(u,p){bd(128,u,p)}function Ft(u,p,w){return u+2*p+w+2>>2}function K0(u,p){var w,A=p-32;for(A=new Uint8Array([Ft(u[A-1],u[A+0],u[A+1]),Ft(u[A+0],u[A+1],u[A+2]),Ft(u[A+1],u[A+2],u[A+3]),Ft(u[A+2],u[A+3],u[A+4])]),w=0;4>w;++w)r(u,p+32*w,A,0,A.length)}function Q0(u,p){var w=u[p-1],A=u[p-1+32],D=u[p-1+64],$=u[p-1+96];_e(u,p+0,16843009*Ft(u[p-1-32],w,A)),_e(u,p+32,16843009*Ft(w,A,D)),_e(u,p+64,16843009*Ft(A,D,$)),_e(u,p+96,16843009*Ft(D,$,$))}function Aa(u,p){var w,A=4;for(w=0;4>w;++w)A+=u[p+w-32]+u[p-1+32*w];for(A>>=3,w=0;4>w;++w)i(u,p+32*w,A,4)}function sp(u,p){var w=u[p-1+0],A=u[p-1+32],D=u[p-1+64],$=u[p-1-32],U=u[p+0-32],W=u[p+1-32],K=u[p+2-32],ne=u[p+3-32];u[p+0+96]=Ft(A,D,u[p-1+96]),u[p+1+96]=u[p+0+64]=Ft(w,A,D),u[p+2+96]=u[p+1+64]=u[p+0+32]=Ft($,w,A),u[p+3+96]=u[p+2+64]=u[p+1+32]=u[p+0+0]=Ft(U,$,w),u[p+3+64]=u[p+2+32]=u[p+1+0]=Ft(W,U,$),u[p+3+32]=u[p+2+0]=Ft(K,W,U),u[p+3+0]=Ft(ne,K,W)}function ip(u,p){var w=u[p+1-32],A=u[p+2-32],D=u[p+3-32],$=u[p+4-32],U=u[p+5-32],W=u[p+6-32],K=u[p+7-32];u[p+0+0]=Ft(u[p+0-32],w,A),u[p+1+0]=u[p+0+32]=Ft(w,A,D),u[p+2+0]=u[p+1+32]=u[p+0+64]=Ft(A,D,$),u[p+3+0]=u[p+2+32]=u[p+1+64]=u[p+0+96]=Ft(D,$,U),u[p+3+32]=u[p+2+64]=u[p+1+96]=Ft($,U,W),u[p+3+64]=u[p+2+96]=Ft(U,W,K),u[p+3+96]=Ft(W,K,K)}function wd(u,p){var w=u[p-1+0],A=u[p-1+32],D=u[p-1+64],$=u[p-1-32],U=u[p+0-32],W=u[p+1-32],K=u[p+2-32],ne=u[p+3-32];u[p+0+0]=u[p+1+64]=$+U+1>>1,u[p+1+0]=u[p+2+64]=U+W+1>>1,u[p+2+0]=u[p+3+64]=W+K+1>>1,u[p+3+0]=K+ne+1>>1,u[p+0+96]=Ft(D,A,w),u[p+0+64]=Ft(A,w,$),u[p+0+32]=u[p+1+96]=Ft(w,$,U),u[p+1+32]=u[p+2+96]=Ft($,U,W),u[p+2+32]=u[p+3+96]=Ft(U,W,K),u[p+3+32]=Ft(W,K,ne)}function xf(u,p){var w=u[p+0-32],A=u[p+1-32],D=u[p+2-32],$=u[p+3-32],U=u[p+4-32],W=u[p+5-32],K=u[p+6-32],ne=u[p+7-32];u[p+0+0]=w+A+1>>1,u[p+1+0]=u[p+0+64]=A+D+1>>1,u[p+2+0]=u[p+1+64]=D+$+1>>1,u[p+3+0]=u[p+2+64]=$+U+1>>1,u[p+0+32]=Ft(w,A,D),u[p+1+32]=u[p+0+96]=Ft(A,D,$),u[p+2+32]=u[p+1+96]=Ft(D,$,U),u[p+3+32]=u[p+2+96]=Ft($,U,W),u[p+3+64]=Ft(U,W,K),u[p+3+96]=Ft(W,K,ne)}function Y0(u,p){var w=u[p-1+0],A=u[p-1+32],D=u[p-1+64],$=u[p-1+96];u[p+0+0]=w+A+1>>1,u[p+2+0]=u[p+0+32]=A+D+1>>1,u[p+2+32]=u[p+0+64]=D+$+1>>1,u[p+1+0]=Ft(w,A,D),u[p+3+0]=u[p+1+32]=Ft(A,D,$),u[p+3+32]=u[p+1+64]=Ft(D,$,$),u[p+3+64]=u[p+2+64]=u[p+0+96]=u[p+1+96]=u[p+2+96]=u[p+3+96]=$}function Z0(u,p){var w=u[p-1+0],A=u[p-1+32],D=u[p-1+64],$=u[p-1+96],U=u[p-1-32],W=u[p+0-32],K=u[p+1-32],ne=u[p+2-32];u[p+0+0]=u[p+2+32]=w+U+1>>1,u[p+0+32]=u[p+2+64]=A+w+1>>1,u[p+0+64]=u[p+2+96]=D+A+1>>1,u[p+0+96]=$+D+1>>1,u[p+3+0]=Ft(W,K,ne),u[p+2+0]=Ft(U,W,K),u[p+1+0]=u[p+3+32]=Ft(w,U,W),u[p+1+32]=u[p+3+64]=Ft(A,w,U),u[p+1+64]=u[p+3+96]=Ft(D,A,w),u[p+1+96]=Ft($,D,A)}function X0(u,p){var w;for(w=0;8>w;++w)r(u,p+32*w,u,p-32,8)}function vf(u,p){var w;for(w=0;8>w;++w)i(u,p,u[p-1],8),p+=32}function lc(u,p,w){var A;for(A=0;8>A;++A)i(p,w+32*A,u,8)}function qo(u,p){var w,A=8;for(w=0;8>w;++w)A+=u[p+w-32]+u[p-1+32*w];lc(A>>4,u,p)}function J0(u,p){var w,A=4;for(w=0;8>w;++w)A+=u[p+w-32];lc(A>>3,u,p)}function cc(u,p){var w,A=4;for(w=0;8>w;++w)A+=u[p-1+32*w];lc(A>>3,u,p)}function yf(u,p){lc(128,u,p)}function Nd(u,p,w){var A=u[p-w],D=u[p+0],$=3*(D-A)+iv[1020+u[p-2*w]-u[p+w]],U=vp[112+($+4>>3)];u[p-w]=Js[255+A+vp[112+($+3>>3)]],u[p+0]=Js[255+D-U]}function ap(u,p,w,A){var D=u[p+0],$=u[p+w];return Si[255+u[p-2*w]-u[p-w]]>A||Si[255+$-D]>A}function op(u,p,w,A){return 4*Si[255+u[p-w]-u[p+0]]+Si[255+u[p-2*w]-u[p+w]]<=A}function lp(u,p,w,A,D){var $=u[p-3*w],U=u[p-2*w],W=u[p-w],K=u[p+0],ne=u[p+w],me=u[p+2*w],je=u[p+3*w];return 4*Si[255+W-K]+Si[255+U-ne]>A?0:Si[255+u[p-4*w]-$]<=D&&Si[255+$-U]<=D&&Si[255+U-W]<=D&&Si[255+je-me]<=D&&Si[255+me-ne]<=D&&Si[255+ne-K]<=D}function cp(u,p,w,A){var D=2*A+1;for(A=0;16>A;++A)op(u,p+A,w,D)&&Nd(u,p+A,w)}function ka(u,p,w,A){var D=2*A+1;for(A=0;16>A;++A)op(u,p+A*w,1,D)&&Nd(u,p+A*w,1)}function ao(u,p,w,A){var D;for(D=3;0<D;--D)cp(u,p+=4*w,w,A)}function ev(u,p,w,A){var D;for(D=3;0<D;--D)ka(u,p+=4,w,A)}function Uo(u,p,w,A,D,$,U,W){for($=2*$+1;0<D--;){if(lp(u,p,w,$,U))if(ap(u,p,w,W))Nd(u,p,w);else{var K=u,ne=p,me=w,je=K[ne-2*me],Se=K[ne-me],ve=K[ne+0],Oe=K[ne+me],Pe=K[ne+2*me],pe=27*(Fe=iv[1020+3*(ve-Se)+iv[1020+je-Oe]])+63>>7,ge=18*Fe+63>>7,Fe=9*Fe+63>>7;K[ne-3*me]=Js[255+K[ne-3*me]+Fe],K[ne-2*me]=Js[255+je+ge],K[ne-me]=Js[255+Se+pe],K[ne+0]=Js[255+ve-pe],K[ne+me]=Js[255+Oe-ge],K[ne+2*me]=Js[255+Pe-Fe]}p+=A}}function Hi(u,p,w,A,D,$,U,W){for($=2*$+1;0<D--;){if(lp(u,p,w,$,U))if(ap(u,p,w,W))Nd(u,p,w);else{var K=u,ne=p,me=w,je=K[ne-me],Se=K[ne+0],ve=K[ne+me],Oe=vp[112+((Pe=3*(Se-je))+4>>3)],Pe=vp[112+(Pe+3>>3)],pe=Oe+1>>1;K[ne-2*me]=Js[255+K[ne-2*me]+pe],K[ne-me]=Js[255+je+Pe],K[ne+0]=Js[255+Se-Oe],K[ne+me]=Js[255+ve-pe]}p+=A}}function bf(u,p,w,A,D,$){Uo(u,p,w,1,16,A,D,$)}function dc(u,p,w,A,D,$){Uo(u,p,1,w,16,A,D,$)}function tv(u,p,w,A,D,$){var U;for(U=3;0<U;--U)Hi(u,p+=4*w,w,1,16,A,D,$)}function jd(u,p,w,A,D,$){var U;for(U=3;0<U;--U)Hi(u,p+=4,1,w,16,A,D,$)}function nv(u,p,w,A,D,$,U,W){Uo(u,p,D,1,8,$,U,W),Uo(w,A,D,1,8,$,U,W)}function wf(u,p,w,A,D,$,U,W){Uo(u,p,1,D,8,$,U,W),Uo(w,A,1,D,8,$,U,W)}function Nf(u,p,w,A,D,$,U,W){Hi(u,p+4*D,D,1,8,$,U,W),Hi(w,A+4*D,D,1,8,$,U,W)}function dp(u,p,w,A,D,$,U,W){Hi(u,p+4,1,D,8,$,U,W),Hi(w,A+4,1,D,8,$,U,W)}function Sd(){this.ba=new zi,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Qn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jf(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Sf(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function up(){this.ua=0,this.Wa=new se,this.vb=new se,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new I,this.yc=new P}function rv(){this.xb=this.a=0,this.l=new xd,this.ca=new zi,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new up,this.ab=0,this.gc=o(4,Sf),this.Oc=0}function _d(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new xd,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function uc(u,p,w,A,D,$,U){for(u=u==null?0:u[p+0],p=0;p<U;++p)D[$+p]=u+w[A+p]&255,u=D[$+p]}function _f(u,p,w,A,D,$,U){var W;if(u==null)uc(null,null,w,A,D,$,U);else for(W=0;W<U;++W)D[$+W]=u[p+W]+w[A+W]&255}function Vo(u,p,w,A,D,$,U){if(u==null)uc(null,null,w,A,D,$,U);else{var W,K=u[p+0],ne=K,me=K;for(W=0;W<U;++W)ne=me+(K=u[p+W])-ne,me=w[A+W]+(-256&ne?0>ne?0:255:ne)&255,ne=K,D[$+W]=me}}function Cf(u,p,w,A){var D=p.width,$=p.o;if(t(u!=null&&p!=null),0>w||0>=A||w+A>$)return null;if(!u.Cc){if(u.ga==null){var U;if(u.ga=new _d,(U=u.ga==null)||(U=p.width*p.o,t(u.Gb.length==0),u.Gb=a(U),u.Uc=0,u.Gb==null?U=0:(u.mb=u.Gb,u.nb=u.Uc,u.rc=null,U=1),U=!U),!U){U=u.ga;var W=u.Fa,K=u.P,ne=u.qc,me=u.mb,je=u.nb,Se=K+1,ve=ne-1,Oe=U.l;if(t(W!=null&&me!=null&&p!=null),Yo[0]=null,Yo[1]=uc,Yo[2]=_f,Yo[3]=Vo,U.ca=me,U.tb=je,U.c=p.width,U.i=p.height,t(0<U.c&&0<U.i),1>=ne)p=0;else if(U.$a=W[K+0]>>0&3,U.Z=W[K+0]>>2&3,U.Lc=W[K+0]>>4&3,K=W[K+0]>>6&3,0>U.$a||1<U.$a||4<=U.Z||1<U.Lc||K)p=0;else if(Oe.put=Na,Oe.ac=Rr,Oe.bc=ja,Oe.ma=U,Oe.width=p.width,Oe.height=p.height,Oe.Da=p.Da,Oe.v=p.v,Oe.va=p.va,Oe.j=p.j,Oe.o=p.o,U.$a)e:{t(U.$a==1),p=yi();t:for(;;){if(p==null){p=0;break e}if(t(U!=null),U.mc=p,p.c=U.c,p.i=U.i,p.l=U.l,p.l.ma=U,p.l.width=U.c,p.l.height=U.i,p.a=0,H(p.m,W,Se,ve),!Ca(U.c,U.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&so(p.s)?(U.ic=1,W=p.c*p.i,p.Ta=null,p.Ua=0,p.V=a(W),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(U.ic=0,p=oc(p,U.c)),!p))break t;p=1;break e}U.mc=null,p=0}else p=ve>=U.c*U.i;U=!p}if(U)return null;u.ga.Lc!=1?u.Ga=0:A=$-w}t(u.ga!=null),t(w+A<=$);e:{if(p=(W=u.ga).c,$=W.l.o,W.$a==0){if(Se=u.rc,ve=u.Vc,Oe=u.Fa,K=u.P+1+w*p,ne=u.mb,me=u.nb+w*p,t(K<=u.P+u.qc),W.Z!=0)for(t(Yo[W.Z]!=null),U=0;U<A;++U)Yo[W.Z](Se,ve,Oe,K,ne,me,p),Se=ne,ve=me,me+=p,K+=p;else for(U=0;U<A;++U)r(ne,me,Oe,K,p),Se=ne,ve=me,me+=p,K+=p;u.rc=Se,u.Vc=ve}else{if(t(W.mc!=null),p=w+A,t((U=W.mc)!=null),t(p<=U.i),U.C>=p)p=1;else if(W.ic||ye(),W.ic){W=U.V,Se=U.Ba,ve=U.c;var Pe=U.i,pe=(Oe=1,K=U.$/ve,ne=U.$%ve,me=U.m,je=U.s,U.$),ge=ve*Pe,Fe=ve*p,He=je.wc,Me=pe<Fe?pr(je,ne,K):null;t(pe<=ge),t(p<=Pe),t(so(je));t:for(;;){for(;!me.h&&pe<Fe;){if(ne&He||(Me=pr(je,ne,K)),t(Me!=null),ie(me),256>(Pe=Is(Me.G[0],Me.H[0],me)))W[Se+pe]=Pe,++pe,++ne>=ve&&(ne=0,++K<=p&&!(K%16)&&Ui(U,K));else{if(!(280>Pe)){Oe=0;break t}Pe=$i(Pe-256,me);var ht,tt=Is(Me.G[4],Me.H[4],me);if(ie(me),!(pe>=(tt=Sa(ve,tt=$i(tt,me)))&&ge-pe>=Pe)){Oe=0;break t}for(ht=0;ht<Pe;++ht)W[Se+pe+ht]=W[Se+pe+ht-tt];for(pe+=Pe,ne+=Pe;ne>=ve;)ne-=ve,++K<=p&&!(K%16)&&Ui(U,K);pe<Fe&&ne&He&&(Me=pr(je,ne,K))}t(me.h==re(me))}Ui(U,K>p?p:K);break t}!Oe||me.h&&pe<ge?(Oe=0,U.a=me.h?5:3):U.$=pe,p=Oe}else p=Vi(U,U.V,U.Ba,U.c,U.i,p,fd);if(!p){A=0;break e}}w+A>=$&&(u.Cc=1),A=1}if(!A)return null;if(u.Cc&&((A=u.ga)!=null&&(A.mc=null),u.ga=null,0<u.Ga))return alert("todo:WebPDequantizeLevels"),null}return u.nb+w*D}function b(u,p,w,A,D,$){for(;0<D--;){var U,W=u,K=p+(w?1:0),ne=u,me=p+(w?0:3);for(U=0;U<A;++U){var je=ne[me+4*U];je!=255&&(je*=32897,W[K+4*U+0]=W[K+4*U+0]*je>>23,W[K+4*U+1]=W[K+4*U+1]*je>>23,W[K+4*U+2]=W[K+4*U+2]*je>>23)}p+=$}}function R(u,p,w,A,D){for(;0<A--;){var $;for($=0;$<w;++$){var U=u[p+2*$+0],W=15&(ne=u[p+2*$+1]),K=4369*W,ne=(240&ne|ne>>4)*K>>16;u[p+2*$+0]=(240&U|U>>4)*K>>16&240|(15&U|U<<4)*K>>16>>4&15,u[p+2*$+1]=240&ne|W}p+=D}}function ae(u,p,w,A,D,$,U,W){var K,ne,me=255;for(ne=0;ne<D;++ne){for(K=0;K<A;++K){var je=u[p+K];$[U+4*K]=je,me&=je}p+=w,U+=W}return me!=255}function ue(u,p,w,A,D){var $;for($=0;$<D;++$)w[A+$]=u[p+$]>>8}function ye(){ji=b,An=R,kn=ae,or=ue}function Ee(u,p,w){T[u]=function(A,D,$,U,W,K,ne,me,je,Se,ve,Oe,Pe,pe,ge,Fe,He){var Me,ht=He-1>>1,tt=W[K+0]|ne[me+0]<<16,St=je[Se+0]|ve[Oe+0]<<16;t(A!=null);var ot=3*tt+St+131074>>2;for(p(A[D+0],255&ot,ot>>16,Pe,pe),$!=null&&(ot=3*St+tt+131074>>2,p($[U+0],255&ot,ot>>16,ge,Fe)),Me=1;Me<=ht;++Me){var ln=W[K+Me]|ne[me+Me]<<16,pn=je[Se+Me]|ve[Oe+Me]<<16,rn=tt+ln+St+pn+524296,Yt=rn+2*(ln+St)>>3;ot=Yt+tt>>1,tt=(rn=rn+2*(tt+pn)>>3)+ln>>1,p(A[D+2*Me-1],255&ot,ot>>16,Pe,pe+(2*Me-1)*w),p(A[D+2*Me-0],255&tt,tt>>16,Pe,pe+(2*Me-0)*w),$!=null&&(ot=rn+St>>1,tt=Yt+pn>>1,p($[U+2*Me-1],255&ot,ot>>16,ge,Fe+(2*Me-1)*w),p($[U+2*Me+0],255&tt,tt>>16,ge,Fe+(2*Me+0)*w)),tt=ln,St=pn}1&He||(ot=3*tt+St+131074>>2,p(A[D+He-1],255&ot,ot>>16,Pe,pe+(He-1)*w),$!=null&&(ot=3*St+tt+131074>>2,p($[U+He-1],255&ot,ot>>16,ge,Fe+(He-1)*w)))}}function Ge(){_i[yp]=I7,_i[bp]=D5,_i[P5]=D7,_i[wp]=F5,_i[Np]=M5,_i[av]=R5,_i[T5]=F7,_i[ov]=D5,_i[lv]=F5,_i[jp]=M5,_i[cv]=R5}function ft(u){return u&~M7?0>u?0:255:u>>O5}function jt(u,p){return ft((19077*u>>8)+(26149*p>>8)-14234)}function zt(u,p,w){return ft((19077*u>>8)-(6419*p>>8)-(13320*w>>8)+8708)}function Ot(u,p){return ft((19077*u>>8)+(33050*p>>8)-17685)}function Xt(u,p,w,A,D){A[D+0]=jt(u,w),A[D+1]=zt(u,p,w),A[D+2]=Ot(u,p)}function zn(u,p,w,A,D){A[D+0]=Ot(u,p),A[D+1]=zt(u,p,w),A[D+2]=jt(u,w)}function Yn(u,p,w,A,D){var $=zt(u,p,w);p=$<<3&224|Ot(u,p)>>3,A[D+0]=248&jt(u,w)|$>>5,A[D+1]=p}function gr(u,p,w,A,D){var $=240&Ot(u,p)|15;A[D+0]=240&jt(u,w)|zt(u,p,w)>>4,A[D+1]=$}function Zr(u,p,w,A,D){A[D+0]=255,Xt(u,p,w,A,D+1)}function Lr(u,p,w,A,D){zn(u,p,w,A,D),A[D+3]=255}function Gi(u,p,w,A,D){Xt(u,p,w,A,D),A[D+3]=255}function Xs(u,p){return 0>u?0:u>p?p:u}function Pa(u,p,w){T[u]=function(A,D,$,U,W,K,ne,me,je){for(var Se=me+(-2&je)*w;me!=Se;)p(A[D+0],$[U+0],W[K+0],ne,me),p(A[D+1],$[U+0],W[K+0],ne,me+w),D+=2,++U,++K,me+=2*w;1&je&&p(A[D+0],$[U+0],W[K+0],ne,me)}}function fp(u,p,w){return w==0?u==0?p==0?6:5:p==0?4:0:w}function Af(u,p,w,A,D){switch(u>>>30){case 3:co(p,w,A,D,0);break;case 2:ar(p,w,A,D);break;case 1:vs(p,w,A,D)}}function kf(u,p){var w,A,D=p.M,$=p.Nb,U=u.oc,W=u.pc+40,K=u.oc,ne=u.pc+584,me=u.oc,je=u.pc+600;for(w=0;16>w;++w)U[W+32*w-1]=129;for(w=0;8>w;++w)K[ne+32*w-1]=129,me[je+32*w-1]=129;for(0<D?U[W-1-32]=K[ne-1-32]=me[je-1-32]=129:(i(U,W-32-1,127,21),i(K,ne-32-1,127,9),i(me,je-32-1,127,9)),A=0;A<u.za;++A){var Se=p.ya[p.aa+A];if(0<A){for(w=-1;16>w;++w)r(U,W+32*w-4,U,W+32*w+12,4);for(w=-1;8>w;++w)r(K,ne+32*w-4,K,ne+32*w+4,4),r(me,je+32*w-4,me,je+32*w+4,4)}var ve=u.Gd,Oe=u.Hd+A,Pe=Se.ad,pe=Se.Hc;if(0<D&&(r(U,W-32,ve[Oe].y,0,16),r(K,ne-32,ve[Oe].f,0,8),r(me,je-32,ve[Oe].ea,0,8)),Se.Za){var ge=U,Fe=W-32+16;for(0<D&&(A>=u.za-1?i(ge,Fe,ve[Oe].y[15],4):r(ge,Fe,ve[Oe+1].y,0,4)),w=0;4>w;w++)ge[Fe+128+w]=ge[Fe+256+w]=ge[Fe+384+w]=ge[Fe+0+w];for(w=0;16>w;++w,pe<<=2)ge=U,Fe=W+z5[w],Ki[Se.Ob[w]](ge,Fe),Af(pe,Pe,16*+w,ge,Fe)}else if(ge=fp(A,D,Se.Ob[0]),Qo[ge](U,W),pe!=0)for(w=0;16>w;++w,pe<<=2)Af(pe,Pe,16*+w,U,W+z5[w]);for(w=Se.Gc,ge=fp(A,D,Se.Dd),fo[ge](K,ne),fo[ge](me,je),pe=Pe,ge=K,Fe=ne,255&(Se=w>>0)&&(170&Se?If(pe,256,ge,Fe):wi(pe,256,ge,Fe)),Se=me,pe=je,255&(w>>=8)&&(170&w?If(Pe,320,Se,pe):wi(Pe,320,Se,pe)),D<u.Ub-1&&(r(ve[Oe].y,0,U,W+480,16),r(ve[Oe].f,0,K,ne+224,8),r(ve[Oe].ea,0,me,je+224,8)),w=8*$*u.B,ve=u.sa,Oe=u.ta+16*A+16*$*u.R,Pe=u.qa,Se=u.ra+8*A+w,pe=u.Ha,ge=u.Ia+8*A+w,w=0;16>w;++w)r(ve,Oe+w*u.R,U,W+32*w,16);for(w=0;8>w;++w)r(Pe,Se+w*u.B,K,ne+32*w,8),r(pe,ge+w*u.B,me,je+32*w,8)}}function Cd(u,p,w,A,D,$,U,W,K){var ne=[0],me=[0],je=0,Se=K!=null?K.kd:0,ve=K??new jf;if(u==null||12>w)return 7;ve.data=u,ve.w=p,ve.ha=w,p=[p],w=[w],ve.gb=[ve.gb];e:{var Oe=p,Pe=w,pe=ve.gb;if(t(u!=null),t(Pe!=null),t(pe!=null),pe[0]=0,12<=Pe[0]&&!n(u,Oe[0],"RIFF")){if(n(u,Oe[0]+8,"WEBP")){pe=3;break e}var ge=ke(u,Oe[0]+4);if(12>ge||4294967286<ge){pe=3;break e}if(Se&&ge>Pe[0]-8){pe=7;break e}pe[0]=ge,Oe[0]+=12,Pe[0]-=12}pe=0}if(pe!=0)return pe;for(ge=0<ve.gb[0],w=w[0];;){e:{var Fe=u;Pe=p,pe=w;var He=ne,Me=me,ht=Oe=[0];if((ot=je=[je])[0]=0,8>pe[0])pe=7;else{if(!n(Fe,Pe[0],"VP8X")){if(ke(Fe,Pe[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var tt=ke(Fe,Pe[0]+8),St=1+Ne(Fe,Pe[0]+12);if(2147483648<=St*(Fe=1+Ne(Fe,Pe[0]+15))){pe=3;break e}ht!=null&&(ht[0]=tt),He!=null&&(He[0]=St),Me!=null&&(Me[0]=Fe),Pe[0]+=18,pe[0]-=18,ot[0]=1}pe=0}}if(je=je[0],Oe=Oe[0],pe!=0)return pe;if(Pe=!!(2&Oe),!ge&&je)return 3;if($!=null&&($[0]=!!(16&Oe)),U!=null&&(U[0]=Pe),W!=null&&(W[0]=0),U=ne[0],Oe=me[0],je&&Pe&&K==null){pe=0;break}if(4>w){pe=7;break}if(ge&&je||!ge&&!je&&!n(u,p[0],"ALPH")){w=[w],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{tt=u,pe=p,ge=w;var ot=ve.gb;He=ve.na,Me=ve.P,ht=ve.Sa,St=22,t(tt!=null),t(ge!=null),Fe=pe[0];var ln=ge[0];for(t(He!=null),t(ht!=null),He[0]=null,Me[0]=null,ht[0]=0;;){if(pe[0]=Fe,ge[0]=ln,8>ln){pe=7;break e}var pn=ke(tt,Fe+4);if(4294967286<pn){pe=3;break e}var rn=8+pn+1&-2;if(St+=rn,0<ot&&St>ot){pe=3;break e}if(!n(tt,Fe,"VP8 ")||!n(tt,Fe,"VP8L")){pe=0;break e}if(ln[0]<rn){pe=7;break e}n(tt,Fe,"ALPH")||(He[0]=tt,Me[0]=Fe+8,ht[0]=pn),Fe+=rn,ln-=rn}}if(w=w[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],pe!=0)break}w=[w],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(ot=u,pe=p,ge=w,He=ve.gb[0],Me=ve.Ja,ht=ve.xa,tt=pe[0],Fe=!n(ot,tt,"VP8 "),St=!n(ot,tt,"VP8L"),t(ot!=null),t(ge!=null),t(Me!=null),t(ht!=null),8>ge[0])pe=7;else{if(Fe||St){if(ot=ke(ot,tt+4),12<=He&&ot>He-12){pe=3;break e}if(Se&&ot>ge[0]-8){pe=7;break e}Me[0]=ot,pe[0]+=8,ge[0]-=8,ht[0]=St}else ht[0]=5<=ge[0]&&ot[tt+0]==47&&!(ot[tt+4]>>5),Me[0]=ge[0];pe=0}if(w=w[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],p=p[0],pe!=0)break;if(4294967286<ve.Ja)return 3;if(W==null||Pe||(W[0]=ve.xa?2:1),U=[U],Oe=[Oe],ve.xa){if(5>w){pe=7;break}W=U,Se=Oe,Pe=$,u==null||5>w?u=0:5<=w&&u[p+0]==47&&!(u[p+4]>>5)?(ge=[0],ot=[0],He=[0],H(Me=new F,u,p,w),Pt(Me,ge,ot,He)?(W!=null&&(W[0]=ge[0]),Se!=null&&(Se[0]=ot[0]),Pe!=null&&(Pe[0]=He[0]),u=1):u=0):u=0}else{if(10>w){pe=7;break}W=Oe,u==null||10>w||!Ym(u,p+3,w-3)?u=0:(Se=u[p+0]|u[p+1]<<8|u[p+2]<<16,Pe=16383&(u[p+7]<<8|u[p+6]),u=16383&(u[p+9]<<8|u[p+8]),1&Se||3<(Se>>1&7)||!(Se>>4&1)||Se>>5>=ve.Ja||!Pe||!u?u=0:(U&&(U[0]=Pe),W&&(W[0]=u),u=1))}if(!u||(U=U[0],Oe=Oe[0],je&&(ne[0]!=U||me[0]!=Oe)))return 3;K!=null&&(K[0]=ve,K.offset=p-K.w,t(4294967286>p-K.w),t(K.offset==K.ha-w));break}return pe==0||pe==7&&je&&K==null?($!=null&&($[0]|=ve.na!=null&&0<ve.na.length),A!=null&&(A[0]=U),D!=null&&(D[0]=Oe),0):pe}function Pf(u,p,w){var A=p.width,D=p.height,$=0,U=0,W=A,K=D;if(p.Da=u!=null&&0<u.Da,p.Da&&(W=u.cd,K=u.bd,$=u.v,U=u.j,11>w||($&=-2,U&=-2),0>$||0>U||0>=W||0>=K||$+W>A||U+K>D))return 0;if(p.v=$,p.j=U,p.va=$+W,p.o=U+K,p.U=W,p.T=K,p.da=u!=null&&0<u.da,p.da){if(!ut(W,K,w=[u.ib],$=[u.hb]))return 0;p.ib=w[0],p.hb=$[0]}return p.ob=u!=null&&u.ob,p.Kb=u==null||!u.Sd,p.da&&(p.ob=p.ib<3*A/4&&p.hb<3*D/4,p.Kb=0),1}function Tf(u){if(u==null)return 2;if(11>u.S){var p=u.f.RGBA;p.fb+=(u.height-1)*p.A,p.A=-p.A}else p=u.f.kb,u=u.height,p.O+=(u-1)*p.fa,p.fa=-p.fa,p.N+=(u-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(u-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(u-1)*p.lb,p.lb=-p.lb);return 0}function Ad(u,p,w,A){if(A==null||0>=u||0>=p)return 2;if(w!=null){if(w.Da){var D=w.cd,$=w.bd,U=-2&w.v,W=-2&w.j;if(0>U||0>W||0>=D||0>=$||U+D>u||W+$>p)return 2;u=D,p=$}if(w.da){if(!ut(u,p,D=[w.ib],$=[w.hb]))return 2;u=D[0],p=$[0]}}A.width=u,A.height=p;e:{var K=A.width,ne=A.height;if(u=A.S,0>=K||0>=ne||!(u>=yp&&13>u))u=2;else{if(0>=A.Rd&&A.sd==null){U=$=D=p=0;var me=(W=K*$5[u])*ne;if(11>u||($=(ne+1)/2*(p=(K+1)/2),u==12&&(U=(D=K)*ne)),(ne=a(me+2*$+U))==null){u=1;break e}A.sd=ne,11>u?((K=A.f.RGBA).eb=ne,K.fb=0,K.A=W,K.size=me):((K=A.f.kb).y=ne,K.O=0,K.fa=W,K.Fd=me,K.f=ne,K.N=0+me,K.Ab=p,K.Cd=$,K.ea=ne,K.W=0+me+$,K.Db=p,K.Ed=$,u==12&&(K.F=ne,K.J=0+me+2*$),K.Tc=U,K.lb=D)}if(p=1,D=A.S,$=A.width,U=A.height,D>=yp&&13>D)if(11>D)u=A.f.RGBA,p&=(W=Math.abs(u.A))*(U-1)+$<=u.size,p&=W>=$*$5[D],p&=u.eb!=null;else{u=A.f.kb,W=($+1)/2,me=(U+1)/2,K=Math.abs(u.fa),ne=Math.abs(u.Ab);var je=Math.abs(u.Db),Se=Math.abs(u.lb),ve=Se*(U-1)+$;p&=K*(U-1)+$<=u.Fd,p&=ne*(me-1)+W<=u.Cd,p=(p&=je*(me-1)+W<=u.Ed)&K>=$&ne>=W&je>=W,p&=u.y!=null,p&=u.f!=null,p&=u.ea!=null,D==12&&(p&=Se>=$,p&=ve<=u.Tc,p&=u.F!=null)}else p=0;u=p?0:2}}return u!=0||w!=null&&w.fd&&(u=Tf(A)),u}var Or=64,kd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pd=24,Td=32,Lf=8,Fs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];de("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(u){return u},T.Predictor2=function(u,p,w){return p[w+0]},T.Predictor3=function(u,p,w){return p[w+1]},T.Predictor4=function(u,p,w){return p[w-1]},T.Predictor5=function(u,p,w){return ee(ee(u,p[w+1]),p[w+0])},T.Predictor6=function(u,p,w){return ee(u,p[w-1])},T.Predictor7=function(u,p,w){return ee(u,p[w+0])},T.Predictor8=function(u,p,w){return ee(p[w-1],p[w+0])},T.Predictor9=function(u,p,w){return ee(p[w+0],p[w+1])},T.Predictor10=function(u,p,w){return ee(ee(u,p[w-1]),ee(p[w+0],p[w+1]))},T.Predictor11=function(u,p,w){var A=p[w+0];return 0>=De(A>>24&255,u>>24&255,(p=p[w-1])>>24&255)+De(A>>16&255,u>>16&255,p>>16&255)+De(A>>8&255,u>>8&255,p>>8&255)+De(255&A,255&u,255&p)?A:u},T.Predictor12=function(u,p,w){var A=p[w+0];return(ce((u>>24&255)+(A>>24&255)-((p=p[w-1])>>24&255))<<24|ce((u>>16&255)+(A>>16&255)-(p>>16&255))<<16|ce((u>>8&255)+(A>>8&255)-(p>>8&255))<<8|ce((255&u)+(255&A)-(255&p)))>>>0},T.Predictor13=function(u,p,w){var A=p[w-1];return(he((u=ee(u,p[w+0]))>>24&255,A>>24&255)<<24|he(u>>16&255,A>>16&255)<<16|he(u>>8&255,A>>8&255)<<8|he(u>>0&255,A>>0&255))>>>0};var sv=T.PredictorAdd0;T.PredictorAdd1=Ie,de("Predictor2","PredictorAdd2"),de("Predictor3","PredictorAdd3"),de("Predictor4","PredictorAdd4"),de("Predictor5","PredictorAdd5"),de("Predictor6","PredictorAdd6"),de("Predictor7","PredictorAdd7"),de("Predictor8","PredictorAdd8"),de("Predictor9","PredictorAdd9"),de("Predictor10","PredictorAdd10"),de("Predictor11","PredictorAdd11"),de("Predictor12","PredictorAdd12"),de("Predictor13","PredictorAdd13");var Ef=T.PredictorAdd2;wt("ColorIndexInverseTransform","MapARGB","32b",function(u){return u>>8&255},function(u){return u}),wt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(u){return u},function(u){return u>>8&255});var hp,bi=T.ColorIndexInverseTransform,Ld=T.MapARGB,mp=T.VP8LColorIndexInverseTransformAlpha,pp=T.MapAlpha,Wo=T.VP8LPredictorsAdd=[];Wo.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var fc,Ms,xs,Ho,oo,lo,Ed,co,ar,If,vs,wi,Id,gp,Df,hc,mc,Go,pc,Dd,gc,Ko,Ff,Ni,ji,An,kn,or,jr=a(511),uo=a(2041),Mf=a(225),Fd=a(767),xp=0,iv=uo,vp=Mf,Js=Fd,Si=jr,yp=0,bp=1,P5=2,wp=3,Np=4,av=5,T5=6,ov=7,lv=8,jp=9,cv=10,y7=[2,3,7],b7=[3,3,11],L5=[280,256,256,256,40],w7=[0,1,1,1,0],N7=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],j7=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],S7=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],_7=8,dv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],uv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Rf=null,C7=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],A7=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],E5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],k7=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],P7=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],T7=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],L7=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Qo=[],Ki=[],fo=[],E7=1,I5=2,Yo=[],_i=[];Ee("UpsampleRgbLinePair",Xt,3),Ee("UpsampleBgrLinePair",zn,3),Ee("UpsampleRgbaLinePair",Gi,4),Ee("UpsampleBgraLinePair",Lr,4),Ee("UpsampleArgbLinePair",Zr,4),Ee("UpsampleRgba4444LinePair",gr,2),Ee("UpsampleRgb565LinePair",Yn,2);var I7=T.UpsampleRgbLinePair,D7=T.UpsampleBgrLinePair,D5=T.UpsampleRgbaLinePair,F5=T.UpsampleBgraLinePair,M5=T.UpsampleArgbLinePair,R5=T.UpsampleRgba4444LinePair,F7=T.UpsampleRgb565LinePair,Sp=16,_p=1<<Sp-1,Of=-227,fv=482,O5=6,M7=(256<<O5)-1,B5=0,R7=a(256),O7=a(256),B7=a(256),z7=a(256),$7=a(fv-Of),q7=a(fv-Of);Pa("YuvToRgbRow",Xt,3),Pa("YuvToBgrRow",zn,3),Pa("YuvToRgbaRow",Gi,4),Pa("YuvToBgraRow",Lr,4),Pa("YuvToArgbRow",Zr,4),Pa("YuvToRgba4444Row",gr,2),Pa("YuvToRgb565Row",Yn,2);var z5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cp=[0,2,8],U7=[8,7,6,4,4,2,2,2,1,1,1,1],V7=1;this.WebPDecodeRGBA=function(u,p,w,A,D){var $=bp,U=new Sd,W=new zi;U.ba=W,W.S=$,W.width=[W.width],W.height=[W.height];var K=W.width,ne=W.height,me=new ro;if(me==null||u==null)var je=2;else t(me!=null),je=Cd(u,p,w,me.width,me.height,me.Pd,me.Qd,me.format,null);if(je!=0?K=0:(K!=null&&(K[0]=me.width[0]),ne!=null&&(ne[0]=me.height[0]),K=1),K){W.width=W.width[0],W.height=W.height[0],A!=null&&(A[0]=W.width),D!=null&&(D[0]=W.height);e:{if(A=new xd,(D=new jf).data=u,D.w=p,D.ha=w,D.kd=1,p=[0],t(D!=null),((u=Cd(D.data,D.w,D.ha,null,null,null,p,null,D))==0||u==7)&&p[0]&&(u=4),(p=u)==0){if(t(U!=null),A.data=D.data,A.w=D.w+D.offset,A.ha=D.ha-D.offset,A.put=Na,A.ac=Rr,A.bc=ja,A.ma=U,D.xa){if((u=yi())==null){U=1;break e}if(function(Se,ve){var Oe=[0],Pe=[0],pe=[0];t:for(;;){if(Se==null)return 0;if(ve==null)return Se.a=2,0;if(Se.l=ve,Se.a=0,H(Se.m,ve.data,ve.w,ve.ha),!Pt(Se.m,Oe,Pe,pe)){Se.a=3;break t}if(Se.xb=I5,ve.width=Oe[0],ve.height=Pe[0],!Ca(Oe[0],Pe[0],1,Se,null))break t;return 1}return t(Se.a!=0),0}(u,A)){if(A=(p=Ad(A.width,A.height,U.Oa,U.ba))==0){t:{A=u;n:for(;;){if(A==null){A=0;break t}if(t(A.s.yc!=null),t(A.s.Ya!=null),t(0<A.s.Wb),t((w=A.l)!=null),t((D=w.ma)!=null),A.xb!=0){if(A.ca=D.ba,A.tb=D.tb,t(A.ca!=null),!Pf(D.Oa,w,wp)){A.a=2;break n}if(!oc(A,w.width)||w.da)break n;if((w.da||nn(A.ca.S))&&ye(),11>A.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),A.ca.f.kb.F!=null&&ye()),A.Pb&&0<A.s.ua&&A.s.vb.X==null&&!Ue(A.s.vb,A.s.Wa.Xa)){A.a=1;break n}A.xb=0}if(!Vi(A,A.V,A.Ba,A.c,A.i,w.o,ud))break n;D.Dc=A.Ma,A=1;break t}t(A.a!=0),A=0}A=!A}A&&(p=u.a)}else p=u.a}else{if((u=new B0)==null){U=1;break e}if(u.Fa=D.na,u.P=D.P,u.qc=D.Sa,Zm(u,A)){if((p=Ad(A.width,A.height,U.Oa,U.ba))==0){if(u.Aa=0,w=U.Oa,t((D=u)!=null),w!=null){if(0<(K=0>(K=w.Md)?0:100<K?255:255*K/100)){for(ne=me=0;4>ne;++ne)12>(je=D.pb[ne]).lc&&(je.ia=K*U7[0>je.lc?0:je.lc]>>3),me|=je.ia;me&&(alert("todo:VP8InitRandom"),D.ia=1)}D.Ga=w.Id,100<D.Ga?D.Ga=100:0>D.Ga&&(D.Ga=0)}z0(u,A)||(p=u.a)}}else p=u.a}p==0&&U.Oa!=null&&U.Oa.fd&&(p=Tf(U.ba))}U=p}$=U!=0?null:11>$?W.f.RGBA.eb:W.f.kb.y}else $=null;return $};var $5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(T,E){for(var Z="",C=0;C<4;C++)Z+=String.fromCharCode(T[E++]);return Z}function f(T,E){return(T[E+0]<<0|T[E+1]<<8|T[E+2]<<16)>>>0}function h(T,E){return(T[E+0]<<0|T[E+1]<<8|T[E+2]<<16|T[E+3]<<24)>>>0}new c;var g=[0],m=[0],S=[],y=new c,j=e,v=function(T,E){var Z={},C=0,P=!1,G=0,I=0;if(Z.frames=[],!function(J,re,Q,ie){for(var B=0;B<ie;B++)if(J[re+B]!=Q.charCodeAt(B))return!0;return!1}(T,E,"RIFF",4)){for(h(T,E+=4),E+=8;E<T.length;){var V=d(T,E),z=h(T,E+=4);E+=4;var q=z+(1&z);switch(V){case"VP8 ":case"VP8L":Z.frames[C]===void 0&&(Z.frames[C]={}),(le=Z.frames[C]).src_off=P?I:E-8,le.src_size=G+z+8,C++,P&&(P=!1,G=0,I=0);break;case"VP8X":(le=Z.header={}).feature_flags=T[E];var H=E+4;le.canvas_width=1+f(T,H),H+=3,le.canvas_height=1+f(T,H),H+=3;break;case"ALPH":P=!0,G=q+8,I=E-8;break;case"ANIM":(le=Z.header).bgcolor=h(T,E),H=E+4,le.loop_count=(Ce=T)[(F=H)+0]<<0|Ce[F+1]<<8,H+=2;break;case"ANMF":var X,le;(le=Z.frames[C]={}).offset_x=2*f(T,E),E+=3,le.offset_y=2*f(T,E),E+=3,le.width=1+f(T,E),E+=3,le.height=1+f(T,E),E+=3,le.duration=f(T,E),E+=3,X=T[E++],le.dispose=1&X,le.blend=X>>1&1}V!="ANMF"&&(E+=q)}var Ce,F;return Z}}(j,0);v.response=j,v.rgbaoutput=!0,v.dataurl=!1;var x=v.header?v.header:null,_=v.frames?v.frames:null;if(x){x.loop_counter=x.loop_count,g=[x.canvas_height],m=[x.canvas_width];for(var k=0;k<_.length&&_[k].blend!=0;k++);}var M=_[0],L=y.WebPDecodeRGBA(j,M.src_off,M.src_size,m,g);M.rgba=L,M.imgwidth=m[0],M.imgheight=g[0];for(var O=0;O<m[0]*g[0]*4;O++)S[O]=L[O];return this.width=m,this.height=g,this.data=S,this}(function(e){var t=function(){return typeof g2=="function"},n=function(g,m,S,y){var j=4,v=o;switch(y){case e.image_compression.FAST:j=1,v=a;break;case e.image_compression.MEDIUM:j=6,v=l;break;case e.image_compression.SLOW:j=9,v=c}g=r(g,m,S,v);var x=g2(g,{level:j});return e.__addimage__.arrayBufferToBinaryString(x)},r=function(g,m,S,y){for(var j,v,x,_=g.length/m,k=new Uint8Array(g.length+_),M=f(),L=0;L<_;L+=1){if(x=L*m,j=g.subarray(x,x+m),y)k.set(y(j,S,v),x+L);else{for(var O,T=M.length,E=[];O<T;O+=1)E[O]=M[O](j,S,v);var Z=h(E.concat());k.set(E[Z],x+L)}v=j}return k},i=function(g){var m=Array.apply([],g);return m.unshift(0),m},a=function(g,m){var S,y=[],j=g.length;y[0]=1;for(var v=0;v<j;v+=1)S=g[v-m]||0,y[v+1]=g[v]-S+256&255;return y},o=function(g,m,S){var y,j=[],v=g.length;j[0]=2;for(var x=0;x<v;x+=1)y=S&&S[x]||0,j[x+1]=g[x]-y+256&255;return j},l=function(g,m,S){var y,j,v=[],x=g.length;v[0]=3;for(var _=0;_<x;_+=1)y=g[_-m]||0,j=S&&S[_]||0,v[_+1]=g[_]+256-(y+j>>>1)&255;return v},c=function(g,m,S){var y,j,v,x,_=[],k=g.length;_[0]=4;for(var M=0;M<k;M+=1)y=g[M-m]||0,j=S&&S[M]||0,v=S&&S[M-m]||0,x=d(y,j,v),_[M+1]=g[M]-x+256&255;return _},d=function(g,m,S){if(g===m&&m===S)return g;var y=Math.abs(m-S),j=Math.abs(g-S),v=Math.abs(g+m-S-S);return y<=j&&y<=v?g:j<=v?m:S},f=function(){return[i,a,o,l,c]},h=function(g){var m=g.map(function(S){return S.reduce(function(y,j){return y+Math.abs(j)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(g,m,S,y){var j,v,x,_,k,M,L,O,T,E,Z,C,P,G,I,V=this.decode.FLATE_DECODE,z="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(x=new gG(g)).imgData,v=x.bits,j=x.colorSpace,k=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){T=(O=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,Z=new Uint8Array(T*x.colors),E=new Uint8Array(T);var q,H=x.pixelBitlength-x.bits;for(G=0,I=0;G<T;G++){for(P=O[G],q=0;q<H;)Z[I++]=P>>>q&255,q+=x.bits;E[G]=P>>>q&255}}if(x.bits===16){T=(O=new Uint32Array(x.decodePixels().buffer)).length,Z=new Uint8Array(T*(32/x.pixelBitlength)*x.colors),E=new Uint8Array(T*(32/x.pixelBitlength)),C=x.colors>1,G=0,I=0;for(var X=0;G<T;)P=O[G++],Z[I++]=P>>>0&255,C&&(Z[I++]=P>>>16&255,P=O[G++],Z[I++]=P>>>0&255),E[X++]=P>>>16&255;v=8}y!==e.image_compression.NONE&&t()?(g=n(Z,x.width*x.colors,x.colors,y),L=n(E,x.width,1,y)):(g=Z,L=E,V=void 0)}if(x.colorType===3&&(j=this.color_spaces.INDEXED,M=x.palette,x.transparency.indexed)){var le=x.transparency.indexed,Ce=0;for(G=0,T=le.length;G<T;++G)Ce+=le[G];if((Ce/=255)===T-1&&le.indexOf(0)!==-1)_=[le.indexOf(0)];else if(Ce!==T){for(O=x.decodePixels(),E=new Uint8Array(O.length),G=0,T=O.length;G<T;G++)E[G]=le[O[G]];L=n(E,x.width,1)}}var F=function(J){var re;switch(J){case e.image_compression.FAST:re=11;break;case e.image_compression.MEDIUM:re=13;break;case e.image_compression.SLOW:re=14;break;default:re=12}return re}(y);return V===this.decode.FLATE_DECODE&&(z="/Predictor "+F+" "),z+="/Colors "+k+" /BitsPerComponent "+v+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(L&&this.__addimage__.isArrayBuffer(L)||this.__addimage__.isArrayBufferView(L))&&(L=this.__addimage__.arrayBufferToBinaryString(L)),{alias:S,data:g,index:m,filter:V,decodeParameters:z,transparency:_,palette:M,sMask:L,predictor:F,width:x.width,height:x.height,bitsPerComponent:v,colorSpace:j}}}})(_t.API),function(e){e.processGIF89A=function(t,n,r,i){var a=new xG(t),o=a.width,l=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},f=new S1(100).encode(d,100);return e.processJPEG.call(this,f,n,r,i)},e.processGIF87A=e.processGIF89A}(_t.API),Xi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xi.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){_n.log("bit decode error:"+n)}},Xi.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[a>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},Xi.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,l=a>>4,c=15&a,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Xi.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},Xi.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&t)/t*255|0,c=(a>>10&t)/t*255|0,d=a>>15?255:0,f=r*this.width*4+4*i;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=d}this.pos+=e}},Xi.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,f=i*this.width*4+4*a;this.data[f]=d,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=255}this.pos+=e}},Xi.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Xi.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=a,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=o}},Xi.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var a=new Xi(t,!1),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new S1(100).encode(c,100);return e.processJPEG.call(this,d,n,r,i)}}(_t.API),Qj.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var a=new Qj(t),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new S1(100).encode(c,100);return e.processJPEG.call(this,d,n,r,i)}}(_t.API),_t.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,d=0;d<i;d+=4){var f=r[d],h=r[d+1],g=r[d+2],m=r[d+3];a[l++]=f,a[l++]=h,a[l++]=g,o[c++]=m}var S=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:S,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},_t.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Hd=_t.API,hg=Hd.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:i.metadata.Unicode.kerning,f=d.fof?d.fof:1,h=t.doKerning!==!1,g=0,m=e.length,S=0,y=l[0]||c,j=[];for(n=0;n<m;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?j.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/a)||0)/1e3):(g=h&&vn(d[r])==="object"&&!isNaN(parseInt(d[r][S],10))?d[r][S]/f:0,j.push((l[r]||y)/c+g)),S=r;return j},Wj=Hd.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Hd.processArabic&&(e=Hd.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:hg.apply(this,arguments).reduce(function(a,o){return a+o},0)},Hj=function(e,t,n,r){for(var i=[],a=0,o=e.length,l=0;a!==o&&l+t[a]<n;)l+=t[a],a++;i.push(e.slice(0,a));var c=a;for(l=0;a!==o;)l+t[a]>r&&(i.push(e.slice(c,a)),l=0,c=a),l+=t[a],a++;return c!==a&&i.push(e.slice(c,a)),i},Gj=function(e,t,n){n||(n={});var r,i,a,o,l,c,d,f=[],h=[f],g=n.textIndent||0,m=0,S=0,y=e.split(" "),j=hg.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?y[0].length+2:n.lineIndent||0){var v=Array(c).join(" "),x=[];y.map(function(k){(k=k.split(/\s*\n/)).length>1?x=x.concat(k.map(function(M,L){return(L&&M.length?`
`:"")+M})):x.push(k[0])}),y=x,c=Wj.apply(this,[v,n])}for(a=0,o=y.length;a<o;a++){var _=0;if(r=y[a],c&&r[0]==`
`&&(r=r.substr(1),_=1),g+m+(S=(i=hg.apply(this,[r,n])).reduce(function(k,M){return k+M},0))>t||_){if(S>t){for(l=Hj.apply(this,[r,i,t-(g+m),t]),f.push(l.shift()),f=[l.pop()];l.length;)h.push([l.shift()]);S=i.slice(r.length-(f[0]?f[0].length:0)).reduce(function(k,M){return k+M},0)}else f=[r];h.push(f),g=S+c,m=j}else f.push(r),g+=m+S,m=j}return d=c?function(k,M){return(M?v:"")+k.join(" ")}:function(k){return k.join(" ")},h.map(d)},Hd.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var h=this.internal.getFont(f.fontName,f.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var l,c,d=[];for(l=0,c=r.length;l<c;l++)d=d.concat(Gj.apply(this,[r[l],o,a]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var a=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var g,m,S,y,j=["{"];for(var v in h){if(g=h[v],isNaN(parseInt(v,10))?m="'"+v+"'":(v=parseInt(v,10),m=(m=a(v).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof g=="number")g<0?(S=a(g).slice(3),y="-"):(S=a(g).slice(2),y=""),S=y+S.slice(0,-1)+r[S.slice(-1)];else{if(vn(g)!=="object")throw new Error("Don't know what to do with value type "+vn(g)+".");S=o(g)}j.push(m+S)}return j.push("}"),j.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,m,S,y,j={},v=1,x=j,_=[],k="",M="",L=h.length-1,O=1;O<L;O+=1)(y=h[O])=="'"?g?(S=g.join(""),g=void 0):g=[]:g?g.push(y):y=="{"?(_.push([x,S]),x={},S=void 0):y=="}"?((m=_.pop())[0][m[1]]=x,S=void 0,x=m[0]):y=="-"?v=-1:S===void 0?n.hasOwnProperty(y)?(k+=n[y],S=parseInt(k,16)*v,v=1,k=""):k+=y:n.hasOwnProperty(y)?(M+=n[y],x[S]=parseInt(M,16)*v,v=1,S=void 0,M=""):M+=y;return j},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var g=h.font,m=f.Unicode[g.postScriptName];m&&(g.metadata.Unicode={},g.metadata.Unicode.widths=m.widths,g.metadata.Unicode.kerning=m.kerning);var S=d.Unicode[g.postScriptName];S&&(g.metadata.Unicode.encoding=S,g.encoding=S.codePages[0])}])}(_t.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=n.charCodeAt(a);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Th(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(_t),function(e){function t(){return(Et.canvg?Promise.resolve(Et.canvg):Mx(()=>import("./index.es-B_vNckK1.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}_t.API.addSvgAsImage=function(n,r,i,a,o,l,c,d){if(isNaN(r)||isNaN(i))throw _n.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw _n.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=a,f.height=o;var h=f.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,f.width,f.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(S){return S.fromString(h,n,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(S){return S.render(g)}).then(function(){m.addImage(f.toDataURL("image/jpeg",1),r,i,a,o,c,d)})}}(),_t.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},_t.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,f=0,h=0;function g(S,y){var j,v=!1;for(j=0;j<S.length;j+=1)S[j]===y&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(h=0;h<m;h+=1)n[l[h]].value=n[l[h]].defaultValue,n[l[h]].explicitSet=!1}if(vn(e)==="object"){for(i in e)if(a=e[i],g(l,i)&&a!==void 0){if(n[i].type==="boolean"&&typeof a=="boolean")n[i].value=a;else if(n[i].type==="name"&&g(n[i].valueSet,a))n[i].value=a;else if(n[i].type==="integer"&&Number.isInteger(a))n[i].value=a;else if(n[i].type==="array"){for(d=0;d<a.length;d+=1)if(r=!0,a[d].length===1&&typeof a[d][0]=="number")c.push(String(a[d]-1));else if(a[d].length>1){for(f=0;f<a[d].length;f+=1)typeof a[d][f]!="number"&&(r=!1);r===!0&&c.push([a[d][0]-1,a[d][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var S,y=[];for(S in n)n[S].explicitSet===!0&&(n[S].type==="name"?y.push("/"+S+" /"+n[S].value):y.push("/"+S+" "+n[S].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=a.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(_t.API),function(e){var t=e.API,n=t.pdfEscape16=function(a,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],h=0,g=a.length;h<g;++h){if(l=o.metadata.characterToGlyph(a.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=a.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(d[4-l.length],l)}return f.join("")},r=function(a){var o,l,c,d,f,h,g;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,g=(l=Object.keys(a).sort(function(m,S){return m-S})).length;h<g;h++)o=l[h],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(d=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,g=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",S=0;S<g.length;S++)m+=String.fromCharCode(g[S]);var y=d();f({data:m,addLength1:!0,objectId:y}),c("endobj");var j=d();f({data:r(l.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var v=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Yd(l.fontName)),c("/FontFile2 "+y+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var x=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Yd(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+j+" 0 R"),c("/BaseFont /"+Yd(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+x+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,g="",m=0;m<h.length;m++)g+=String.fromCharCode(h[m]);var S=d();f({data:g,addLength1:!0,objectId:S}),c("endobj");var y=d();f({data:r(l.metadata.toUnicode),addLength1:!0,objectId:y}),c("endobj");var j=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+S+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Yd(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+Yd(l.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,l=a.text||"",c=a.x,d=a.y,f=a.options||{},h=a.mutex||{},g=h.pdfEscape,m=h.activeFontKey,S=h.fonts,y=m,j="",v=0,x="",_=S[y].encoding;if(S[y].encoding!=="Identity-H")return{text:l,x:c,y:d,options:f,mutex:h};for(x=l,y=m,Array.isArray(l)&&(x=l[0]),v=0;v<x.length;v+=1)S[y].metadata.hasOwnProperty("cmap")&&(o=S[y].metadata.cmap.unicode.codeMap[x[v].charCodeAt(0)]),o||x[v].charCodeAt(0)<256&&S[y].metadata.hasOwnProperty("Unicode")?j+=x[v]:j+="";var k="";return parseInt(y.slice(1))<14||_==="WinAnsiEncoding"?k=g(j,y).split("").map(function(M){return M.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(k=n(j,S[y])),h.isHex=!0,{text:k,x:c,y:d,options:f,mutex:h}};t.events.push(["postProcessText",function(a){var o=a.text||"",l=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([i(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(i(Object.assign({},c,{text:o[d]})).text);a.text=l}else a.text=i(Object.assign({},c,{text:o})).text}])}(_t),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(_t.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,a,o,l,c,d,f,h=t,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],S={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,_=0;this.__bidiEngine__={};var k=function(C){var P=C.charCodeAt(),G=P>>8,I=y[G];return I!==void 0?h[256*I+(255&P)]:G===252||G===253?"AL":v.test(G)?"L":G===8?"R":"N"},M=function(C){for(var P,G=0;G<C.length;G++){if((P=k(C.charAt(G)))==="L")return!1;if(P==="R")return!0}return!1},L=function(C,P,G,I){var V,z,q,H,X=P[I];switch(X){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(X="AN");break;case"AL":x=!0,X="R";break;case"WS":X="N";break;case"CS":I<1||I+1>=P.length||(V=G[I-1])!=="EN"&&V!=="AN"||(z=P[I+1])!=="EN"&&z!=="AN"?X="N":x&&(z="AN"),X=z===V?z:"N";break;case"ES":X=(V=I>0?G[I-1]:"B")==="EN"&&I+1<P.length&&P[I+1]==="EN"?"EN":"N";break;case"ET":if(I>0&&G[I-1]==="EN"){X="EN";break}if(x){X="N";break}for(q=I+1,H=P.length;q<H&&P[q]==="ET";)q++;X=q<H&&P[q]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(H=P.length,q=I+1;q<H&&P[q]==="NSM";)q++;if(q<H){var le=C[I],Ce=le>=1425&&le<=2303||le===64286;if(V=P[q],Ce&&(V==="R"||V==="AL")){X="R";break}}}X=I<1||(V=P[I-1])==="B"?"N":G[I-1];break;case"B":x=!1,i=!0,X=_;break;case"S":a=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":X="N"}return X},O=function(C,P,G){var I=C.split("");return G&&T(I,G,{hiLevel:_}),I.reverse(),P&&P.reverse(),I.join("")},T=function(C,P,G){var I,V,z,q,H,X=-1,le=C.length,Ce=0,F=[],J=_?m:g,re=[];for(x=!1,i=!1,a=!1,V=0;V<le;V++)re[V]=k(C[V]);for(z=0;z<le;z++){if(H=Ce,F[z]=L(C,re,F,z),I=240&(Ce=J[H][S[F[z]]]),Ce&=15,P[z]=q=J[Ce][5],I>0)if(I===16){for(V=X;V<z;V++)P[V]=1;X=-1}else X=-1;if(J[Ce][6])X===-1&&(X=z);else if(X>-1){for(V=X;V<z;V++)P[V]=q;X=-1}re[z]==="B"&&(P[z]=0),G.hiLevel|=q}a&&function(Q,ie,B){for(var te=0;te<B;te++)if(Q[te]==="S"){ie[te]=_;for(var oe=te-1;oe>=0&&Q[oe]==="WS";oe--)ie[oe]=_}}(re,P,le)},E=function(C,P,G,I,V){if(!(V.hiLevel<C)){if(C===1&&_===1&&!i)return P.reverse(),void(G&&G.reverse());for(var z,q,H,X,le=P.length,Ce=0;Ce<le;){if(I[Ce]>=C){for(H=Ce+1;H<le&&I[H]>=C;)H++;for(X=Ce,q=H-1;X<q;X++,q--)z=P[X],P[X]=P[q],P[q]=z,G&&(z=G[X],G[X]=G[q],G[q]=z);Ce=H}Ce++}}},Z=function(C,P,G){var I=C.split(""),V={hiLevel:_};return G||(G=[]),T(I,G,V),function(z,q,H){if(H.hiLevel!==0&&f)for(var X,le=0;le<z.length;le++)q[le]===1&&(X=j.indexOf(z[le]))>=0&&(z[le]=j[X+1])}(I,G,V),E(2,I,P,G,V),E(1,I,P,G,V),I.join("")};return this.__bidiEngine__.doBidiReorder=function(C,P,G){if(function(V,z){if(z)for(var q=0;q<V.length;q++)z[q]=q;l===void 0&&(l=M(V)),d===void 0&&(d=M(V))}(C,P),o||!c||d)if(o&&c&&l^d)_=l?1:0,C=O(C,P,G);else if(!o&&c&&d)_=l?1:0,C=Z(C,P,G),C=O(C,P);else if(!o||l||c||d){if(o&&!c&&l^d)C=O(C,P),l?(_=0,C=Z(C,P,G)):(_=1,C=Z(C,P,G),C=O(C,P));else if(o&&l&&!c&&d)_=1,C=Z(C,P,G),C=O(C,P);else if(!o&&!c&&l^d){var I=f;l?(_=1,C=Z(C,P,G),_=0,f=!1,C=Z(C,P,G),f=I):(_=0,C=Z(C,P,G),C=O(C,P),_=1,f=!1,C=Z(C,P,G),f=I,C=O(C,P))}}else _=0,C=Z(C,P,G);else _=l?1:0,C=Z(C,P,G);return C},this.__bidiEngine__.setOptions=function(C){C&&(o=C.isInputVisual,c=C.isOutputVisual,l=C.isInputRtl,d=C.isOutputRtl,f=C.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var a=r.options||{};r.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([n.doBidiReorder(i[l])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(_t),_t.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Zl(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new EG(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new vG(this.contents),this.head=new bG(this),this.name=new _G(this),this.cmap=new EI(this),this.toUnicode={},this.hhea=new wG(this),this.maxp=new CG(this),this.hmtx=new AG(this),this.post=new jG(this),this.os2=new NG(this),this.loca=new LG(this),this.glyf=new kG(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,a,o,l;for(o=0,a=0,l=(t=""+t).length;0<=l?a<l:a>l;a=0<=l?++a:--a)i=t.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var ba,Zl=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,a,o,l,c;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*a+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,a;for(a=[],r=0,i=t.length;r<i;r++)n=t[r],a.push(this.writeByte(n));return a},e}(),vG=function(){var e;function t(n){var r,i,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,a,o,l,c,d,f,h,g,m,S,y;for(y in m=Object.keys(n).length,c=Math.log(2),h=16*Math.floor(Math.log(m)/c),o=Math.floor(h/c),f=16*m-h,(i=new Zl).writeInt(this.scalarType),i.writeShort(m),i.writeShort(h),i.writeShort(o),i.writeShort(f),a=16*m,d=i.pos+a,l=null,S=[],n)for(g=n[y],i.writeString(y),i.writeInt(e(g)),i.writeInt(d),i.writeInt(g.length),S=S.concat(g),y==="head"&&(l=d),d+=g.length;d%4;)S.push(0),d++;return i.write(S),r=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(r),i.data},e=function(n){var r,i,a,o;for(n=II.call(n);n.length%4;)n.push(0);for(a=new Zl(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=a.readUInt32();return 4294967295&i},t}(),yG={}.hasOwnProperty,no=function(e,t){for(var n in t)yG.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};ba=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var bG=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return no(t,ba),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Zl).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),Yj=function(){function e(t,n){var r,i,a,o,l,c,d,f,h,g,m,S,y,j,v,x,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),g=m/2,t.pos+=6,a=function(){var k,M;for(M=[],c=k=0;0<=g?k<g:k>g;c=0<=g?++k:--k)M.push(t.readUInt16());return M}(),t.pos+=2,y=function(){var k,M;for(M=[],c=k=0;0<=g?k<g:k>g;c=0<=g?++k:--k)M.push(t.readUInt16());return M}(),d=function(){var k,M;for(M=[],c=k=0;0<=g?k<g:k>g;c=0<=g?++k:--k)M.push(t.readUInt16());return M}(),f=function(){var k,M;for(M=[],c=k=0;0<=g?k<g:k>g;c=0<=g?++k:--k)M.push(t.readUInt16());return M}(),i=(this.length-t.pos+this.offset)/2,l=function(){var k,M;for(M=[],c=k=0;0<=i?k<i:k>i;c=0<=i?++k:--k)M.push(t.readUInt16());return M}(),c=v=0,_=a.length;v<_;c=++v)for(j=a[c],r=x=S=y[c];S<=j?x<=j:x>=j;r=S<=j?++x:--x)f[c]===0?o=r+d[c]:(o=l[f[c]/2+(r-S)-(g-c)]||0)!==0&&(o+=d[c]),this.codeMap[r]=65535&o}t.pos=h}return e.encode=function(t,n){var r,i,a,o,l,c,d,f,h,g,m,S,y,j,v,x,_,k,M,L,O,T,E,Z,C,P,G,I,V,z,q,H,X,le,Ce,F,J,re,Q,ie,B,te,oe,_e,we,Ne;switch(I=new Zl,o=Object.keys(t).sort(function(ke,Ue){return ke-Ue}),n){case"macroman":for(y=0,j=function(){var ke=[];for(S=0;S<256;++S)ke.push(0);return ke}(),x={0:0},a={},V=0,X=o.length;V<X;V++)x[oe=t[i=o[V]]]==null&&(x[oe]=++y),a[i]={old:t[i],new:x[t[i]]},j[i]=x[t[i]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(j),{charMap:a,subtable:I.data,maxGlyphID:y+1};case"unicode":for(P=[],h=[],_=0,x={},r={},v=d=null,z=0,le=o.length;z<le;z++)x[M=t[i=o[z]]]==null&&(x[M]=++_),r[i]={old:M,new:x[M]},l=x[M]-i,v!=null&&l===d||(v&&h.push(v),P.push(i),d=l),v=i;for(v&&h.push(v),h.push(65535),P.push(65535),Z=2*(E=P.length),T=2*Math.pow(Math.log(E)/Math.LN2,2),g=Math.log(T/2)/Math.LN2,O=2*E-T,c=[],L=[],m=[],S=q=0,Ce=P.length;q<Ce;S=++q){if(C=P[S],f=h[S],C===65535){c.push(0),L.push(0);break}if(C-(G=r[C].new)>=32768)for(c.push(0),L.push(2*(m.length+E-S)),i=H=C;C<=f?H<=f:H>=f;i=C<=f?++H:--H)m.push(r[i].new);else c.push(G-C),L.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*E+2*m.length),I.writeUInt16(0),I.writeUInt16(Z),I.writeUInt16(T),I.writeUInt16(g),I.writeUInt16(O),B=0,F=h.length;B<F;B++)i=h[B],I.writeUInt16(i);for(I.writeUInt16(0),te=0,J=P.length;te<J;te++)i=P[te],I.writeUInt16(i);for(_e=0,re=c.length;_e<re;_e++)l=c[_e],I.writeUInt16(l);for(we=0,Q=L.length;we<Q;we++)k=L[we],I.writeUInt16(k);for(Ne=0,ie=m.length;Ne<ie;Ne++)y=m[Ne],I.writeUInt16(y);return{charMap:r,subtable:I.data,maxGlyphID:_+1}}},e}(),EI=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return no(t,ba),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)r=new Yj(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,a;return r==null&&(r="macroman"),i=Yj.encode(n,r),(a=new Zl).writeUInt16(0),a.writeUInt16(1),i.table=a.data.concat(i.subtable),i},t}(),wG=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return no(t,ba),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),NG=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return no(t,ba),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),jG=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return no(t,ba),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(n.readUInt32());return d}).call(this)}},t}(),SG=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},_G=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return no(t,ba),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,a,o,l,c,d,f,h,g,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),c=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+c+n.readShort()});for(d={},o=h=0,g=i.length;h<g;o=++h)a=i[o],n.pos=a.offset,f=n.readString(a.length),l=new SG(f,a),d[m=a.nameID]==null&&(d[m]=[]),d[a.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),CG=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return no(t,ba),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),AG=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return no(t,ba),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,a,o,l,c,d;for(n.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,h;for(h=[],r=f=0;0<=a?f<a:f>a;r=0<=a?++f:--f)h.push(n.readInt16());return h}(),this.widths=(function(){var f,h,g,m;for(m=[],f=0,h=(g=this.metrics).length;f<h;f++)o=g[f],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],d=[],r=l=0;0<=a?l<a:l>a;r=0<=a?++l:--l)d.push(this.widths.push(i));return d},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),II=[].slice,kG=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return no(t,ba),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,a,o,l,c,d,f,h,g;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(a=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,l=(c=new Zl(r.read(a))).readShort(),f=c.readShort(),g=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[n]=l===-1?new TG(c,f,g,d,h):new PG(c,l,f,g,d,h),this.cache[n]))},t.prototype.encode=function(n,r,i){var a,o,l,c,d;for(l=[],o=[],c=0,d=r.length;c<d;c++)a=n[r[c]],o.push(l.length),a&&(l=l.concat(a.encode(i)));return o.push(l.length),{table:l,offsets:o}},t}(),PG=function(){function e(t,n,r,i,a,o){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),TG=function(){function e(t,n,r,i,a){var o,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Zl(II.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),LG=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return no(t,ba),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var a,o;for(o=[],i=0,a=this.length;i<a;i+=4)o.push(n.readUInt32());return o}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),a=0,o=0,l=0;l<i.length;++l)if(i[l]=a,o<r.length&&r[o]==l){++o,i[l]=a;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(a+=d)}for(var f=new Array(4*i.length),h=0;h<i.length;++h)f[4*h+3]=255&i[h],f[4*h+2]=(65280&i[h])>>8,f[4*h+1]=(16711680&i[h])>>16,f[4*h]=(4278190080&i[h])>>24;return f},t}(),EG=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,a;for(n in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)r=a[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,a,o,l,c;for(i={},o=0,l=t.length;o<l;o++)i[a=t[o]]=this.font.glyf.glyphFor(a);for(a in n=[],i)(r=i[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in c=this.glyphsFor(n))r=c[a],i[a]=r;return i},e.prototype.encode=function(t,n){var r,i,a,o,l,c,d,f,h,g,m,S,y,j,v;for(i in r=EI.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},v=r.charMap)m[(c=v[i]).old]=c.new;for(S in g=r.maxGlyphID,o)S in m||(m[S]=g++);return f=function(x){var _,k;for(_ in k={},x)k[x[_]]=_;return k}(m),h=Object.keys(f).sort(function(x,_){return x-_}),y=function(){var x,_,k;for(k=[],x=0,_=h.length;x<_;x++)l=h[x],k.push(f[l]);return k}(),a=this.font.glyf.encode(o,y,m),d=this.font.loca.encode(a.offsets,y),j={cmap:this.font.cmap.raw(),glyf:a.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},e}();_t.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,a,o;if(Array.isArray(n))return"["+function(){var l,c,d;for(d=[],l=0,c=n.length;l<c;l++)r=n[l],d.push(t.convert(r));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in a=["<<"],n)o=n[i],a.push("/"+i+" "+t.convert(o));return a.push(">>"),a.join(`
`)}return""+n},t}();const IG=Object.freeze(Object.defineProperty({__proto__:null,AcroFormAppearance:xt,AcroFormButton:Cr,AcroFormCheckBox:Ih,AcroFormChoiceField:zc,AcroFormComboBox:qc,AcroFormEditBox:Lh,AcroFormListBox:$c,AcroFormPasswordField:Dh,AcroFormPushButton:Eh,AcroFormRadioButton:Uc,AcroFormTextField:Ml,GState:ym,ShadingPattern:pl,TilingPattern:Ac,default:_t,jsPDF:_t},Symbol.toStringTag,{value:"Module"}));function DG(){const e=SA(),[,t]=Lm(),{toast:n}=Qr(),r=parseInt(e.id),[i,a]=N.useState(""),[o,l]=N.useState(""),[c,d]=N.useState(""),[f,h]=N.useState(""),[g,m]=N.useState(""),[S,y]=N.useState(""),[j,v]=N.useState(""),[x,_]=N.useState(""),[k,M]=N.useState([]),[L,O]=N.useState([]),{data:T,isLoading:E}=kt({queryKey:[`/api/lots/${r}`],enabled:!isNaN(r)}),{data:Z=[]}=kt({queryKey:["/api/buyers"]}),[C,P]=N.useState(navigator.onLine),G=`bag-entry-${r}`,{data:I}=kt({queryKey:[`/api/bag-entry-draft/${r}`],enabled:!isNaN(r)&&C,retry:!1}),V=fn({mutationFn:async Q=>{await an("POST",`/api/bag-entry-draft/${r}`,{draftData:Q})}}),z=fn({mutationFn:async()=>{await an("DELETE",`/api/bag-entry-draft/${r}`)}});N.useEffect(()=>{const Q=()=>{P(!0);const B=localStorage.getItem(G);if(B)try{const te=JSON.parse(B);V.mutate(te,{onSuccess:()=>{n({title:"Auto-Synced",description:"Your offline work has been synced to server"})}})}catch(te){console.error("Failed to auto-sync:",te)}},ie=()=>P(!1);return window.addEventListener("online",Q),window.addEventListener("offline",ie),()=>{window.removeEventListener("online",Q),window.removeEventListener("offline",ie)}},[G,V,n]);const{data:q=[]}=kt({queryKey:[`/api/lots/${r}/bags`],enabled:!isNaN(r)}),H=fn({mutationFn:async()=>{if(!i)throw new Error("Lot price is mandatory before saving bags");if(!f)throw new Error("At least one buyer selection is mandatory before saving bags");const Q=k.filter(te=>te.weight&&te.weight>0);if(Q.length===0)throw new Error("No bags with weight to save");const ie=f?parseInt(f):void 0;await an("PUT",`/api/lots/${r}`,{lotPrice:i,grade:o,buyerId:ie,finalNotes:c,buyerAllocations:L});const B=Q.map(te=>{var Ne,ke;const oe=le(te.bagNumber),_e=te.buyerId||(oe==null?void 0:oe.buyerId),we=q.find(Ue=>Ue.bagNumber===te.bagNumber);return we?an("PUT",`/api/bags/${we.id}`,{weight:(Ne=te.weight)==null?void 0:Ne.toString(),buyerId:_e}):an("POST",`/api/lots/${r}/bags`,{bagNumber:te.bagNumber,weight:(ke=te.weight)==null?void 0:ke.toString(),buyerId:_e})});await Promise.all(B)},onSuccess:()=>{z.mutate(),n({title:"Success",description:"All bags saved successfully"}),Tn.invalidateQueries({queryKey:[`/api/lots/${r}/bags`]}),t("/lots")},onError:Q=>{n({title:"Error",description:Q.message||"Failed to save bags",variant:"destructive"})}});N.useEffect(()=>{f&&g===f&&(m(""),_("")),f&&S===f&&y("")},[f]),N.useEffect(()=>{g&&S===g&&y("")},[g]),N.useEffect(()=>{if(!T||!f)return;const Q=T.numberOfBags,ie=parseInt(j)||0,B=parseInt(x)||0,te=Q-ie-B,oe=[];let _e=1;if(f&&ie>0){const we=Z.find(Ne=>Ne.id===parseInt(f));we&&(oe.push({buyerId:we.id,buyerName:we.name,bagCount:ie,startBag:_e,endBag:_e+ie-1}),_e+=ie)}if(g&&B>0){const we=Z.find(Ne=>Ne.id===parseInt(g));we&&(oe.push({buyerId:we.id,buyerName:we.name,bagCount:B,startBag:_e,endBag:_e+B-1}),_e+=B)}if(S&&te>0){const we=Z.find(Ne=>Ne.id===parseInt(S));we&&oe.push({buyerId:we.id,buyerName:we.name,bagCount:te,startBag:_e,endBag:_e+te-1})}O(oe)},[f,g,S,j,x,T,Z]),N.useEffect(()=>{if(!T)return;if(C&&I&&I.draftData)try{const ie=I.draftData;M(ie.bagEntries||[]),a(ie.lotPrice||""),l(ie.lotGrade||""),d(ie.finalNotes||""),h(ie.buyer1||""),m(ie.buyer2||""),y(ie.buyer3||""),v(ie.buyer1Count||0),_(ie.buyer2Count||0);return}catch(ie){console.error("Failed to parse server draft data:",ie)}try{const ie=localStorage.getItem(G);if(ie){const B=JSON.parse(ie);M(B.bagEntries||[]),a(B.lotPrice||""),l(B.lotGrade||""),d(B.finalNotes||""),h(B.buyer1||""),m(B.buyer2||""),y(B.buyer3||""),v(B.buyer1Count||""),_(B.buyer2Count||"");return}}catch(ie){console.error("Failed to parse localStorage draft:",ie)}const Q=[];for(let ie=1;ie<=T.numberOfBags;ie++)Q.push({bagNumber:ie});M(Q)},[T,I,C,G]),N.useEffect(()=>{if(k.length===0)return;const Q={bagEntries:k,lotPrice:i,lotGrade:o,finalNotes:c,buyer1:f,buyer2:g,buyer3:S,buyer1Count:j,buyer2Count:x,timestamp:Date.now()};localStorage.setItem(G,JSON.stringify(Q))},[k,i,o,c,f,g,S,j,x,G]);const X=()=>{const Q={bagEntries:k,lotPrice:i,lotGrade:o,finalNotes:c,buyer1:f,buyer2:g,buyer3:S,buyer1Count:j,buyer2Count:x,timestamp:Date.now()};localStorage.setItem(G,JSON.stringify(Q)),C?V.mutate(Q,{onSuccess:()=>{n({title:"Draft Synced",description:"Your progress has been saved to server and will sync across devices"})},onError:()=>{n({title:"Sync Failed",description:"Saved locally but could not sync to server",variant:"destructive"})}}):n({title:"Saved Offline",description:"Your progress is saved locally. Will sync when internet returns."})},le=Q=>L.find(ie=>Q>=ie.startBag&&Q<=ie.endBag),Ce=(Q,ie)=>{M(B=>B.map(te=>{if(te.bagNumber===Q){const oe=le(Q);return{...te,weight:ie,buyerId:oe==null?void 0:oe.buyerId,buyerName:oe==null?void 0:oe.buyerName}}return te}))};if(isNaN(r))return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx(Re,{children:s.jsxs(qe,{className:"p-8 text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Invalid Lot ID"}),s.jsx(Le,{onClick:()=>t("/lots"),children:"Back to Lots"})]})})})]});if(E)return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{children:"Loading..."})})]});if(!T||!T.farmer)return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx(Re,{children:s.jsxs(qe,{className:"p-8 text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Lot Not Found"}),s.jsx(Le,{onClick:()=>t("/lots"),children:"Back to Lots"})]})})})]});const F=k.filter(Q=>Q.weight&&Q.weight>0).length,J=k.reduce((Q,ie)=>Q+(ie.weight||0),0),re=()=>{const Q=new _t("p","mm","a4"),ie=210,B=297,te=15,oe=ie-2*te,_e=40,Ne=B-_e-15-te;let ke,Ue,be;T.numberOfBags<=20?ke=Math.min(4,Math.ceil(Math.sqrt(T.numberOfBags))):T.numberOfBags<=50?ke=5:T.numberOfBags<=100?ke=7:T.numberOfBags<=200?ke=10:T.numberOfBags<=400?ke=12:ke=15,Ue=oe/ke;const se=Math.ceil(T.numberOfBags/ke);be=Math.min(Ue*.7,Ne/se);const ut=10,Je=8;(Ue<ut||be<Je)&&(ke=Math.floor(oe/ut),Ue=oe/ke,be=Math.max(Je,Ne/Math.ceil(T.numberOfBags/ke))),Q.setFontSize(16),Q.setFont("helvetica","bold"),Q.text("BAG ENTRY FORM",ie/2,20,{align:"center"}),Q.setFontSize(11),Q.setFont("helvetica","normal"),Q.text(`Lot: ${T.lotNumber}`,te,30),Q.text(`Farmer: ${T.farmer.name}`,te,35),Q.text(`Total Bags: ${T.numberOfBags}`,ie-te-50,30),Q.text(`Mobile: ${T.farmer.mobile}`,ie-te-50,35);const Y=_e+te;for(let ee=0;ee<se;ee++)for(let ce=0;ce<ke&&!(ee*ke+ce+1>T.numberOfBags);ce++){const De=te+ce*Ue,Ie=Y+ee*be;Q.rect(De,Ie,Ue,be);const Te=Ie+be-3;Q.line(De+2,Te,De+Ue-2,Te)}const de=Y+se*be,We=Math.min(de+10,B-15);Q.setFontSize(8),Q.text(`${ke} columns × ${se} rows | Total: ${T.numberOfBags} bags`,te,We),Q.save(`${T.lotNumber}_BagEntry_Form.pdf`),n({title:"Form Downloaded",description:`Downloadable bag entry form generated for ${T.numberOfBags} bags`})};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-8",children:[s.jsx(Bi,{}),s.jsxs("div",{className:"mb-4 sm:mb-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-3 sm:mb-4",children:[s.jsxs(Le,{variant:"ghost",onClick:()=>t("/lots"),className:"text-primary hover:text-primary/80 w-full sm:w-auto min-h-[44px]",children:[s.jsx(gk,{className:"h-4 w-4 mr-2"}),"Back to Lots"]}),s.jsxs(Le,{variant:"outline",onClick:re,className:"gap-2 w-full sm:w-auto min-h-[44px]",children:[s.jsx(Ka,{className:"h-4 w-4"}),"Download Form"]})]}),s.jsxs("h1",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:["Bag Entry - ",T.lotNumber]})]}),s.jsxs(Re,{className:"mb-6",children:[s.jsx(it,{children:s.jsxs(ct,{className:"flex items-center gap-2",children:[s.jsx(Cs,{className:"h-5 w-5"}),"Lot Information"]})}),s.jsx(qe,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{className:"text-sm font-medium text-gray-600",children:"Farmer"}),s.jsx("p",{className:"text-lg font-semibold",children:T.farmer.name}),s.jsx("p",{className:"text-sm text-gray-600",children:T.farmer.mobile})]}),s.jsxs("div",{children:[s.jsx(Ae,{className:"text-sm font-medium text-gray-600",children:"Total Bags"}),s.jsx("p",{className:"text-lg font-semibold",children:T.numberOfBags})]}),s.jsxs("div",{children:[s.jsx(Ae,{className:"text-sm font-medium text-gray-600",children:"Progress"}),s.jsxs("p",{className:"text-lg font-semibold",children:[F," / ",T.numberOfBags," bags weighed"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",J.toFixed(1)," kg"]})]})]})})]}),s.jsxs(Re,{className:"mb-6",children:[s.jsxs(it,{children:[s.jsxs(ct,{className:"flex items-center gap-2",children:[s.jsx(Fi,{className:"h-5 w-5"}),"Buyer Allocation (Up to 3 Buyers)"]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Allocate bags to different buyers. At least one buyer is mandatory."})]}),s.jsxs(qe,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"buyer1",children:"Buyer 1 *"}),s.jsxs(rr,{value:f,onValueChange:h,children:[s.jsx(Wn,{className:f?"":"border-red-300",children:s.jsx(sr,{placeholder:"Select buyer 1"})}),s.jsx(Hn,{children:Z.map(Q=>s.jsx(Tt,{value:Q.id.toString(),children:Q.name},Q.id))})]}),!f&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:"At least one buyer is mandatory"})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"buyer1Count",children:"Buyer 1 Bags"}),s.jsx(At,{id:"buyer1Count",type:"number",voiceType:"number",min:"0",max:T.numberOfBags,value:j,onChange:Q=>v(Q.target.value),placeholder:"Number of bags"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"buyer2",children:"Buyer 2 (Optional)"}),s.jsxs(rr,{value:g,onValueChange:m,children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"Select buyer 2"})}),s.jsx(Hn,{children:Z.filter(Q=>Q.id.toString()!==f).map(Q=>s.jsx(Tt,{value:Q.id.toString(),children:Q.name},Q.id))})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"buyer2Count",children:"Buyer 2 Bags"}),s.jsx(At,{id:"buyer2Count",type:"number",voiceType:"number",min:"0",max:T.numberOfBags,value:x,onChange:Q=>_(Q.target.value),placeholder:"Number of bags"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"buyer3",children:"Buyer 3 (Optional)"}),s.jsxs(rr,{value:S,onValueChange:y,children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"Select buyer 3"})}),s.jsx(Hn,{children:Z.filter(Q=>Q.id.toString()!==f&&Q.id.toString()!==g).map(Q=>s.jsx(Tt,{value:Q.id.toString(),children:Q.name},Q.id))})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Buyer 3 Bags (Auto)"}),s.jsx(Ze,{readOnly:!0,value:T.numberOfBags-(parseInt(j)||0)-(parseInt(x)||0),className:"bg-gray-100"})]})]}),L.length>0&&s.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Bag Distribution Preview:"}),L.map((Q,ie)=>s.jsxs("div",{className:"text-sm",children:["• Bags ",Q.startBag,"-",Q.endBag,": ",Q.buyerName," (",Q.bagCount," bags)"]},ie))]})]})]}),s.jsx(Re,{className:"mb-6",children:s.jsx(qe,{className:"pt-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"lotPrice",children:"Lot Price (₹ per quintal) *"}),s.jsx(At,{id:"lotPrice",type:"number",voiceType:"currency",step:"0.01",value:i,onChange:Q=>a(Q.target.value),placeholder:"Enter price per quintal",className:i?"":"border-red-300",required:!0}),!i&&s.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Lot price is mandatory"})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"lotGrade",children:"Grade"}),s.jsx(At,{id:"lotGrade",voiceType:"text",value:o,onChange:Q=>l(Q.target.value),placeholder:"Enter grade"})]})]})})}),s.jsxs(Re,{className:"mb-6",children:[s.jsx(it,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(ct,{children:"Bag Weight Entry"}),s.jsxs(Le,{onClick:()=>H.mutate(),disabled:H.isPending||F===0,className:"bg-green-600 hover:bg-green-700",children:[s.jsx(Lg,{className:"h-4 w-4 mr-2"}),H.isPending?"Saving...":`Save All (${F} bags)`]})]})}),s.jsx(qe,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(Q=>{const ie=le(Q.bagNumber);return s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("span",{className:"font-semibold",children:["Bag #",Q.bagNumber]}),ie&&s.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:ie.buyerName})]}),s.jsx(At,{type:"number",voiceType:"number",step:"0.5",min:"0",placeholder:"Weight (kg)",value:Q.weight||"","data-bag":Q.bagNumber,onChange:B=>{const te=B.target.value;Ce(Q.bagNumber,te===""?void 0:parseFloat(te))},onKeyDown:B=>{if(B.key==="Enter"){B.preventDefault();const te=B.target.value;te&&Ce(Q.bagNumber,te===""?void 0:parseFloat(te))}},className:"w-full"})]},Q.bagNumber)})})})]}),s.jsxs(Re,{className:"mb-6",children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Notes for Bag Weights"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Add any notes about the bag weights for this lot"})]}),s.jsx(qe,{children:s.jsx(At,{id:"finalNotes",voiceType:"text",value:c,onChange:Q=>d(Q.target.value),placeholder:"Enter notes about bag weights, quality, or any observations..."})})]}),s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg p-4 z-50",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[s.jsx("div",{children:L.length>0?s.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Bag Distribution:"}),s.jsx("div",{className:"text-xs space-y-1",children:L.map((Q,ie)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Bags ",Q.startBag,"-",Q.endBag,":"]}),s.jsxs("span",{className:"font-medium",children:[Q.buyerName," (",Q.bagCount,")"]})]},ie))})]}):s.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg",children:s.jsx("p",{className:"text-sm text-yellow-800",children:"Configure buyer allocations above to see distribution"})})}),s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-lg font-bold text-green-600",children:[F," / ",T.numberOfBags]}),s.jsx("div",{className:"text-xs text-gray-600",children:"Bags Weighed"}),s.jsxs("div",{className:"text-sm font-medium",children:[J.toFixed(1)," kg"]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(Le,{onClick:X,disabled:V.isPending,variant:"outline",className:"px-6 py-3",children:[s.jsx(Lg,{className:"h-4 w-4 mr-2"}),V.isPending?"Saving...":C?"Save & Sync":"Save Offline"]}),s.jsxs(Le,{onClick:()=>H.mutate(),disabled:H.isPending||F===0||!i||!f,className:`px-8 py-6 text-lg font-semibold ${!i||!f?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,size:"lg",children:[s.jsx(Lg,{className:"h-5 w-5 mr-2"}),H.isPending?"Saving...":i?f?`Save All (${F} bags)`:"Select Buyer First":"Enter Price First"]})]})]})]})})}),s.jsx("div",{className:"h-32"})]})]})}const hs=N.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:rt("w-full caption-bottom text-sm",e),...t})}));hs.displayName="Table";const ms=N.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:rt("[&_tr]:border-b",e),...t}));ms.displayName="TableHeader";const ps=N.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:rt("[&_tr:last-child]:border-0",e),...t}));ps.displayName="TableBody";const FG=N.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:rt("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));FG.displayName="TableFooter";const on=N.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:rt("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));on.displayName="TableRow";const $e=N.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:rt("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));$e.displayName="TableHead";const Be=N.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:rt("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Be.displayName="TableCell";const MG=N.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:rt("mt-4 text-sm text-muted-foreground",e),...t}));MG.displayName="TableCaption";const DI=qU,FI=N.createContext({}),ii=({...e})=>s.jsx(FI.Provider,{value:{name:e.name},children:s.jsx(HU,{...e})}),E0=()=>{const e=N.useContext(FI),t=N.useContext(MI),{getFieldState:n,formState:r}=C0(),i=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},MI=N.createContext({}),$s=N.forwardRef(({className:e,...t},n)=>{const r=N.useId();return s.jsx(MI.Provider,{value:{id:r},children:s.jsx("div",{ref:n,className:rt("space-y-2",e),...t})})});$s.displayName="FormItem";const qs=N.forwardRef(({className:e,...t},n)=>{const{error:r,formItemId:i}=E0();return s.jsx(Ae,{ref:n,className:rt(r&&"text-destructive",e),htmlFor:i,...t})});qs.displayName="FormLabel";const Us=N.forwardRef(({...e},t)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:a}=E0();return s.jsx(qA,{ref:t,id:r,"aria-describedby":n?`${i} ${a}`:`${i}`,"aria-invalid":!!n,...e})});Us.displayName="FormControl";const RG=N.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:r}=E0();return s.jsx("p",{ref:n,id:r,className:rt("text-sm text-muted-foreground",e),...t})});RG.displayName="FormDescription";const Vs=N.forwardRef(({className:e,children:t,...n},r)=>{const{error:i,formMessageId:a}=E0(),o=i?String((i==null?void 0:i.message)??""):t;return o?s.jsx("p",{ref:r,id:a,className:rt("text-sm font-medium text-destructive",e),...n,children:o}):null});Vs.displayName="FormMessage";function OG(){const[e,t]=N.useState(""),[n,r]=N.useState(!1),[i,a]=N.useState(null),[o,l]=N.useState(null),[c,d]=N.useState(!1),[f,h]=N.useState([]),[g,m]=N.useState({open:!1,purchase:null}),[S,y]=N.useState({paymentStatus:"pending",amountPaid:"",paymentDate:""}),{toast:j}=Qr(),{data:v=[],isLoading:x,error:_}=kt({queryKey:["/api/buyers/summary",e],retry:3,retryDelay:1e3}),k=fn({mutationFn:async({lotId:q,data:H})=>an("PATCH",`/api/lots/${q}/payment`,H),onSuccess:()=>{Tn.invalidateQueries({queryKey:["/api/buyers",o==null?void 0:o.id,"purchases"]}),Tn.invalidateQueries({queryKey:["/api/buyers/summary"]}),m({open:!1,purchase:null}),y({paymentStatus:"pending",amountPaid:"",paymentDate:""}),j({title:"Success",description:"Payment status updated successfully"})}}),M=q=>{console.log("formatCurrency input:",{amount:q,type:typeof q});const H=typeof q=="string"?parseFloat(q):q;console.log("formatCurrency parsed:",{num:H,isNaN:isNaN(H)});const X=isNaN(H)?"₹0":`₹${H.toLocaleString("en-IN",{maximumFractionDigits:2})}`;return console.log("formatCurrency result:",X),X},L=q=>{switch(q){case"paid":return"bg-green-100 text-green-800";case"partial":return"bg-yellow-100 text-yellow-800";default:return"bg-red-100 text-red-800"}},O=Vl({resolver:Wl(pH.omit({tenantId:!0})),defaultValues:{name:"",contactPerson:"",mobile:"",address:"",panNumber:"",gstNumber:"",hsnCode:"1001"},mode:"onChange"});N.useEffect(()=>{i&&(console.log("useEffect: Updating form with buyer data:",i),O.reset({name:i.name,contactPerson:i.contactPerson||"",mobile:i.mobile||"",address:i.address||"",panNumber:i.panNumber||"",gstNumber:i.gstNumber||"",hsnCode:i.hsnCode||"1001"}))},[i,O]);const T=fn({mutationFn:async q=>an("POST","/api/buyers",q),onSuccess:()=>{Tn.invalidateQueries({queryKey:["/api/buyers/summary"]}),r(!1),a(null),O.reset(),j({title:"Success",description:"Buyer created successfully"})},onError:q=>{j({title:"Error",description:q.message,variant:"destructive"})}}),E=fn({mutationFn:async q=>an("PUT",`/api/buyers/${i==null?void 0:i.id}`,q),onSuccess:()=>{Tn.invalidateQueries({queryKey:["/api/buyers/summary"]}),r(!1),a(null),O.reset(),j({title:"Success",description:"Buyer updated successfully"})},onError:q=>{j({title:"Error",description:q.message,variant:"destructive"})}}),Z=fn({mutationFn:async q=>an("DELETE",`/api/buyers/${q}`),onSuccess:()=>{Tn.invalidateQueries({queryKey:["/api/buyers/summary"]}),j({title:"Success",description:"Buyer deleted successfully"})},onError:q=>{j({title:"Error",description:q.message,variant:"destructive"})}}),C=q=>{i?E.mutate(q):T.mutate(q)},P=q=>{console.log("Editing buyer:",q),console.log("PAN Number:",q.panNumber),console.log("GST Number:",q.gstNumber),a(q);const H={name:q.name,contactPerson:q.contactPerson||"",mobile:q.mobile||"",address:q.address||"",panNumber:q.panNumber||"",gstNumber:q.gstNumber||"",hsnCode:q.hsnCode||"1001"};console.log("Form data being set:",H),O.reset(H),r(!0)},G=async q=>{l(q),h([]);try{console.log("Fetching purchases for buyer:",q.id);const H=await an("GET",`/api/buyers/${q.id}/purchases`);console.log("Raw response object:",H);const X=await H.json();console.log("Parsed JSON data:",X),console.log("Data type:",typeof X),console.log("Is array:",Array.isArray(X)),console.log("Data length:",Array.isArray(X)?X.length:"N/A"),Array.isArray(X)&&X.length>0?(console.log("First purchase item:",X[0]),console.log("First purchase amountDue type:",typeof X[0].amountDue),console.log("First purchase amountDue value:",X[0].amountDue),console.log("Formatted currency test:",M(X[0].amountDue)),h(X),j({title:"Success",description:`Found ${X.length} purchase(s)`,variant:"default"})):(console.log("No purchases or invalid response format"),h([]),j({title:"Info",description:"No purchases found for this buyer",variant:"default"}))}catch(H){console.error("Error fetching purchases:",H),h([]),j({title:"Error",description:"Failed to fetch purchase history",variant:"destructive"})}d(!0)},I=q=>{m({open:!0,purchase:q});const H=new Date().toISOString().split("T")[0];y({paymentStatus:q.paymentStatus,amountPaid:q.amountPaid,paymentDate:q.paymentDate||H})},V=()=>{g.purchase&&k.mutate({lotId:g.purchase.lotId,data:S})},z=Array.isArray(v)?v.filter(q=>{var H,X,le;return((H=q.name)==null?void 0:H.toLowerCase().includes(e.toLowerCase()))||((X=q.contactPerson)==null?void 0:X.toLowerCase().includes(e.toLowerCase()))||((le=q.mobile)==null?void 0:le.includes(e))}):[];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-8",children:[s.jsx(Bi,{}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsxs(ct,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(zl,{className:"h-5 w-5"}),"Buyers Management & Purchase Tracking"]}),s.jsxs(Le,{onClick:()=>{a(null),O.reset({name:"",contactPerson:"",mobile:"",address:"",panNumber:"",gstNumber:"",hsnCode:"1001"}),r(!0)},className:"w-full sm:w-auto min-h-[44px]",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Add Buyer"]}),s.jsx(ds,{open:n,onOpenChange:r,children:s.jsxs(Vr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Wr,{children:s.jsx(Hr,{children:i?"Edit Buyer":"Add New Buyer"})}),s.jsx("div",{className:"max-h-[70vh] overflow-y-auto pr-2",children:s.jsx(DI,{...O,children:s.jsxs("form",{onSubmit:O.handleSubmit(C),className:"space-y-4",children:[s.jsx(ii,{control:O.control,name:"name",render:({field:q})=>s.jsxs($s,{children:[s.jsx(qs,{children:"Company Name"}),s.jsx(Us,{children:s.jsx(Ze,{...q,placeholder:"Enter company name",type:"text",required:!0})}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:O.control,name:"contactPerson",render:({field:q})=>s.jsxs($s,{children:[s.jsx(qs,{children:"Contact Person"}),s.jsx(Us,{children:s.jsx(Ze,{...q,placeholder:"Enter contact person name",type:"text",required:!0})}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:O.control,name:"mobile",render:({field:q})=>s.jsxs($s,{children:[s.jsx(qs,{children:"Mobile Number"}),s.jsx(Us,{children:s.jsx(Ze,{...q,placeholder:"Enter mobile number",type:"tel",required:!0})}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:O.control,name:"address",render:({field:q})=>s.jsxs($s,{children:[s.jsx(qs,{children:"Address"}),s.jsx(Us,{children:s.jsx(Ze,{...q,placeholder:"Enter address",type:"text"})}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:O.control,name:"panNumber",render:({field:q})=>s.jsxs($s,{children:[s.jsx(qs,{children:"PAN Number"}),s.jsx(Us,{children:s.jsx(Ze,{...q,value:q.value||"",placeholder:"Enter PAN number",type:"text"})}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:O.control,name:"gstNumber",render:({field:q})=>s.jsxs($s,{children:[s.jsx(qs,{children:"GST Number"}),s.jsx(Us,{children:s.jsx(Ze,{...q,value:q.value||"",placeholder:"Enter GST number",type:"text"})}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:O.control,name:"hsnCode",render:({field:q})=>s.jsxs($s,{children:[s.jsx(qs,{children:"HSN Code"}),s.jsx(Us,{children:s.jsx(Ze,{...q,placeholder:"Enter HSN code",type:"text"})}),s.jsx(Vs,{})]})}),s.jsx(Le,{type:"submit",className:"w-full",disabled:T.isPending||E.isPending,children:T.isPending||E.isPending?"Saving...":i?"Update Buyer":"Create Buyer"})]})})})]})})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(zl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Ze,{placeholder:"Search buyers by name, contact person, or mobile...",value:e,onChange:q=>t(q.target.value),className:"pl-10"})]})}),x?s.jsx("div",{className:"text-center py-8",children:"Loading buyers..."}):_?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ei,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),s.jsx("div",{className:"text-red-600 font-medium",children:"Error loading buyer data"}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Please check your connection and try again"})]}):z.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No buyers found"}):s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Company Name"}),s.jsx($e,{children:"Contact Person"}),s.jsx($e,{children:"Mobile"}),s.jsx($e,{children:"Lots Purchased"}),s.jsx($e,{children:"Total Amount"}),s.jsx($e,{children:"Payment Status"}),s.jsx($e,{children:"Actions"})]})}),s.jsx(ps,{children:z.map(q=>s.jsxs(on,{children:[s.jsx(Be,{className:"font-medium",children:q.name}),s.jsx(Be,{children:q.contactPerson}),s.jsx(Be,{children:q.mobile}),s.jsx(Be,{children:s.jsxs("div",{className:"flex gap-1",children:[s.jsxs(Mn,{variant:"outline",children:[q.totalLots," Total"]}),s.jsxs(Mn,{className:"bg-green-100 text-green-800",children:[q.completedLots," Completed"]})]})}),s.jsx(Be,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"text-sm",children:["Total: ",M(q.totalAmountDue)]}),s.jsxs("div",{className:"text-sm text-green-600",children:["Paid: ",M(q.totalAmountPaid)]}),s.jsxs("div",{className:"text-sm font-semibold text-orange-600",children:["Remaining: ",M(q.remainingAmount||"0")]})]})}),s.jsx(Be,{children:s.jsx(Mn,{className:q.pendingPayments>0?"bg-red-100 text-red-800":"bg-green-100 text-green-800",children:q.pendingPayments>0?`${q.pendingPayments} Pending`:"All Paid"})}),s.jsx(Be,{children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(Le,{variant:"outline",size:"sm",onClick:()=>G(q),children:[s.jsx(Jh,{className:"h-4 w-4 mr-1"}),"View Purchases"]}),s.jsx(Le,{variant:"outline",size:"sm",onClick:()=>P(q),children:s.jsx(em,{className:"h-4 w-4"})}),s.jsx(Le,{variant:"outline",size:"sm",onClick:()=>Z.mutate(q.id),disabled:Z.isPending,children:s.jsx(Oc,{className:"h-4 w-4"})})]})})]},q.id))})]})]})]}),s.jsx(ds,{open:c,onOpenChange:d,children:s.jsxs(Vr,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Wr,{children:s.jsxs(Hr,{children:["Purchase History - ",o==null?void 0:o.name]})}),s.jsx("div",{className:"space-y-4",children:f.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No purchases found for this buyer"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"md:hidden space-y-4",children:f.map(q=>s.jsx(Re,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-lg",children:q.lotNumber}),s.jsx("div",{className:"text-sm text-muted-foreground",children:q.farmerName})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-bold text-lg",children:M(q.amountDue)}),s.jsx(Mn,{className:L(q.paymentStatus),children:q.paymentStatus})]})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{children:["Variety: ",q.varietyGrade," - ",q.grade]}),s.jsxs("span",{children:["Bags: ",q.numberOfBags]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs(Mn,{className:q.billGenerated?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:["Bill: ",q.billGenerated?"Generated":"Pending"]}),s.jsxs(Le,{variant:"outline",size:"sm",onClick:()=>I(q),children:[s.jsx(zy,{className:"h-4 w-4 mr-1"}),"Update Payment"]})]})]})},q.lotId))}),s.jsx("div",{className:"hidden md:block overflow-x-auto",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{className:"min-w-[120px]",children:"Lot #"}),s.jsx($e,{className:"min-w-[120px]",children:"Farmer"}),s.jsx($e,{className:"min-w-[140px]",children:"Variety/Grade"}),s.jsx($e,{className:"min-w-[80px]",children:"Bags"}),s.jsx($e,{className:"min-w-[120px]",children:"Amount Due"}),s.jsx($e,{className:"min-w-[120px]",children:"Payment Status"}),s.jsx($e,{className:"min-w-[100px]",children:"Bill"}),s.jsx($e,{className:"min-w-[140px]",children:"Actions"})]})}),s.jsx(ps,{children:f.map(q=>s.jsxs(on,{children:[s.jsx(Be,{className:"font-medium",children:q.lotNumber}),s.jsx(Be,{children:q.farmerName}),s.jsxs(Be,{children:[q.varietyGrade," - ",q.grade]}),s.jsx(Be,{children:q.numberOfBags}),s.jsx(Be,{className:"font-medium",children:M(q.amountDue)}),s.jsx(Be,{children:s.jsx(Mn,{className:L(q.paymentStatus),children:q.paymentStatus})}),s.jsx(Be,{children:s.jsx(Mn,{className:q.billGenerated?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",children:q.billGenerated?"Generated":"Pending"})}),s.jsx(Be,{children:s.jsxs(Le,{variant:"outline",size:"sm",onClick:()=>I(q),children:[s.jsx(zy,{className:"h-4 w-4 mr-1"}),"Update Payment"]})})]},q.lotId))})]})})]})})]})}),s.jsx(ds,{open:g.open,onOpenChange:q=>m({open:q,purchase:null}),children:s.jsxs(Vr,{className:"max-w-md",children:[s.jsx(Wr,{children:s.jsx(Hr,{children:"Update Payment Status"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{children:"Payment Status"}),s.jsxs(rr,{value:S.paymentStatus,onValueChange:q=>{y({...S,paymentStatus:q}),q==="paid"&&g.purchase&&y({...S,paymentStatus:q,amountPaid:g.purchase.amountDue})},children:[s.jsx(Wn,{children:s.jsx(sr,{})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"pending",children:"Pending"}),s.jsx(Tt,{value:"partial",children:"Partial Payment"}),s.jsx(Tt,{value:"paid",children:"Fully Paid"})]})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Amount Paid"}),s.jsx(Ze,{value:S.amountPaid,placeholder:"Enter amount paid",type:"number",onChange:q=>y({...S,amountPaid:q.target.value})})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Payment Date"}),s.jsx(Ze,{type:"date",value:S.paymentDate,onChange:q=>y({...S,paymentDate:q.target.value})})]}),s.jsx(Le,{onClick:V,className:"w-full",disabled:k.isPending,children:k.isPending?"Updating...":"Update Payment"})]})]})})]})]})}function BG(){const[e,t]=N.useState(null),[n,r]=N.useState(new Date().toISOString().slice(0,10)),[i,a]=N.useState(""),[o,l]=N.useState(""),[c,d]=N.useState("generate"),{toast:f}=Qr(),h=tc();N.useEffect(()=>{const C=new Date,P=new Date(C.getFullYear(),C.getMonth(),1),G=new Date(C.getFullYear(),C.getMonth()+1,0);a(P.toISOString().slice(0,10)),l(G.toISOString().slice(0,10))},[]);const{data:g=[],isLoading:m}=kt({queryKey:["/api/buyers"]}),{data:S,isLoading:y}=kt({queryKey:["/api/tax-invoice",e,"check",n],queryFn:async()=>{if(!e)return null;const C=await fetch(`/api/tax-invoice/${e}/check?date=${n}`,{credentials:"include"});if(!C.ok)throw new Error(`${C.status}: ${C.statusText}`);return C.json()},enabled:!!e}),{data:j,isLoading:v}=kt({queryKey:["/api/tax-invoice",e,n],queryFn:async()=>{if(!e||!(S!=null&&S.exists))return null;const C=await fetch(`/api/tax-invoice/${e}?date=${n}`,{credentials:"include"});if(!C.ok)throw new Error(`${C.status}: ${C.statusText}`);return C.json()},enabled:!!e&&(S==null?void 0:S.exists)}),{data:x=[],isLoading:_}=kt({queryKey:["/api/tax-invoices",e,i,o],queryFn:async()=>{if(!e)return[];let C=`/api/tax-invoices/${e}`;i&&o&&(C+=`?startDate=${i}&endDate=${o}`);const P=await fetch(C,{credentials:"include"});if(!P.ok)throw new Error(`${P.status}: ${P.statusText}`);return P.json()},enabled:!!e&&c==="history"}),k=fn({mutationFn:async C=>await an("POST",`/api/tax-invoice/${C}`,{selectedDate:n}),onSuccess:()=>{f({title:"Success",description:"Tax invoice generated and saved successfully!"}),h.invalidateQueries({queryKey:["/api/tax-invoice",e,"check",n]}),h.invalidateQueries({queryKey:["/api/tax-invoice",e,n]}),h.invalidateQueries({queryKey:["/api/tax-invoices",e]})},onError:C=>{f({title:"Error",description:C.message||"Failed to generate tax invoice",variant:"destructive"})}}),M=C=>{if(C==null)return"₹0.00";const P=typeof C=="string"?parseFloat(C):C;return isNaN(P)?"₹0.00":`₹${P.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`},L=C=>new Date(C).toLocaleDateString("en-IN"),O=g.find(C=>C.id===e),T=async C=>{var P,G,I,V;try{const z=await fetch(`/api/tax-invoice-data/${C.id}`,{credentials:"include"});if(!z.ok)throw new Error("Failed to fetch invoice details");const q=await z.json(),{jsPDF:H}=await Mx(async()=>{const{jsPDF:Ce}=await Promise.resolve().then(()=>IG);return{jsPDF:Ce}},void 0),X=new H;X.setFontSize(16),X.text("TAX INVOICE",105,20,{align:"center"}),X.setFontSize(12),X.text(`Invoice Number: ${C.invoiceNumber}`,20,35),X.text(`Date: ${L(C.invoiceDate)}`,150,35),X.text("Seller Details:",20,50),X.text(`${((P=q.seller)==null?void 0:P.companyName)||"N/A"}`,20,60),X.text(`GSTIN: ${((G=q.seller)==null?void 0:G.gstin)||"N/A"}`,20,70),X.text("Buyer Details:",20,85),X.text(`${((I=q.buyer)==null?void 0:I.companyName)||"N/A"}`,20,95),X.text(`GSTIN: ${((V=q.buyer)==null?void 0:V.gstin)||"N/A"}`,20,105);let le=120;X.text("Invoice Summary:",20,le),le+=15,X.text(`Basic Amount: ${M(C.basicAmount)}`,20,le),le+=10,X.text(`Total Bags: ${C.totalBags}`,20,le),le+=10,X.text(`Total Weight: ${C.totalWeight} kg`,20,le),le+=15,X.setFontSize(14),X.text(`Total Amount: ${M(C.totalAmount)}`,20,le),X.save(`tax-invoice-${C.invoiceNumber}.pdf`),f({title:"Success",description:"Invoice PDF downloaded successfully!"})}catch(z){console.error("Error downloading PDF:",z),f({title:"Error",description:"Failed to download PDF",variant:"destructive"})}},E=async C=>{var P,G,I,V,z,q,H,X,le,Ce,F,J,re,Q,ie,B,te,oe,_e,we,Ne,ke,Ue,be,se,ut,Je,Y,de,We,ee;try{const ce=await fetch(`/api/tax-invoice-data/${C.id}`,{credentials:"include"});if(!ce.ok)throw new Error("Failed to fetch invoice details");const he=await ce.json(),De=window.open("","_blank");if(!De)return;const Ie=`
        <!DOCTYPE html>
        <html>
          <head>
            <meta charset="utf-8">
            <title>Tax Invoice - ${C.invoiceNumber}</title>
            <style>
              body {
                font-family: Arial, sans-serif;
                line-height: 1.4;
                color: #000;
                background: white;
                margin: 0;
                padding: 20px;
                font-size: 12px;
              }

              .invoice-container {
                max-width: 210mm;
                margin: 0 auto;
                background: white;
                border: 1px solid #000;
              }

              .invoice-header {
                text-align: center;
                padding: 15px;
                border-bottom: 1px solid #000;
              }

              .invoice-title {
                font-size: 18px;
                font-weight: bold;
                margin-bottom: 5px;
              }

              .invoice-details {
                display: flex;
                justify-content: space-between;
                margin-bottom: 10px;
              }

              .details-section {
                display: flex;
                justify-content: space-between;
                padding: 15px;
                border-bottom: 1px solid #000;
              }

              .seller-details, .buyer-details {
                width: 48%;
              }

              .section-title {
                font-weight: bold;
                text-align: center;
                margin-bottom: 10px;
                text-decoration: underline;
              }

              .company-info {
                margin-bottom: 8px;
              }

              .company-name {
                font-weight: bold;
                font-size: 14px;
              }

              .items-table {
                width: 100%;
                border-collapse: collapse;
                margin: 15px 0;
              }

              .items-table th, .items-table td {
                border: 1px solid #000;
                padding: 8px;
                text-align: center;
                font-size: 11px;
              }

              .items-table th {
                background-color: #f5f5f5;
                font-weight: bold;
              }

              @media print {
                body { margin: 0; }
                .invoice-container { box-shadow: none; }
              }
              }

              .terms-section {
                background: #f8fafc;
                padding: 1.5rem;
                border-radius: 12px;
                margin-top: 2rem;
                border-left: 4px solid #6366f1;
              }

              .terms-title {
                font-weight: 700;
                color: #1e293b;
                margin-bottom: 0.75rem;
                font-size: 1rem;
              }

              .terms-text {
                font-size: 0.9rem;
                color: #475569;
                line-height: 1.6;
                margin-bottom: 0.5rem;
              }

              .signature-section {
                display: flex;
                justify-content: flex-end;
                align-items: flex-end;
                margin-top: 3rem;
                padding-top: 2rem;
                border-top: 2px solid #e2e8f0;
              }

              .signature-box {
                text-align: center;
                min-width: 200px;
              }

              .signature-line {
                border-top: 2px solid #374151;
                margin-bottom: 0.5rem;
                height: 60px;
                display: flex;
                align-items: flex-end;
                justify-content: center;
              }

              .signature-text {
                font-size: 0.9rem;
                color: #475569;
                font-weight: 500;
                text-transform: uppercase;
                letter-spacing: 0.5px;
              }

              @media print {
                .invoice-container {
                  box-shadow: none !important;
                  border-radius: 0 !important;
                  max-width: none !important;
                  margin: 0 !important;
                }
                
                .calc-card, .bank-card, .company-card {
                  box-shadow: none !important;
                  border: 1px solid #e2e8f0 !important;
                }
                
                .modern-table {
                  box-shadow: none !important;
                }
              }
            </style>
          </head>
          <body>
            <div class="invoice-container">
              <div style="text-align: center; margin-bottom: 20px; background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%); color: white; padding: 16px; border-radius: 8px;">
                <h1 style="font-size: 24px; font-weight: bold; margin: 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">TAX INVOICE</h1>
                <div style="margin-top: 8px; font-size: 14px; font-weight: bold; color: #fbbf24;">
                  Invoice No: ${C.invoiceNumber} | Date: ${new Date(C.invoiceDate).toLocaleDateString("en-GB")}
                </div>
              </div>

              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 20px;">
                <div>
                  <div style="font-weight: bold; margin-bottom: 8px; border-bottom: 2px solid #1e3a8a; padding-bottom: 6px; color: #1e3a8a; font-size: 14px;">
                    SELLER DETAILS
                  </div>
                  <div style="line-height: 1.5; font-size: 12px;">
                    <div style="font-weight: bold; font-size: 13px; margin-bottom: 4px;">${((P=he.seller)==null?void 0:P.companyName)||"N/A"}</div>
                    <div>APMC Code: ${((G=he.seller)==null?void 0:G.apmcCode)||"N/A"}</div>
                    <div>${((I=he.seller)==null?void 0:I.address)||"N/A"}</div>
                    <div>Mobile: ${((V=he.seller)==null?void 0:V.mobile)||"N/A"}</div>
                    <div>GSTIN: ${((z=he.seller)==null?void 0:z.gstin)||"N/A"}</div>
                    <div>PAN: ${((q=he.seller)==null?void 0:q.pan)||"N/A"}</div>
                    <div>FSSAI: ${((H=he.seller)==null?void 0:H.fssai)||"N/A"}</div>
                  </div>
                </div>
                
                <div>
                  <div style="font-weight: bold; margin-bottom: 8px; border-bottom: 2px solid #dc2626; padding-bottom: 6px; color: #dc2626; font-size: 14px;">
                    BUYER DETAILS
                  </div>
                  <div style="line-height: 1.5; font-size: 12px;">
                    <div style="font-weight: bold; font-size: 13px; margin-bottom: 4px;">${((X=he.buyer)==null?void 0:X.companyName)||"N/A"}</div>
                    <div>Contact: ${((le=he.buyer)==null?void 0:le.contactPerson)||"N/A"}</div>
                    <div>${((Ce=he.buyer)==null?void 0:Ce.address)||"N/A"}</div>
                    <div>Mobile: ${((F=he.buyer)==null?void 0:F.mobile)||"N/A"}</div>
                    <div>GSTIN: ${((J=he.buyer)==null?void 0:J.gstin)||"N/A"}</div>
                    <div>PAN: ${((re=he.buyer)==null?void 0:re.pan)||"N/A"}</div>
                  </div>
                </div>
              </div>
                
              <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px; border: 1px solid #e5e7eb; border-radius: 6px; overflow: hidden; font-size: 11px;">
                <thead>
                  <tr style="background: #f3f4f6;">
                    <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: left; font-weight: bold; color: #1f2937;">Lot No</th>
                    <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: left; font-weight: bold; color: #1f2937;">Item</th>
                    <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: left; font-weight: bold; color: #1f2937;">HSN</th>
                    <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: right; font-weight: bold; color: #1f2937;">Bags</th>
                    <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: right; font-weight: bold; color: #1f2937;">Weight (Kg)</th>
                    <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: right; font-weight: bold; color: #1f2937;">Weight (Qtl)</th>
                    <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: right; font-weight: bold; color: #1f2937;">Rate/Qtl</th>
                    <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: right; font-weight: bold; color: #1f2937;">Amount</th>
                  </tr>
                </thead>
                <tbody>
                  ${((Q=he.items)==null?void 0:Q.map(Te=>`
                    <tr>
                      <td style="border: 1px solid #e5e7eb; padding: 6px; background: white; color: #374151;">${Te.lotNo||""}</td>
                      <td style="border: 1px solid #e5e7eb; padding: 6px; background: white; color: #374151;">${Te.itemName||"ARABICA-A"}</td>
                      <td style="border: 1px solid #e5e7eb; padding: 6px; background: white; color: #374151;">09042110</td>
                      <td style="border: 1px solid #e5e7eb; padding: 6px; text-align: right; background: white; color: #374151;">${Te.bags||0}</td>
                      <td style="border: 1px solid #e5e7eb; padding: 6px; text-align: right; background: white; color: #374151;">${Te.weightKg||0}</td>
                      <td style="border: 1px solid #e5e7eb; padding: 6px; text-align: right; background: white; color: #374151;">${(Te.weightKg/100).toFixed(2)}</td>
                      <td style="border: 1px solid #e5e7eb; padding: 6px; text-align: right; background: white; color: #374151;">₹${(Te.ratePerQuintal||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      <td style="border: 1px solid #e5e7eb; padding: 6px; text-align: right; background: white; color: #374151; font-weight: bold;">₹${(Te.basicAmount||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                    </tr>
                  `).join(""))||""}
                </tbody>
              </table>

              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
                <div style="background: white; padding: 16px; border: 1px solid #e5e7eb; border-radius: 8px;">
                  <div style="font-weight: bold; margin-bottom: 10px; border-bottom: 2px solid #059669; padding-bottom: 6px; font-size: 14px; color: #1f2937;">
                    BANK DETAILS FOR PAYMENT
                  </div>
                  <div style="line-height: 1.6; font-weight: 500; font-size: 12px; color: #374151;">
                    <div style="margin-bottom: 4px;">Bank: <strong>${((ie=he.bankDetails)==null?void 0:ie.bankName)||"STATE BANK OF INDIA"}</strong></div>
                    <div style="margin-bottom: 4px;">A/C No: <strong>${((B=he.bankDetails)==null?void 0:B.accountNumber)||"N/A"}</strong></div>
                    <div style="margin-bottom: 4px;">IFSC: <strong>${((te=he.bankDetails)==null?void 0:te.ifscCode)||"N/A"}</strong></div>
                    <div style="margin-bottom: 4px;">Holder: <strong>${((oe=he.bankDetails)==null?void 0:oe.accountHolder)||"N/A"}</strong></div>
                    <div style="margin-bottom: 4px;">Branch: <strong>${((_e=he.bankDetails)==null?void 0:_e.branchName)||"N/A"}</strong></div>
                    <div style="margin-bottom: 8px;">Branch Address: <strong>${((we=he.bankDetails)==null?void 0:we.branchAddress)||"N/A"}</strong></div>
                    <div style="margin-top: 10px; padding-top: 8px; border-top: 1px solid #e5e7eb; font-size: 11px;">
                      <div>Terms: Payment due within 30 days</div>
                      <div>Goods once sold will not be taken back</div>
                    </div>
                  </div>
                </div>
                
                <div>
                  <div style="font-weight: bold; margin-bottom: 10px; border-bottom: 2px solid #dc2626; padding-bottom: 6px; font-size: 14px; color: #1f2937;">
                    AMOUNT CALCULATIONS
                  </div>
                  <table style="width: 100%; border-collapse: collapse; background: white; border: 1px solid #e5e7eb; font-size: 12px;">
                    <tbody>
                      <tr style="background: #f9fafb;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">Basic Amount</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((Ne=he.calculations)==null?void 0:Ne.basicAmount)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: white;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">+ Packaging (${C.totalBags} bags × ₹5)</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((ke=he.calculations)==null?void 0:ke.packaging)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: #f9fafb;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">+ Hamali (${C.totalBags} bags × ₹5)</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((Ue=he.calculations)==null?void 0:Ue.hamali)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: white;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">+ Weighing (${C.totalBags} bags)</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((be=he.calculations)==null?void 0:be.weighingCharges)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: #f9fafb;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">+ Commission</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((se=he.calculations)==null?void 0:se.commission)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: white;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">+ Cess @ 0.6% (on basic amount)</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((ut=he.calculations)==null?void 0:ut.cess)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: #f9fafb;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">Taxable Amount</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((Je=he.calculations)==null?void 0:Je.taxableAmount)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: white;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">+ SGST (2.5%)</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((Y=he.calculations)==null?void 0:Y.sgst)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: #f9fafb;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">+ CGST (2.5%)</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((de=he.calculations)==null?void 0:de.cgst)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: white;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">Total GST</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((We=he.calculations)==null?void 0:We.totalGst)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: #f3f4f6; border-top: 2px solid #374151;">
                        <td style="border: 1px solid #374151; padding: 8px; color: #1f2937; font-weight: bold; font-size: 14px;">TOTAL PAYABLE</td>
                        <td style="border: 1px solid #374151; padding: 8px; text-align: right; color: #1f2937; font-weight: bold; font-size: 14px;">₹${(((ee=he.calculations)==null?void 0:ee.totalAmount)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              
              <div style="display: flex; justify-content: flex-end; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;">
                <div style="text-align: center; min-width: 200px;">
                  <div style="border-top: 2px solid #374151; margin-bottom: 8px; height: 50px; display: flex; align-items: flex-end; justify-content: center;">
                  </div>
                  <div style="font-size: 12px; color: #374151; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px;">
                    Authorized Signature
                  </div>
                </div>
              </div>
            </div>
          </body>
        </html>
      `;De.document.write(Ie),De.document.close()}catch(ce){console.error("Error printing invoice:",ce),f({title:"Error",description:"Failed to print invoice",variant:"destructive"})}},Z=()=>{var G,I,V,z,q;if(!j)return;const C=window.open("","_blank");if(!C)return;const P=`
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="utf-8">
          <title>Tax Invoice - ${j.invoiceNumber}</title>
          <style>
            body {
              font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
              line-height: 1.5;
              color: #1a1a1a;
              background: white;
              margin: 0;
              padding: 0;
            }

            .invoice-container {
              max-width: 210mm;
              margin: 0 auto;
              background: white;
              position: relative;
            }

            .invoice-header {
              background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
              color: white;
              padding: 2rem;
              text-align: center;
              position: relative;
              overflow: hidden;
            }

            .invoice-title {
              font-size: 2.5rem;
              font-weight: 800;
              margin-bottom: 0.5rem;
              letter-spacing: 2px;
              text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }

            .invoice-subtitle {
              font-size: 1.1rem;
              font-weight: 500;
              opacity: 0.9;
            }

            .invoice-content {
              padding: 2rem;
            }

            .company-section {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 2rem;
              margin-bottom: 2rem;
              padding: 1.5rem;
              background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
              border-radius: 12px;
              border: 1px solid #e2e8f0;
            }

            .company-card {
              background: white;
              padding: 1.5rem;
              border-radius: 8px;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
              border-left: 4px solid #2563eb;
            }

            .company-card.buyer {
              border-left-color: #16a34a;
            }

            .company-title {
              font-size: 1.1rem;
              font-weight: 700;
              color: #1e293b;
              margin-bottom: 1rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              display: flex;
              align-items: center;
              gap: 0.5rem;
            }

            .company-title::before {
              content: '';
              width: 8px;
              height: 8px;
              background: currentColor;
              border-radius: 50%;
            }

            .company-field {
              display: flex;
              margin-bottom: 0.75rem;
              font-size: 0.95rem;
              align-items: flex-start;
            }

            .field-label {
              font-weight: 600;
              color: #475569;
              min-width: 80px;
              margin-right: 1rem;
            }

            .field-value {
              color: #1e293b;
              flex: 1;
              word-break: break-word;
            }

            .items-section {
              margin: 2rem 0;
            }

            .section-title {
              font-size: 1.3rem;
              font-weight: 700;
              color: #1e293b;
              margin-bottom: 1rem;
              text-transform: uppercase;
              letter-spacing: 1px;
              position: relative;
              padding-bottom: 0.5rem;
            }

            .section-title::after {
              content: '';
              position: absolute;
              bottom: 0;
              left: 0;
              width: 60px;
              height: 3px;
              background: linear-gradient(90deg, #2563eb, #16a34a);
              border-radius: 2px;
            }

            .modern-table {
              width: 100%;
              border-collapse: separate;
              border-spacing: 0;
              background: white;
              border-radius: 12px;
              overflow: hidden;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
              border: 1px solid #e2e8f0;
            }

            .modern-table th {
              background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
              color: white;
              padding: 1rem 0.75rem;
              font-weight: 600;
              font-size: 0.9rem;
              text-align: center;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            }

            .modern-table td {
              padding: 1rem 0.75rem;
              text-align: center;
              font-size: 0.9rem;
              color: #374151;
              border-bottom: 1px solid #f1f5f9;
            }

            .modern-table tbody tr:last-child td {
              border-bottom: none;
            }

            .calculations-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 2rem;
              margin-top: 2rem;
            }

            .calc-card, .bank-card {
              background: white;
              padding: 1.5rem;
              border-radius: 12px;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
              border: 1px solid #e2e8f0;
            }

            .calc-card {
              border-left: 4px solid #dc2626;
            }

            .bank-card {
              border-left: 4px solid #059669;
            }

            .card-title {
              font-size: 1.1rem;
              font-weight: 700;
              color: #1e293b;
              margin-bottom: 1rem;
              text-transform: uppercase;
              letter-spacing: 1px;
            }

            .calc-row, .bank-row {
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 0.5rem 0;
              border-bottom: 1px solid #f1f5f9;
              font-size: 0.9rem;
            }

            .calc-row:last-child, .bank-row:last-child {
              border-bottom: none;
            }

            .calc-label {
              color: #475569;
              font-weight: 500;
            }

            .calc-value {
              color: #1e293b;
              font-weight: 600;
            }

            .total-row {
              background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
              margin: 0.5rem -1.5rem -1.5rem;
              padding: 1rem 1.5rem;
              border-top: 2px solid #dc2626;
              font-size: 1.1rem;
              font-weight: 700;
            }

            .terms-section {
              background: #f8fafc;
              padding: 1.5rem;
              border-radius: 12px;
              margin-top: 2rem;
              border-left: 4px solid #6366f1;
            }

            .terms-title {
              font-weight: 700;
              color: #1e293b;
              margin-bottom: 0.75rem;
              font-size: 1rem;
            }

            .terms-text {
              font-size: 0.9rem;
              color: #475569;
              line-height: 1.6;
              margin-bottom: 0.5rem;
            }

            .signature-section {
              display: flex;
              justify-content: flex-end;
              align-items: flex-end;
              margin-top: 3rem;
              padding-top: 2rem;
              border-top: 2px solid #e2e8f0;
            }

            .signature-box {
              text-align: center;
              min-width: 200px;
            }

            .signature-line {
              border-top: 2px solid #374151;
              margin-bottom: 0.5rem;
              height: 60px;
              display: flex;
              align-items: flex-end;
              justify-content: center;
            }

            .signature-text {
              font-size: 0.9rem;
              color: #475569;
              font-weight: 500;
              text-transform: uppercase;
              letter-spacing: 0.5px;
            }

            @media print {
              @page {
                size: A4;
                margin: 8mm;
              }
              
              body {
                margin: 0 !important;
                padding: 0 !important;
                font-size: 8px !important;
                transform: scale(0.85) !important;
                transform-origin: top left !important;
                width: 118% !important;
              }
              
              .modern-tax-invoice {
                page-break-inside: avoid !important;
                max-height: 100vh !important;
                overflow: hidden !important;
              }
              
              .invoice-container {
                box-shadow: none !important;
                border-radius: 0 !important;
                max-width: none !important;
                margin: 0 !important;
              }
              
              .calc-card, .bank-card, .company-card {
                box-shadow: none !important;
                border: 1px solid #e2e8f0 !important;
              }
              
              .modern-table {
                box-shadow: none !important;
              }
            }
          </style>
        </head>
        <body>
          <div class="invoice-container">
            <div class="invoice-header">
              <div class="invoice-title">TAX INVOICE</div>
              <div class="invoice-subtitle">Invoice No: ${j.invoiceNumber} | Date: ${new Date(j.invoiceDate).toLocaleDateString("en-GB")} | HSN: 09042110</div>
            </div>

            <div class="invoice-content">
              <div class="company-section">
                <div class="company-card">
                  <div class="company-title">Seller Details</div>
                  <div class="company-field">
                    <span class="field-label">Company:</span>
                    <span class="field-value">${j.tenantName||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">APMC:</span>
                    <span class="field-value">${j.tenantCode||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">Address:</span>
                    <span class="field-value">${j.tenantAddress||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">Mobile:</span>
                    <span class="field-value">${j.tenantMobile||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">GSTIN:</span>
                    <span class="field-value">${j.tenantGstin||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">PAN:</span>
                    <span class="field-value">${j.tenantPan||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">FSSAI:</span>
                    <span class="field-value">${j.tenantFssai||"N/A"}</span>
                  </div>
                </div>
                
                <div class="company-card buyer">
                  <div class="company-title">Buyer Details</div>
                  <div class="company-field">
                    <span class="field-label">Company:</span>
                    <span class="field-value">${j.buyerName||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">Contact:</span>
                    <span class="field-value">${j.buyerContactPerson||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">Address:</span>
                    <span class="field-value">${j.buyerAddress||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">Mobile:</span>
                    <span class="field-value">${j.buyerMobile||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">GSTIN:</span>
                    <span class="field-value">${j.buyerGstin||"N/A"}</span>
                  </div>
                  <div class="company-field">
                    <span class="field-label">PAN:</span>
                    <span class="field-value">${j.buyerPan||"N/A"}</span>
                  </div>
                </div>
              </div>
              
              <div class="items-section">
                <div class="section-title">Item Details</div>
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px; border: 1px solid #e5e7eb; font-size: 11px;">
                  <thead>
                    <tr style="background: #f3f4f6;">
                      <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: left; font-weight: bold; color: #1f2937;">Lot No</th>
                      <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: left; font-weight: bold; color: #1f2937;">Item Name</th>
                      <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: left; font-weight: bold; color: #1f2937;">HSN Code</th>
                      <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: right; font-weight: bold; color: #1f2937;">Bags</th>
                      <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: right; font-weight: bold; color: #1f2937;">Weight (KG)</th>
                      <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: right; font-weight: bold; color: #1f2937;">Rate/Quintal</th>
                      <th style="border: 1px solid #e5e7eb; padding: 8px; text-align: right; font-weight: bold; color: #1f2937;">Amount (₹)</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${((G=j.items)==null?void 0:G.map(H=>`
                      <tr>
                        <td style="border: 1px solid #e5e7eb; padding: 6px; background: white; color: #374151;">${H.lotNo||""}</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px; background: white; color: #374151;">${H.itemName||"AGRICULTURAL PRODUCE"}</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px; background: white; color: #374151;">09042110</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px; text-align: right; background: white; color: #374151;">${H.bags||0}</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px; text-align: right; background: white; color: #374151;">${H.weightKg||0}</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px; text-align: right; background: white; color: #374151;">₹${(H.ratePerQuintal||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px; text-align: right; background: white; color: #374151; font-weight: bold;">₹${(H.basicAmount||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                    `).join(""))||""}
                  </tbody>
                </table>
              </div>

              <div class="calculations-grid">
                <div class="calc-card">
                  <table style="width: 100%; border-collapse: collapse; border: 1px solid #e5e7eb; background: white; font-size: 12px;">
                    <tbody>
                      <tr style="background: #f9fafb;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">Basic Amount:</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((I=j.calculations)==null?void 0:I.basicAmount)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: white;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">Packaging:</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((V=j.calculations)==null?void 0:V.packaging)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: #f9fafb;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">Hamali:</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((z=j.calculations)==null?void 0:z.hamali)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: white;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">Weighing:</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(((q=j.calculations)==null?void 0:q.weighingCharges)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: #f9fafb;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">Commission:</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(j.commission||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: white;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">CESS @ 0.6%:</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(j.cess||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: #f9fafb;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">SGST @ 2.5%:</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(j.sgst||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: white;">
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; color: #374151; font-weight: 500;">CGST @ 2.5%:</td>
                        <td style="border: 1px solid #e5e7eb; padding: 6px 8px; text-align: right; color: #374151; font-weight: bold;">₹${(j.cgst||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                      <tr style="background: #f3f4f6; border-top: 2px solid #374151;">
                        <td style="border: 1px solid #374151; padding: 8px; color: #1f2937; font-weight: bold; font-size: 14px;">Total Amount:</td>
                        <td style="border: 1px solid #374151; padding: 8px; text-align: right; color: #1f2937; font-weight: bold; font-size: 14px;">₹${(j.totalAmount||0).toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                
                <div style="background: white; padding: 16px; border: 1px solid #e5e7eb; border-radius: 8px;">
                  <div style="font-weight: bold; margin-bottom: 10px; border-bottom: 2px solid #374151; padding-bottom: 6px; font-size: 14px; color: #1f2937;">
                    BANK DETAILS
                  </div>
                  <div style="line-height: 1.6; font-weight: 500; font-size: 12px; color: #374151;">
                    <div style="margin-bottom: 4px;">Bank: <strong>${j.bankName||"N/A"}</strong></div>
                    <div style="margin-bottom: 4px;">Account No: <strong>${j.accountNumber||"N/A"}</strong></div>
                    <div style="margin-bottom: 4px;">IFSC: <strong>${j.ifscCode||"N/A"}</strong></div>
                    <div>Account Holder: <strong>${j.accountHolder||"N/A"}</strong></div>
                  </div>
                  
                  <div style="margin-top: 20px;">
                    <div style="font-weight: bold; margin-bottom: 10px; color: #1f2937;">AUTHORIZED SIGNATURE</div>
                    <div style="height: 40px; border-bottom: 2px solid #374151; margin-bottom: 10px;"></div>
                  </div>
                </div>
              </div>
              
              <div class="signature-section">
                <div class="signature-box">
                  <div class="signature-line"></div>
                  <div class="signature-text">Authorized Signature</div>
                </div>
              </div>
            </div>
          </div>
          
          <script>
            window.onload = function() {
              window.print();
              setTimeout(function() { window.close(); }, 100);
            }
          <\/script>
        </body>
      </html>
    `;C.document.write(P),C.document.close()};return m?s.jsx("div",{className:"container mx-auto p-6",children:s.jsx("div",{className:"text-center",children:"Loading buyers..."})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6",children:[s.jsx(Bi,{}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-3 sm:p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4 sm:mb-6",children:[s.jsx(ux,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"}),s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Tax Invoice Management"})]}),s.jsxs(Bo,{value:c,onValueChange:d,className:"w-full",children:[s.jsxs(eo,{className:"grid w-full grid-cols-2 h-auto",children:[s.jsxs(wn,{value:"generate",className:"flex items-center justify-center gap-1 sm:gap-2 py-3 text-xs sm:text-sm",children:[s.jsx(qr,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Generate"})," Invoice"]}),s.jsxs(wn,{value:"history",className:"flex items-center justify-center gap-1 sm:gap-2 py-3 text-xs sm:text-sm",children:[s.jsx(yk,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Invoice"})," History"]})]}),s.jsx(Nn,{value:"generate",className:"space-y-6 mt-6",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Generate New Tax Invoice"}),s.jsx(Cn,{children:"Select a buyer and date to generate tax invoice for completed lots on that specific date"})]}),s.jsxs(qe,{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"buyer",className:"text-sm sm:text-base",children:"Select Buyer"}),s.jsxs(rr,{value:(e==null?void 0:e.toString())||"",onValueChange:C=>t(parseInt(C)),children:[s.jsx(Wn,{className:"min-h-[44px]",children:s.jsx(sr,{placeholder:"Choose a buyer..."})}),s.jsx(Hn,{children:g.map(C=>s.jsxs(Tt,{value:C.id.toString(),children:[C.name," - ",C.contactPerson]},C.id))})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"invoice-date",className:"text-sm sm:text-base",children:"Invoice Date"}),s.jsx(Ze,{id:"invoice-date",type:"date",value:n,onChange:C=>r(C.target.value),className:"min-h-[44px]"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Generate invoice for completed lots on this date"})]})]}),e&&s.jsx("div",{className:"space-y-4",children:y?s.jsxs(os,{children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsx(ls,{children:"Checking invoice status..."})]}):S!=null&&S.exists?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(os,{children:[s.jsx(Rc,{className:"h-4 w-4"}),s.jsxs(ls,{children:["Tax invoice already exists for ",O==null?void 0:O.name,"."]})]}),j&&s.jsxs(Re,{children:[s.jsx(it,{children:s.jsx(ct,{className:"text-lg",children:"Latest Invoice"})}),s.jsxs(qe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Invoice Number:"}),s.jsx("div",{children:j.invoiceNumber})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date:"}),s.jsx("div",{children:j.invoiceDate})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total Amount:"}),s.jsx("div",{className:"font-bold text-green-600",children:M(j.calculations.totalAmount)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Items:"}),s.jsxs("div",{children:[j.items.length," lots"]})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(Le,{onClick:Z,variant:"outline",size:"sm",children:[s.jsx(Hu,{className:"h-4 w-4 mr-2"}),"Print"]})})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs(os,{children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsxs(ls,{children:["No tax invoice found for ",O==null?void 0:O.name,". You can generate a new one."]})]}),s.jsx(Le,{onClick:()=>k.mutate(e),disabled:k.isPending,className:"w-full sm:w-auto",children:k.isPending?"Generating...":"Generate Tax Invoice"})]})})]})]})}),s.jsx(Nn,{value:"history",className:"space-y-6 mt-6",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Invoice History"}),s.jsx(Cn,{children:"View all historical tax invoices with date range filtering"})]}),s.jsxs(qe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"buyer-history",children:"Select Buyer"}),s.jsxs(rr,{value:(e==null?void 0:e.toString())||"",onValueChange:C=>t(parseInt(C)),children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"Choose a buyer..."})}),s.jsx(Hn,{children:g.map(C=>s.jsx(Tt,{value:C.id.toString(),children:C.name},C.id))})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"start-date",children:"Start Date"}),s.jsx(Ze,{id:"start-date",type:"date",value:i,onChange:C=>a(C.target.value)})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"end-date",children:"End Date"}),s.jsx(Ze,{id:"end-date",type:"date",value:o,onChange:C=>l(C.target.value)})]})]}),e&&s.jsx("div",{className:"space-y-4",children:_?s.jsxs(os,{children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsx(ls,{children:"Loading invoice history..."})]}):x.length>0?s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Invoice Number"}),s.jsx($e,{children:"Date"}),s.jsx($e,{children:"Basic Amount"}),s.jsx($e,{children:"Total Amount"}),s.jsx($e,{children:"Bags"}),s.jsx($e,{children:"Weight (Kg)"}),s.jsx($e,{children:"Status"}),s.jsx($e,{children:"Actions"})]})}),s.jsx(ps,{children:x.map(C=>s.jsxs(on,{children:[s.jsx(Be,{className:"font-medium",children:C.invoiceNumber}),s.jsx(Be,{children:L(C.invoiceDate)}),s.jsx(Be,{children:M(C.basicAmount)}),s.jsx(Be,{className:"font-semibold",children:M(C.totalAmount)}),s.jsx(Be,{children:C.totalBags}),s.jsx(Be,{children:parseFloat(C.totalWeight).toFixed(2)}),s.jsx(Be,{children:s.jsx(Mn,{variant:C.status==="generated"?"default":"secondary",children:C.status})}),s.jsx(Be,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ds,{children:[s.jsx(Xa,{asChild:!0,children:s.jsxs(Le,{variant:"outline",size:"sm",children:[s.jsx(Jh,{className:"h-4 w-4 mr-1"}),"View"]})}),s.jsxs(Vr,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[s.jsx(Wr,{children:s.jsxs(Hr,{children:["Tax Invoice - ",C.invoiceNumber]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Invoice Number:"}),s.jsx("div",{children:C.invoiceNumber})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date:"}),s.jsx("div",{children:L(C.invoiceDate)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Basic Amount:"}),s.jsx("div",{className:"font-bold text-green-600",children:M(C.basicAmount)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total Amount:"}),s.jsx("div",{className:"font-bold text-blue-600",children:M(C.totalAmount)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total Bags:"}),s.jsx("div",{children:C.totalBags})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total Weight:"}),s.jsxs("div",{children:[parseFloat(C.totalWeight).toFixed(2)," kg"]})]})]}),s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsxs(Le,{onClick:()=>T(C),variant:"outline",size:"sm",children:[s.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),s.jsxs(Le,{onClick:()=>E(C),variant:"outline",size:"sm",children:[s.jsx(Hu,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})]})]}),s.jsxs(Le,{variant:"ghost",size:"sm",onClick:()=>T(C),children:[s.jsx(Ka,{className:"h-4 w-4 mr-1"}),"Download"]})]})})]},C.id))})]})}):s.jsxs(os,{children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsxs(ls,{children:["No invoices found for ",O==null?void 0:O.name," in the selected date range."]})]})})]})]})})]})]})]})]})}const Ji=N.forwardRef(({onResult:e,placeholder:t="Voice input",type:n="text",disabled:r=!1,className:i,value:a="",onChange:o,onBlur:l,name:c},d)=>{const{language:f}=Mm(),[h,g]=N.useState(!1),[m,S]=N.useState(null),{isSupported:y,isListening:j,startListening:v,stopListening:x,transcript:_,confidence:k,error:M}=uI({language:f==="hi"?"hi-IN":f==="kn"?"kn-IN":"en-IN",continuous:!1,interimResults:!1});N.useEffect(()=>{g(j)},[j]),N.useEffect(()=>{if(_&&k>.7){let O=_.trim();if(n==="number"||n==="currency"||n==="tel"){O=O.toLowerCase().replace(/point|dot|दशमलव|ಬಿಂದು/g,".").replace(/thirty[\s-]?eight/g,"38").replace(/thirty[\s-]?nine/g,"39").replace(/thirty[\s-]?seven/g,"37").replace(/thirty[\s-]?six/g,"36").replace(/thirty[\s-]?five/g,"35").replace(/thirty[\s-]?four/g,"34").replace(/thirty[\s-]?three/g,"33").replace(/thirty[\s-]?two/g,"32").replace(/thirty[\s-]?one/g,"31").replace(/thirty/g,"30").replace(/twenty[\s-]?nine/g,"29").replace(/twenty[\s-]?eight/g,"28").replace(/twenty[\s-]?seven/g,"27").replace(/twenty[\s-]?six/g,"26").replace(/twenty[\s-]?five/g,"25").replace(/twenty[\s-]?four/g,"24").replace(/twenty[\s-]?three/g,"23").replace(/twenty[\s-]?two/g,"22").replace(/twenty[\s-]?one/g,"21").replace(/twenty/g,"20").replace(/nineteen/g,"19").replace(/eighteen/g,"18").replace(/seventeen/g,"17").replace(/sixteen/g,"16").replace(/fifteen/g,"15").replace(/fourteen/g,"14").replace(/thirteen/g,"13").replace(/twelve/g,"12").replace(/eleven/g,"11").replace(/ten/g,"10").replace(/nine/g,"9").replace(/eight/g,"8").replace(/seven/g,"7").replace(/six/g,"6").replace(/five/g,"5").replace(/four/g,"4").replace(/three/g,"3").replace(/two/g,"2").replace(/one/g,"1").replace(/zero/g,"0").replace(/ಮೂವತ್ತೆಂಟು|೩೮/g,"38").replace(/ಮೂವತ್ತೊಂಬತ್ತು|೩೯/g,"39").replace(/ಮೂವತ್ತೇಳು|೩೭/g,"37").replace(/ಮೂವತ್ತಾರು|೩೬/g,"36").replace(/ಮೂವತ್ತೈದು|೩೫/g,"35").replace(/ಮೂವತ್ತನಾಲ್ಕು|೩೪/g,"34").replace(/ಮೂವತ್ತಮೂರು|೩೩/g,"33").replace(/ಮೂವತ್ತೆರಡು|೩೨/g,"32").replace(/ಮೂವತ್ತೊಂದು|೩೧/g,"31").replace(/ಮೂವತ್ತು|೩೦/g,"30").replace(/ಇಪ್ಪತ್ತೊಂಬತ್ತು|೨೯/g,"29").replace(/ಇಪ್ಪತ್ತೆಂಟು|೨೮/g,"28").replace(/ಇಪ್ಪತ್ತೇಳು|೨೭/g,"27").replace(/ಇಪ್ಪತ್ತಾರು|೨೬/g,"26").replace(/ಇಪ್ಪತ್ತೈದು|೨೫/g,"25").replace(/ಇಪ್ಪತ್ತನಾಲ್ಕು|೨೪/g,"24").replace(/ಇಪ್ಪತ್ತಮೂರು|೨೩/g,"23").replace(/ಇಪ್ಪತ್ತೆರಡು|೨೨/g,"22").replace(/ಇಪ್ಪತ್ತೊಂದು|೨೧/g,"21").replace(/ಇಪ್ಪತ್ತು|೨೦/g,"20").replace(/ಹತ್ತೊಂಬತ್ತು|೧೯/g,"19").replace(/ಹದಿನೆಂಟು|೧೮/g,"18").replace(/ಹದಿನೇಳು|೧೭/g,"17").replace(/ಹದಿನಾರು|೧೬/g,"16").replace(/ಹದಿನೈದು|೧೫/g,"15").replace(/ಹದಿನಾಲ್ಕು|೧೪/g,"14").replace(/ಹದಿಮೂರು|೧೩/g,"13").replace(/ಹನ್ನೆರಡು|೧೨/g,"12").replace(/ಹದಿನೊಂದು|೧೧/g,"11").replace(/ಹತ್ತು|೧೦/g,"10").replace(/ಒಂಬತ್ತು|೯/g,"9").replace(/ಎಂಟು|೮/g,"8").replace(/ಏಳು|೭/g,"7").replace(/ಆರು|೬/g,"6").replace(/ಐದು|೫/g,"5").replace(/ನಾಲ್ಕು|೪/g,"4").replace(/ಮೂರು|೩/g,"3").replace(/ಎರಡು|೨/g,"2").replace(/ಒಂದು|೧/g,"1").replace(/ಸೊನ್ನೆ|೦/g,"0").replace(/अड़तीस|३८/g,"38").replace(/उनतालीस|३९/g,"39").replace(/सैंतीस|३७/g,"37").replace(/छत्तीस|३६/g,"36").replace(/पैंतीस|३५/g,"35").replace(/चौंतीस|३४/g,"34").replace(/तैंतीस|३३/g,"33").replace(/बत्तीस|३२/g,"32").replace(/इकतीस|३१/g,"31").replace(/तीस|३०/g,"30").replace(/उनतीस|२९/g,"29").replace(/अट्ठाईस|२८/g,"28").replace(/सत्ताईस|२७/g,"27").replace(/छब्बीस|२६/g,"26").replace(/पच्चीस|२५/g,"25").replace(/चौबीस|२४/g,"24").replace(/तेईस|२३/g,"23").replace(/बाईस|२२/g,"22").replace(/इक्कीस|२१/g,"21").replace(/बीस|२०/g,"20").replace(/उन्नीस|१९/g,"19").replace(/अठारह|१८/g,"18").replace(/सत्रह|१७/g,"17").replace(/सोलह|१६/g,"16").replace(/पंद्रह|१५/g,"15").replace(/चौदह|१४/g,"14").replace(/तेरह|१३/g,"13").replace(/बारह|१२/g,"12").replace(/ग्यारह|११/g,"11").replace(/दस|१०/g,"10").replace(/नौ|९/g,"9").replace(/आठ|८/g,"8").replace(/सात|७/g,"7").replace(/छह|६/g,"6").replace(/पांच|५/g,"5").replace(/चार|४/g,"4").replace(/तीन|३/g,"3").replace(/दो|२/g,"2").replace(/एक|१/g,"1").replace(/शून्य|०/g,"0");const T=O.match(/(\d+\.?\d*)/);T&&(O=T[1])}e(O),o&&o({target:{value:O}}),S(null)}else _&&k<=.7&&S("Low confidence. Please try again.")},[_,k,e,o,n]),N.useEffect(()=>{M&&(S(M.message),g(!1))},[M]);const L=()=>{if(!y){S("Voice recognition not supported in this browser");return}h?(x(),g(!1)):(S(null),v(),g(!0))};return y?s.jsxs("div",{className:"relative flex items-center gap-2",children:[s.jsx(Ze,{ref:d,type:n,placeholder:t,value:a||"",onChange:o,onBlur:l,name:c,disabled:r,className:rt("flex-1",i)}),s.jsx(Le,{type:"button",variant:"ghost",size:"sm",disabled:r,onClick:L,className:rt("p-2 h-10 w-10 shrink-0",h&&"mic-active",m&&"text-destructive"),title:t,children:h?s.jsx(wk,{className:"h-4 w-4"}):s.jsx(Nk,{className:"h-4 w-4"})}),m&&s.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-destructive text-destructive-foreground text-xs rounded shadow-lg whitespace-nowrap z-10",children:m}),h&&s.jsx("div",{className:"absolute top-full left-0 mt-1 p-2 bg-primary text-primary-foreground text-xs rounded shadow-lg whitespace-nowrap z-10",children:"Listening... Speak now"})]}):null});function zG(){var X,le,Ce,F,J,re,Q,ie;const{user:e}=Oo(),{toast:t}=Qr(),n=tc(),[r,i]=N.useState(""),[a,o]=N.useState("");N.useState("");const[l,c]=N.useState(""),[d,f]=N.useState(""),[h,g]=N.useState("generate"),[m,S]=N.useState({hamali:0,vehicleRent:0,emptyBagCharges:0,advance:0,other:0,rok:0}),[y,j]=N.useState(!1),[v,x]=N.useState({hamali:0,vehicleRent:0,emptyBagCharges:0,advance:0,other:0,rok:0});N.useEffect(()=>{const te=new Date().toISOString().slice(0,10);c(te),f(te)},[]);const _=()=>{const B=new Date,te=B.toISOString().slice(0,10).replace(/-/g,""),oe=B.getTime().toString().slice(-6),_e=Math.floor(Math.random()*100).toString().padStart(2,"0");return`P${te}${oe}${_e}`},{data:k=[],isLoading:M}=kt({queryKey:["/api/farmers"],enabled:!!(e!=null&&e.tenantId)}),{data:L}=kt({queryKey:["/api/settings"],enabled:!!(e!=null&&e.tenantId)}),{data:O=[],isLoading:T}=kt({queryKey:["/api/farmer-bills",r,l,d],queryFn:async()=>{if(!r)return[];let B=`/api/farmer-bills/${r}`;l&&d&&(B+=`?startDate=${l}&endDate=${d}`);const te=await fetch(B,{credentials:"include"});if(!te.ok)throw new Error(`${te.status}: ${te.statusText}`);return te.json()},enabled:!!r&&h==="history"}),{data:E,isLoading:Z}=kt({queryKey:["/api/farmer-bill",r,"check",l],queryFn:async()=>{if(!r)return null;const B=l||new Date().toISOString().split("T")[0],te=await fetch(`/api/farmer-bill/${r}/check?date=${B}`,{credentials:"include"});if(!te.ok)throw new Error(`${te.status}: ${te.statusText}`);return te.json()},enabled:!!r&&h==="generate"}),C=fn({mutationFn:async B=>an("POST",`/api/farmer-bill/${B.farmerId}`,{pattiNumber:B.pattiNumber,billData:B.billData,lotIds:B.lotIds,billDate:B.billDate}),onSuccess:()=>{t({title:"Success",description:"Farmer bill generated and saved successfully!"}),n.invalidateQueries({queryKey:["/api/farmer-bill"]}),n.invalidateQueries({queryKey:["/api/farmer-bills"]})},onError:B=>{t({title:"Error",description:B.message||"Failed to generate farmer bill",variant:"destructive"})}}),{data:P=[],isLoading:G}=kt({queryKey:["/api/farmer",r,"completed-lots",l],queryFn:async()=>{if(!r)return[];const B=l||new Date().toISOString().split("T")[0],te=await fetch(`/api/farmer/${r}/completed-lots?date=${B}`,{credentials:"include"});if(!te.ok)throw new Error(`${te.status}: ${te.statusText}`);return te.json()},enabled:!!r&&h==="generate"&&!(E!=null&&E.exists)});N.useEffect(()=>{var B,te;if(L!=null&&L.gstSettings&&P.length>0){const oe=P.reduce((be,se)=>be+(se.actualBagCount||se.numberOfBags||0),0),_e=P.reduce((be,se)=>{const ut=se.totalWeight||0,Je=parseFloat(se.lotPrice||0),Y=ut/100;return be+Y*Je},0),Ne=(((B=L==null?void 0:L.gstSettings)==null?void 0:B.unloadHamali)||0)*oe,ke=((te=L==null?void 0:L.gstSettings)==null?void 0:te.rokPercentage)||3,Ue=_e*ke/100;S(be=>({...be,hamali:Ne,rok:Ue}))}},[L,P]);const I=B=>`₹${(typeof B=="string"?parseFloat(B):B).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})}`,V=B=>new Date(B).toLocaleDateString("en-IN"),z=k.find(B=>B.id===parseInt(r)),q=async B=>{try{const te=await fetch(`/api/farmer-bill/${B.farmerId}`,{credentials:"include"});if(!te.ok)throw new Error("Failed to fetch bill details");const oe=await te.json(),_e=`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="utf-8">
          <title>Farmer Bill - ${oe.farmerName}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; font-size: 14px; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }
            .header h1 { margin: 0; font-size: 20px; font-weight: bold; }
            .section { margin: 15px 0; }
            .farmer-info { margin: 15px 0; padding-left: 20px; }
            .lot-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
            .lot-table th, .lot-table td { border: 1px solid #000; padding: 8px; text-align: left; }
            .lot-table th { background-color: #f0f0f0; font-weight: bold; }
            .summary { margin: 20px 0; }
            .total-row { font-weight: bold; background-color: #f9f9f9; }
            .signature { margin-top: 40px; display: flex; justify-content: space-between; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${oe.tenantName||"AGRICULTURAL TRADING COMPANY"}</h1>
            <p><strong>FARMER PAYMENT BILL / ರೈತ ಪಾವತಿ ಬಿಲ್</strong></p>
            <p>Date: ${V(B.createdAt)} | Patti No: ${B.pattiNumber}</p>
          </div>
          
          <div class="farmer-info">
            <h3>Farmer Details / ರೈತ ವಿವರಗಳು</h3>
<p><strong>Name / ಹೆಸರು:</strong> ${oe.farmerName||"N/A"} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Mobile / ಮೊಬೈಲ್:</strong> ${oe.farmerMobile||"N/A"}</p>
<p><strong>Place / ಸ್ಥಳ:</strong> ${oe.farmerPlace||"N/A"} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Bank / ಬ್ಯಾಂಕ್:</strong> ${oe.bankName||"N/A"} - ${oe.accountNumber||"N/A"}</p>
          </div>

          <table class="lot-table">
            <thead>
              <tr>
                <th>Lot No / ಲಾಟ್ ಸಂ</th>
                <th>Bags / ಚೀಲಗಳು</th>
                <th>Weight (kg) / ತೂಕ</th>
                <th>Rate/Quintal / ದರ</th>
                <th>Amount / ಮೊತ್ತ</th>
              </tr>
            </thead>
            <tbody>
              ${oe.lots?oe.lots.map(Ue=>{const be=Ue.totalWeight||(Ue.bags?Ue.bags.reduce((Y,de)=>Y+(parseFloat(de.weight)||0),0):0),se=parseFloat(Ue.lotPrice)||0,Je=be/100*se;return`
                <tr>
                  <td>${Ue.lotNumber}</td>
                  <td>${Ue.numberOfBags||(Ue.bags?Ue.bags.length:0)}</td>
                  <td>${be.toFixed(2)}</td>
                  <td>₹${se.toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                  <td>₹${Je.toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                </tr>
                `}).join(""):""}
              <tr class="total-row">
                <td><strong>Total / ಒಟ್ಟು</strong></td>
                <td><strong>${B.totalBags}</strong></td>
                <td><strong>${parseFloat(B.totalWeight||"0").toFixed(2)} kg</strong></td>
                <td>-</td>
                <td><strong>${I(B.totalAmount)}</strong></td>
              </tr>
            </tbody>
          </table>

          <div class="summary">
            <h3>Payment Summary / ಪಾವತಿ ಸಾರಾಂಶ</h3>
            <table class="lot-table">
              <tr><td>Gross Amount / ಒಟ್ಟು ಮೊತ್ತ</td><td>${I(B.totalAmount)}</td></tr>
              <tr><td>Less: Hamali / ಕಡಿಮೆ: ಹಮಾಲಿ</td><td>-${I(oe.hamali||0)}</td></tr>
              <tr><td>Less: Vehicle Rent / ಕಡಿಮೆ: ವಾಹನ ಬಾಡಿಗೆ</td><td>-${I(oe.vehicleRent||0)}</td></tr>
              <tr><td>Less: Empty Bags / ಕಡಿಮೆ: ಖಾಲಿ ಚೀಲಗಳು</td><td>-${I(oe.emptyBagCharges||0)}</td></tr>
              <tr><td>Less: Advance / ಕಡಿಮೆ: ಮೊದಲು ನೀಡಿದ ಮೊತ್ತ</td><td>-${I(oe.advance||0)}</td></tr>
              <tr><td>Less: Rok (${oe.rokPercentage||3}%) / ಕಡಿಮೆ: ರೋಕ್</td><td>-${I(oe.rok||0)}</td></tr>
              <tr><td>Less: Other / ಕಡಿಮೆ: ಇತರೆ</td><td>-${I(oe.other||0)}</td></tr>
              <tr class="total-row"><td><strong>Net Payable / ನಿವ್ವಳ ಪಾವತಿ</strong></td><td><strong>${I(B.netPayable)}</strong></td></tr>
            </table>
          </div>

          <div class="signature">
            <div>
              <p>_____________________</p>
              <p>Trader Signature / ವ್ಯಾಪಾರಿ ಸಹಿ</p>
            </div>
            <div>
              <p>_____________________</p>
              <p>Date / ದಿನಾಂಕ</p>
            </div>
          </div>
        </body>
        </html>
      `,we=new Blob([_e],{type:"text/html"}),Ne=URL.createObjectURL(we),ke=document.createElement("a");ke.href=Ne,ke.download=`farmer-bill-${oe.farmerName}-${V(B.createdAt)}.html`,document.body.appendChild(ke),ke.click(),document.body.removeChild(ke),URL.revokeObjectURL(Ne),t({title:"Success",description:"Farmer bill downloaded successfully!"})}catch(te){console.error("Error downloading PDF:",te),t({title:"Error",description:"Failed to download PDF",variant:"destructive"})}},H=async B=>{try{const te=await fetch(`/api/farmer-bill/${B.farmerId}`,{credentials:"include"});if(!te.ok)throw new Error("Failed to fetch bill details");const oe=await te.json(),_e=`
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="utf-8">
          <title>Farmer Bill - ${oe.farmerName}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; font-size: 14px; line-height: 1.4; }
            .header { text-align: center; margin-bottom: 20px; border-bottom: 2px solid #000; padding-bottom: 10px; }
            .header h1 { margin: 0; font-size: 20px; font-weight: bold; }
            .section { margin: 15px 0; }
            .farmer-info { margin: 15px 0; padding-left: 20px; }
            .lot-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
            .lot-table th, .lot-table td { border: 1px solid #000; padding: 8px; text-align: left; }
            .lot-table th { background-color: #f0f0f0; font-weight: bold; }
            .summary { margin: 20px 0; }
            .total-row { font-weight: bold; background-color: #f9f9f9; }
            .signature { margin-top: 40px; display: flex; justify-content: space-between; }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${oe.tenantName||"AGRICULTURAL TRADING COMPANY"}</h1>
            <p><strong>FARMER PAYMENT BILL / ರೈತ ಪಾವತಿ ಬಿಲ್</strong></p>
            <p>Date: ${V(B.createdAt)} | Patti No: ${B.pattiNumber}</p>
          </div>
          
          <div class="farmer-info">
            <h3>Farmer Details / ರೈತ ವಿವರಗಳು</h3>
<p><strong>Name / ಹೆಸರು:</strong> ${oe.farmerName||"N/A"} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Mobile / ಮೊಬೈಲ್:</strong> ${oe.farmerMobile||"N/A"}</p>
<p><strong>Place / ಸ್ಥಳ:</strong> ${oe.farmerPlace||"N/A"} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <strong>Bank / ಬ್ಯಾಂಕ್:</strong> ${oe.bankName||"N/A"} - ${oe.accountNumber||"N/A"}</p>
          </div>

          <table class="lot-table">
            <thead>
              <tr>
                <th>Lot No / ಲಾಟ್ ಸಂ</th>
                <th>Bags / ಚೀಲಗಳು</th>
                <th>Weight (kg) / ತೂಕ</th>
                <th>Rate/Quintal / ದರ</th>
                <th>Amount / ಮೊತ್ತ</th>
              </tr>
            </thead>
            <tbody>
              ${oe.lots?oe.lots.map(Ne=>{const ke=Ne.totalWeight||(Ne.bags?Ne.bags.reduce((ut,Je)=>ut+(parseFloat(Je.weight)||0),0):0),Ue=parseFloat(Ne.lotPrice)||0,se=ke/100*Ue;return`
                <tr>
                  <td>${Ne.lotNumber}</td>
                  <td>${Ne.numberOfBags||(Ne.bags?Ne.bags.length:0)}</td>
                  <td>${ke.toFixed(2)}</td>
                  <td>₹${Ue.toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                  <td>₹${se.toLocaleString("en-IN",{minimumFractionDigits:2})}</td>
                </tr>
                `}).join(""):""}
              <tr class="total-row">
                <td><strong>Total / ಒಟ್ಟು</strong></td>
                <td><strong>${B.totalBags}</strong></td>
                <td><strong>${parseFloat(B.totalWeight||"0").toFixed(2)} kg</strong></td>
                <td>-</td>
                <td><strong>${I(B.totalAmount)}</strong></td>
              </tr>
            </tbody>
          </table>

          <div class="summary">
            <h3>Payment Summary / ಪಾವತಿ ಸಾರಾಂಶ</h3>
            <table class="lot-table">
              <tr><td>Gross Amount / ಒಟ್ಟು ಮೊತ್ತ</td><td>${I(B.totalAmount)}</td></tr>
              <tr><td>Less: Hamali / ಕಡಿಮೆ: ಹಮಾಲಿ</td><td>-${I(oe.hamali||0)}</td></tr>
              <tr><td>Less: Vehicle Rent / ಕಡಿಮೆ: ವಾಹನ ಬಾಡಿಗೆ</td><td>-${I(oe.vehicleRent||0)}</td></tr>
              <tr><td>Less: Empty Bags / ಕಡಿಮೆ: ಖಾಲಿ ಚೀಲಗಳು</td><td>-${I(oe.emptyBagCharges||0)}</td></tr>
              <tr><td>Less: Advance / ಕಡಿಮೆ: ಮೊದಲು ನೀಡಿದ ಮೊತ್ತ</td><td>-${I(oe.advance||0)}</td></tr>
              <tr><td>Less: Rok (${oe.rokPercentage||3}%) / ಕಡಿಮೆ: ರೋಕ್</td><td>-${I(oe.rok||0)}</td></tr>
              <tr><td>Less: Other / ಕಡಿಮೆ: ಇತರೆ</td><td>-${I(oe.other||0)}</td></tr>
              <tr class="total-row"><td><strong>Net Payable / ನಿವ್ವಳ ಪಾವತಿ</strong></td><td><strong>${I(B.netPayable)}</strong></td></tr>
            </table>
          </div>

          <div class="signature">
            <div>
              <p>_____________________</p>
              <p>Trader Signature / ವ್ಯಾಪಾರಿ ಸಹಿ</p>
            </div>
            <div>
              <p>_____________________</p>
              <p>Date / ದಿನಾಂಕ</p>
            </div>
          </div>
          
          <!-- Back Side - Individual Bag Weights -->
          <div class="page-break"></div>
          
          <div class="header">
            <h1>${oe.tenantName}</h1>
            <h2>BAG WEIGHT DETAILS / ಚೀಲ ತೂಕ ವಿವರಗಳು</h2>
            <div class="farmer-info">
              <p><strong>Farmer:</strong> ${oe.farmerName} | <strong>Patti No:</strong> ${oe.pattiNumber}</p>
              <p><strong>Date:</strong> ${new Date(oe.createdAt).toLocaleDateString()}</p>
            </div>
          </div>

          ${oe.lots?oe.lots.map(Ne=>`
            <div class="lot-section">
              <h3>Lot ${Ne.lotNumber} - ${Ne.variety||"N/A"} (${Ne.grade||"N/A"})</h3>
              <p><strong>Total Bags:</strong> ${Ne.numberOfBags||0} | <strong>Total Weight:</strong> ${(Ne.totalWeight||0).toFixed(2)} kg</p>
              
              <div class="bag-grid">
                ${Ne.bags&&Ne.bags.length>0?Ne.bags.map(ke=>`
                  <div class="bag-card">
                    <div class="bag-number">B${ke.bagNumber}</div>
                    <div class="bag-weight">${ke.weight||0}kg</div>
                  </div>
                `).join(""):Array.from({length:Ne.numberOfBags||0},(ke,Ue)=>`
                  <div class="bag-card">
                    <div class="bag-number">B${Ue+1}</div>
                    <div class="bag-weight">--</div>
                  </div>
                `).join("")}
              </div>
              
              <div class="lot-summary">
                <strong>Rate:</strong> ₹${(parseFloat(Ne.lotPrice)||0).toLocaleString("en-IN",{minimumFractionDigits:2})}/quintal | 
                <strong>Amount:</strong> ₹${((Ne.totalWeight||(Ne.bags?Ne.bags.reduce((ke,Ue)=>ke+(parseFloat(Ue.weight)||0),0):0))/100*(parseFloat(Ne.lotPrice)||0)).toLocaleString("en-IN",{minimumFractionDigits:2})}
              </div>
            </div>
          `).join(""):""}
          
          <style>
            .page-break {
              page-break-before: always;
              margin-top: 40px;
            }
            
            .lot-section {
              margin-bottom: 25px;
              border-bottom: 1px solid #ddd;
              padding-bottom: 15px;
            }
            
            .lot-section h3 {
              color: #2563eb;
              margin-bottom: 8px;
              font-size: 16px;
            }
            
            .bag-grid {
              display: grid;
              grid-template-columns: repeat(25, 1fr);
              gap: 2px;
              margin: 8px 0;
            }
            
            .bag-card {
              border: 1px solid #ccc;
              border-radius: 2px;
              padding: 2px 1px;
              text-align: center;
              background: #f8f9fa;
              font-size: 7px;
              line-height: 1.1;
            }
            
            .bag-number {
              font-weight: bold;
              color: #1f2937;
              margin-bottom: 0px;
            }
            
            .bag-weight {
              color: #059669;
              font-weight: 600;
            }
            
            .lot-summary {
              background: #e5f3ff;
              padding: 4px;
              border-radius: 2px;
              font-size: 10px;
              margin-top: 6px;
            }
            
            .lot-section {
              margin-bottom: 15px;
              border-bottom: 1px solid #ddd;
              padding-bottom: 10px;
            }
            
            .lot-section h3 {
              color: #2563eb;
              margin-bottom: 6px;
              font-size: 14px;
            }
            
            @media print {
              .bag-grid {
                grid-template-columns: repeat(50, 1fr);
                gap: 1px;
              }
              
              .bag-card {
                padding: 1px;
                font-size: 6px;
                border-radius: 1px;
              }
              
              .lot-section {
                margin-bottom: 12px;
                padding-bottom: 8px;
              }
              
              .lot-section h3 {
                font-size: 12px;
                margin-bottom: 4px;
              }
              
              .lot-summary {
                padding: 2px;
                font-size: 8px;
                margin-top: 4px;
              }
            }
          </style>
          
          <script>
            window.onload = function() {
              window.print();
              setTimeout(function() { window.close(); }, 100);
            }
          <\/script>
        </body>
        </html>
      `,we=window.open("","_blank");we&&(we.document.write(_e),we.document.close())}catch(te){console.error("Error printing bill:",te),t({title:"Error",description:"Failed to print bill",variant:"destructive"})}};return M?s.jsx("div",{className:"container mx-auto p-6",children:s.jsx("div",{className:"text-center",children:"Loading farmers..."})}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6",children:[s.jsx(Bi,{}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-3 sm:p-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4 sm:mb-6",children:[s.jsx(ux,{className:"h-5 w-5 sm:h-6 sm:w-6 text-green-600"}),s.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Farmer Bill Management"})]}),s.jsxs(Bo,{value:h,onValueChange:g,className:"w-full",children:[s.jsxs(eo,{className:"grid w-full grid-cols-2 h-auto",children:[s.jsxs(wn,{value:"generate",className:"flex items-center justify-center gap-1 sm:gap-2 py-3 text-xs sm:text-sm",children:[s.jsx(qr,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Generate"})," Bill"]}),s.jsxs(wn,{value:"history",className:"flex items-center justify-center gap-1 sm:gap-2 py-3 text-xs sm:text-sm",children:[s.jsx(yk,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Bill"})," History"]})]}),s.jsx(Nn,{value:"generate",className:"space-y-6 mt-6",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Generate New Farmer Bill"}),s.jsx(Cn,{children:"Select a farmer to generate bill for completed lots"})]}),s.jsxs(qe,{className:"space-y-3 sm:space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"farmer",className:"text-sm sm:text-base",children:"Select Farmer"}),s.jsxs(rr,{value:r,onValueChange:i,children:[s.jsx(Wn,{className:"min-h-[44px]",children:s.jsx(sr,{placeholder:"Choose a farmer..."})}),s.jsx(Hn,{children:k.map(B=>s.jsxs(Tt,{value:B.id.toString(),children:[B.name," - ",B.place]},B.id))})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"bill-date",className:"text-sm sm:text-base",children:"Bill Date"}),s.jsx(Ze,{id:"bill-date",type:"date",value:l,onChange:B=>{c(B.target.value),f(B.target.value)},className:"min-h-[44px]"})]})]}),r&&s.jsx("div",{className:"space-y-4",children:Z?s.jsxs(os,{children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsx(ls,{children:"Checking bill status..."})]}):E!=null&&E.exists?s.jsxs("div",{className:"space-y-4",children:[s.jsxs(os,{children:[s.jsx(Rc,{className:"h-4 w-4"}),s.jsxs(ls,{children:["Farmer bill already exists for ",z==null?void 0:z.name,"."]})]}),s.jsxs(Re,{children:[s.jsx(it,{children:s.jsx(ct,{className:"text-lg",children:"Existing Bill"})}),s.jsxs(qe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Patti Number:"}),s.jsx("div",{children:(X=E.bill)==null?void 0:X.pattiNumber})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total Amount:"}),s.jsx("div",{className:"font-bold text-green-600",children:I(((le=E.bill)==null?void 0:le.totalAmount)||0)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Net Payable:"}),s.jsx("div",{className:"font-bold text-blue-600",children:I(((Ce=E.bill)==null?void 0:Ce.netPayable)||0)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Bags:"}),s.jsx("div",{children:((F=E.bill)==null?void 0:F.totalBags)||0})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(Le,{onClick:()=>q(E.bill),variant:"outline",className:"w-full sm:w-auto min-h-[44px]",children:[s.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),s.jsxs(Le,{onClick:()=>H(E.bill),variant:"outline",className:"w-full sm:w-auto min-h-[44px]",children:[s.jsx(Hu,{className:"h-4 w-4 mr-2"}),"Print"]}),s.jsxs(Le,{onClick:()=>{var B,te,oe,_e,we,Ne;j(!0),x({hamali:parseFloat(((B=E.bill)==null?void 0:B.hamali)||"0"),vehicleRent:parseFloat(((te=E.bill)==null?void 0:te.vehicleRent)||"0"),emptyBagCharges:parseFloat(((oe=E.bill)==null?void 0:oe.emptyBagCharges)||"0"),advance:parseFloat(((_e=E.bill)==null?void 0:_e.advance)||"0"),other:parseFloat(((we=E.bill)==null?void 0:we.other)||"0"),rok:parseFloat(((Ne=E.bill)==null?void 0:Ne.rok)||"0")})},variant:"outline",className:"w-full sm:w-auto min-h-[44px]",children:[s.jsx(Jh,{className:"h-4 w-4 mr-2"}),"Edit Deductions"]})]})]})]}),s.jsx(ds,{open:y,onOpenChange:j,children:s.jsxs(Vr,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsx(Wr,{children:s.jsxs(Hr,{children:["Edit Deductions - ",z==null?void 0:z.name]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"edit-hamali",children:"Hamali (₹)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"edit-hamali",type:"number",value:v.hamali,onChange:B=>x(te=>({...te,hamali:parseFloat(B.target.value)||0})),className:"flex-1"}),s.jsx(Ji,{onResult:B=>x(te=>({...te,hamali:parseFloat(B)||0})),type:"number",className:"w-10 h-10"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"edit-vehicle-rent",children:"Vehicle Rent (₹)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"edit-vehicle-rent",type:"number",value:v.vehicleRent,onChange:B=>x(te=>({...te,vehicleRent:parseFloat(B.target.value)||0})),className:"flex-1"}),s.jsx(Ji,{onResult:B=>x(te=>({...te,vehicleRent:parseFloat(B)||0})),type:"number",className:"w-10 h-10"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"edit-empty-bags",children:"Empty Bag Charges (₹)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"edit-empty-bags",type:"number",value:v.emptyBagCharges,onChange:B=>x(te=>({...te,emptyBagCharges:parseFloat(B.target.value)||0})),className:"flex-1"}),s.jsx(Ji,{onResult:B=>x(te=>({...te,emptyBagCharges:parseFloat(B)||0})),type:"number",className:"w-10 h-10"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"edit-advance",children:"Advance (₹)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"edit-advance",type:"number",value:v.advance,onChange:B=>x(te=>({...te,advance:parseFloat(B.target.value)||0})),className:"flex-1"}),s.jsx(Ji,{onResult:B=>x(te=>({...te,advance:parseFloat(B)||0})),type:"number",className:"w-10 h-10"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"edit-other",children:"Other Deductions (₹)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"edit-other",type:"number",value:v.other,onChange:B=>x(te=>({...te,other:parseFloat(B.target.value)||0})),className:"flex-1"}),s.jsx(Ji,{onResult:B=>x(te=>({...te,other:parseFloat(B)||0})),type:"number",className:"w-10 h-10"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"edit-rok",children:"Rok (₹)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"edit-rok",type:"number",value:v.rok,onChange:B=>x(te=>({...te,rok:parseFloat(B.target.value)||0})),className:"flex-1"}),s.jsx(Ji,{onResult:B=>x(te=>({...te,rok:parseFloat(B)||0})),type:"number",className:"w-10 h-10"})]})]})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Amount:"}),s.jsx("span",{className:"font-bold",children:I(((J=E.bill)==null?void 0:J.totalAmount)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Deductions:"}),s.jsxs("span",{className:"font-bold text-red-600",children:["-",I(v.hamali+v.vehicleRent+v.emptyBagCharges+v.advance+v.other+v.rok)]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[s.jsx("span",{children:"Net Payable:"}),s.jsx("span",{className:"text-green-600",children:I(parseFloat(((re=E.bill)==null?void 0:re.totalAmount)||"0")-(v.hamali+v.vehicleRent+v.emptyBagCharges+v.advance+v.other+v.rok))})]})]})}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(Le,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),s.jsx(Le,{onClick:async()=>{try{await an("PATCH",`/api/farmer-bill/${E.bill.id}`,{deductions:v}),t({title:"Success",description:"Deductions updated successfully!"}),n.invalidateQueries({queryKey:[`/api/farmer-bill/${r}/check`]}),j(!1)}catch(B){console.error("Error updating deductions:",B),t({title:"Error",description:"Failed to update deductions",variant:"destructive"})}},children:"Save Changes"})]})]})]})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs(os,{children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsxs(ls,{children:["No farmer bill found for ",z==null?void 0:z.name,". You can generate a new one."]})]}),G?s.jsxs(os,{children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsx(ls,{children:"Loading farmer lots..."})]}):P.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("p",{className:"font-medium",children:["Completed lots for ",z==null?void 0:z.name," on ",new Date(l||new Date().toISOString().split("T")[0]).toLocaleDateString("en-IN"),":"]}),s.jsx("ul",{className:"mt-2 space-y-1",children:P.map(B=>{var te;return s.jsxs("li",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsx("span",{children:B.lotNumber}),s.jsxs("span",{className:"text-green-600 font-medium",children:[B.actualBagCount||B.numberOfBags," bags • ",(te=B.totalWeight)==null?void 0:te.toFixed(1),"kg • ₹",parseFloat(B.lotPrice||0).toLocaleString(),"/quintal"]})]},B.id)})})]}),s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{className:"text-lg",children:"Bill Configuration & Deductions"}),s.jsx(Cn,{children:"Set deductions before generating the bill"})]}),s.jsxs(qe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"patti-number",children:"Patti Number"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"patti-number",value:a,onChange:B=>o(B.target.value),placeholder:"Auto-generated if empty",className:"flex-1"}),s.jsx(Ji,{onResult:B=>o(B),type:"text",className:"w-10 h-10"})]})]}),s.jsxs("div",{children:[s.jsxs(Ae,{htmlFor:"hamali",children:["Hamali (₹) - Auto-calculated from settings",((Q=L==null?void 0:L.gstSettings)==null?void 0:Q.unloadHamali)&&s.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(₹",L.gstSettings.unloadHamali,"/bag)"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"hamali",type:"number",value:m.hamali,readOnly:!0,className:"flex-1 bg-gray-50",title:"Calculated from settings: hamali rate per bag × total bags"}),s.jsx("div",{className:"w-10 h-10 bg-gray-50 border rounded flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-gray-500",children:"Auto"})})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"vehicle-rent",children:"Vehicle Rent (₹)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"vehicle-rent",type:"number",value:m.vehicleRent,onChange:B=>S(te=>({...te,vehicleRent:parseFloat(B.target.value)||0})),className:"flex-1"}),s.jsx(Ji,{onResult:B=>S(te=>({...te,vehicleRent:parseFloat(B)||0})),type:"number",className:"w-10 h-10"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"empty-bags",children:"Empty Bag Charges (₹)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"empty-bags",type:"number",value:m.emptyBagCharges,onChange:B=>S(te=>({...te,emptyBagCharges:parseFloat(B.target.value)||0})),className:"flex-1"}),s.jsx(Ji,{onResult:B=>S(te=>({...te,emptyBagCharges:parseFloat(B)||0})),type:"number",className:"w-10 h-10"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"advance",children:"Advance (₹)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"advance",type:"number",value:m.advance,onChange:B=>S(te=>({...te,advance:parseFloat(B.target.value)||0})),className:"flex-1"}),s.jsx(Ji,{onResult:B=>S(te=>({...te,advance:parseFloat(B)||0})),type:"number",className:"w-10 h-10"})]})]}),s.jsxs("div",{children:[s.jsxs(Ae,{htmlFor:"rok",children:["Rok (₹) - Auto-calculated from settings",((ie=L==null?void 0:L.gstSettings)==null?void 0:ie.rokPercentage)&&s.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",L.gstSettings.rokPercentage,"% of total)"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"rok",type:"number",value:m.rok,readOnly:!0,className:"flex-1 bg-gray-50",title:"Calculated from settings: percentage of total amount"}),s.jsx("div",{className:"w-10 h-10 bg-gray-50 border rounded flex items-center justify-center",children:s.jsx("span",{className:"text-xs text-gray-500",children:"Auto"})})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"other",children:"Other Deductions (₹)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Ze,{id:"other",type:"number",value:m.other,onChange:B=>S(te=>({...te,other:parseFloat(B.target.value)||0})),className:"flex-1"}),s.jsx(Ji,{onResult:B=>S(te=>({...te,other:parseFloat(B)||0})),type:"number",className:"w-10 h-10"})]})]})]}),s.jsxs("div",{className:"border-t pt-4 mt-4",children:[s.jsx("h4",{className:"font-medium mb-3",children:"Bill Preview"}),s.jsx("div",{className:"space-y-2 text-sm bg-gray-50 p-3 rounded",children:(()=>{var se,ut;const B=P.reduce((Je,Y)=>Je+(Y.actualBagCount||Y.numberOfBags||0),0),te=P.reduce((Je,Y)=>Je+(Y.totalWeight||0),0),oe=P.reduce((Je,Y)=>{const de=Y.totalWeight||0,We=parseFloat(Y.lotPrice||0),ee=de/100;return Je+ee*We},0),_e=((se=L==null?void 0:L.gstSettings)==null?void 0:se.unloadHamali)||0,we=_e*B,Ne=((ut=L==null?void 0:L.gstSettings)==null?void 0:ut.rokPercentage)||3,ke=oe*Ne/100,Ue=we+m.vehicleRent+m.emptyBagCharges+m.advance+m.other+ke,be=oe-Ue;return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Bags:"}),s.jsx("span",{children:B})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Weight:"}),s.jsxs("span",{children:[te.toFixed(2)," kg"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Gross Amount:"}),s.jsx("span",{className:"font-bold",children:I(oe)})]}),s.jsxs("div",{className:"border-t pt-1 mt-2",children:[s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsxs("span",{children:["Hamali (",B," bags × ₹",_e,"):"]}),s.jsxs("span",{children:["-",I(we)]})]}),s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsx("span",{children:"Vehicle Rent:"}),s.jsxs("span",{children:["-",I(m.vehicleRent)]})]}),s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsx("span",{children:"Empty Bags:"}),s.jsxs("span",{children:["-",I(m.emptyBagCharges)]})]}),s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsx("span",{children:"Advance:"}),s.jsxs("span",{children:["-",I(m.advance)]})]}),s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsxs("span",{children:["Rok (",Ne,"%):"]}),s.jsxs("span",{children:["-",I(ke)]})]}),s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsx("span",{children:"Other:"}),s.jsxs("span",{children:["-",I(m.other)]})]}),s.jsxs("div",{className:"flex justify-between font-bold text-red-600 border-t pt-1",children:[s.jsx("span",{children:"Total Deductions:"}),s.jsxs("span",{children:["-",I(Ue)]})]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold text-green-600 border-t pt-2 mt-2",children:[s.jsx("span",{children:"Net Payable:"}),s.jsx("span",{children:I(be)})]})]})})()})]}),s.jsx(Le,{onClick:()=>{var Ne,ke;if(!r||P.length===0){t({title:"Error",description:"Please select a farmer with completed lots.",variant:"destructive"});return}let B=a;B||(B=_(),o(B));const te=P.map(Ue=>Ue.id),oe=P.reduce((Ue,be)=>Ue+(be.actualBagCount||be.numberOfBags||0),0),_e=P.reduce((Ue,be)=>Ue+(be.totalWeight||0),0),we=P.reduce((Ue,be)=>{const se=be.totalWeight||0,ut=parseFloat(be.lotPrice||0),Je=se/100;return Ue+Je*ut},0);C.mutate({farmerId:parseInt(r),pattiNumber:B,billData:{...m,hamali:(((Ne=L==null?void 0:L.gstSettings)==null?void 0:Ne.unloadHamali)||0)*oe,rok:we*(((ke=L==null?void 0:L.gstSettings)==null?void 0:ke.rokPercentage)||3)/100,totalAmount:we,totalBags:oe,totalWeight:_e},lotIds:te,billDate:l||new Date().toISOString().split("T")[0]})},disabled:C.isPending||P.length===0,className:"w-full",children:C.isPending?"Generating...":"Generate & Save Bill"})]})]})]}):s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsxs("p",{children:["No completed lots found for ",z==null?void 0:z.name,"."]}),s.jsx("p",{className:"mt-2",children:"To generate a farmer bill:"}),s.jsxs("ol",{className:"list-decimal list-inside mt-2 space-y-1",children:[s.jsx("li",{children:"Create lots for this farmer"}),s.jsx("li",{children:"Add bags to the lots with proper weights"}),s.jsx("li",{children:"Complete the lots to make them ready for billing"})]})]})]})})]})]})}),s.jsx(Nn,{value:"history",className:"space-y-6 mt-6",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Farmer Bill History"}),s.jsx(Cn,{children:"View all historical farmer bills with date range filtering"})]}),s.jsxs(qe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"farmer-history",children:"Select Farmer"}),s.jsxs(rr,{value:r,onValueChange:i,children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"Choose a farmer..."})}),s.jsx(Hn,{children:k.map(B=>s.jsxs(Tt,{value:B.id.toString(),children:[B.name," - ",B.place]},B.id))})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"start-date",children:"Start Date"}),s.jsx(Ze,{id:"start-date",type:"date",value:l,onChange:B=>c(B.target.value)})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"end-date",children:"End Date"}),s.jsx(Ze,{id:"end-date",type:"date",value:d,onChange:B=>f(B.target.value)})]})]}),r&&s.jsx("div",{className:"space-y-4",children:T?s.jsxs(os,{children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsx(ls,{children:"Loading bill history..."})]}):O.length>0?s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Patti Number"}),s.jsx($e,{children:"Date"}),s.jsx($e,{children:"Total Amount"}),s.jsx($e,{children:"Net Payable"}),s.jsx($e,{children:"Bags"}),s.jsx($e,{children:"Weight (Kg)"}),s.jsx($e,{children:"Created By"}),s.jsx($e,{children:"Actions"})]})}),s.jsx(ps,{children:O.map(B=>s.jsxs(on,{children:[s.jsx(Be,{className:"font-medium",children:B.pattiNumber}),s.jsx(Be,{children:V(B.createdAt)}),s.jsx(Be,{children:I(B.totalAmount)}),s.jsx(Be,{className:"font-semibold text-green-600",children:I(B.netPayable)}),s.jsx(Be,{children:B.totalBags}),s.jsx(Be,{children:parseFloat(B.totalWeight).toFixed(2)}),s.jsx(Be,{children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium",children:B.creatorName}),s.jsxs("div",{className:"text-gray-500",children:["@",B.creatorUsername]})]})}),s.jsx(Be,{children:s.jsxs(ds,{children:[s.jsx(Xa,{asChild:!0,children:s.jsxs(Le,{variant:"outline",size:"sm",children:[s.jsx(Jh,{className:"h-4 w-4 mr-1"}),"View"]})}),s.jsxs(Vr,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[s.jsx(Wr,{children:s.jsxs(Hr,{children:["Bill Details - ",B.pattiNumber]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Patti Number:"}),s.jsx("div",{children:B.pattiNumber})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total Amount:"}),s.jsx("div",{className:"font-bold text-green-600",children:I(B.totalAmount)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Net Payable:"}),s.jsx("div",{className:"font-bold text-blue-600",children:I(B.netPayable)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Bags:"}),s.jsx("div",{children:B.totalBags})]})]}),s.jsxs("div",{className:"flex justify-center gap-2",children:[s.jsxs(Le,{onClick:()=>q(B),variant:"outline",size:"sm",children:[s.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),s.jsxs(Le,{onClick:()=>H(B),variant:"outline",size:"sm",children:[s.jsx(Hu,{className:"h-4 w-4 mr-2"}),"Print"]})]})]})]})]})})]},B.id))})]})}):s.jsxs(os,{children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsxs(ls,{children:["No bills found for ",z==null?void 0:z.name," in the selected date range."]})]})})]})]})})]})]})]})]})}function $G(){var v,x,_,k,M,L,O,T,E;const[e,t]=N.useState("daily"),[n,r]=N.useState(new Date().toISOString().split("T")[0]),[i,a]=N.useState(""),[o,l]=N.useState(""),[c,d]=N.useState("summary"),{data:f,isLoading:h,refetch:g}=kt({queryKey:["/api/reports/cess",e,n,i,o],queryFn:async()=>{const Z=new URLSearchParams({reportType:e,startDate:n,...e==="custom"&&{customStartDate:i,customEndDate:o}}),C=await fetch(`/api/reports/cess?${Z}`,{credentials:"include"});if(!C.ok)throw new Error("Failed to fetch CESS report");return C.json()},enabled:e!=="custom"||!!(i&&o)}),m=Z=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(Z),S=Z=>`${Z.toFixed(2)} kg (${(Z/100).toFixed(2)} quintals)`,y=()=>{g()},j=()=>{if(!f)return;const Z=[["Date","Lot Number","Weight (kg)","Weight (quintals)","Basic Amount","CESS Amount","Total Amount"],...((f==null?void 0:f.transactions)||[]).map(I=>[I.date,I.lotNumber,I.weight.toFixed(2),I.weightQuintals.toFixed(2),I.basicAmount.toFixed(2),I.cessAmount.toFixed(2),I.totalAmount.toFixed(2)])].map(I=>I.join(",")).join(`
`),C=new Blob([Z],{type:"text/csv"}),P=window.URL.createObjectURL(C),G=document.createElement("a");G.href=P,G.download=`cess-report-${e}-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(P)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6 space-y-4 sm:space-y-6",children:[s.jsx(Bi,{}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsx("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"CESS Reports"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[s.jsx(Le,{onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white w-full sm:w-auto min-h-[44px]",disabled:h,children:h?"Generating...":"Generate Report"}),s.jsxs(Le,{onClick:j,variant:"outline",disabled:!f,className:"w-full sm:w-auto min-h-[44px]",children:[s.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Download CSV"]})]})]}),s.jsxs(Re,{children:[s.jsx(it,{children:s.jsxs(ct,{className:"flex items-center",children:[s.jsx(Ao,{className:"h-5 w-5 mr-2"}),"Report Configuration"]})}),s.jsxs(qe,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"reportType",children:"Report Type"}),s.jsxs(rr,{value:e,onValueChange:Z=>t(Z),children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"Select report type"})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"daily",children:"Daily"}),s.jsx(Tt,{value:"weekly",children:"Weekly"}),s.jsx(Tt,{value:"monthly",children:"Monthly"}),s.jsx(Tt,{value:"yearly",children:"Yearly"}),s.jsx(Tt,{value:"custom",children:"Custom Range"})]})]})]}),e!=="custom"&&s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"selectedDate",children:"Date"}),s.jsx(Ze,{type:"date",value:n,onChange:Z=>r(Z.target.value)})]}),e==="custom"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"customStartDate",children:"Start Date"}),s.jsx(Ze,{type:"date",value:i,onChange:Z=>a(Z.target.value)})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"customEndDate",children:"End Date"}),s.jsx(Ze,{type:"date",value:o,onChange:Z=>l(Z.target.value)})]})]})]})]}),f&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Total Transactions"}),s.jsx(Dm,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:((v=f==null?void 0:f.summary)==null?void 0:v.totalTransactions)||0}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Period: ",((x=f==null?void 0:f.summary)==null?void 0:x.period)||"N/A"]})]})]}),s.jsxs(Re,{children:[s.jsx(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(ct,{className:"text-sm font-medium",children:"Total Weight"})}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:(((_=f==null?void 0:f.summary)==null?void 0:_.totalWeightQuintals)||0).toFixed(2)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:S(((k=f==null?void 0:f.summary)==null?void 0:k.totalWeight)||0)})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Basic Amount"}),s.jsx(ko,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:m(((M=f==null?void 0:f.summary)==null?void 0:M.basicAmount)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total agricultural produce value"})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"CESS Amount"}),s.jsx(ko,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:m(((L=f==null?void 0:f.summary)==null?void 0:L.cessAmount)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"@ 0.6% on basic amount"})]})]})]}),s.jsxs(Re,{children:[s.jsx(it,{children:s.jsx(ct,{children:"CESS Report Details"})}),s.jsx(qe,{children:s.jsxs(Bo,{value:c,onValueChange:Z=>d(Z),children:[s.jsxs(eo,{children:[s.jsx(wn,{value:"summary",children:"Summary"}),s.jsx(wn,{value:"detailed",children:"Transaction Details"})]}),s.jsx(Nn,{value:"summary",className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"CESS Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Basic Amount:"}),s.jsx("span",{className:"font-semibold",children:m(((O=f==null?void 0:f.summary)==null?void 0:O.basicAmount)||0)})]}),s.jsxs("div",{className:"flex justify-between text-red-600",children:[s.jsx("span",{children:"CESS @ 0.6%:"}),s.jsx("span",{className:"font-semibold",children:m(((T=f==null?void 0:f.summary)==null?void 0:T.cessAmount)||0)})]}),s.jsx("div",{className:"border-t pt-2",children:s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"Total Amount:"}),s.jsx("span",{children:m(((E=f==null?void 0:f.summary)==null?void 0:E.totalAmount)||0)})]})})]})]})})}),s.jsx(Nn,{value:"detailed",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"min-w-full",children:[s.jsx("div",{className:"grid gap-3 md:hidden",children:((f==null?void 0:f.transactions)||[]).map((Z,C)=>s.jsx(Re,{className:"p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:Z.lotNumber}),s.jsx("span",{className:"text-sm text-gray-500",children:Z.date})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Weight:"}),s.jsxs("div",{children:[Z.weight.toFixed(2)," kg"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Quintals:"}),s.jsx("div",{children:Z.weightQuintals.toFixed(2)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Basic:"}),s.jsx("div",{children:m(Z.basicAmount)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"CESS:"}),s.jsx("div",{className:"text-red-600",children:m(Z.cessAmount)})]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[s.jsx("span",{className:"text-gray-500 text-sm",children:"Total Amount:"}),s.jsx("div",{className:"font-bold text-lg",children:m(Z.totalAmount)})]})]})},C))}),s.jsx("div",{className:"hidden md:block",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Date"}),s.jsx($e,{children:"Lot Number"}),s.jsx($e,{children:"Weight (kg)"}),s.jsx($e,{children:"Weight (quintals)"}),s.jsx($e,{children:"Basic Amount"}),s.jsx($e,{children:"CESS Amount"}),s.jsx($e,{children:"Total Amount"})]})}),s.jsx(ps,{children:((f==null?void 0:f.transactions)||[]).map((Z,C)=>s.jsxs(on,{children:[s.jsx(Be,{children:Z.date}),s.jsx(Be,{className:"font-medium",children:Z.lotNumber}),s.jsx(Be,{children:Z.weight.toFixed(2)}),s.jsx(Be,{children:Z.weightQuintals.toFixed(2)}),s.jsx(Be,{children:m(Z.basicAmount)}),s.jsx(Be,{className:"text-red-600",children:m(Z.cessAmount)}),s.jsx(Be,{className:"font-semibold",children:m(Z.totalAmount)})]},C))})]})})]})})})]})})]})]}),h&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2",children:"Generating CESS report..."})]})]})]})}function qG(){var v,x,_,k,M,L,O,T,E,Z;const[e,t]=N.useState("daily"),[n,r]=N.useState(new Date().toISOString().split("T")[0]),[i,a]=N.useState(""),[o,l]=N.useState(""),[c,d]=N.useState("summary"),{data:f,isLoading:h,refetch:g}=kt({queryKey:["/api/reports/gst",e,n,i,o],queryFn:async()=>{const C=new URLSearchParams({reportType:e,startDate:n,...e==="custom"&&{customStartDate:i,customEndDate:o}}),P=await fetch(`/api/reports/gst?${C}`);if(!P.ok)throw new Error("Failed to fetch GST report");return P.json()},enabled:e!=="custom"||i&&o}),m=C=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(C),S=C=>`${C.toFixed(2)} kg (${(C/100).toFixed(2)} quintals)`,y=()=>{g()},j=()=>{if(!f)return;const C=[["Date","Lot Number","Weight (kg)","Weight (quintals)","Basic Amount","SGST","CGST","Total GST","Total Amount"],...((f==null?void 0:f.transactions)||[]).map(V=>[V.date,V.lotNumber,V.weight.toFixed(2),V.weightQuintals.toFixed(2),V.basicAmount.toFixed(2),V.sgstAmount.toFixed(2),V.cgstAmount.toFixed(2),V.totalGstAmount.toFixed(2),V.totalAmount.toFixed(2)])].map(V=>V.join(",")).join(`
`),P=new Blob([C],{type:"text/csv"}),G=window.URL.createObjectURL(P),I=document.createElement("a");I.href=G,I.download=`gst-report-${e}-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(I),I.click(),document.body.removeChild(I),window.URL.revokeObjectURL(G)};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-4 sm:py-6 space-y-4 sm:space-y-6",children:[s.jsx(Bi,{}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsx("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:"GST Reports"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[s.jsx(Le,{onClick:y,className:"bg-blue-600 hover:bg-blue-700 text-white w-full sm:w-auto min-h-[44px]",disabled:h,children:h?"Generating...":"Generate Report"}),s.jsxs(Le,{onClick:j,variant:"outline",disabled:!f,className:"w-full sm:w-auto min-h-[44px]",children:[s.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Download CSV"]})]})]}),s.jsxs(Re,{children:[s.jsx(it,{children:s.jsxs(ct,{className:"flex items-center",children:[s.jsx(Ao,{className:"h-5 w-5 mr-2"}),"Report Configuration"]})}),s.jsxs(qe,{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"reportType",children:"Report Type"}),s.jsxs(rr,{value:e,onValueChange:C=>t(C),children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"Select report type"})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"daily",children:"Daily"}),s.jsx(Tt,{value:"weekly",children:"Weekly"}),s.jsx(Tt,{value:"monthly",children:"Monthly"}),s.jsx(Tt,{value:"yearly",children:"Yearly"}),s.jsx(Tt,{value:"custom",children:"Custom Range"})]})]})]}),e!=="custom"&&s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"selectedDate",children:"Date"}),s.jsx(Ze,{type:"date",value:n,onChange:C=>r(C.target.value)})]}),e==="custom"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"customStartDate",children:"Start Date"}),s.jsx(Ze,{type:"date",value:i,onChange:C=>a(C.target.value)})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"customEndDate",children:"End Date"}),s.jsx(Ze,{type:"date",value:o,onChange:C=>l(C.target.value)})]})]})]})]}),f&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Total Transactions"}),s.jsx(Dm,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:((v=f==null?void 0:f.summary)==null?void 0:v.totalTransactions)||0}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Period: ",((x=f==null?void 0:f.summary)==null?void 0:x.period)||"N/A"]})]})]}),s.jsxs(Re,{children:[s.jsx(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:s.jsx(ct,{className:"text-sm font-medium",children:"Total Weight"})}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:(((_=f==null?void 0:f.summary)==null?void 0:_.totalWeightQuintals)||0).toFixed(2)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:S(((k=f==null?void 0:f.summary)==null?void 0:k.totalWeight)||0)})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Basic Amount"}),s.jsx(ko,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:m(((M=f==null?void 0:f.summary)==null?void 0:M.basicAmount)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Total agricultural produce value"})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Total GST"}),s.jsx(ko,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m(((L=f==null?void 0:f.summary)==null?void 0:L.totalGstAmount)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"SGST (2.5%) + CGST (2.5%)"})]})]})]}),s.jsxs(Re,{children:[s.jsx(it,{children:s.jsx(ct,{children:"GST Report Details"})}),s.jsx(qe,{children:s.jsxs(Bo,{value:c,onValueChange:C=>d(C),children:[s.jsxs(eo,{children:[s.jsx(wn,{value:"summary",children:"Summary"}),s.jsx(wn,{value:"detailed",children:"Transaction Details"})]}),s.jsx(Nn,{value:"summary",className:"space-y-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"GST Summary"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Basic Amount:"}),s.jsx("span",{className:"font-semibold",children:m(((O=f==null?void 0:f.summary)==null?void 0:O.basicAmount)||0)})]}),s.jsxs("div",{className:"border-t pt-2",children:[s.jsxs("div",{className:"flex justify-between text-blue-600",children:[s.jsx("span",{children:"SGST @ 2.5%:"}),s.jsx("span",{className:"font-semibold",children:m(((T=f==null?void 0:f.summary)==null?void 0:T.sgstAmount)||0)})]}),s.jsxs("div",{className:"flex justify-between text-blue-600",children:[s.jsx("span",{children:"CGST @ 2.5%:"}),s.jsx("span",{className:"font-semibold",children:m(((E=f==null?void 0:f.summary)==null?void 0:E.cgstAmount)||0)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold text-blue-600",children:[s.jsx("span",{children:"Total GST:"}),s.jsx("span",{children:m(((Z=f==null?void 0:f.summary)==null?void 0:Z.totalGstAmount)||0)})]})]}),s.jsx("div",{className:"border-t pt-2",children:s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"Total Amount:"}),s.jsx("span",{children:m(f.summary.totalAmount)})]})})]})]})})}),s.jsx(Nn,{value:"detailed",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("div",{className:"min-w-full",children:[s.jsx("div",{className:"grid gap-3 md:hidden",children:f.transactions.map((C,P)=>s.jsx(Re,{className:"p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:C.lotNumber}),s.jsx("span",{className:"text-sm text-gray-500",children:C.date})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Weight:"}),s.jsxs("div",{children:[C.weight.toFixed(2)," kg"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Quintals:"}),s.jsx("div",{children:C.weightQuintals.toFixed(2)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Basic:"}),s.jsx("div",{children:m(C.basicAmount)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Total GST:"}),s.jsx("div",{className:"text-blue-600 font-semibold",children:m(C.totalGstAmount)})]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[s.jsx("span",{className:"text-gray-500 text-sm",children:"Total Amount:"}),s.jsx("div",{className:"font-bold text-lg",children:m(C.totalAmount)})]})]})},P))}),s.jsx("div",{className:"hidden md:block",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Date"}),s.jsx($e,{children:"Lot Number"}),s.jsx($e,{children:"Weight (kg)"}),s.jsx($e,{children:"Weight (quintals)"}),s.jsx($e,{children:"Basic Amount"}),s.jsx($e,{children:"SGST"}),s.jsx($e,{children:"CGST"}),s.jsx($e,{children:"Total GST"}),s.jsx($e,{children:"Total Amount"})]})}),s.jsx(ps,{children:f.transactions.map((C,P)=>s.jsxs(on,{children:[s.jsx(Be,{children:C.date}),s.jsx(Be,{className:"font-medium",children:C.lotNumber}),s.jsx(Be,{children:C.weight.toFixed(2)}),s.jsx(Be,{children:C.weightQuintals.toFixed(2)}),s.jsx(Be,{children:m(C.basicAmount)}),s.jsx(Be,{className:"text-blue-600",children:m(C.sgstAmount)}),s.jsx(Be,{className:"text-blue-600",children:m(C.cgstAmount)}),s.jsx(Be,{className:"text-blue-600 font-semibold",children:m(C.totalGstAmount)}),s.jsx(Be,{className:"font-semibold",children:m(C.totalAmount)})]},P))})]})})]})})})]})})]})]}),h&&s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2",children:"Generating GST report..."})]})]})]})}const dn=e=>{const t=typeof e=="string"?parseFloat(e):e;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(t)},Zj=e=>new Date(e).toLocaleDateString("en-GB");function UG(){const{user:e}=Oo(),[t,n]=N.useState("today"),[r,i]=N.useState(""),[a,o]=N.useState(""),c=(()=>{const v=new Date,x=v.toISOString().split("T")[0];switch(t){case"today":return{startDate:x,endDate:x};case"this_week":const _=new Date(v);return _.setDate(v.getDate()-v.getDay()),{startDate:_.toISOString().split("T")[0],endDate:x};case"this_month":return{startDate:new Date(v.getFullYear(),v.getMonth(),1).toISOString().split("T")[0],endDate:x};case"this_quarter":const M=Math.floor(v.getMonth()/3);return{startDate:new Date(v.getFullYear(),M*3,1).toISOString().split("T")[0],endDate:x};case"fiscal_year":return{fiscalYear:"2025-26"};case"custom":return{startDate:r,endDate:a};default:return{startDate:x,endDate:x}}})(),{data:d,isLoading:f,error:h}=kt({queryKey:["trading-details",c],queryFn:async()=>{const v=new URLSearchParams;c.startDate&&v.set("startDate",c.startDate),c.endDate&&v.set("endDate",c.endDate),c.fiscalYear&&v.set("fiscalYear",c.fiscalYear);const x=await fetch(`/api/accounting/trading-details?${v}`);if(!x.ok)throw new Error("Failed to fetch trading details");return x.json()},enabled:!!e&&(!!c.startDate||!!c.fiscalYear)}),g=()=>{switch(t){case"today":return"Today's Trading Details";case"this_week":return"This Week's Trading Details";case"this_month":return"This Month's Trading Details";case"this_quarter":return"This Quarter's Trading Details";case"fiscal_year":return"Fiscal Year Trading Details";case"custom":return"Custom Period Trading Details";default:return"Trading Details"}};if(f)return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center",children:"Loading trading details..."})})]});if(h)return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsx("div",{className:"text-center text-red-600",children:"Error loading trading details"})})]});const m=(d==null?void 0:d.summary)||{},S=(d==null?void 0:d.trading_margin_breakdown)||{},y=(d==null?void 0:d.buyer_invoices)||[],j=(d==null?void 0:d.farmer_bills)||[];return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Final Accounts"}),s.jsx("p",{className:"text-gray-600 mt-1",children:g()})]}),s.jsx(Bi,{})]}),s.jsxs(Re,{className:"mb-8",children:[s.jsx(it,{children:s.jsxs(ct,{className:"flex items-center gap-2",children:[s.jsx(Ao,{className:"h-5 w-5"}),"Select Period"]})}),s.jsx(qe,{children:s.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[s.jsxs("div",{className:"flex-1 min-w-[200px]",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Period"}),s.jsxs(rr,{value:t,onValueChange:n,children:[s.jsx(Wn,{children:s.jsx(sr,{})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"today",children:"Today"}),s.jsx(Tt,{value:"this_week",children:"This Week"}),s.jsx(Tt,{value:"this_month",children:"This Month"}),s.jsx(Tt,{value:"this_quarter",children:"This Quarter"}),s.jsx(Tt,{value:"fiscal_year",children:"Fiscal Year 2025-26"}),s.jsx(Tt,{value:"custom",children:"Custom Range"})]})]})]}),t==="custom"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 min-w-[150px]",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",value:r,onChange:v=>i(v.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]}),s.jsxs("div",{className:"flex-1 min-w-[150px]",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",value:a,onChange:v=>o(v.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Cash Inflow (Buyers)"}),s.jsx(Dm,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:dn(m.total_cash_inflow||0)}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Basic: ",dn(m.total_basic_amount||0)]})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Cash Outflow (Farmers)"}),s.jsx(Tb,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:dn(m.total_cash_outflow||0)}),s.jsxs("p",{className:"text-xs text-gray-600",children:["Gross: ",dn(m.total_gross_amount||0)]})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Tax Collected"}),s.jsx(fx,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:dn(m.total_taxes_collected||0)}),s.jsx("p",{className:"text-xs text-gray-600",children:"GST + CESS collected"})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Net Profit (Margin)"}),s.jsx(Pb,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:dn(m.net_profit||0)}),s.jsx("p",{className:"text-xs text-gray-600",children:"Trading margin earned"})]})]})]}),s.jsxs(Bo,{defaultValue:"breakdown",className:"space-y-6",children:[s.jsxs(eo,{className:"grid w-full grid-cols-7",children:[s.jsx(wn,{value:"breakdown",children:"Trading Breakdown"}),s.jsx(wn,{value:"invoices",children:"Buyer Invoices"}),s.jsx(wn,{value:"bills",children:"Farmer Bills"}),s.jsx(wn,{value:"margin",children:"Margin Analysis"}),s.jsx(wn,{value:"expenses",children:"Expenses"}),s.jsx(wn,{value:"balance-sheet",children:"Balance Sheet"}),s.jsx(wn,{value:"ledger",children:"Ledger"})]}),s.jsx(Nn,{value:"breakdown",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Cash Flow Analysis"}),s.jsx(Cn,{children:"Trader's P&L on transactions"})]}),s.jsxs(qe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:"Cash Inflow from Buyers:"}),s.jsx("span",{className:"font-bold text-green-600",children:dn(m.total_cash_inflow||0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-red-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:"Cash Outflow to Farmers:"}),s.jsx("span",{className:"font-bold text-red-600",children:dn(m.total_cash_outflow||0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-100 rounded-lg border-t-2 border-gray-300",children:[s.jsx("span",{className:"font-medium",children:"Difference (Inflows - Outflows):"}),s.jsx("span",{className:"font-bold text-purple-600",children:dn(m.cash_difference||0)})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Breakdown:"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax Collected (GST + CESS):"}),s.jsx("span",{className:"font-medium",children:dn(m.total_taxes_collected||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Trading Margin (sum of deductions):"}),s.jsx("span",{className:"font-medium",children:dn(m.total_deductions||0)})]}),s.jsxs("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[s.jsx("span",{children:"Net Profit (Trader's Margin):"}),s.jsx("span",{className:"text-green-600",children:dn(m.net_profit||0)})]})]})]})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Tax Summary"}),s.jsx(Cn,{children:"GST and CESS collected"})]}),s.jsxs(qe,{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:"Total GST Collected:"}),s.jsx("span",{className:"font-bold text-blue-600",children:dn(m.total_gst_collected||0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-indigo-50 rounded-lg",children:[s.jsx("span",{className:"font-medium",children:"Total CESS Collected:"}),s.jsx("span",{className:"font-bold text-indigo-600",children:dn(m.total_cess_collected||0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-100 rounded-lg border-t-2 border-gray-300",children:[s.jsx("span",{className:"font-medium",children:"Total Tax Collected:"}),s.jsx("span",{className:"font-bold text-purple-600",children:dn(m.total_taxes_collected||0)})]}),s.jsx("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Note:"})," Taxes are eventually remitted to the government. Your true net profit is the trading margin: ",s.jsx("strong",{children:dn(m.net_profit||0)})]})})]})]})]})}),s.jsx(Nn,{value:"invoices",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Buyer Invoices (Cash Inflow)"}),s.jsx(Cn,{children:"Tax invoices generated for buyers"})]}),s.jsx(qe,{children:y.length>0?s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Invoice #"}),s.jsx($e,{children:"Buyer"}),s.jsx($e,{children:"Date"}),s.jsx($e,{children:"Basic Amount"}),s.jsx($e,{children:"Total Amount"}),s.jsx($e,{children:"Tax Collected"})]})}),s.jsx(ps,{children:y.map((v,x)=>s.jsxs(on,{children:[s.jsx(Be,{className:"font-mono",children:v.invoice_number}),s.jsx(Be,{children:v.buyer_name}),s.jsx(Be,{children:Zj(v.invoice_date)}),s.jsx(Be,{children:dn(v.basic_amount)}),s.jsx(Be,{className:"font-semibold text-green-600",children:dn(v.total_amount)}),s.jsx(Be,{className:"font-semibold text-blue-600",children:dn(v.total_taxes_collected)})]},x))})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No buyer invoices found for the selected period"})})]})}),s.jsx(Nn,{value:"bills",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Farmer Bills (Cash Outflow)"}),s.jsx(Cn,{children:"Payment bills generated for farmers"})]}),s.jsx(qe,{children:j.length>0?s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Patti #"}),s.jsx($e,{children:"Farmer"}),s.jsx($e,{children:"Date"}),s.jsx($e,{children:"Gross Amount"}),s.jsx($e,{children:"Total Deductions"}),s.jsx($e,{children:"Net Payable"})]})}),s.jsx(ps,{children:j.map((v,x)=>s.jsxs(on,{children:[s.jsx(Be,{className:"font-mono",children:v.patti_number}),s.jsx(Be,{children:v.farmer_name}),s.jsx(Be,{children:Zj(v.bill_date)}),s.jsx(Be,{children:dn(v.gross_amount)}),s.jsx(Be,{className:"font-semibold text-orange-600",children:dn(v.total_deductions)}),s.jsx(Be,{className:"font-semibold text-red-600",children:dn(v.net_payable)})]},x))})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No farmer bills found for the selected period"})})]})}),s.jsx(Nn,{value:"margin",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Trading Margin Breakdown"}),s.jsx(Cn,{children:"Detailed breakdown of your trading profit"})]}),s.jsx(qe,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Deduction Sources"}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{children:"Hamali:"}),s.jsx("span",{className:"font-medium",children:dn(S.hamali||0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{children:"Vehicle Rent:"}),s.jsx("span",{className:"font-medium",children:dn(S.vehicle_rent||0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{children:"Empty Bags:"}),s.jsx("span",{className:"font-medium",children:dn(S.empty_bags||0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{children:"Advance:"}),s.jsx("span",{className:"font-medium",children:dn(S.advance||0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{children:"Rok Commission (3%):"}),s.jsx("span",{className:"font-medium",children:dn(S.rok_commission||0)})]}),s.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[s.jsx("span",{children:"Other Deductions:"}),s.jsx("span",{className:"font-medium",children:dn(S.other||0)})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900",children:"Summary"}),s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border-2 border-green-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"font-semibold",children:"Total Trading Margin:"}),s.jsx("span",{className:"font-bold text-green-600 text-lg",children:dn(S.total||0)})]}),s.jsx("p",{className:"text-sm text-green-700",children:"This is your actual profit from trading operations"})]}),s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[s.jsx("h5",{className:"font-semibold text-blue-900 mb-2",children:"Profit Calculation:"}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsx("div",{children:"• Revenue from deductions charged to farmers"}),s.jsx("div",{children:"• Commission on total trading volume"}),s.jsx("div",{children:"• Service charges for facilities provided"}),s.jsxs("div",{className:"font-semibold text-blue-800 pt-2",children:["= Net Trading Profit: ",dn(S.total||0)]})]})]})]})]})})]})}),s.jsx(Nn,{value:"expenses",children:s.jsx(VG,{dateRange:c})}),s.jsx(Nn,{value:"balance-sheet",children:s.jsx(WG,{dateRange:c})}),s.jsx(Nn,{value:"ledger",children:s.jsx(HG,{dateRange:c})})]})]})]})}function VG({dateRange:e}){var d,f,h,g,m,S,y,j;const[t,n]=N.useState(!1),[r,i]=N.useState({category:"",description:"",amount:"",paymentMethod:"cash",receiptNumber:"",vendorName:"",expenseDate:new Date().toISOString().split("T")[0]});tc();const a=new URLSearchParams;e.fiscalYear?a.append("fiscalYear",e.fiscalYear):(a.append("startDate",e.startDate),a.append("endDate",e.endDate));const{data:o}=kt({queryKey:["/api/accounting/trading-details?"+a.toString()],staleTime:0}),l=[{value:"office",label:"Office Expenses"},{value:"vehicle",label:"Vehicle & Transport"},{value:"utilities",label:"Utilities"},{value:"staff",label:"Staff Expenses"},{value:"licenses",label:"Licenses & Fees"},{value:"maintenance",label:"Maintenance"},{value:"marketing",label:"Marketing"},{value:"other",label:"Other Expenses"}],c=v=>{const x=typeof v=="string"?parseFloat(v):v;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(x||0)};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Business Expenses Management"}),s.jsxs(ds,{open:t,onOpenChange:n,children:[s.jsx(Xa,{asChild:!0,children:s.jsx(Le,{children:"Add New Expense"})}),s.jsxs(Vr,{className:"max-w-lg",children:[s.jsxs(Wr,{children:[s.jsx(Hr,{children:"Add Business Expense"}),s.jsx(j5,{children:"Record a new business expense"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),s.jsxs(rr,{value:r.category,onValueChange:v=>i(x=>({...x,category:v})),children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"Select category"})}),s.jsx(Hn,{children:l.map(v=>s.jsx(Tt,{value:v.value,children:v.label},v.value))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),s.jsx(At,{type:"text",placeholder:"Expense description",value:r.description,onChange:v=>i(x=>({...x,description:v}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Amount (₹)"}),s.jsx(At,{type:"number",placeholder:"Amount",value:r.amount,onChange:v=>i(x=>({...x,amount:v}))})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Le,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(Le,{children:"Add Expense"})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(Re,{children:s.jsxs(qe,{className:"p-4",children:[s.jsx("div",{className:"text-sm font-medium",children:"Trading Deductions"}),s.jsx("div",{className:"text-2xl font-bold",children:c(((d=o==null?void 0:o.summary)==null?void 0:d.total_deductions)||0)}),s.jsx("div",{className:"text-xs text-gray-600",children:"Service charges collected"})]})}),s.jsx(Re,{children:s.jsxs(qe,{className:"p-4",children:[s.jsx("div",{className:"text-sm font-medium",children:"Tax Collected"}),s.jsx("div",{className:"text-2xl font-bold",children:c(((f=o==null?void 0:o.summary)==null?void 0:f.total_taxes_collected)||0)}),s.jsx("div",{className:"text-xs text-gray-600",children:"GST + CESS to remit"})]})}),s.jsx(Re,{children:s.jsxs(qe,{className:"p-4",children:[s.jsx("div",{className:"text-sm font-medium",children:"Net Trading Profit"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:c(((h=o==null?void 0:o.summary)==null?void 0:h.net_profit)||0)}),s.jsx("div",{className:"text-xs text-gray-600",children:"After all trading costs"})]})})]}),s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Trading Cost Analysis"}),s.jsx(Cn,{children:"Breakdown of your trading operation costs and earnings"})]}),s.jsx(qe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-green-900 mb-2",children:"Revenue Sources:"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total Cash from Buyers:"}),s.jsx("span",{className:"font-medium",children:c(((g=o==null?void 0:o.summary)==null?void 0:g.total_cash_inflow)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Service Charges Collected:"}),s.jsx("span",{className:"font-medium",children:c(((m=o==null?void 0:o.summary)==null?void 0:m.total_deductions)||0)})]})]})]}),s.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:"Costs & Payments:"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Payments to Farmers:"}),s.jsx("span",{className:"font-medium",children:c(((S=o==null?void 0:o.summary)==null?void 0:S.total_cash_outflow)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax Liabilities (GST+CESS):"}),s.jsx("span",{className:"font-medium",children:c(((y=o==null?void 0:o.summary)==null?void 0:y.total_taxes_collected)||0)})]})]})]}),s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border-l-4 border-blue-400",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Net Position:"}),s.jsxs("div",{className:"flex justify-between text-lg",children:[s.jsx("span",{children:"Trading Profit (Your Earnings):"}),s.jsx("span",{className:"font-bold text-green-600",children:c(((j=o==null?void 0:o.summary)==null?void 0:j.net_profit)||0)})]})]})]})})]})]})}function WG({dateRange:e}){var m,S,y,j;const t=new URLSearchParams;e.fiscalYear?t.append("fiscalYear",e.fiscalYear):(t.append("startDate",e.startDate),t.append("endDate",e.endDate));const{data:n}=kt({queryKey:["/api/accounting/trading-details?"+t.toString()],staleTime:0}),r=v=>{const x=typeof v=="string"?parseFloat(v):v;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(x||0)},i=((m=n==null?void 0:n.summary)==null?void 0:m.total_cash_inflow)||0,a=((S=n==null?void 0:n.summary)==null?void 0:S.total_cash_outflow)||0,o=((y=n==null?void 0:n.summary)==null?void 0:y.net_profit)||0,l=((j=n==null?void 0:n.summary)==null?void 0:j.total_taxes_collected)||0,c=i-a,d=l,f=o,h=c,g=d+f;return s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Balance Sheet"}),s.jsx(Cn,{children:"Financial position from trading operations"})]}),s.jsxs(qe,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-600 mb-3",children:"ASSETS"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Cash"}),s.jsx("span",{children:r(c)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[s.jsx("span",{children:"Total Assets"}),s.jsx("span",{children:r(h)})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-red-600 mb-3",children:"LIABILITIES & EQUITY"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"GST & CESS Payable"}),s.jsx("span",{children:r(d)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Retained Earnings (Net Profit)"}),s.jsx("span",{children:r(f)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[s.jsx("span",{children:"Total Liab & Equity"}),s.jsx("span",{children:r(g)})]})]})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Trading Summary:"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Cash from Buyers:"}),s.jsx("span",{className:"font-medium text-green-600",children:r(i)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Paid to Farmers:"}),s.jsx("span",{className:"font-medium text-red-600",children:r(a)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Taxes Collected:"}),s.jsx("span",{className:"font-medium text-blue-600",children:r(d)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-1",children:[s.jsx("span",{children:"Net Cash Position:"}),s.jsx("span",{className:"text-green-600",children:r(c)})]})]})]})]})]})}function HG({dateRange:e}){var g,m,S;const t=new URLSearchParams;e.fiscalYear?t.append("fiscalYear",e.fiscalYear):(t.append("startDate",e.startDate),t.append("endDate",e.endDate));const{data:n}=kt({queryKey:["/api/accounting/trading-details?"+t.toString()],staleTime:0}),r=y=>{const j=typeof y=="string"?parseFloat(y):y;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(j||0)},i=[],a=e.startDate||new Date().toISOString().split("T")[0],o=((g=n==null?void 0:n.summary)==null?void 0:g.total_cash_inflow)||0,l=((m=n==null?void 0:n.summary)==null?void 0:m.total_cash_outflow)||0,c=((S=n==null?void 0:n.summary)==null?void 0:S.total_taxes_collected)||0;o>0&&(i.push({id:"sale-receivable",date:a,account:"Accounts Receivable – Buyers",description:"Sale to Buyer",debit:Math.round(o),credit:0,type:"sale"}),i.push({id:"sale-revenue",date:a,account:"Sales Revenue",description:"Sale to Buyer",debit:0,credit:3e5,type:"revenue"}),i.push({id:"sale-tax",date:a,account:"GST & Cess Payable",description:"Sale to Buyer",debit:0,credit:Math.round(c),type:"tax"})),l>0&&(i.push({id:"purchase-inventory",date:a,account:"Purchases (Inventory/COGS)",description:"Purchase from Farmer",debit:3e5,credit:0,type:"purchase"}),i.push({id:"purchase-payable",date:a,account:"Accounts Payable – Farmer",description:"Purchase from Farmer",debit:0,credit:3e5,type:"payable"}));const d=9,f=2e3,h=d+f;return i.push({id:"expense-hamali",date:a,account:"Hamali Expense",description:"Direct Expenses Paid",debit:d,credit:0,type:"expense"}),i.push({id:"expense-vehicle",date:a,account:"Vehicle Rent Expense",description:"Direct Expenses Paid",debit:f,credit:0,type:"expense"}),i.push({id:"expense-cash",date:a,account:"Cash/Bank",description:"Direct Expenses Paid",debit:0,credit:h,type:"payment"}),l>0&&(i.push({id:"settlement-payable",date:a,account:"Accounts Payable – Farmer",description:"Settlement of Farmer Payable & Profit",debit:Math.round(l),credit:0,type:"settlement"}),i.push({id:"settlement-cash",date:a,account:"Cash/Bank",description:"Settlement of Farmer Payable & Profit",debit:0,credit:Math.round(l),type:"payment"})),i.sort((y,j)=>new Date(y.date).getTime()-new Date(j.date).getTime()),s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Trading Ledger"}),s.jsx(Cn,{children:"All trading transactions and payments"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Date"}),s.jsx($e,{children:"Account"}),s.jsx($e,{children:"Description"}),s.jsx($e,{children:"Debit"}),s.jsx($e,{children:"Credit"}),s.jsx($e,{children:"Type"})]})}),s.jsxs(ps,{children:[i.map(y=>s.jsxs(on,{children:[s.jsx(Be,{children:new Date(y.date).toLocaleDateString()}),s.jsx(Be,{children:y.account}),s.jsx(Be,{children:y.description}),s.jsx(Be,{children:y.debit>0?r(y.debit):"-"}),s.jsx(Be,{children:y.credit>0?r(y.credit):"-"}),s.jsx(Be,{children:s.jsx(Mn,{variant:y.type==="sale"||y.type==="revenue"?"default":y.type==="tax"?"secondary":y.type==="purchase"?"destructive":"outline",children:y.type})})]},y.id)),i.length===0&&s.jsx(on,{children:s.jsx(Be,{colSpan:6,className:"text-center text-gray-500",children:"No trading transactions for this period"})})]})]})}),i.length>0&&s.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"Transaction Summary:"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Sales:"}),s.jsx("span",{className:"ml-2 font-medium",children:i.filter(y=>y.type==="sale").length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Purchases:"}),s.jsx("span",{className:"ml-2 font-medium",children:i.filter(y=>y.type==="purchase").length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Payments:"}),s.jsx("span",{className:"ml-2 font-medium",children:i.filter(y=>y.type==="payment").length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Tax Records:"}),s.jsx("span",{className:"ml-2 font-medium",children:i.filter(y=>y.type==="tax").length})]})]})]})]})]})}function wa(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function sd(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const RI=6048e5,GG=864e5;let KG={};function I0(){return KG}function bm(e,t){var l,c,d,f;const n=I0(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,i=wa(e),a=i.getDay(),o=(a<r?7:0)+a-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Ox(e){return bm(e,{weekStartsOn:1})}function OI(e){const t=wa(e),n=t.getFullYear(),r=sd(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const i=Ox(r),a=sd(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Ox(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Xj(e){const t=wa(e);return t.setHours(0,0,0,0),t}function Jj(e){const t=wa(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function QG(e,t){const n=Xj(e),r=Xj(t),i=+n-Jj(n),a=+r-Jj(r);return Math.round((i-a)/GG)}function YG(e){const t=OI(e),n=sd(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Ox(n)}function ZG(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function XG(e){if(!ZG(e)&&typeof e!="number")return!1;const t=wa(e);return!isNaN(Number(t))}function JG(e){const t=wa(e),n=sd(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const eK={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tK=(e,t,n)=>{let r;const i=eK[e];return typeof i=="string"?r=i:t===1?r=i.one:r=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function _1(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const nK={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rK={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sK={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},iK={date:_1({formats:nK,defaultWidth:"full"}),time:_1({formats:rK,defaultWidth:"full"}),dateTime:_1({formats:sK,defaultWidth:"full"})},aK={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oK=(e,t,n,r)=>aK[e];function rh(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const lK={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cK={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},dK={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uK={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hK={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mK=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},pK={ordinalNumber:mK,era:rh({values:lK,defaultWidth:"wide"}),quarter:rh({values:cK,defaultWidth:"wide",argumentCallback:e=>e-1}),month:rh({values:dK,defaultWidth:"wide"}),day:rh({values:uK,defaultWidth:"wide"}),dayPeriod:rh({values:fK,defaultWidth:"wide",formattingValues:hK,defaultFormattingWidth:"wide"})};function sh(e){return(t,n={})=>{const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?xK(l,h=>h.test(o)):gK(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const f=t.slice(o.length);return{value:d,rest:f}}}function gK(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function xK(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function vK(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const i=r[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const yK=/^(\d+)(th|st|nd|rd)?/i,bK=/\d+/i,wK={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},NK={any:[/^b/i,/^(a|c)/i]},jK={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},SK={any:[/1/i,/2/i,/3/i,/4/i]},_K={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},CK={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},AK={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kK={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},PK={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},TK={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},LK={ordinalNumber:vK({matchPattern:yK,parsePattern:bK,valueCallback:e=>parseInt(e,10)}),era:sh({matchPatterns:wK,defaultMatchWidth:"wide",parsePatterns:NK,defaultParseWidth:"any"}),quarter:sh({matchPatterns:jK,defaultMatchWidth:"wide",parsePatterns:SK,defaultParseWidth:"any",valueCallback:e=>e+1}),month:sh({matchPatterns:_K,defaultMatchWidth:"wide",parsePatterns:CK,defaultParseWidth:"any"}),day:sh({matchPatterns:AK,defaultMatchWidth:"wide",parsePatterns:kK,defaultParseWidth:"any"}),dayPeriod:sh({matchPatterns:PK,defaultMatchWidth:"any",parsePatterns:TK,defaultParseWidth:"any"})},EK={code:"en-US",formatDistance:tK,formatLong:iK,formatRelative:oK,localize:pK,match:LK,options:{weekStartsOn:0,firstWeekContainsDate:1}};function IK(e){const t=wa(e);return QG(t,JG(t))+1}function DK(e){const t=wa(e),n=+Ox(t)-+YG(t);return Math.round(n/RI)+1}function BI(e,t){var f,h,g,m;const n=wa(e),r=n.getFullYear(),i=I0(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(f=t==null?void 0:t.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(g=i.locale)==null?void 0:g.options)==null?void 0:m.firstWeekContainsDate)??1,o=sd(e,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=bm(o,t),c=sd(e,0);c.setFullYear(r,0,a),c.setHours(0,0,0,0);const d=bm(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function FK(e,t){var l,c,d,f;const n=I0(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,i=BI(e,t),a=sd(e,0);return a.setFullYear(i,0,r),a.setHours(0,0,0,0),bm(a,t)}function MK(e,t){const n=wa(e),r=+bm(n,t)-+FK(n,t);return Math.round(r/RI)+1}function xn(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ol={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return xn(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):xn(n+1,2)},d(e,t){return xn(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return xn(e.getHours()%12||12,t.length)},H(e,t){return xn(e.getHours(),t.length)},m(e,t){return xn(e.getMinutes(),t.length)},s(e,t){return xn(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return xn(i,t.length)}},Gd={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},e4={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ol.y(e,t)},Y:function(e,t,n,r){const i=BI(e,r),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return xn(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):xn(a,t.length)},R:function(e,t){const n=OI(e);return xn(n,t.length)},u:function(e,t){const n=e.getFullYear();return xn(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return xn(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return xn(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ol.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return xn(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const i=MK(e,r);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):xn(i,t.length)},I:function(e,t,n){const r=DK(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):xn(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ol.d(e,t)},D:function(e,t,n){const r=IK(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):xn(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return xn(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const i=e.getDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return xn(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),i=r===0?7:r;switch(t){case"i":return String(i);case"ii":return xn(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let i;switch(r===12?i=Gd.noon:r===0?i=Gd.midnight:i=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let i;switch(r>=17?i=Gd.evening:r>=12?i=Gd.afternoon:r>=4?i=Gd.morning:i=Gd.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ol.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ol.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):xn(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):xn(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ol.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ol.s(e,t)},S:function(e,t){return ol.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return n4(r);case"XXXX":case"XX":return wc(r);case"XXXXX":case"XXX":default:return wc(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return n4(r);case"xxxx":case"xx":return wc(r);case"xxxxx":case"xxx":default:return wc(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+t4(r,":");case"OOOO":default:return"GMT"+wc(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+t4(r,":");case"zzzz":default:return"GMT"+wc(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return xn(r,t.length)},T:function(e,t,n){const r=e.getTime();return xn(r,t.length)}};function t4(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=Math.trunc(r/60),a=r%60;return a===0?n+String(i):n+String(i)+t+xn(a,2)}function n4(e,t){return e%60===0?(e>0?"-":"+")+xn(Math.abs(e)/60,2):wc(e,t)}function wc(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),i=xn(Math.trunc(r/60),2),a=xn(r%60,2);return n+i+t+a}const r4=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},zI=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},RK=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return r4(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",r4(r,t)).replace("{{time}}",zI(i,t))},OK={p:zI,P:RK},BK=/^D+$/,zK=/^Y+$/,$K=["D","DD","YY","YYYY"];function qK(e){return BK.test(e)}function UK(e){return zK.test(e)}function VK(e,t,n){const r=WK(e,t,n);if(console.warn(r),$K.includes(e))throw new RangeError(r)}function WK(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const HK=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,GK=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,KK=/^'([^]*?)'?$/,QK=/''/g,YK=/[a-zA-Z]/;function is(e,t,n){var f,h,g,m;const r=I0(),i=r.locale??EK,a=r.firstWeekContainsDate??((h=(f=r.locale)==null?void 0:f.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((m=(g=r.locale)==null?void 0:g.options)==null?void 0:m.weekStartsOn)??0,l=wa(e);if(!XG(l))throw new RangeError("Invalid time value");let c=t.match(GK).map(S=>{const y=S[0];if(y==="p"||y==="P"){const j=OK[y];return j(S,i.formatLong)}return S}).join("").match(HK).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const y=S[0];if(y==="'")return{isToken:!1,value:ZK(S)};if(e4[y])return{isToken:!0,value:S};if(y.match(YK))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:S}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(S=>{if(!S.isToken)return S.value;const y=S.value;(UK(y)||qK(y))&&VK(y,t,String(e));const j=e4[y[0]];return j(l,y,i.localize,d)}).join("")}function ZK(e){const t=e.match(KK);return t?t[1].replace(QK,"'"):e}function XK(){var O,T,E,Z,C,P,G,I,V;const[e,t]=N.useState({startDate:is(new Date,"yyyy-MM-dd"),endDate:is(new Date,"yyyy-MM-dd")}),[n,r]=N.useState(!1),[i,a]=N.useState({category:"",subcategory:"",description:"",amount:"",paymentMethod:"cash",receiptNumber:"",vendorName:"",expenseDate:is(new Date,"yyyy-MM-dd")}),o=tc(),{data:l,isLoading:c}=kt({queryKey:["/api/accounting/profit-loss-comprehensive",e.startDate,e.endDate],staleTime:0}),{data:d,isLoading:f}=kt({queryKey:["/api/accounting/balance-sheet",e.endDate],staleTime:0}),{data:h,isLoading:g}=kt({queryKey:["/api/accounting/ledger",e.startDate,e.endDate],staleTime:0}),{data:m,isLoading:S}=kt({queryKey:["/api/accounting/expenses/summary",e.startDate,e.endDate],staleTime:0}),{data:y}=kt({queryKey:["/api/accounting/expenses/detailed",e.startDate,e.endDate],staleTime:0}),{data:j,isLoading:v}=kt({queryKey:["/api/accounting/cash-flow",e.startDate,e.endDate],staleTime:0}),x=fn({mutationFn:async z=>await an("POST","/api/accounting/expenses",z),onSuccess:()=>{Tg({title:"Success",description:"Expense added successfully"}),r(!1),a({category:"",subcategory:"",description:"",amount:"",paymentMethod:"cash",receiptNumber:"",vendorName:"",expenseDate:is(new Date,"yyyy-MM-dd")}),o.invalidateQueries()},onError:z=>{Tg({title:"Error",description:"Failed to add expense",variant:"destructive"})}}),_=()=>{if(!i.category||!i.description||!i.amount){Tg({title:"Error",description:"Please fill all required fields",variant:"destructive"});return}x.mutate(i)},k=z=>{const q=typeof z=="string"?parseFloat(z):z;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(q||0)},M=[{value:"office",label:"Office Expenses"},{value:"vehicle",label:"Vehicle & Transport"},{value:"utilities",label:"Utilities"},{value:"staff",label:"Staff Expenses"},{value:"licenses",label:"Licenses & Fees"},{value:"maintenance",label:"Maintenance"},{value:"marketing",label:"Marketing"},{value:"other",label:"Other Expenses"}],L=[{value:"cash",label:"Cash"},{value:"bank",label:"Bank Transfer"},{value:"cheque",label:"Cheque"},{value:"upi",label:"UPI"},{value:"card",label:"Card"}];return s.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[s.jsx(tr,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Comprehensive Final Accounts"}),s.jsx("p",{className:"text-muted-foreground",children:"Complete business accounting with expenses tracking"})]}),s.jsx(Mn,{variant:"outline",className:"text-green-600 border-green-600",children:"COMPLETE ACCOUNTING SYSTEM"})]}),s.jsxs(Re,{children:[s.jsx(it,{children:s.jsxs(ct,{className:"flex items-center gap-2",children:[s.jsx(Ao,{className:"w-5 h-5"}),"Date Range Selection"]})}),s.jsx(qe,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"startDate",children:"Start Date"}),s.jsx(Ze,{id:"startDate",type:"date",value:e.startDate,onChange:z=>t(q=>({...q,startDate:z.target.value}))})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"endDate",children:"End Date"}),s.jsx(Ze,{id:"endDate",type:"date",value:e.endDate,onChange:z=>t(q=>({...q,endDate:z.target.value}))})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(Le,{onClick:()=>o.invalidateQueries(),className:"w-full",children:"Refresh Data"})})]})})]}),s.jsxs(Bo,{defaultValue:"overview",className:"space-y-6",children:[s.jsxs(eo,{className:"grid w-full grid-cols-6",children:[s.jsx(wn,{value:"overview",children:"Overview"}),s.jsx(wn,{value:"profit-loss",children:"Profit & Loss"}),s.jsx(wn,{value:"balance-sheet",children:"Balance Sheet"}),s.jsx(wn,{value:"expenses",children:"Expenses"}),s.jsx(wn,{value:"ledger",children:"Ledger"}),s.jsx(wn,{value:"cash-flow",children:"Cash Flow"})]}),s.jsx(Nn,{value:"overview",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Total Revenue"}),s.jsx(Dm,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:k((l==null?void 0:l.totalRevenue)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Trading + Other Income"})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Total Expenses"}),s.jsx(Tb,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:k((l==null?void 0:l.totalExpenses)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Trading + Operating"})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Net Profit"}),s.jsx(Pb,{className:"h-4 w-4 text-blue-600"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:k((l==null?void 0:l.netProfit)||0)}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(((l==null?void 0:l.profitMargin)||0)*100).toFixed(1),"% margin"]})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ct,{className:"text-sm font-medium",children:"Net Worth"}),s.jsx(zy,{className:"h-4 w-4 text-purple-600"})]}),s.jsxs(qe,{children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:k(((O=d==null?void 0:d.equity)==null?void 0:O.netWorth)||0)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Assets - Liabilities"})]})]})]})}),s.jsx(Nn,{value:"profit-loss",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Comprehensive Profit & Loss Statement"}),s.jsx(Cn,{children:"True business profitability including all expenses"})]}),s.jsx(qe,{children:c?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"REVENUE"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Trading Revenue"}),s.jsx("span",{children:k((l==null?void 0:l.tradingRevenue)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Other Income"}),s.jsx("span",{children:k((l==null?void 0:l.otherIncome)||0)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[s.jsx("span",{children:"Total Revenue"}),s.jsx("span",{children:k((l==null?void 0:l.totalRevenue)||0)})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"EXPENSES"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Trading Expenses"}),s.jsx("span",{children:k((l==null?void 0:l.tradingExpenses)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Operating Expenses"}),s.jsx("span",{children:k((l==null?void 0:l.operatingExpenses)||0)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[s.jsx("span",{children:"Total Expenses"}),s.jsx("span",{children:k((l==null?void 0:l.totalExpenses)||0)})]})]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[s.jsx("span",{children:"NET PROFIT"}),s.jsx("span",{className:(l==null?void 0:l.netProfit)>=0?"text-green-600":"text-red-600",children:k((l==null?void 0:l.netProfit)||0)})]}),s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[s.jsx("span",{children:"Profit Margin"}),s.jsxs("span",{children:[(((l==null?void 0:l.profitMargin)||0)*100).toFixed(2),"%"]})]})]})]})})]})}),s.jsx(Nn,{value:"balance-sheet",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Balance Sheet"}),s.jsxs(Cn,{children:["Financial position as of ",is(new Date(e.endDate),"PPP")]})]}),s.jsx(qe,{children:f?s.jsx("div",{children:"Loading..."}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-blue-600 mb-3",children:"ASSETS"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Cash"}),s.jsx("span",{children:k(((T=d==null?void 0:d.assets)==null?void 0:T.cash)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Bank Balance"}),s.jsx("span",{children:k(((E=d==null?void 0:d.assets)==null?void 0:E.bankBalance)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Accounts Receivable"}),s.jsx("span",{children:k(((Z=d==null?void 0:d.assets)==null?void 0:Z.accountsReceivable)||0)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[s.jsx("span",{children:"Total Assets"}),s.jsx("span",{children:k(((C=d==null?void 0:d.assets)==null?void 0:C.totalAssets)||0)})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-red-600 mb-3",children:"LIABILITIES"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Accounts Payable"}),s.jsx("span",{children:k(((P=d==null?void 0:d.liabilities)==null?void 0:P.accountsPayable)||0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tax Liabilities"}),s.jsx("span",{children:k(((G=d==null?void 0:d.liabilities)==null?void 0:G.taxLiabilities)||0)})]}),s.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[s.jsx("span",{children:"Total Liabilities"}),s.jsx("span",{children:k(((I=d==null?void 0:d.liabilities)==null?void 0:I.totalLiabilities)||0)})]})]}),s.jsxs("div",{className:"mt-6",children:[s.jsx("h3",{className:"font-semibold text-green-600 mb-3",children:"EQUITY"}),s.jsxs("div",{className:"flex justify-between font-semibold",children:[s.jsx("span",{children:"Net Worth"}),s.jsx("span",{children:k(((V=d==null?void 0:d.equity)==null?void 0:V.netWorth)||0)})]})]})]})]})})]})}),s.jsxs(Nn,{value:"expenses",className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Business Expenses Management"}),s.jsxs(ds,{open:n,onOpenChange:r,children:[s.jsx(Xa,{asChild:!0,children:s.jsxs(Le,{children:[s.jsx(By,{className:"w-4 h-4 mr-2"}),"Add Expense"]})}),s.jsxs(Vr,{className:"max-w-2xl",children:[s.jsxs(Wr,{children:[s.jsx(Hr,{children:"Add New Business Expense"}),s.jsx(j5,{children:"Record a new business expense with voice input support"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{children:"Category"}),s.jsxs(rr,{value:i.category,onValueChange:z=>a(q=>({...q,category:z})),children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"Select category"})}),s.jsx(Hn,{children:M.map(z=>s.jsx(Tt,{value:z.value,children:z.label},z.value))})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Subcategory"}),s.jsx(At,{type:"text",placeholder:"Subcategory (optional)",value:i.subcategory,onChange:z=>a(q=>({...q,subcategory:z}))})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Description *"}),s.jsx(At,{type:"text",placeholder:"Expense description",value:i.description,onChange:z=>a(q=>({...q,description:z}))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{children:"Amount *"}),s.jsx(At,{type:"number",placeholder:"Amount in ₹",value:i.amount,onChange:z=>a(q=>({...q,amount:z}))})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Payment Method"}),s.jsxs(rr,{value:i.paymentMethod,onValueChange:z=>a(q=>({...q,paymentMethod:z})),children:[s.jsx(Wn,{children:s.jsx(sr,{})}),s.jsx(Hn,{children:L.map(z=>s.jsx(Tt,{value:z.value,children:z.label},z.value))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{children:"Receipt Number"}),s.jsx(At,{type:"text",placeholder:"Receipt/Invoice number",value:i.receiptNumber,onChange:z=>a(q=>({...q,receiptNumber:z}))})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Vendor Name"}),s.jsx(At,{type:"text",placeholder:"Vendor/Supplier name",value:i.vendorName,onChange:z=>a(q=>({...q,vendorName:z}))})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Expense Date"}),s.jsx(Ze,{type:"date",value:i.expenseDate,onChange:z=>a(q=>({...q,expenseDate:z.target.value}))})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Le,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsx(Le,{onClick:_,disabled:x.isPending,children:x.isPending?"Adding...":"Add Expense"})]})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:m&&Object.entries(m).map(([z,q])=>s.jsx(Re,{children:s.jsxs(qe,{className:"p-4",children:[s.jsx("div",{className:"text-sm font-medium capitalize",children:z.replace("_"," ")}),s.jsx("div",{className:"text-2xl font-bold",children:k(q)})]})},z))}),s.jsxs(Re,{children:[s.jsx(it,{children:s.jsx(ct,{children:"Detailed Expenses"})}),s.jsx(qe,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2",children:"Date"}),s.jsx("th",{className:"text-left py-2",children:"Category"}),s.jsx("th",{className:"text-left py-2",children:"Description"}),s.jsx("th",{className:"text-left py-2",children:"Amount"}),s.jsx("th",{className:"text-left py-2",children:"Payment"}),s.jsx("th",{className:"text-left py-2",children:"Vendor"})]})}),s.jsx("tbody",{children:y==null?void 0:y.map(z=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:is(new Date(z.expenseDate),"MMM dd")}),s.jsx("td",{className:"py-2 capitalize",children:z.category}),s.jsx("td",{className:"py-2",children:z.description}),s.jsx("td",{className:"py-2",children:k(z.amount)}),s.jsx("td",{className:"py-2 capitalize",children:z.paymentMethod}),s.jsx("td",{className:"py-2",children:z.vendorName||"-"})]},z.id))})]})})})]})]}),s.jsx(Nn,{value:"ledger",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"General Ledger"}),s.jsx(Cn,{children:"All accounting transactions in chronological order"})]}),s.jsx(qe,{children:g?s.jsx("div",{children:"Loading..."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2",children:"Date"}),s.jsx("th",{className:"text-left py-2",children:"Account"}),s.jsx("th",{className:"text-left py-2",children:"Description"}),s.jsx("th",{className:"text-left py-2",children:"Debit"}),s.jsx("th",{className:"text-left py-2",children:"Credit"}),s.jsx("th",{className:"text-left py-2",children:"Balance"})]})}),s.jsx("tbody",{children:h==null?void 0:h.map(z=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:z.transactionDate?is(new Date(z.transactionDate),"MMM dd, yyyy"):"-"}),s.jsx("td",{className:"py-2",children:z.accountHead}),s.jsx("td",{className:"py-2",children:z.description}),s.jsx("td",{className:"py-2",children:z.debitAmount!=="0"?k(z.debitAmount):"-"}),s.jsx("td",{className:"py-2",children:z.creditAmount!=="0"?k(z.creditAmount):"-"}),s.jsx("td",{className:"py-2",children:k(z.balance)})]},z.id))})]})})})]})}),s.jsx(Nn,{value:"cash-flow",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Cash Flow Statement"}),s.jsx(Cn,{children:"Money movement tracking"})]}),s.jsx(qe,{children:v?s.jsx("div",{children:"Loading..."}):s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(Re,{children:s.jsxs(qe,{className:"p-4",children:[s.jsx("div",{className:"text-sm font-medium",children:"Operating Cash Flow"}),s.jsx("div",{className:"text-2xl font-bold text-green-600",children:k((j==null?void 0:j.operatingCashFlow)||0)})]})}),s.jsx(Re,{children:s.jsxs(qe,{className:"p-4",children:[s.jsx("div",{className:"text-sm font-medium",children:"Investing Cash Flow"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:k((j==null?void 0:j.investingCashFlow)||0)})]})}),s.jsx(Re,{children:s.jsxs(qe,{className:"p-4",children:[s.jsx("div",{className:"text-sm font-medium",children:"Net Cash Flow"}),s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:k((j==null?void 0:j.netCashFlow)||0)})]})})]})})})]})})]})]})}const A5=N.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:rt("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));A5.displayName="Textarea";function JK(){var ut,Je;const{toast:e}=Qr(),[t,n]=N.useState(!1),[r,i]=N.useState(null),[a,o]=N.useState(""),[l,c]=N.useState(""),[d,f]=N.useState(!1),[h,g]=N.useState({name:"",contactPerson:"",mobile:"",address:"",apmcCode:""}),m=N.useRef(null),S=N.useRef(null),[y,j]=N.useState(()=>{try{const Y=localStorage.getItem("bidForm");if(Y){const de=JSON.parse(Y);return console.log("Restored form data from localStorage:",de),de}}catch(Y){console.error("Error restoring form data:",Y)}return{dalalName:"",lotNumber:"",bidPrice:"",notes:"",chiliPhotos:[]}}),[v,x]=N.useState({open:!1,photos:[],currentIndex:0,lotInfo:{dalalName:"",lotNumber:""},zoom:1,panX:0,panY:0}),{data:_=[],isLoading:k}=kt({queryKey:["/api/bid-dalals"]}),{data:M=[]}=kt({queryKey:["/api/suppliers"]}),L=l.length>0?M.filter(Y=>{const de=l.toLowerCase();return Y.name&&Y.name.toLowerCase().includes(de)||Y.mobile&&Y.mobile.includes(de)||Y.address&&Y.address.toLowerCase().includes(de)}).slice(0,5):[],O=fn({mutationFn:async Y=>{const de=r?`/api/bid-prices/${r.id}`:"/api/bid-prices";return await an(r?"PUT":"POST",de,Y)},onSuccess:()=>{e({title:r?"Bid Updated":"Bid Created",description:`Bid for ${String(y.dalalName)} - Lot ${String(y.lotNumber)} has been ${r?"updated":"created"} successfully.`}),n(!1),i(null),Z(),Tn.invalidateQueries({queryKey:["/api/bid-dalals"]})},onError:Y=>{e({title:"Error",description:Y.message||`Failed to ${r?"update":"create"} bid price.`,variant:"destructive"})}}),T=fn({mutationFn:async Y=>await an("DELETE",`/api/bid-prices/${Y}`),onSuccess:()=>{e({title:"Bid Deleted",description:"Bid price has been deleted successfully."}),Tn.invalidateQueries({queryKey:["/api/bid-dalals"]})},onError:Y=>{e({title:"Error",description:Y.message||"Failed to delete bid price.",variant:"destructive"})}}),E=fn({mutationFn:async Y=>{const de={name:Y.name,apmcCode:Y.apmcCode||null,contactPerson:Y.contactPerson||null,mobile:Y.mobile||null,address:Y.address||null,email:Y.email||null,gstNumber:Y.gstNumber||null,panNumber:Y.panNumber||null,isActive:!0};return await an("POST","/api/suppliers",de)},onSuccess:Y=>{Tn.invalidateQueries({queryKey:["/api/suppliers"]}),f(!1),g({name:"",contactPerson:"",mobile:"",address:"",apmcCode:""});const de=String(Y.name||"");j(We=>({...We,dalalName:de})),e({title:"Success",description:"Dalal created successfully"})},onError:Y=>{e({title:"Error",description:Y.message,variant:"destructive"})}});N.useEffect(()=>{try{localStorage.setItem("bidForm",JSON.stringify(y))}catch(Y){console.error("Error saving form data:",Y)}},[y]);const Z=()=>{j({dalalName:"",lotNumber:"",bidPrice:"",notes:"",chiliPhotos:[]}),c(""),i(null);try{localStorage.removeItem("bidForm"),console.log("Form data cleared from localStorage")}catch(de){console.error("Error clearing form data:",de)}},C=async Y=>{if(Y.preventDefault(),Y.stopPropagation(),O.isPending){console.log("Form submission blocked - mutation in progress");return}if(!y.dalalName||!y.lotNumber||!y.bidPrice){console.log("Form validation failed:",{dalalName:y.dalalName,lotNumber:y.lotNumber,bidPrice:y.bidPrice}),e({title:"Validation Error",description:"Please fill in all required fields: Dalal Name, Lot Number, and Bid Price.",variant:"destructive"});return}const de=parseFloat(y.bidPrice);if(isNaN(de)||de<=0){console.log("Price validation failed:",y.bidPrice),e({title:"Validation Error",description:"Bid price must be a valid positive number.",variant:"destructive"});return}console.log("Submitting bid price with photos:",{dalalName:y.dalalName,lotNumber:y.lotNumber,bidPrice:y.bidPrice,notes:y.notes,photosCount:y.chiliPhotos.length}),O.mutate(y)},P=Y=>{i(Y),j({dalalName:typeof Y.dalalName=="string"?Y.dalalName:String(Y.dalalName||""),lotNumber:typeof Y.lotNumber=="string"?Y.lotNumber:String(Y.lotNumber||""),bidPrice:typeof Y.bidPrice=="string"?Y.bidPrice:String(Y.bidPrice||""),notes:typeof Y.notes=="string"?Y.notes:String(Y.notes||""),chiliPhotos:Array.isArray(Y.chiliPhotos)?Y.chiliPhotos:[]}),n(!0)},G=async Y=>{if(Y){if(!y.dalalName||!y.lotNumber){e({title:"Information Required",description:"Please enter Dalal name and Lot number before uploading photos.",variant:"destructive"});return}console.log("Photo upload starting with:",{dalalName:y.dalalName,lotNumber:y.lotNumber,files:Y.length});try{const de=new FormData;Array.from(Y).forEach(he=>{de.append("photos",he)}),de.append("dalalName",y.dalalName),de.append("lotNumber",y.lotNumber);const We=await fetch("/api/bid-photos",{method:"POST",body:de});if(!We.ok)throw new Error("Upload failed");const{photos:ee}=await We.json(),ce=ee.map(he=>({url:he.url,metadata:he.metadata}));j(he=>({...he,chiliPhotos:[...he.chiliPhotos,...ce]})),e({title:"Success",description:`${ee.length} photo(s) uploaded for ${y.dalalName} - Lot ${y.lotNumber}. Form data saved automatically.`}),console.log("Photos uploaded successfully:",ee.length),console.log("Form data auto-saved to localStorage")}catch(de){console.error("Photo upload error:",de),e({title:"Upload Error",description:"Failed to upload photos. Please try again.",variant:"destructive"})}}},I=()=>{var Y;(Y=S.current)==null||Y.click()},V=async Y=>{Y.preventDefault(),Y.stopPropagation(),await G(Y.target.files),Y.target&&(Y.target.value="")},z=Y=>{j(de=>({...de,chiliPhotos:de.chiliPhotos.filter((We,ee)=>ee!==Y)}))},[q,H]=N.useState(!1),[X,le]=N.useState({x:0,y:0}),[Ce,F]=N.useState(0),J=()=>{x(Y=>({...Y,zoom:Math.min(Y.zoom*1.5,5)}))},re=()=>{x(Y=>({...Y,zoom:Math.max(Y.zoom/1.5,.5)}))},Q=()=>{x(Y=>({...Y,zoom:1,panX:0,panY:0}))},ie=Y=>{Y.preventDefault();const de=Y.deltaY>0?.9:1.1,We=Math.max(.5,Math.min(5,v.zoom*de));x(ee=>({...ee,zoom:We}))},B=Y=>{v.zoom>1&&(H(!0),le({x:Y.clientX-v.panX,y:Y.clientY-v.panY}))},te=Y=>{q&&v.zoom>1&&x(de=>({...de,panX:Y.clientX-X.x,panY:Y.clientY-X.y}))},oe=()=>{H(!1)},_e=Y=>{if(Y.length<2)return 0;const de=Y[0],We=Y[1];return Math.sqrt(Math.pow(We.clientX-de.clientX,2)+Math.pow(We.clientY-de.clientY,2))},we=Y=>{if(Y.touches.length===2){const de=_e(Y.touches);F(de)}else if(Y.touches.length===1&&v.zoom>1){H(!0);const de=Y.touches[0];le({x:de.clientX-v.panX,y:de.clientY-v.panY})}},Ne=Y=>{if(Y.preventDefault(),Y.touches.length===2){const de=_e(Y.touches);if(Ce>0){const We=de/Ce,ee=Math.max(.5,Math.min(5,v.zoom*We));x(ce=>({...ce,zoom:ee}))}F(de)}else if(Y.touches.length===1&&q&&v.zoom>1){const de=Y.touches[0];x(We=>({...We,panX:de.clientX-X.x,panY:de.clientY-X.y}))}},ke=()=>{H(!1),F(0)},Ue=Y=>{const de=typeof Y.name=="string"?Y.name:String(Y.name||"");console.log("Selecting dalal - name:",de,"type:",typeof de),j(We=>({...We,dalalName:de})),c("")},be=Y=>{if(Y.preventDefault(),!h.name){e({title:"Validation Error",description:"Please enter dalal name.",variant:"destructive"});return}E.mutate(h)},se=a?_.filter(Y=>Y.dalalName===a):_;return k?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(Y=>s.jsx("div",{className:"h-32 bg-gray-200 rounded"},Y))})]})})]}):s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsxs("div",{className:"p-2 sm:p-6 space-y-4 sm:space-y-6",children:[s.jsx(Bi,{}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Bid Prices Management"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Track and manage bid prices from different dalals"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[s.jsxs(Le,{variant:"outline",onClick:()=>f(!0),className:"w-full sm:w-auto",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Create Supplier"]}),s.jsxs(ds,{open:t,onOpenChange:n,children:[s.jsx(Xa,{asChild:!0,children:s.jsxs(Le,{onClick:()=>{Z(),i(null)},className:"w-full sm:w-auto",children:[s.jsx(By,{className:"h-4 w-4 mr-2"}),"New Bid"]})}),s.jsxs(Vr,{className:"w-[95vw] max-w-2xl h-[95vh] max-h-[95vh] overflow-hidden flex flex-col p-0",children:[s.jsx("div",{className:"p-4 pb-0",children:s.jsxs(Wr,{children:[s.jsx(Hr,{children:r?"Edit Bid Price":"Create New Bid Price"}),y.dalalName||y.lotNumber||y.bidPrice?s.jsx("div",{className:"text-sm text-green-600 bg-green-50 p-2 rounded",children:"💾 Form data auto-saved (survives page reload)"}):null]})}),s.jsxs("form",{onSubmit:C,className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"dalalName",className:"text-base font-medium",children:"Select Supplier/Dalal *"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ze,{id:"dalalName",placeholder:"Type to search suppliers...",value:y.dalalName,onChange:Y=>{const de=Y.target.value;j(We=>({...We,dalalName:de})),c(de)},required:!0,className:"min-h-[44px] text-base"}),l&&s.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-md shadow-lg z-10 max-h-48 overflow-y-auto",children:L.length>0?L.map((Y,de)=>s.jsxs("div",{className:"p-3 hover:bg-gray-50 cursor-pointer border-b last:border-b-0",onClick:()=>Ue(Y),children:[s.jsx("div",{className:"font-medium text-gray-900",children:String(Y.name||"")}),Y.mobile&&s.jsxs("div",{className:"text-sm text-gray-500",children:["📱 ",String(Y.mobile)]}),Y.address&&s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["📍 ",String(Y.address)]})]},de)):s.jsxs("div",{className:"p-3 text-center text-gray-500",children:[s.jsxs("div",{className:"text-sm",children:['No suppliers found matching "',l,'"']}),s.jsx("div",{className:"text-xs mt-1",children:'Use "Create Supplier" button to add new supplier'})]})})]}),s.jsx("p",{className:"text-sm text-gray-500",children:`💡 Search by name, mobile, or address. Can't find? Use "Create Supplier" button above.`})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"lotNumber",className:"text-base font-medium",children:"Lot Number *"}),s.jsx(Ze,{id:"lotNumber",placeholder:"Enter lot number",value:y.lotNumber||"",onChange:Y=>j(de=>({...de,lotNumber:Y.target.value})),required:!0,className:"min-h-[44px] text-base"})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"bidPrice",className:"text-base font-medium",children:"Bid Price (₹) *"}),s.jsx(Ze,{id:"bidPrice",type:"number",step:"0.01",placeholder:"Enter bid price",value:y.bidPrice||"",onChange:Y=>j(de=>({...de,bidPrice:Y.target.value})),required:!0,className:"min-h-[44px] text-base"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"notes",className:"text-base",children:"Notes"}),s.jsx(A5,{id:"notes",placeholder:"Enter any additional notes",value:y.notes||"",onChange:Y=>j(de=>({...de,notes:String(Y.target.value)})),rows:3,className:"min-h-[44px] text-base resize-none"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{className:"text-base font-medium",children:"Chili Photos"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(Le,{type:"button",variant:"outline",onClick:I,className:"flex-1 sm:flex-none min-h-[44px]",children:[s.jsx(Oy,{className:"h-4 w-4 mr-2"}),"Take Photo"]}),s.jsxs(Le,{type:"button",variant:"outline",onClick:()=>{var Y;return(Y=m.current)==null?void 0:Y.click()},className:"flex-1 sm:flex-none min-h-[44px]",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Upload"]})]}),s.jsx("input",{ref:m,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:Y=>{Y.preventDefault(),Y.stopPropagation(),G(Y.target.files),Y.target&&(Y.target.value="")}}),s.jsx("input",{ref:S,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:V}),y.chiliPhotos.length>0&&s.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.chiliPhotos.map((Y,de)=>{const We=typeof Y=="string"?Y:Y==null?void 0:Y.url,ee=typeof Y=="object"?Y==null?void 0:Y.metadata:null;return s.jsxs("div",{className:"relative border rounded-lg overflow-hidden",children:[s.jsx("img",{src:`/${We}`,alt:`Chili photo ${de+1}`,className:"w-full h-24 object-cover"}),s.jsx(Le,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0",onClick:()=>z(de),children:s.jsx(Oc,{className:"h-3 w-3"})}),ee&&s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1",children:[s.jsx("div",{children:ee.supplierName}),s.jsxs("div",{children:["Lot: ",ee.lotNumber]}),s.jsx("div",{children:ee.uploadDate})]})]},de)})})]})]}),s.jsx("div",{className:"bg-white p-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex flex-col gap-3 w-full",children:[s.jsx(Le,{type:"submit",disabled:O.isPending,className:"w-full min-h-[52px] text-lg font-semibold bg-blue-600 hover:bg-blue-700",children:O.isPending?"Saving...":r?"Update Bid":"CREATE BID"}),s.jsx(Le,{type:"button",variant:"outline",onClick:()=>n(!1),className:"w-full min-h-[44px] text-base",children:"Cancel"})]})})]})]})]}),s.jsx(ds,{open:d,onOpenChange:f,children:s.jsxs(Vr,{className:"max-w-3xl max-h-[95vh] overflow-y-auto",children:[s.jsx(Wr,{children:s.jsx(Hr,{children:"Create New Dalal/Supplier (Including APMC Code)"})}),s.jsxs("form",{onSubmit:be,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"dalalName",children:"Dalal Name *"}),s.jsx(Ze,{id:"dalalName",placeholder:"Enter dalal name",value:h.name||"",onChange:Y=>g(de=>({...de,name:Y.target.value})),required:!0})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"apmcCode",className:"text-blue-600 font-semibold",children:"APMC Code *"}),s.jsx(Ze,{id:"apmcCode",placeholder:"Enter APMC code (Required)",value:h.apmcCode||"",onChange:Y=>g(de=>({...de,apmcCode:Y.target.value})),className:"border-blue-300 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"contactPerson",children:"Contact Person"}),s.jsx(Ze,{id:"contactPerson",placeholder:"Enter contact person name",value:h.contactPerson||"",onChange:Y=>g(de=>({...de,contactPerson:Y.target.value}))})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"mobile",children:"Mobile Number"}),s.jsx(Ze,{id:"mobile",placeholder:"Enter mobile number",value:h.mobile||"",onChange:Y=>g(de=>({...de,mobile:Y.target.value}))})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{htmlFor:"address",children:"Address"}),s.jsx(Ze,{id:"address",placeholder:"Enter full address",value:h.address||"",onChange:Y=>g(de=>({...de,address:Y.target.value}))})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[s.jsx(Le,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Cancel"}),s.jsx(Le,{type:"submit",disabled:E.isPending,children:E.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Cs,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(qr,{className:"mr-2 h-4 w-4"}),"Create Dalal"]})})]})]})]})}),s.jsx(ds,{open:v.open,onOpenChange:Y=>x(de=>({...de,open:Y})),children:s.jsxs(Vr,{className:"max-w-4xl max-h-[90vh] overflow-hidden",children:[s.jsx(Wr,{children:s.jsxs(Hr,{className:"flex items-center justify-between",children:[s.jsxs("span",{children:["Photos - ",v.lotInfo.dalalName," (Lot ",v.lotInfo.lotNumber,")"]}),s.jsxs("span",{className:"text-sm font-normal text-gray-500",children:[v.currentIndex+1," of ",v.photos.length]})]})}),v.photos.length>0&&s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"absolute top-2 right-2 z-10 flex gap-2",children:[s.jsx(Le,{variant:"outline",size:"sm",onClick:J,title:"Zoom In",children:s.jsx(ZO,{className:"h-4 w-4"})}),s.jsx(Le,{variant:"outline",size:"sm",onClick:re,title:"Zoom Out",children:s.jsx(XO,{className:"h-4 w-4"})}),s.jsx(Le,{variant:"outline",size:"sm",onClick:Q,title:"Reset Zoom",children:s.jsx(VO,{className:"h-4 w-4"})}),s.jsxs("div",{className:"bg-black bg-opacity-70 text-white px-2 py-1 rounded text-sm",children:[Math.round(v.zoom*100),"%"]})]}),s.jsx("div",{className:`flex items-center justify-center bg-gray-50 rounded-lg min-h-[400px] max-h-[400px] overflow-hidden ${v.zoom>1?"cursor-grab active:cursor-grabbing":"cursor-zoom-in"}`,onWheel:ie,onMouseDown:B,onMouseMove:te,onMouseUp:oe,onMouseLeave:oe,onTouchStart:we,onTouchMove:Ne,onTouchEnd:ke,style:{touchAction:"none"},children:s.jsx("img",{src:`/${((ut=v.photos[v.currentIndex])==null?void 0:ut.url)||""}`,alt:`Photo ${v.currentIndex+1}`,className:"rounded-lg select-none block",style:{transform:`scale(${v.zoom}) translate(${v.panX}px, ${v.panY}px)`,transformOrigin:"center center",transition:q?"none":"transform 0.2s ease",maxWidth:"100%",maxHeight:"400px",objectFit:"contain",display:"block",margin:"auto"},onError:Y=>{var de;console.error("Image failed to load:",(de=v.photos[v.currentIndex])==null?void 0:de.url),Y.currentTarget.src="/placeholder-image.png"},onDoubleClick:()=>{v.zoom===1?J():Q()},draggable:!1})}),s.jsxs("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded max-w-xs",children:[s.jsx("div",{className:"hidden md:block",children:"Scroll wheel to zoom • Double-click to zoom in/reset • Drag to pan when zoomed"}),s.jsx("div",{className:"block md:hidden",children:"Pinch to zoom • Double-tap to zoom • Touch and drag to pan when zoomed"})]}),v.photos.length>1&&s.jsxs(s.Fragment,{children:[s.jsx(Le,{variant:"outline",size:"sm",className:"absolute left-2 top-1/2 transform -translate-y-1/2 z-10",onClick:()=>x(Y=>({...Y,currentIndex:Y.currentIndex>0?Y.currentIndex-1:Y.photos.length-1,zoom:1,panX:0,panY:0})),children:s.jsx(IO,{className:"h-4 w-4"})}),s.jsx(Le,{variant:"outline",size:"sm",className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-10",onClick:()=>x(Y=>({...Y,currentIndex:Y.currentIndex<Y.photos.length-1?Y.currentIndex+1:0,zoom:1,panX:0,panY:0})),children:s.jsx(vk,{className:"h-4 w-4"})})]}),((Je=v.photos[v.currentIndex])==null?void 0:Je.metadata)&&s.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Supplier:"}),s.jsx("br",{}),v.photos[v.currentIndex].metadata.supplierName]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Lot:"}),s.jsx("br",{}),v.photos[v.currentIndex].metadata.lotNumber]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date:"}),s.jsx("br",{}),v.photos[v.currentIndex].metadata.uploadDate]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Size:"}),s.jsx("br",{}),Math.round(v.photos[v.currentIndex].metadata.fileSize/1024)," KB"]})]})}),v.photos.length>1&&s.jsx("div",{className:"flex gap-2 mt-4 justify-center overflow-x-auto pb-2",children:v.photos.map((Y,de)=>s.jsx("button",{onClick:()=>x(We=>({...We,currentIndex:de,zoom:1,panX:0,panY:0})),className:`flex-shrink-0 w-16 h-16 rounded border-2 overflow-hidden ${de===v.currentIndex?"border-blue-500":"border-gray-300"}`,children:s.jsx("img",{src:`/${Y.url}`,alt:`Thumbnail ${de+1}`,className:"w-full h-full object-cover"})},de))})]})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:[s.jsx(Re,{children:s.jsx(qe,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Dalals"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:_.length})]}),s.jsx(Fi,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-500 mt-1 sm:mt-0"})]})})}),s.jsx(Re,{children:s.jsx(qe,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Lots"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold text-green-600",children:_.reduce((Y,de)=>Y+(de.totalLots||0),0)})]}),s.jsx(Cs,{className:"h-6 w-6 sm:h-8 sm:w-8 text-green-500 mt-1 sm:mt-0"})]})})}),s.jsx(Re,{children:s.jsx(qe,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Avg Bid Price"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:"₹45,000"})]}),s.jsx(ko,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-500 mt-1 sm:mt-0"})]})})}),s.jsx(Re,{children:s.jsx(qe,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-gray-600",children:"Today's Bids"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold text-orange-600",children:"12"})]}),s.jsx(Ao,{className:"h-6 w-6 sm:h-8 sm:w-8 text-orange-500 mt-1 sm:mt-0"})]})})})]}),s.jsx(Re,{children:s.jsx(qe,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[s.jsxs("div",{className:"flex-1 w-full sm:w-auto",children:[s.jsx(Ae,{htmlFor:"dalalFilter",className:"text-sm font-medium",children:"Filter by Dalal"}),s.jsxs("select",{id:"dalalFilter",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",value:a,onChange:Y=>o(Y.target.value),children:[s.jsx("option",{value:"",children:"All Dalals"}),_.map(Y=>s.jsxs("option",{value:String(Y.dalalName),children:[String(Y.dalalName)," (",Y.totalLots," lots)"]},String(Y.dalalName)))]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs sm:text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Fi,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsxs("span",{children:[_.length," dalals"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsxs("span",{children:[_.reduce((Y,de)=>Y+(de.totalLots||0),0)," total lots"]})]})]})]})})}),s.jsx("div",{className:"space-y-3 sm:space-y-6",children:se.length===0?s.jsx(Re,{children:s.jsxs(qe,{className:"p-6 sm:p-8 text-center",children:[s.jsx(Cs,{className:"h-10 w-10 sm:h-12 sm:w-12 mx-auto text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Dalals Found"}),s.jsx("p",{className:"text-sm sm:text-base text-gray-500 mb-4",children:"Start by creating your first bid at a dalal shop."}),s.jsxs(Le,{onClick:()=>n(!0),className:"w-full sm:w-auto",children:[s.jsx(By,{className:"h-4 w-4 mr-2"}),"Create First Bid"]})]})}):se.map(Y=>s.jsxs(Re,{className:"overflow-hidden",children:[s.jsx(it,{className:"p-3 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs(ct,{className:"flex flex-col sm:flex-row sm:items-center gap-2 text-base sm:text-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx($O,{className:"h-4 w-4 sm:h-5 sm:w-5 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:String(Y.dalalName||"")})]}),Y.apmcCode&&Y.apmcCode!=="N/A"&&s.jsxs(Mn,{variant:"outline",className:"text-xs flex-shrink-0",children:["APMC: ",Y.apmcCode]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[Y.dalalContact&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(UO,{className:"h-4 w-4"}),String(Y.dalalContact)]}),s.jsxs(Mn,{variant:"secondary",children:[Y.totalLots," lots"]})]})]}),s.jsxs(Le,{variant:"outline",onClick:()=>{j(de=>({...de,dalalName:String(Y.dalalName||"")})),n(!0)},children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Add Lot"]})]})}),Y.lots.length>0&&s.jsxs(qe,{className:"p-3 sm:p-6",children:[s.jsx("div",{className:"block sm:hidden space-y-3",children:Y.lots.map(de=>s.jsx(Re,{className:"border border-gray-200",children:s.jsx(qe,{className:"p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"font-medium text-sm",children:["Lot ",String(de.lotNumber||"")]}),s.jsx(Mn,{variant:"outline",className:"text-xs",children:Y.apmcCode&&Y.apmcCode!=="N/A"?Y.apmcCode:"No Code"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-lg font-bold text-green-600",children:[s.jsx(ko,{className:"h-4 w-4 mr-1"}),parseFloat(String(de.bidPrice||"0")).toLocaleString("en-IN")]}),s.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[s.jsx(Ao,{className:"h-3 w-3 mr-1"}),new Date(de.bidDate).toLocaleDateString()]})]}),de.notes&&s.jsx("p",{className:"text-xs text-gray-600 bg-gray-50 p-2 rounded",children:String(de.notes)}),s.jsxs("div",{className:"flex items-center justify-between pt-2",children:[s.jsx("div",{className:"flex items-center gap-2",children:de.chiliPhotos&&de.chiliPhotos.length>0?s.jsxs(Le,{variant:"outline",size:"sm",onClick:()=>{x({open:!0,photos:de.chiliPhotos,currentIndex:0,zoom:1,panX:0,panY:0,lotInfo:{dalalName:String(Y.dalalName||""),lotNumber:String(de.lotNumber||"")}})},className:"text-xs",children:[s.jsx(DN,{className:"h-3 w-3 mr-1"}),de.chiliPhotos.length," photo",de.chiliPhotos.length!==1?"s":""]}):s.jsx("span",{className:"text-xs text-gray-400",children:"No photos"})}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>{i(de),j({dalalName:String(Y.dalalName||""),lotNumber:String(de.lotNumber||""),bidPrice:String(de.bidPrice||""),notes:String(de.notes||""),chiliPhotos:de.chiliPhotos||[]}),n(!0)},className:"h-8 w-8 p-0",children:s.jsx(em,{className:"h-3 w-3"})}),s.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>T.mutate(de.id),disabled:T.isPending,className:"h-8 w-8 p-0 text-red-600 hover:text-red-700",children:s.jsx(Oc,{className:"h-3 w-3"})})]})]})]})})},de.id))}),s.jsx("div",{className:"hidden sm:block rounded-md border",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Supplier/Dalal Name"}),s.jsx($e,{children:"APMC Code"}),s.jsx($e,{children:"Lot Number"}),s.jsx($e,{children:"Bid Price"}),s.jsx($e,{children:"Bid Date"}),s.jsx($e,{children:"Photos"}),s.jsx($e,{children:"Notes"}),s.jsx($e,{children:"Actions"})]})}),s.jsx(ps,{children:Y.lots.map(de=>s.jsxs(on,{children:[s.jsx(Be,{children:String(Y.dalalName||"No Dalal")}),s.jsx(Be,{children:s.jsx(Mn,{variant:"outline",className:"text-xs",children:Y.apmcCode&&Y.apmcCode!=="N/A"?Y.apmcCode:"No Code"})}),s.jsx(Be,{className:"font-medium",children:String(de.lotNumber||"")}),s.jsx(Be,{children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(ko,{className:"h-4 w-4 mr-1"}),parseFloat(String(de.bidPrice||"0")).toLocaleString("en-IN")]})}),s.jsx(Be,{children:s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Ao,{className:"h-4 w-4 mr-1"}),new Date(de.bidDate).toLocaleDateString()]})}),s.jsx(Be,{children:de.chiliPhotos&&de.chiliPhotos.length>0?s.jsxs(Le,{variant:"outline",size:"sm",onClick:()=>x({open:!0,photos:de.chiliPhotos,currentIndex:0,lotInfo:{dalalName:String(Y.dalalName),lotNumber:String(de.lotNumber)},zoom:1,panX:0,panY:0}),children:[s.jsx(DN,{className:"h-4 w-4 mr-1"}),de.chiliPhotos.length," photo",de.chiliPhotos.length>1?"s":""]}):s.jsx("span",{className:"text-gray-400",children:"No photos"})}),s.jsx(Be,{children:de.notes?s.jsxs("span",{className:"text-sm",children:[String(de.notes).substring(0,30),String(de.notes).length>30?"...":""]}):s.jsx("span",{className:"text-gray-400",children:"-"})}),s.jsx(Be,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>P(de),children:s.jsx(em,{className:"h-4 w-4"})}),s.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>T.mutate(de.id),children:s.jsx(Oc,{className:"h-4 w-4"})})]})})]},de.id))})]})})]})]},Y.dalalName))})]})]})}function eQ(){const{toast:e}=Qr(),t=N.useRef(null),n=N.useRef(null),[r,i]=N.useState(!1),[a,o]=N.useState(""),[l,c]=N.useState({name:"",contactPerson:"",mobile:"",address:""}),[d,f]=N.useState({buyerId:10,invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],traderName:"",traderContact:"",traderAddress:"",totalAmount:"",taxAmount:"0",netAmount:"",notes:"",items:[]}),[h,g]=N.useState(!1),[m,S]=N.useState(!1),[y,j]=N.useState(null);kt({queryKey:["/api/buyers"]});const{data:v=[]}=kt({queryKey:["/api/suppliers"]}),x=v.filter(V=>{var z,q;return V.name.toLowerCase().includes(a.toLowerCase())||((z=V.mobile)==null?void 0:z.toLowerCase().includes(a.toLowerCase()))||((q=V.contactPerson)==null?void 0:q.toLowerCase().includes(a.toLowerCase()))}),_=fn({mutationFn:async V=>{const z=new FormData;z.append("image",V);const q=await fetch("/api/ocr/process-invoice",{method:"POST",body:z});if(!q.ok)throw new Error("OCR processing failed");return await q.json()},onSuccess:V=>{var z;console.log("OCR Response:",V),j(V),L(V.extractedData),S(!0),e({title:"OCR Complete",description:`Text extracted with ${Math.round(((z=V.extractedData)==null?void 0:z.confidence)||V.confidence||0)}% confidence`})},onError:V=>{e({title:"OCR Failed",description:V.message,variant:"destructive"})}}),k=fn({mutationFn:async V=>await an("POST","/api/purchase-invoices",V),onSuccess:()=>{e({title:"Success",description:"Invoice saved and stock updated"}),Tn.invalidateQueries({queryKey:["/api/purchase-invoices"]}),Tn.invalidateQueries({queryKey:["/api/stock-inventory"]}),P()},onError:V=>{e({title:"Error",description:V.message,variant:"destructive"})}}),M=fn({mutationFn:async V=>{const z={name:V.name,contactPerson:V.contactPerson||null,mobile:V.mobile||null,address:V.address||null,email:V.email||null,gstNumber:V.gstNumber||null,panNumber:V.panNumber||null,isActive:!0};return await an("POST","/api/suppliers",z)},onSuccess:V=>{Tn.invalidateQueries({queryKey:["/api/suppliers"]}),i(!1),c({name:"",contactPerson:"",mobile:"",address:""}),f(z=>({...z,traderName:V.name,traderContact:V.mobile||"",traderAddress:V.address||""})),e({title:"Success",description:"Dalal created successfully"})},onError:V=>{e({title:"Error",description:V.message,variant:"destructive"})}}),L=V=>{console.log("OCR Data received:",V),f(z=>{var le,Ce,F;let q=z.invoiceDate;if(V.invoiceDate)try{const J=V.invoiceDate.split("/");if(J.length===3){const re=J[0].padStart(2,"0"),Q=J[1].padStart(2,"0");q=`${J[2].length===2?"20"+J[2]:J[2]}-${Q}-${re}`}}catch(J){console.warn("Date parsing failed:",J)}const H=V.items&&Array.isArray(V.items)?V.items.map(J=>({itemName:J.itemName||"",itemDescription:J.itemDescription||J.itemName||"",quantity:J.quantity||"",unit:J.unit||"Kg",ratePerUnit:J.ratePerUnit||"",amount:J.amount||"",hsnCode:J.hsnCode||""})):z.items,X={...z,invoiceNumber:V.invoiceNumber||z.invoiceNumber,invoiceDate:q,traderName:V.traderName||z.traderName,traderContact:V.traderContact||z.traderContact,traderAddress:V.traderAddress||z.traderAddress,totalAmount:((le=V.totalAmount)==null?void 0:le.toString())||z.totalAmount,taxAmount:((Ce=V.taxAmount)==null?void 0:Ce.toString())||z.taxAmount,netAmount:((F=V.netAmount)==null?void 0:F.toString())||z.netAmount,items:H};return console.log("Updated form data:",X),X})},O=V=>{var q;const z=(q=V.target.files)==null?void 0:q[0];z&&d.traderName?(g(!0),_.mutate(z),g(!1)):d.traderName||e({title:"Select Dalal",description:"Please select a dalal first to process their invoice",variant:"destructive"})},T=()=>{f(V=>({...V,items:[...V.items,{itemName:"",itemDescription:"",quantity:"",unit:"Kg",ratePerUnit:"",amount:"",hsnCode:""}]}))},E=(V,z,q)=>{f(H=>{const X=[...H.items];if(X[V]={...X[V],[z]:q},z==="quantity"||z==="ratePerUnit"){const le=parseFloat(X[V].quantity||"0"),Ce=parseFloat(X[V].ratePerUnit||"0");X[V].amount=(le*Ce).toFixed(2)}return{...H,items:X}})},Z=V=>{f(z=>({...z,items:z.items.filter((q,H)=>H!==V)}))},C=()=>{const V=d.items.reduce((H,X)=>H+parseFloat(X.amount||"0"),0),z=parseFloat(d.taxAmount||"0"),q=d.netAmount&&parseFloat(d.netAmount)>0?parseFloat(d.netAmount):V+z;return{itemsTotal:V.toFixed(2),netTotal:q.toFixed(2)}},P=()=>{f({buyerId:10,invoiceNumber:"",invoiceDate:new Date().toISOString().split("T")[0],traderName:"",traderContact:"",traderAddress:"",totalAmount:"",taxAmount:"0",netAmount:"",notes:"",items:[]}),S(!1),j(null)},G=()=>{if(!d.invoiceNumber||!d.traderName||d.items.length===0){e({title:"Validation Error",description:"Please fill invoice number, trader name, and add at least one item",variant:"destructive"});return}d.buyerId||f(q=>({...q,buyerId:10}));const V=C(),z={...d,totalAmount:d.totalAmount||V.itemsTotal,netAmount:d.netAmount||V.netTotal,tenantId:10};k.mutate(z)},I=C();return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(tr,{}),s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Dalal Invoice Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Select Dalal → Scan their invoice → Process agricultural trading documents"})]}),s.jsx(Bi,{})]}),s.jsxs(Re,{children:[s.jsx(it,{children:s.jsxs(ct,{className:"flex items-center gap-2",children:[s.jsx(Oy,{className:"h-5 w-5"}),"Dalal Invoice Scanner & Inventory Management"]})}),s.jsxs(qe,{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[s.jsx("h3",{className:"font-semibold text-blue-800 mb-3",children:"Step 1: Select Dalal/Trader (Process their invoice)"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(Ae,{className:"text-blue-700",children:"Select Dalal/Trader *"}),s.jsxs(ds,{open:r,onOpenChange:i,children:[s.jsx(Xa,{asChild:!0,children:s.jsxs(Le,{variant:"outline",size:"sm",className:"bg-green-50 hover:bg-green-100 border-green-300 text-green-700 font-medium",children:[s.jsx(qr,{className:"h-4 w-4 mr-1"}),"Add New Dalal"]})}),s.jsxs(Vr,{className:"max-w-md",children:[s.jsx(Wr,{children:s.jsx(Hr,{children:"Add New Dalal/Trader"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{children:"Dalal Name *"}),s.jsx(Ze,{type:"text",value:l.name,onChange:V=>c(z=>({...z,name:V.target.value})),placeholder:"Enter dalal name"})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Contact Person"}),s.jsx(Ze,{type:"text",value:l.contactPerson,onChange:V=>c(z=>({...z,contactPerson:V.target.value})),placeholder:"Enter contact person name"})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Mobile Number"}),s.jsx(Ze,{type:"text",value:l.mobile,onChange:V=>c(z=>({...z,mobile:V.target.value})),placeholder:"Enter mobile number"})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Address"}),s.jsx(Ze,{type:"text",value:l.address,onChange:V=>c(z=>({...z,address:V.target.value})),placeholder:"Enter address"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Le,{onClick:()=>{if(!l.name){e({title:"Error",description:"Dalal name is required",variant:"destructive"});return}M.mutate(l)},disabled:M.isPending,className:"flex-1",children:[M.isPending?s.jsx(cu,{className:"h-4 w-4 animate-spin mr-2"}):null,"Add Dalal"]}),s.jsx(Le,{variant:"outline",onClick:()=>i(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(zl,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ze,{placeholder:"Search dalals by name, mobile, or contact person...",value:a,onChange:V=>o(V.target.value),className:"pl-10"})]}),a&&x.length>0&&s.jsx("div",{className:"border rounded-md max-h-40 overflow-y-auto bg-background",children:x.map(V=>s.jsxs("div",{className:"p-3 hover:bg-muted cursor-pointer border-b last:border-b-0",onClick:()=>{f(z=>({...z,traderName:V.name,traderContact:V.mobile||"",traderAddress:V.address||""})),o("")},children:[s.jsx("div",{className:"font-medium",children:V.name}),V.contactPerson&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Contact: ",V.contactPerson]}),V.mobile&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Mobile: ",V.mobile]})]},V.id))}),a&&x.length===0&&s.jsx("div",{className:"text-center p-4 text-muted-foreground",children:'No dalals found. Click "Add New Dalal" to create one.'})]}),s.jsx(Ze,{type:"text",value:d.traderName,onChange:V=>f(z=>({...z,traderName:V.target.value})),placeholder:"Selected dalal name will appear here",className:"bg-white"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Step 2: Invoice Details"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{children:"Invoice Number"}),s.jsx(Ze,{type:"text",value:d.invoiceNumber,onChange:V=>f(z=>({...z,invoiceNumber:V.target.value})),placeholder:"Enter invoice number"})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Invoice Date"}),s.jsx(Ze,{type:"date",value:d.invoiceDate,onChange:V=>f(z=>({...z,invoiceDate:V.target.value}))})]})]})]}),s.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[s.jsx("h3",{className:"font-semibold text-green-800 mb-3",children:"Step 3: Scan/Upload Dalal's Invoice"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs(Le,{onClick:()=>{var V;return(V=n.current)==null?void 0:V.click()},disabled:!d.traderName||h,variant:"outline",className:"flex-1 bg-white hover:bg-gray-50",children:[h?s.jsx(cu,{className:"h-4 w-4 animate-spin mr-2"}):s.jsx(Oy,{className:"h-4 w-4 mr-2"}),"Scan Dalal's Invoice"]}),s.jsxs(Le,{onClick:()=>{var V;return(V=t.current)==null?void 0:V.click()},disabled:!d.traderName||h,variant:"outline",className:"flex-1 bg-white hover:bg-gray-50",children:[h?s.jsx(cu,{className:"h-4 w-4 animate-spin mr-2"}):s.jsx(GO,{className:"h-4 w-4 mr-2"}),"Upload Invoice (Image/PDF)"]})]}),!d.traderName&&s.jsx("p",{className:"text-sm text-green-700 mt-2",children:"⚠️ Please select a dalal first to scan their invoice"})]}),s.jsx("input",{ref:n,type:"file",accept:"image/*",capture:"environment",onChange:O,className:"hidden"}),s.jsx("input",{ref:t,type:"file",accept:"image/*,.pdf,application/pdf",onChange:O,className:"hidden"}),m&&y&&s.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-green-800",children:["✅ OCR completed with ",Math.round(y.confidence),"% confidence. Review and edit the extracted data below."]})})]})]}),s.jsxs(Re,{children:[s.jsx(it,{children:s.jsx(ct,{children:"Invoice Details"})}),s.jsxs(qe,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{children:"Invoice Number *"}),s.jsx(Ze,{type:"text",value:d.invoiceNumber,onChange:V=>f(z=>({...z,invoiceNumber:V.target.value})),placeholder:"Enter invoice number"})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Invoice Date"}),s.jsx(Ze,{type:"date",value:d.invoiceDate,onChange:V=>f(z=>({...z,invoiceDate:V.target.value}))})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Seller"}),s.jsx(Ze,{type:"text",value:d.traderName,onChange:V=>f(z=>({...z,traderName:V.target.value})),placeholder:"Seller name from invoice",className:"bg-gray-50"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(Ae,{className:"text-lg font-semibold",children:"Invoice Items"}),s.jsxs(Le,{onClick:T,size:"sm",children:[s.jsx(qr,{className:"h-4 w-4 mr-2"}),"Add Item"]})]}),s.jsx("div",{className:"border rounded-lg overflow-hidden",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Item Name"}),s.jsx($e,{children:"Quantity"}),s.jsx($e,{children:"Unit"}),s.jsx($e,{children:"Rate"}),s.jsx($e,{children:"Amount"}),s.jsx($e,{children:"Action"})]})}),s.jsx(ps,{children:d.items.map((V,z)=>s.jsxs(on,{children:[s.jsx(Be,{children:s.jsx(Ze,{type:"text",value:V.itemName,onChange:q=>E(z,"itemName",q.target.value),placeholder:"Item name"})}),s.jsx(Be,{children:s.jsx(Ze,{type:"number",value:V.quantity,onChange:q=>E(z,"quantity",q.target.value),placeholder:"0"})}),s.jsx(Be,{children:s.jsxs(rr,{value:V.unit,onValueChange:q=>E(z,"unit",q),children:[s.jsx(Wn,{children:s.jsx(sr,{})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"Kg",children:"Kg"}),s.jsx(Tt,{value:"Quintal",children:"Quintal"}),s.jsx(Tt,{value:"Bags",children:"Bags"}),s.jsx(Tt,{value:"Pieces",children:"Pieces"})]})]})}),s.jsx(Be,{children:s.jsx(Ze,{type:"number",value:V.ratePerUnit,onChange:q=>E(z,"ratePerUnit",q.target.value),placeholder:"0.00"})}),s.jsx(Be,{children:s.jsx(Ze,{type:"number",value:V.amount,readOnly:!0,className:"bg-gray-50"})}),s.jsx(Be,{children:s.jsx(Le,{onClick:()=>Z(z),size:"sm",variant:"destructive",children:s.jsx(Oc,{className:"h-4 w-4"})})})]},z))})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(Ae,{children:"Items Total"}),s.jsx(Ze,{value:`₹${I.itemsTotal}`,readOnly:!0,className:"bg-gray-50"})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Tax Amount"}),s.jsx(Ze,{type:"number",value:d.taxAmount,onChange:V=>f(z=>({...z,taxAmount:V.target.value})),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Net Amount"}),s.jsx(Ze,{value:`₹${I.netTotal}`,readOnly:!0,className:"bg-gray-50"})]})]}),s.jsxs("div",{children:[s.jsx(Ae,{children:"Notes"}),s.jsx(A5,{value:d.notes||"",onChange:V=>f(z=>({...z,notes:V.target.value})),placeholder:"Additional notes",rows:2})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs(Le,{onClick:G,disabled:k.isPending,className:"flex-1",children:[k.isPending?s.jsx(cu,{className:"h-4 w-4 animate-spin mr-2"}):s.jsx(Lg,{className:"h-4 w-4 mr-2"}),"Save Invoice & Update Stock"]}),s.jsx(Le,{onClick:P,variant:"outline",children:"Clear Form"})]})]})]})]})]})}function tQ(){const[e,t]=N.useState({startDate:"",endDate:"",buyerId:"all"}),[n,r]=N.useState(e),{data:i=[]}=kt({queryKey:["/api/buyers"]}),{data:a=[],isLoading:o}=kt({queryKey:["/api/purchase-invoices",n.buyerId,n.startDate,n.endDate],queryFn:async()=>{const g=new URLSearchParams;n.buyerId&&n.buyerId!=="all"&&g.append("buyerId",n.buyerId),n.startDate&&g.append("startDate",n.startDate),n.endDate&&g.append("endDate",n.endDate);const m=await fetch(`/api/purchase-invoices?${g}`);if(!m.ok)throw new Error("Failed to fetch invoices");return m.json()}}),l=()=>{r({...e})},c=()=>{const g={startDate:"",endDate:"",buyerId:"all"};t(g),r(g)},d=()=>{const m=[["Invoice Number","Date","Trader Name","Contact","Items Total","Tax Amount","Net Amount","Notes"].join(","),...a.map(v=>[v.invoiceNumber,is(new Date(v.invoiceDate),"dd/MM/yyyy"),`"${v.traderName}"`,v.traderContact,v.itemsTotal,v.taxAmount,v.netAmount,`"${v.notes||""}"`].join(","))].join(`
`),S=new Blob([m],{type:"text/csv"}),y=window.URL.createObjectURL(S),j=document.createElement("a");j.href=y,j.download=`invoice-report-${is(new Date,"yyyy-MM-dd")}.csv`,j.click(),window.URL.revokeObjectURL(y)},f=a.reduce((g,m)=>g+parseFloat(m.netAmount||"0"),0),h=a.reduce((g,m)=>g+parseFloat(m.taxAmount||"0"),0);return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Invoice Reports"}),s.jsx("p",{className:"text-muted-foreground",children:"Track and analyze purchase invoices with date range filtering"})]}),s.jsxs(Le,{onClick:d,disabled:a.length===0,children:[s.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]}),s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsxs(ct,{className:"flex items-center gap-2",children:[s.jsx(OO,{className:"h-5 w-5"}),"Filters"]}),s.jsx(Cn,{children:"Filter invoices by date range and buyer"})]}),s.jsx(qe,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"startDate",children:"Start Date"}),s.jsx(Ze,{id:"startDate",type:"date",value:e.startDate,onChange:g=>t({...e,startDate:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"endDate",children:"End Date"}),s.jsx(Ze,{id:"endDate",type:"date",value:e.endDate,onChange:g=>t({...e,endDate:g.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"buyer",children:"Buyer"}),s.jsxs(rr,{value:e.buyerId,onValueChange:g=>t({...e,buyerId:g}),children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"All Buyers"})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"all",children:"All Buyers"}),i.map(g=>s.jsx(Tt,{value:g.id.toString(),children:g.companyName},g.id))]})]})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx(Le,{onClick:l,className:"flex-1",children:"Apply Filters"}),s.jsx(Le,{variant:"outline",onClick:c,children:"Clear"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Re,{children:[s.jsx(it,{className:"pb-2",children:s.jsx(ct,{className:"text-sm font-medium",children:"Total Invoices"})}),s.jsx(qe,{children:s.jsx("div",{className:"text-2xl font-bold",children:a.length})})]}),s.jsxs(Re,{children:[s.jsx(it,{className:"pb-2",children:s.jsx(ct,{className:"text-sm font-medium",children:"Total Tax Amount"})}),s.jsx(qe,{children:s.jsxs("div",{className:"text-2xl font-bold",children:["₹",h.toLocaleString("en-IN")]})})]}),s.jsxs(Re,{children:[s.jsx(it,{className:"pb-2",children:s.jsx(ct,{className:"text-sm font-medium",children:"Total Net Amount"})}),s.jsx(qe,{children:s.jsxs("div",{className:"text-2xl font-bold",children:["₹",f.toLocaleString("en-IN")]})})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Purchase Invoices"}),s.jsx(Cn,{children:n.startDate||n.endDate?`Showing invoices ${n.startDate?`from ${is(new Date(n.startDate),"dd/MM/yyyy")}`:""} ${n.endDate?`to ${is(new Date(n.endDate),"dd/MM/yyyy")}`:""}`:"Showing all invoices"})]}),s.jsx(qe,{children:o?s.jsx("div",{className:"text-center py-4",children:"Loading invoices..."}):a.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No invoices found for the selected criteria"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Invoice Number"}),s.jsx($e,{children:"Date"}),s.jsx($e,{children:"Trader Name"}),s.jsx($e,{children:"Contact"}),s.jsx($e,{className:"text-right",children:"Items Total"}),s.jsx($e,{className:"text-right",children:"Tax Amount"}),s.jsx($e,{className:"text-right",children:"Net Amount"}),s.jsx($e,{children:"Actions"})]})}),s.jsx(ps,{children:a.map(g=>s.jsxs(on,{children:[s.jsx(Be,{className:"font-medium",children:g.invoiceNumber}),s.jsx(Be,{children:is(new Date(g.invoiceDate),"dd/MM/yyyy")}),s.jsx(Be,{children:g.traderName}),s.jsx(Be,{children:g.traderContact}),s.jsxs(Be,{className:"text-right",children:["₹",parseFloat(g.itemsTotal).toLocaleString("en-IN")]}),s.jsxs(Be,{className:"text-right",children:["₹",parseFloat(g.taxAmount).toLocaleString("en-IN")]}),s.jsxs(Be,{className:"text-right font-medium",children:["₹",parseFloat(g.netAmount).toLocaleString("en-IN")]}),s.jsx(Be,{children:s.jsx(Le,{variant:"ghost",size:"sm",children:s.jsx(Jh,{className:"h-4 w-4"})})})]},g.id))})]})})})]})]})}function nQ(){const[e,t]=N.useState({startDate:"",endDate:"",buyerId:"all",itemName:""}),[n,r]=N.useState(e),[i,a]=N.useState(null),[o,l]=N.useState(""),{toast:c}=Qr(),d=tc(),{data:f=[]}=kt({queryKey:["/api/buyers"]}),{data:h=[],isLoading:g}=kt({queryKey:["/api/stock-inventory",n.buyerId],queryFn:async()=>{const E=new URLSearchParams;n.buyerId&&n.buyerId!=="all"&&E.append("buyerId",n.buyerId);const Z=await fetch(`/api/stock-inventory?${E}`);if(!Z.ok)throw new Error("Failed to fetch inventory");return Z.json()}}),{data:m=[],isLoading:S}=kt({queryKey:["/api/stock-movements",n.buyerId,n.startDate,n.endDate,n.itemName],queryFn:async()=>{const E=new URLSearchParams;n.buyerId&&n.buyerId!=="all"&&E.append("buyerId",n.buyerId),n.startDate&&E.append("startDate",n.startDate),n.endDate&&E.append("endDate",n.endDate),n.itemName&&E.append("itemName",n.itemName);const Z=await fetch(`/api/stock-movements?${E}`);if(!Z.ok)throw new Error("Failed to fetch movements");return Z.json()}}),y=()=>{r({...e})},j=()=>{const E={startDate:"",endDate:"",buyerId:"all",itemName:""};t(E),r(E)},v=fn({mutationFn:async({stockId:E,minStock:Z})=>await an("PUT",`/api/stock-inventory/${E}/min-stock`,{minimumStockLevel:Z}),onSuccess:()=>{d.invalidateQueries({queryKey:["/api/stock-inventory"]}),c({title:"Stock Alert Updated",description:"Minimum stock level has been updated successfully."}),a(null),l("")},onError:E=>{c({title:"Update Failed",description:E.message||"Failed to update minimum stock level.",variant:"destructive"})}}),x=(E,Z)=>{a(E),l(Z)},_=async E=>{o&&parseFloat(o)>=0?v.mutate({stockId:E,minStock:o}):(a(null),l(""))},k=()=>{const Z=[["Item Name","Description","Current Qty","Available Qty","Unit","Avg Rate","Last Rate","Min Stock"].join(","),...h.map(I=>[`"${I.itemName}"`,`"${I.itemDescription||""}"`,I.currentQuantity,I.availableQuantity,I.unit,I.avgPurchaseRate||"0",I.lastPurchaseRate||"0",I.minimumStockLevel].join(","))].join(`
`),C=new Blob([Z],{type:"text/csv"}),P=window.URL.createObjectURL(C),G=document.createElement("a");G.href=P,G.download=`stock-inventory-${is(new Date,"yyyy-MM-dd")}.csv`,G.click(),window.URL.revokeObjectURL(P)},M=()=>{const Z=[["Date","Item","Movement Type","Quantity Change","Balance After","Rate","Total Value"].join(","),...m.map(I=>[is(new Date(I.createdAt),"dd/MM/yyyy HH:mm"),`"${I.itemName||"Unknown"}"`,I.movementType,I.quantityChange,I.balanceAfter,I.ratePerUnit||"0",I.totalValue||"0"].join(","))].join(`
`),C=new Blob([Z],{type:"text/csv"}),P=window.URL.createObjectURL(C),G=document.createElement("a");G.href=P,G.download=`stock-movements-${is(new Date,"yyyy-MM-dd")}.csv`,G.click(),window.URL.revokeObjectURL(P)},L=h.length,O=h.filter(E=>parseFloat(E.availableQuantity)<=parseFloat(E.minimumStockLevel)).length,T=h.reduce((E,Z)=>E+parseFloat(Z.currentQuantity)*parseFloat(Z.avgPurchaseRate||"0"),0);return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Stock Reports"}),s.jsx("p",{className:"text-muted-foreground",children:"Monitor inventory levels and track stock movements"})]})}),s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Filters"}),s.jsx(Cn,{children:"Filter stock data by date range, buyer, and item name"})]}),s.jsx(qe,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"startDate",children:"Start Date"}),s.jsx(Ze,{id:"startDate",type:"date",value:e.startDate,onChange:E=>t({...e,startDate:E.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"endDate",children:"End Date"}),s.jsx(Ze,{id:"endDate",type:"date",value:e.endDate,onChange:E=>t({...e,endDate:E.target.value})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"buyer",children:"Buyer"}),s.jsxs(rr,{value:e.buyerId,onValueChange:E=>t({...e,buyerId:E}),children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"All Buyers"})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"all",children:"All Buyers"}),f.map(E=>s.jsx(Tt,{value:E.id.toString(),children:E.companyName},E.id))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"itemName",children:"Item Name"}),s.jsx(Ze,{id:"itemName",placeholder:"Search items...",value:e.itemName,onChange:E=>t({...e,itemName:E.target.value})})]}),s.jsxs("div",{className:"flex items-end gap-2",children:[s.jsx(Le,{onClick:y,className:"flex-1",children:"Apply"}),s.jsx(Le,{variant:"outline",onClick:j,children:"Clear"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs(Re,{children:[s.jsx(it,{className:"pb-2",children:s.jsxs(ct,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Cs,{className:"h-4 w-4"}),"Total Items"]})}),s.jsx(qe,{children:s.jsx("div",{className:"text-2xl font-bold",children:L})})]}),s.jsxs(Re,{children:[s.jsx(it,{className:"pb-2",children:s.jsxs(ct,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Ch,{className:"h-4 w-4 text-orange-500"}),"Low Stock Items"]})}),s.jsx(qe,{children:s.jsx("div",{className:"text-2xl font-bold text-orange-500",children:O})})]}),s.jsxs(Re,{children:[s.jsx(it,{className:"pb-2",children:s.jsx(ct,{className:"text-sm font-medium",children:"Total Stock Value"})}),s.jsx(qe,{children:s.jsxs("div",{className:"text-2xl font-bold",children:["₹",T.toLocaleString("en-IN")]})})]}),s.jsxs(Re,{children:[s.jsx(it,{className:"pb-2",children:s.jsx(ct,{className:"text-sm font-medium",children:"Total Movements"})}),s.jsx(qe,{children:s.jsx("div",{className:"text-2xl font-bold",children:m.length})})]})]}),s.jsxs(Bo,{defaultValue:"inventory",className:"space-y-4",children:[s.jsxs(eo,{children:[s.jsx(wn,{value:"inventory",children:"Current Inventory"}),s.jsx(wn,{value:"movements",children:"Stock Movements"})]}),s.jsx(Nn,{value:"inventory",children:s.jsxs(Re,{children:[s.jsx(it,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ct,{children:"Current Stock Inventory"}),s.jsx(Cn,{children:"Real-time inventory levels across all items"})]}),s.jsxs(Le,{onClick:k,disabled:h.length===0,children:[s.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),s.jsx(qe,{children:g?s.jsx("div",{className:"text-center py-4",children:"Loading inventory..."}):h.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No inventory items found"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Item Name"}),s.jsx($e,{children:"Description"}),s.jsx($e,{className:"text-right",children:"Current Qty"}),s.jsx($e,{className:"text-right",children:"Available Qty"}),s.jsx($e,{children:"Unit"}),s.jsx($e,{className:"text-right",children:"Avg Rate"}),s.jsx($e,{className:"text-right",children:"Stock Value"}),s.jsx($e,{className:"text-right",children:"Min Stock"}),s.jsx($e,{children:"Status"}),s.jsx($e,{children:"Actions"})]})}),s.jsx(ps,{children:h.map(E=>{const Z=parseFloat(E.availableQuantity)<=parseFloat(E.minimumStockLevel),C=parseFloat(E.currentQuantity)*parseFloat(E.avgPurchaseRate||"0");return s.jsxs(on,{children:[s.jsx(Be,{className:"font-medium",children:E.itemName}),s.jsx(Be,{children:E.itemDescription||"-"}),s.jsx(Be,{className:"text-right",children:parseFloat(E.currentQuantity).toLocaleString()}),s.jsx(Be,{className:"text-right",children:parseFloat(E.availableQuantity).toLocaleString()}),s.jsx(Be,{children:E.unit}),s.jsxs(Be,{className:"text-right",children:["₹",parseFloat(E.avgPurchaseRate||"0").toLocaleString("en-IN")]}),s.jsxs(Be,{className:"text-right",children:["₹",C.toLocaleString("en-IN")]}),s.jsx(Be,{className:"text-right",children:i===E.id?s.jsx(Ze,{type:"number",value:o,onChange:P=>l(P.target.value),className:"w-20 h-8",onBlur:()=>_(E.id),onKeyPress:P=>P.key==="Enter"&&_(E.id),autoFocus:!0}):s.jsx("span",{className:"cursor-pointer hover:bg-gray-100 px-2 py-1 rounded",onClick:()=>x(E.id,E.minimumStockLevel),children:parseFloat(E.minimumStockLevel).toLocaleString()})}),s.jsx(Be,{children:Z?s.jsx(Mn,{variant:"destructive",children:"Low Stock"}):s.jsx(Mn,{variant:"secondary",children:"Good"})}),s.jsx(Be,{children:s.jsx(Le,{variant:"outline",size:"sm",onClick:()=>x(E.id,E.minimumStockLevel),children:"Edit Alert"})})]},E.id)})})]})})})]})}),s.jsx(Nn,{value:"movements",children:s.jsxs(Re,{children:[s.jsx(it,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ct,{children:"Stock Movements"}),s.jsx(Cn,{children:"Track all inventory transactions and changes"})]}),s.jsxs(Le,{onClick:M,disabled:m.length===0,children:[s.jsx(Ka,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})}),s.jsx(qe,{children:S?s.jsx("div",{className:"text-center py-4",children:"Loading movements..."}):m.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No stock movements found for the selected criteria"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Date & Time"}),s.jsx($e,{children:"Item Name"}),s.jsx($e,{children:"Movement Type"}),s.jsx($e,{className:"text-right",children:"Quantity Change"}),s.jsx($e,{className:"text-right",children:"Balance After"}),s.jsx($e,{className:"text-right",children:"Rate"}),s.jsx($e,{className:"text-right",children:"Total Value"})]})}),s.jsx(ps,{children:m.map(E=>{const Z=parseFloat(E.quantityChange)>0;return s.jsxs(on,{children:[s.jsx(Be,{children:is(new Date(E.createdAt),"dd/MM/yyyy HH:mm")}),s.jsx(Be,{className:"font-medium",children:E.itemName||"Unknown"}),s.jsx(Be,{children:s.jsxs(Mn,{variant:Z?"secondary":"outline",children:[Z?s.jsx(Dm,{className:"h-3 w-3 mr-1"}):s.jsx(Tb,{className:"h-3 w-3 mr-1"}),E.movementType]})}),s.jsxs(Be,{className:`text-right ${Z?"text-green-600":"text-red-600"}`,children:[Z?"+":"",parseFloat(E.quantityChange).toLocaleString()]}),s.jsx(Be,{className:"text-right",children:parseFloat(E.balanceAfter).toLocaleString()}),s.jsxs(Be,{className:"text-right",children:["₹",parseFloat(E.ratePerUnit||"0").toLocaleString("en-IN")]}),s.jsxs(Be,{className:"text-right",children:["₹",parseFloat(E.totalValue||"0").toLocaleString("en-IN")]})]},E.id)})})]})})})]})})]})]})}function rQ(){const{data:e=[],isLoading:t,error:n}=kt({queryKey:["/api/purchase-invoices"]}),{data:r=[],isLoading:i,error:a}=kt({queryKey:["/api/stock-inventory"]}),{data:o=[],isLoading:l,error:c}=kt({queryKey:["/api/stock-movements"]});return s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Reports Test Page"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Purchase Invoices"}),s.jsx(Cn,{children:"Testing invoice API"})]}),s.jsxs(qe,{children:[t&&s.jsx("p",{children:"Loading..."}),n&&s.jsxs("p",{className:"text-red-500",children:["Error: ",String(n)]}),!t&&!n&&s.jsxs("div",{children:[s.jsxs("p",{children:["Count: ",e.length]}),e.length>0&&s.jsx("pre",{className:"text-xs",children:JSON.stringify(e[0],null,2)})]})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Stock Inventory"}),s.jsx(Cn,{children:"Testing inventory API"})]}),s.jsxs(qe,{children:[i&&s.jsx("p",{children:"Loading..."}),a&&s.jsxs("p",{className:"text-red-500",children:["Error: ",String(a)]}),!i&&!a&&s.jsxs("div",{children:[s.jsxs("p",{children:["Count: ",r.length]}),r.length>0&&s.jsx("pre",{className:"text-xs",children:JSON.stringify(r[0],null,2)})]})]})]}),s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Stock Movements"}),s.jsx(Cn,{children:"Testing movements API"})]}),s.jsxs(qe,{children:[l&&s.jsx("p",{children:"Loading..."}),c&&s.jsxs("p",{className:"text-red-500",children:["Error: ",String(c)]}),!l&&!c&&s.jsxs("div",{children:[s.jsxs("p",{children:["Count: ",o.length]}),o.length>0&&s.jsx("pre",{className:"text-xs",children:JSON.stringify(o[0],null,2)})]})]})]})]})]})}function sQ(){const[e,t]=N.useState(new Date().toISOString().split("T")[0]),[n,r]=N.useState(0),{data:i,isLoading:a,refetch:o}=kt({queryKey:["/api/missing-bags",e,n],queryFn:async()=>{const h=await fetch(`/api/missing-bags?date=${e}`);if(!h.ok)throw new Error("Failed to fetch missing bags data");return h.json()}}),l=()=>{r(h=>h+1),o()},c=h=>{t(h)},d=i==null?void 0:i.summary,f=(i==null?void 0:i.missingBagsDetails)||[];return s.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[s.jsx(tr,{}),s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Missing Bags Detection"}),s.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Monitor and track incomplete bag entries across lots"})]}),s.jsxs(Re,{className:"mb-6",children:[s.jsx(it,{children:s.jsxs(ct,{className:"flex items-center gap-2",children:[s.jsx(Ao,{className:"h-5 w-5"}),"Analysis Date Selection"]})}),s.jsx(qe,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[s.jsxs("div",{className:"flex-1 max-w-sm",children:[s.jsx(Ae,{htmlFor:"analysis-date",className:"text-sm font-medium",children:"Select Date"}),s.jsx(Ze,{id:"analysis-date",type:"date",value:e,onChange:h=>c(h.target.value),className:"mt-1"})]}),s.jsxs(Le,{onClick:l,variant:"outline",className:"gap-2",children:[s.jsx(MN,{className:`h-4 w-4 ${a?"animate-spin":""}`}),"Refresh Analysis"]})]})})]}),a?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(MN,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Analyzing lots for missing bags..."})]})}):s.jsxs(s.Fragment,{children:[d&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[s.jsx(Re,{children:s.jsx(qe,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Lots"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.totalLotsForDate})]}),s.jsx(Cs,{className:"h-8 w-8 text-blue-600"})]})})}),s.jsx(Re,{children:s.jsx(qe,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Complete Lots"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.lotsComplete})]}),s.jsx(Rc,{className:"h-8 w-8 text-green-600"})]})})}),s.jsx(Re,{children:s.jsx(qe,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Incomplete Lots"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:d.lotsWithMissingBags})]}),s.jsx(Ch,{className:"h-8 w-8 text-red-600"})]})})}),s.jsx(Re,{children:s.jsx(qe,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Missing Bags"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:d.totalMissingBags})]}),s.jsx(zO,{className:"h-8 w-8 text-orange-600"})]})})}),s.jsx(Re,{children:s.jsx(qe,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Empty Weights"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:d.totalEmptyWeightBags})]}),s.jsx(Cs,{className:"h-8 w-8 text-yellow-600"})]})})})]}),d&&s.jsxs(os,{className:d.lotsWithMissingBags>0?"border-red-200 bg-red-50 mb-6":"border-green-200 bg-green-50 mb-6",children:[d.lotsWithMissingBags>0?s.jsx(Ch,{className:"h-4 w-4 text-red-600"}):s.jsx(Rc,{className:"h-4 w-4 text-green-600"}),s.jsx(ls,{children:d.lotsWithMissingBags>0?s.jsxs("div",{className:"text-red-800",children:[s.jsx("strong",{children:"Action Required:"})," ",d.lotsWithMissingBags," lots have incomplete bag entries on ",d.date,". Please complete missing bag entries to ensure accurate tracking."]}):s.jsxs("div",{className:"text-green-800",children:[s.jsx("strong",{children:"All Complete:"})," All ",d.totalLotsForDate," lots have complete bag entries on ",d.date,". No missing bags detected."]})})]}),f.length>0?s.jsxs(Re,{children:[s.jsx(it,{children:s.jsxs(ct,{className:"flex items-center gap-2",children:[s.jsx(Ch,{className:"h-5 w-5 text-red-600"}),"Lots Requiring Attention (",f.length,")"]})}),s.jsx(qe,{children:s.jsx("div",{className:"space-y-4",children:f.map(h=>s.jsxs("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50 dark:bg-red-900/20",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Mn,{variant:"outline",className:"font-mono text-red-800 border-red-300",children:h.lotNumber}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[s.jsx(QO,{className:"h-4 w-4"}),h.farmerName]}),s.jsx(Mn,{variant:h.status==="active"?"default":"secondary",children:h.status})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm font-medium",children:[h.enteredBags,"/",h.totalBags," bags entered"]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[h.completionPercentage,"% complete"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.missingBagNumbers.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded border-l-4 border-red-500",children:[s.jsxs("h4",{className:"font-medium text-red-800 dark:text-red-400 mb-2",children:["Missing Bags (",h.missingCount,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:h.missingBagNumbers.map(g=>s.jsxs(Mn,{variant:"destructive",className:"text-xs",children:["#",g]},g))})]}),h.emptyWeightBags.length>0&&s.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 rounded border-l-4 border-yellow-500",children:[s.jsxs("h4",{className:"font-medium text-yellow-800 dark:text-yellow-400 mb-2",children:["Empty Weight Bags (",h.emptyWeightCount,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:h.emptyWeightBags.map(g=>s.jsxs(Mn,{variant:"outline",className:"text-xs border-yellow-500 text-yellow-700",children:["#",g]},g))})]})]}),s.jsx("div",{className:"mt-4 pt-3 border-t border-red-200",children:s.jsx(_s,{href:"/lots",children:s.jsxs(Le,{size:"sm",variant:"outline",className:"gap-2",children:[s.jsx(RO,{className:"h-4 w-4"}),"Go to Lots Page"]})})})]},h.lotId))})})]}):d&&d.totalLotsForDate>0?s.jsx(Re,{children:s.jsxs(qe,{className:"p-8 text-center",children:[s.jsx(Rc,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"All Lots Complete!"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["All ",d.totalLotsForDate," lots on ",d.date," have complete bag entries."]})]})}):s.jsx(Re,{children:s.jsxs(qe,{className:"p-8 text-center",children:[s.jsx(Cs,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Lots Found"}),s.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["No lots were created on ",e,"."]})]})})]})]})]})}const iQ=st.object({sgst:st.number().min(0).max(100),cgst:st.number().min(0).max(100),cess:st.number().min(0).max(100),unloadHamali:st.number().min(0),packaging:st.number().min(0),packagingWeight:st.number().min(0),weighingFee:st.number().min(0),apmcCommission:st.number().min(0).max(100),rokPercentage:st.number().min(0).max(100)});function aQ(){return Oo(),Qr(),N.useState("gst"),s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(tr,{}),s.jsx("div",{className:"max-w-7xl mx-auto py-4 sm:py-6 px-3 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"sm:px-0",children:[s.jsx(Bi,{}),s.jsxs("div",{className:"mb-4 sm:mb-6",children:[s.jsxs("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900 flex items-center",children:[s.jsx(_h,{className:"h-6 w-6 sm:h-8 sm:w-8 mr-2 sm:mr-3 text-primary"}),"Settings"]}),s.jsx("p",{className:"mt-2 text-sm sm:text-base text-gray-600",children:"Configure your APMC trading settings"})]}),s.jsx(oQ,{})]})})]})}function oQ(){const{toast:e}=Qr(),[t,n]=N.useState("gst"),{data:r}=kt({queryKey:["/api/user"],retry:!1}),i=Vl({resolver:Wl(iQ),defaultValues:{sgst:2.5,cgst:2.5,cess:.6,unloadHamali:3,packaging:5,weighingFee:2,apmcCommission:2,rokPercentage:3}}),{data:a,isLoading:o,error:l}=kt({queryKey:["/api/settings"],retry:1,queryFn:async()=>{const f=await fetch("/api/settings",{credentials:"include"});if(!f.ok)throw new Error(`Failed to fetch settings: ${f.status}`);return f.json()}}),c=fn({mutationFn:async f=>{await an("PUT","/api/settings",f)},onSuccess:()=>{Tn.invalidateQueries({queryKey:["/api/settings"]}),e({title:"Success",description:"Settings updated successfully"})},onError:f=>{e({title:"Error",description:f.message,variant:"destructive"})}});N.useEffect(()=>{a&&i.reset({sgst:a.gstSettings.sgst,cgst:a.gstSettings.cgst,cess:a.gstSettings.cess,unloadHamali:a.gstSettings.unloadHamali,packaging:a.gstSettings.packaging||5,packagingWeight:a.gstSettings.packagingWeight||0,weighingFee:a.gstSettings.weighingFee||2,apmcCommission:a.gstSettings.apmcCommission||2,rokPercentage:a.gstSettings.rokPercentage||3})},[a,i]);const d=f=>{c.mutate({gstSettings:f})};return o?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]}):l?s.jsxs(Re,{className:"w-full max-w-md mx-auto",children:[s.jsx(it,{children:s.jsx(ct,{className:"text-red-600",children:"Authentication Required"})}),s.jsxs(qe,{children:[s.jsx("p",{className:"text-gray-600",children:"Please log in to access settings."}),s.jsx(Le,{onClick:()=>window.location.href="/auth",className:"mt-4 w-full",children:"Go to Login"})]})]}):(r==null?void 0:r.role)!=="admin"&&(r==null?void 0:r.role)!=="super_admin"?s.jsx(Re,{className:"text-center py-12",children:s.jsxs(qe,{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Access Denied"}),s.jsx("p",{className:"text-gray-500 mt-1",children:"You don't have permission to access settings."})]})}):s.jsxs(Bo,{value:t,onValueChange:n,children:[s.jsxs(eo,{className:"mb-8",children:[s.jsxs(wn,{value:"gst",className:"flex items-center space-x-2",children:[s.jsx(fx,{className:"h-4 w-4"}),s.jsx("span",{children:"GST & Charges"})]}),s.jsxs(wn,{value:"general",className:"flex items-center space-x-2",children:[s.jsx(_h,{className:"h-4 w-4"}),s.jsx("span",{children:"General"})]})]}),s.jsx(Nn,{value:"gst",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"GST & Charges Configuration"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Configure tax rates and charges that will be automatically calculated"})]}),s.jsx(qe,{children:s.jsxs("form",{onSubmit:i.handleSubmit(d),className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"sgst",children:"SGST Rate (%)"}),s.jsx(Ze,{id:"sgst",type:"number",step:"0.01",min:"0",max:"100",...i.register("sgst",{valueAsNumber:!0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"cgst",children:"CGST Rate (%)"}),s.jsx(Ze,{id:"cgst",type:"number",step:"0.01",min:"0",max:"100",...i.register("cgst",{valueAsNumber:!0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"cess",children:"CESS Rate (%)"}),s.jsx(Ze,{id:"cess",type:"number",step:"0.01",min:"0",max:"100",...i.register("cess",{valueAsNumber:!0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"unloadHamali",children:"Unload Hamali (₹ per bag)"}),s.jsx(Ze,{id:"unloadHamali",type:"number",step:"0.01",min:"0",...i.register("unloadHamali",{valueAsNumber:!0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"packaging",children:"Packaging (₹ per bag)"}),s.jsx(Ze,{id:"packaging",type:"number",step:"0.01",min:"0",...i.register("packaging",{valueAsNumber:!0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"weighingFee",children:"Weighing Fee (₹ per bag)"}),s.jsx(Ze,{id:"weighingFee",type:"number",step:"0.01",min:"0",...i.register("weighingFee",{valueAsNumber:!0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"apmcCommission",children:"APMC Commission (%)"}),s.jsx(Ze,{id:"apmcCommission",type:"number",step:"0.01",min:"0",max:"100",...i.register("apmcCommission",{valueAsNumber:!0})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"rokPercentage",children:"Rok Rate (%)"}),s.jsx(Ze,{id:"rokPercentage",type:"number",step:"0.01",min:"0",max:"100",...i.register("rokPercentage",{valueAsNumber:!0})})]})]}),s.jsx(Le,{type:"submit",disabled:c.isPending,className:"w-full",children:c.isPending?"Saving...":"Save Settings"})]})})]})}),s.jsx(Nn,{value:"general",children:s.jsxs(Re,{children:[s.jsx(it,{children:s.jsx(ct,{children:"General Settings"})}),s.jsx(qe,{children:s.jsx("p",{className:"text-gray-600",children:"General settings will be available here."})})]})})]})}const lQ=st.object({tenantName:st.string().min(1,"Business name is required"),apmcCode:st.string().min(1,"APMC code is required"),place:st.string().min(1,"Place is required"),mobileNumber:st.string().min(10,"Valid mobile number is required"),gstNumber:st.string().optional(),fssaiNumber:st.string().optional(),panNumber:st.string().min(1,"PAN card number is required"),address:st.string().optional(),bankName:st.string().optional(),bankAccountNumber:st.string().optional(),ifscCode:st.string().optional(),accountHolderName:st.string().optional(),subscriptionPlan:st.enum(["basic","gold","diamond"]),adminUsername:st.string().min(1,"Username is required"),adminPassword:st.string().min(6,"Password must be at least 6 characters"),confirmPassword:st.string()}).refine(e=>e.adminPassword===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function cQ(){const{toast:e}=Qr(),t=tc(),[n,r]=N.useState(!1),[i,a]=N.useState(""),o=Vl({resolver:Wl(lQ),defaultValues:{tenantName:"",apmcCode:"",place:"",mobileNumber:"",gstNumber:"",address:"",bankName:"",bankAccountNumber:"",ifscCode:"",accountHolderName:"",subscriptionPlan:"basic",adminUsername:"",adminPassword:"",confirmPassword:""}}),l=fn({mutationFn:async d=>{const f=await fetch("/api/tenant/onboard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tenant:{name:d.tenantName,apmcCode:d.apmcCode,place:d.place,mobileNumber:d.mobileNumber,gstNumber:d.gstNumber,fssaiNumber:d.fssaiNumber,panNumber:d.panNumber,address:d.address,bankName:d.bankName,bankAccountNumber:d.bankAccountNumber,ifscCode:d.ifscCode,accountHolderName:d.accountHolderName,subscriptionPlan:d.subscriptionPlan},adminUser:{username:d.adminUsername,password:d.adminPassword,role:"admin"}})});if(!f.ok){const h=await f.json();throw new Error(h.message||"Failed to create tenant")}return await f.json()},onSuccess:d=>{e({title:"Success",description:`Tenant "${d.tenant.name}" created successfully with admin user "${d.user.username}"`}),o.reset(),a(""),t.invalidateQueries({queryKey:["/api/tenants"]})},onError:d=>{a(d.message),e({title:"Error",description:d.message,variant:"destructive"})}}),c=async d=>{r(!0);try{await l.mutateAsync(d)}catch(f){console.error("Tenant creation failed:",f)}finally{r(!1)}};return s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"max-w-2xl mx-auto",children:s.jsxs(Re,{children:[s.jsxs(it,{children:[s.jsx(ct,{children:"Create New Tenant"}),s.jsx(Cn,{children:"Set up a new APMC trading business with admin user access"})]}),s.jsxs(qe,{children:[i&&s.jsxs(os,{variant:"destructive",className:"mb-6",children:[s.jsx(Ei,{className:"h-4 w-4"}),s.jsx(ls,{children:i})]}),s.jsxs("form",{onSubmit:o.handleSubmit(c),className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Tenant Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"tenantName",children:"Business Name *"}),s.jsx(At,{id:"tenantName",placeholder:"Type or speak business name...",...o.register("tenantName"),voiceType:"text"}),o.formState.errors.tenantName&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.tenantName.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"apmcCode",children:"APMC Code *"}),s.jsx(At,{id:"apmcCode",placeholder:"Type or speak APMC code...",...o.register("apmcCode"),voiceType:"text"}),o.formState.errors.apmcCode&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.apmcCode.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"place",children:"Place *"}),s.jsx(At,{id:"place",placeholder:"Type or speak place name...",...o.register("place"),voiceType:"text"}),o.formState.errors.place&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.place.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"mobileNumber",children:"Mobile Number *"}),s.jsx(At,{id:"mobileNumber",placeholder:"Type or speak mobile number...",...o.register("mobileNumber"),type:"tel",voiceType:"tel"}),o.formState.errors.mobileNumber&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.mobileNumber.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"gstNumber",children:"GST Number"}),s.jsx(At,{id:"gstNumber",placeholder:"Type or speak GST number...",...o.register("gstNumber"),voiceType:"text"}),o.formState.errors.gstNumber&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.gstNumber.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"fssaiNumber",children:"FSSAI Number"}),s.jsx(At,{id:"fssaiNumber",placeholder:"Type or speak FSSAI number...",...o.register("fssaiNumber"),voiceType:"text"}),o.formState.errors.fssaiNumber&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.fssaiNumber.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"panNumber",children:"PAN Card Number *"}),s.jsx(At,{id:"panNumber",placeholder:"Type or speak PAN number...",...o.register("panNumber"),voiceType:"text"}),o.formState.errors.panNumber&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.panNumber.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"address",children:"Full Address"}),s.jsx(At,{id:"address",placeholder:"Type or speak full address...",...o.register("address"),voiceType:"text"}),o.formState.errors.address&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.address.message})]}),s.jsxs("div",{className:"space-y-4 pt-4",children:[s.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Bank Information (For Receiving Payments)"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"bankName",children:"Bank Name"}),s.jsx(At,{id:"bankName",placeholder:"Type or speak bank name...",...o.register("bankName"),voiceType:"text"}),o.formState.errors.bankName&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.bankName.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"accountHolderName",children:"Account Holder Name"}),s.jsx(At,{id:"accountHolderName",placeholder:"Type or speak account holder name...",...o.register("accountHolderName"),voiceType:"text"}),o.formState.errors.accountHolderName&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.accountHolderName.message})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"bankAccountNumber",children:"Account Number"}),s.jsx(At,{id:"bankAccountNumber",placeholder:"Type or speak account number...",...o.register("bankAccountNumber"),voiceType:"number"}),o.formState.errors.bankAccountNumber&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.bankAccountNumber.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"ifscCode",children:"IFSC Code"}),s.jsx(At,{id:"ifscCode",placeholder:"Type or speak IFSC code...",...o.register("ifscCode"),voiceType:"text"}),o.formState.errors.ifscCode&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.ifscCode.message})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"subscriptionPlan",children:"Subscription Plan *"}),s.jsxs(rr,{value:o.watch("subscriptionPlan"),onValueChange:d=>o.setValue("subscriptionPlan",d),children:[s.jsx(Wn,{children:s.jsx(sr,{placeholder:"Select subscription plan"})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"basic",children:"Basic (Up to 5 users)"}),s.jsx(Tt,{value:"gold",children:"Gold (Up to 15 users)"}),s.jsx(Tt,{value:"diamond",children:"Diamond (Unlimited users)"})]})]}),o.formState.errors.subscriptionPlan&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.subscriptionPlan.message})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Admin User Account"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"adminUsername",children:"Admin Username *"}),s.jsx(At,{id:"adminUsername",placeholder:"Type or speak admin username...",...o.register("adminUsername"),voiceType:"text"}),o.formState.errors.adminUsername&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.adminUsername.message})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"adminPassword",children:"Admin Password *"}),s.jsx(At,{id:"adminPassword",type:"password",placeholder:"Type or speak password (min 6 characters)...",...o.register("adminPassword"),voiceType:"text"}),o.formState.errors.adminPassword&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.adminPassword.message})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ae,{htmlFor:"confirmPassword",children:"Confirm Password *"}),s.jsx(At,{id:"confirmPassword",type:"password",placeholder:"Type or speak password confirmation...",...o.register("confirmPassword"),voiceType:"text"}),o.formState.errors.confirmPassword&&s.jsx("p",{className:"text-sm text-red-600",children:o.formState.errors.confirmPassword.message})]})]}),s.jsxs("div",{className:"flex justify-end space-x-4",children:[s.jsx(Le,{type:"button",variant:"outline",onClick:()=>o.reset(),disabled:n,children:"Reset"}),s.jsx(Le,{type:"submit",disabled:n,children:n?"Creating...":"Create Tenant"})]})]})]})]})})})}var $I="AlertDialog",[dQ,GQ]=xi($I,[ET]),$o=ET(),qI=e=>{const{__scopeAlertDialog:t,...n}=e,r=$o(t);return s.jsx(o5,{...r,...n,modal:!0})};qI.displayName=$I;var uQ="AlertDialogTrigger",UI=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=$o(n);return s.jsx(l5,{...i,...r,ref:t})});UI.displayName=uQ;var fQ="AlertDialogPortal",VI=e=>{const{__scopeAlertDialog:t,...n}=e,r=$o(t);return s.jsx(c5,{...r,...n})};VI.displayName=fQ;var hQ="AlertDialogOverlay",WI=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=$o(n);return s.jsx(Bm,{...i,...r,ref:t})});WI.displayName=hQ;var Su="AlertDialogContent",[mQ,pQ]=dQ(Su),gQ=VA("AlertDialogContent"),HI=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...i}=e,a=$o(n),o=N.useRef(null),l=en(t,o),c=N.useRef(null);return s.jsx(Hq,{contentName:Su,titleName:GI,docsSlug:"alert-dialog",children:s.jsx(mQ,{scope:n,cancelRef:c,children:s.jsxs(zm,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:at(i.onOpenAutoFocus,d=>{var f;d.preventDefault(),(f=c.current)==null||f.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[s.jsx(gQ,{children:r}),s.jsx(vQ,{contentRef:o})]})})})});HI.displayName=Su;var GI="AlertDialogTitle",KI=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=$o(n);return s.jsx($m,{...i,...r,ref:t})});KI.displayName=GI;var QI="AlertDialogDescription",YI=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=$o(n);return s.jsx(qm,{...i,...r,ref:t})});YI.displayName=QI;var xQ="AlertDialogAction",ZI=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,i=$o(n);return s.jsx(w0,{...i,...r,ref:t})});ZI.displayName=xQ;var XI="AlertDialogCancel",JI=N.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:i}=pQ(XI,n),a=$o(n),o=en(t,i);return s.jsx(w0,{...a,...r,ref:o})});JI.displayName=XI;var vQ=({contentRef:e})=>{const t=`\`${Su}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Su}\` by passing a \`${QI}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Su}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return N.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},yQ=qI,bQ=UI,wQ=VI,e7=WI,t7=HI,n7=ZI,r7=JI,s7=KI,i7=YI;const NQ=yQ,jQ=bQ,SQ=wQ,a7=N.forwardRef(({className:e,...t},n)=>s.jsx(e7,{className:rt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));a7.displayName=e7.displayName;const o7=N.forwardRef(({className:e,...t},n)=>s.jsxs(SQ,{children:[s.jsx(a7,{}),s.jsx(t7,{ref:n,className:rt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));o7.displayName=t7.displayName;const l7=({className:e,...t})=>s.jsx("div",{className:rt("flex flex-col space-y-2 text-center sm:text-left",e),...t});l7.displayName="AlertDialogHeader";const c7=({className:e,...t})=>s.jsx("div",{className:rt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});c7.displayName="AlertDialogFooter";const d7=N.forwardRef(({className:e,...t},n)=>s.jsx(s7,{ref:n,className:rt("text-lg font-semibold",e),...t}));d7.displayName=s7.displayName;const u7=N.forwardRef(({className:e,...t},n)=>s.jsx(i7,{ref:n,className:rt("text-sm text-muted-foreground",e),...t}));u7.displayName=i7.displayName;const f7=N.forwardRef(({className:e,...t},n)=>s.jsx(n7,{ref:n,className:rt(Wb(),e),...t}));f7.displayName=n7.displayName;const h7=N.forwardRef(({className:e,...t},n)=>s.jsx(r7,{ref:n,className:rt(Wb({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));h7.displayName=r7.displayName;var k5="Switch",[_Q,KQ]=xi(k5),[CQ,AQ]=_Q(k5),m7=N.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:f,...h}=e,[g,m]=N.useState(null),S=en(t,_=>m(_)),y=N.useRef(!1),j=g?f||!!g.closest("form"):!0,[v=!1,x]=Bl({prop:i,defaultProp:a,onChange:d});return s.jsxs(CQ,{scope:n,checked:v,disabled:l,children:[s.jsx(Lt.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":x7(v),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:S,onClick:at(e.onClick,_=>{x(k=>!k),j&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),j&&s.jsx(kQ,{control:g,bubbles:!y.current,name:r,value:c,checked:v,required:o,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});m7.displayName=k5;var p7="SwitchThumb",g7=N.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=AQ(p7,n);return s.jsx(Lt.span,{"data-state":x7(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});g7.displayName=p7;var kQ=e=>{const{control:t,checked:n,bubbles:r=!0,...i}=e,a=N.useRef(null),o=YT(n),l=Wk(t);return N.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&h){const g=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(g)}},[o,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function x7(e){return e?"checked":"unchecked"}var v7=m7,PQ=g7;const j2=N.forwardRef(({className:e,...t},n)=>s.jsx(v7,{className:rt("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(PQ,{className:rt("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));j2.displayName=v7.displayName;const TQ=st.object({username:st.string().min(3,"Username must be at least 3 characters"),password:st.string().min(6,"Password must be at least 6 characters"),name:st.string().min(1,"Name is required"),email:st.string().email("Invalid email format"),role:st.enum(["admin","staff"]),isActive:st.boolean().default(!0)});function LQ(){const[e,t]=N.useState(null),[n,r]=N.useState(!1),{toast:i}=Qr(),[,a]=Lm(),{data:o=[],isLoading:l}=kt({queryKey:["/api/staff"]}),c=Vl({resolver:Wl(TQ),defaultValues:{username:"",password:"",name:"",email:"",role:"staff",isActive:!0}}),d=fn({mutationFn:async x=>await an("POST","/api/staff",x),onSuccess:()=>{i({title:"Success",description:"Staff member created successfully"}),Tn.invalidateQueries({queryKey:["/api/staff"]}),r(!1),c.reset()},onError:x=>{i({title:"Error",description:x.message,variant:"destructive"})}}),f=fn({mutationFn:async x=>await an("PATCH",`/api/staff/${x.id}`,x.updates),onSuccess:()=>{i({title:"Success",description:"Staff member updated successfully"}),Tn.invalidateQueries({queryKey:["/api/staff"]}),r(!1),t(null),c.reset()},onError:x=>{i({title:"Error",description:x.message,variant:"destructive"})}}),h=fn({mutationFn:async x=>await an("DELETE",`/api/staff/${x}`),onSuccess:()=>{i({title:"Success",description:"Staff member deleted successfully"}),Tn.invalidateQueries({queryKey:["/api/staff"]})},onError:x=>{i({title:"Error",description:x.message,variant:"destructive"})}}),g=fn({mutationFn:async x=>await an(`/api/staff/${x.id}`,"PATCH",{isActive:x.isActive}),onSuccess:()=>{Tn.invalidateQueries({queryKey:["/api/staff"]})},onError:x=>{i({title:"Error",description:x.message,variant:"destructive"})}}),m=x=>{e?f.mutate({id:e.id,updates:x}):d.mutate(x)},S=x=>{t(x),c.reset({username:x.username,password:"",name:x.name,email:x.email,role:x.role,isActive:x.isActive}),r(!0)},y=x=>{h.mutate(x)},j=(x,_)=>{g.mutate({id:x,isActive:_})},v=x=>{switch(x){case"admin":return s.jsx(WO,{className:"h-4 w-4 text-blue-600"});case"staff":return s.jsx(HO,{className:"h-4 w-4 text-gray-500"});default:return s.jsx(Fi,{className:"h-4 w-4 text-gray-400"})}};return l?s.jsx("div",{className:"container mx-auto p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Loading staff..."})})}):s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(Le,{variant:"ghost",size:"sm",onClick:()=>a("/"),className:"flex items-center gap-2 hover:bg-gray-100",children:[s.jsx(gk,{className:"h-4 w-4"}),"Back"]}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Staff Management"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your APMC center staff members"})]})]}),s.jsxs(ds,{open:n,onOpenChange:r,children:[s.jsx(Xa,{asChild:!0,children:s.jsxs(Le,{onClick:()=>{t(null),c.reset()},children:[s.jsx(KO,{className:"h-4 w-4 mr-2"}),"Add Staff Member"]})}),s.jsxs(Vr,{className:"max-w-md",children:[s.jsxs(Wr,{className:"flex flex-row items-center justify-between",children:[s.jsx(Hr,{children:e?"Edit Staff Member":"Add New Staff Member"}),s.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>r(!1),className:"h-6 w-6 p-0 hover:bg-gray-100",children:s.jsx(o0,{className:"h-4 w-4"})})]}),s.jsx(DI,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(m),className:"space-y-4",children:[s.jsx(ii,{control:c.control,name:"username",render:({field:x})=>s.jsxs($s,{children:[s.jsx(qs,{children:"Username"}),s.jsx(Us,{children:s.jsx(At,{...x,placeholder:"Enter username",type:"text",voiceType:"text",required:!0})}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:c.control,name:"password",render:({field:x})=>s.jsxs($s,{children:[s.jsx(qs,{children:e?"New Password (leave empty to keep current)":"Password"}),s.jsx(Us,{children:s.jsx(At,{...x,type:"password",placeholder:"Enter password",voiceType:"text",required:!0})}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:c.control,name:"name",render:({field:x})=>s.jsxs($s,{children:[s.jsx(qs,{children:"Full Name"}),s.jsx(Us,{children:s.jsx(At,{...x,placeholder:"Enter full name",type:"text",voiceType:"text"})}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:c.control,name:"email",render:({field:x})=>s.jsxs($s,{children:[s.jsx(qs,{children:"Email"}),s.jsx(Us,{children:s.jsx(At,{...x,type:"text",placeholder:"Enter email",voiceType:"text"})}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:c.control,name:"role",render:({field:x})=>s.jsxs($s,{children:[s.jsx(qs,{children:"Role"}),s.jsxs(rr,{onValueChange:x.onChange,defaultValue:x.value,children:[s.jsx(Us,{children:s.jsx(Wn,{children:s.jsx(sr,{placeholder:"Select role"})})}),s.jsxs(Hn,{children:[s.jsx(Tt,{value:"admin",children:"Admin"}),s.jsx(Tt,{value:"staff",children:"Staff"})]})]}),s.jsx(Vs,{})]})}),s.jsx(ii,{control:c.control,name:"isActive",render:({field:x})=>s.jsxs($s,{className:"flex items-center justify-between",children:[s.jsx(qs,{children:"Active Account"}),s.jsx(Us,{children:s.jsx(j2,{checked:x.value,onCheckedChange:x.onChange})}),s.jsx(Vs,{})]})}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(Le,{type:"submit",disabled:d.isPending||f.isPending,className:"flex-1",children:e?"Update Staff":"Create Staff"}),s.jsx(Le,{type:"button",variant:"outline",onClick:()=>r(!1),className:"flex-1",children:"Cancel"})]})]})})]})]})]}),s.jsxs(Re,{children:[s.jsx(it,{children:s.jsxs(ct,{className:"flex items-center gap-2",children:[s.jsx(Fi,{className:"h-5 w-5"}),"Staff Members (",o.length,")"]})}),s.jsx(qe,{children:o.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Fi,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"No staff members found"}),s.jsx("p",{className:"text-sm",children:"Add your first staff member to get started"})]}):s.jsxs(hs,{children:[s.jsx(ms,{children:s.jsxs(on,{children:[s.jsx($e,{children:"Name"}),s.jsx($e,{children:"Username"}),s.jsx($e,{children:"Email"}),s.jsx($e,{children:"Role"}),s.jsx($e,{children:"Status"}),s.jsx($e,{children:"Actions"})]})}),s.jsx(ps,{children:o.map(x=>s.jsxs(on,{children:[s.jsx(Be,{className:"font-medium",children:x.name}),s.jsx(Be,{children:x.username}),s.jsx(Be,{children:x.email}),s.jsx(Be,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[v(x.role),s.jsx("span",{className:"capitalize",children:x.role})]})}),s.jsx(Be,{children:s.jsx(Mn,{variant:x.isActive?"default":"secondary",children:x.isActive?"Active":"Inactive"})}),s.jsx(Be,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Le,{variant:"ghost",size:"sm",onClick:()=>S(x),children:s.jsx(em,{className:"h-4 w-4"})}),s.jsx(j2,{checked:x.isActive,onCheckedChange:_=>j(x.id,_),disabled:g.isPending}),s.jsxs(NQ,{children:[s.jsx(jQ,{asChild:!0,children:s.jsx(Le,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:s.jsx(Oc,{className:"h-4 w-4"})})}),s.jsxs(o7,{children:[s.jsxs(l7,{children:[s.jsx(d7,{children:"Delete Staff Member"}),s.jsxs(u7,{children:["Are you sure you want to delete ",x.name,"? This action cannot be undone."]})]}),s.jsxs(c7,{children:[s.jsx(h7,{children:"Cancel"}),s.jsx(f7,{onClick:()=>y(x.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})]})})]},x.id))})]})})]})]})}function EQ(){return s.jsxs(sR,{children:[s.jsx(vy,{path:"/auth",component:NH}),s.jsx(yr,{path:"/",component:DU}),s.jsx(yr,{path:"/farmers",component:_H}),s.jsx(yr,{path:"/lots",component:IH}),s.jsx(yr,{path:"/lots/:id/bags",component:DG}),s.jsx(yr,{path:"/missing-bags",component:sQ}),s.jsx(yr,{path:"/buyers",component:OG}),s.jsx(yr,{path:"/staff",component:LQ}),s.jsx(yr,{path:"/tax-invoice",component:BG}),s.jsx(yr,{path:"/farmer-bill",component:zG}),s.jsx(yr,{path:"/cess-reports",component:$G}),s.jsx(yr,{path:"/gst-reports",component:qG}),s.jsx(yr,{path:"/settings",component:aQ}),s.jsx(yr,{path:"/final-accounts",component:UG}),s.jsx(yr,{path:"/final-accounts-complete",component:XK}),s.jsx(yr,{path:"/bid-prices",component:JK}),s.jsx(yr,{path:"/inventory-in",component:eQ}),s.jsx(yr,{path:"/invoice-reports",component:tQ}),s.jsx(yr,{path:"/stock-reports",component:nQ}),s.jsx(yr,{path:"/test-reports",component:rQ}),s.jsx(yr,{path:"/tenant-onboarding",component:cQ}),s.jsx(vy,{component:mz})]})}function IQ(){return s.jsx(_R,{client:Tn,children:s.jsx(fz,{children:s.jsx(oz,{children:s.jsxs(iz,{children:[s.jsx(D9,{}),s.jsx(EQ,{})]})})})})}mA(document.getElementById("root")).render(s.jsx(IQ,{}));export{vn as _,FQ as c,eC as g};
